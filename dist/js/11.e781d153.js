(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"VS/T":function(e,t,n){},hplX:function(e,t,n){},iPVe:function(e,t,n){},qG2J:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("07d7"),n("0oug"),n("4mDm"),n("PKPk"),n("3bBZ"),n("+2oP"),n("sMBO"),n("pjDv"),n("tkto"),n("TeQF"),n("5DmW"),n("27RR"),n("mbEz");var a=n("wCAj"),r=(n("L/Qf"),n("2/Rp")),l=(n("tULf"),n("Vl3Y")),i=(n("qNb/"),n("PArb")),c=(n("1vPl"),n("5rEg")),o=(n("RKNx"),n("L41K")),u=(n("8QGh"),n("2fM7")),s=n("BkRI"),d=n.n(s),m=(n("pDQq"),n("2B1R"),n("FZtP"),n("q1tI")),f=n.n(m),p=n("DgvE"),v=n("MeRu"),b=n("wmP4"),y=n.n(b),g=n("TL2v"),h=n("FC04"),E=(n("k3Gp"),n("kLXV")),I=n("Nlzp"),O=n("P2RN"),w=(n("QCje"),n("fyUT"));n("yq1k"),n("oVuX"),n("B6y2"),n("JTJg"),n("SYor");function A(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return l}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var C=u.a.Option;function x(e,t){var n=e.nextStep,r=e.productId,l=k(Object(m.useState)([]),2),i=l[0],o=l[1],s=k(Object(m.useState)([]),2),d=s[0],p=s[1],v=k(Object(m.useState)([]),2),b=v[0],y=v[1],g=k(Object(m.useState)([]),2),h=g[0],E=g[1],S=k(Object(m.useState)(0),2),j=S[0],x=(S[1],function(){console.log(n,t);var e=[];if(1!==j){if(i.length<1)return Object(O.a)({description:"请至少选择一条配置协议"});i.forEach((function(t){[""," ",null,void 0].includes(h[t])&&e.push(t)}))}else h.forEach((function(t,n){[""," ",null,void 0].includes(t)&&e.push(n)}));if(e.length>0)return Object(O.a)({description:"请为配置协议添加参数"}),void p(e);n()});Object(m.useImperativeHandle)(t,(function(){return{onFinish:x}}));Object(m.useEffect)((function(){Object(I.c)(I.a.getPhysicalModel,{productId:r}).then((function(e){console.log(e),y(e.data.properties)}))}),[r]);var P=function(e,t){var n=A(h),a=d.filter((function(e){return e!==t}));n[t]=e,E(n),p(a)},T={selectedRowKeys:i,onChange:function(e){o(e)}},L=[{title:"数据名称",dataIndex:"name",key:"name",width:160},{title:"数据标识",dataIndex:"identifier",key:"identifier"},{title:"数据类型",dataIndex:"dataType",key:"dataType",render:function(e,t){return f.a.createElement("span",null,t.dataType.type)}},{title:"数据属性",render:function(e,t){switch(t.dataType.type){case"int":case"double":case"float":return f.a.createElement("span",null,t.dataType.specs.min," ~ ",t.dataType.specs.max);case"text":break;case"enum":return f.a.createElement("span",null,Object.values(t.dataType.specs).join(" | "));case"date":break;case"bool":return f.a.createElement("span",null,Object.values(t.dataType.specs).join(" | "))}}},{title:"下发数据",dataIndex:"execTime",key:"execTime",width:180,render:function(e,t){var n=t._type,a=t._params,r=t._index,l=t.key,o=null,s=1!==j&&!i.includes(l);switch(n){case"数值型":o=f.a.createElement(w.a,{value:h[r],min:a.min,max:a.max,disabled:s,onChange:function(e){return P(e,r)},placeholder:"请输入参数"});break;case"字符型":o=f.a.createElement(c.a,{value:h[r],maxLength:30,disabled:s,onChange:function(e){return P(e.target.value.trim(),r)},placeholder:"请输入参数"});break;default:o=f.a.createElement(u.a,{disabled:s,value:h[r]||"",onChange:function(e){return P(e,r)}},f.a.createElement(C,{key:-1,value:""},"请选择参数"),a&&a.map((function(e,t){return f.a.createElement(C,{key:t+n,value:e.value},e.name)})))}return f.a.createElement("span",{className:"config-send-data ".concat(d.includes(r)?"warn":"")},o)}}];return f.a.createElement(a.a,{columns:L,className:"config-data-table",rowSelection:1!==j?T:null,dataSource:b,rowKey:"identifier",scroll:{y:300},pagination:!1})}var P=Object(m.forwardRef)(x),T=(n("AUBz"),n("ZTPi")),L=(n("x0AG"),n("ma9I"),n("5s+n"),n("p532"),n("z7Xi")),N=n("wlus"),D=["设备ID的长度超过限制","物理地址的长度超限制","设备ID发生重复","物理地址发生重复","设备ID不存在或未联网","物理地址不存在或未联网"];var q=function(e){var t=e.visible,n=e.errorList,r=e.onCancel,l=[{title:"设备ID",dataIndex:"deviceUniqueId",key:"deviceUniqueId"},{title:"物理地址",dataIndex:"",key:""},{title:"错误原因",dataIndex:"errorType",width:200,key:"errorType",render:function(e,t){var n=t.errorType;return f.a.createElement("span",null,D[n-1])}}];return f.a.createElement(E.a,{visible:t,width:600,className:"romote-modal",title:"设备导入错误日志",centered:!0,closable:!0,onOk:null,onCancel:r,destroyOnClose:!0,maskClosable:!1,footer:null},f.a.createElement("div",null,f.a.createElement(a.a,{columns:l,dataSource:n||[],pagination:{total:n.length,defaultCurrent:1,defaultPageSize:10,showQuickJumper:!1,hideOnSinglePage:!0,size:"small",showTotal:function(e){return f.a.createElement("span",null,"共 ",f.a.createElement("a",null,e)," 条")}}})))};n("iPVe");function R(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return l}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}u.a.Option;var J=c.a.Search,M=T.a.TabPane;var Q=function(){var e=z(Object(m.useState)("2"),2),t=e[0],n=e[1],l=z(Object(m.useState)(!1),2),i=l[0],c=l[1],o=z(Object(m.useState)([]),2),u=(o[0],o[1],z(Object(m.useState)({curDeviceInfoList:[],allDeviceInfoList:[],allDeviceInfoPager:{pageIndex:1,currPageRows:7}}),2)),s=u[0],v=u[1],b=z(Object(m.useState)([]),2),y=b[0],g=b[1],h=z(Object(m.useState)({rightAllList:[],rightTempList:[]}),2),E=h[0],w=h[1],A=Object(m.useRef)(null),k=z(Object(m.useState)({allList:[],successList:[],errorList:[],errorVisible:!1}),2),S=k[0],j=k[1],C=z(Object(m.useState)([]),2),x=(C[0],C[1]),P=z(Object(m.useState)(""),2),D=P[0],U=P[1],V=z(Object(m.useState)(!1),2),B=V[0],F=V[1],Q=s.curDeviceInfoList,Z=s.allDeviceInfoList,G=s.allDeviceInfoPager,W=E.rightAllList,X=E.rightTempList,Y=S.allList,H=S.successList,$=S.errorList,_=S.errorVisible,ee=[{title:"设备ID",dataIndex:"deviceUniqueId",key:"deviceUniqueId"},{title:"物理地址",dataIndex:"macAddress",key:"macAddress"},{title:"操作",key:"action",render:function(e,t){return f.a.createElement("span",{onClick:function(){return ne(t)},className:"remove-single"},"移除")}}],te=function(e,t){var n=d()(e),a=n.findIndex((function(e){return e.deviceUniqueId===t.deviceUniqueId}));return n.splice(a,1),n},ne=function(e){w(K(K({},E),{},{rightAllList:te(W,e),rightTempList:te(X,e)}));var t=d()(y),n=t.findIndex((function(t){return t===e.deviceUniqueId}));t.splice(n,1),g(t)},ae={selectedRowKeys:y,onChange:function(e){console.log(e,"左侧list选中的数据"),g(e)}},re=function(e){var t,n={},a=n.list,r=void 0===a?[]:a,l=n.pager;t={currPageRows:8,defaultPageRows:20,hasNextPage:!0,hasPrevPage:!1,pageEndRow:7,pageIndex:1,pageRows:8,pageStartRow:0,paged:!1,totalPages:64,totalRows:512},r=[{deviceId:64912,deviceUniqueId:"0CCCCCCC0000",macAddress:"0CCCCCCC0000"},{deviceId:139557,deviceUniqueId:"123123123120",macAddress:"123123123120"},{deviceId:139559,deviceUniqueId:"123123123121",macAddress:"123123123121"},{deviceId:153557,deviceUniqueId:"123123123130",macAddress:"123123123130"},{deviceId:52594,deviceUniqueId:"405EE1100001",macAddress:"405EE1100001"}];var i=[].concat(R(Z),R(r));r.forEach((function(e){e.key=e.deviceUniqueId})),v({curDeviceInfoList:r,allDeviceInfoPager:t,allDeviceInfoList:i})};Object(m.useEffect)((function(){re()}),[]);var le=Q;return f.a.createElement("div",{className:"choose-update-device"},f.a.createElement("div",{className:"device-block"},f.a.createElement("p",{className:"device-block-tip"},"选择配置更新的设备"),f.a.createElement("div",{className:"device-block-item padtop0"},f.a.createElement(T.a,{activeKey:t,defaultActiveKey:"1",onChange:function(e){console.log(e),n(e)}},f.a.createElement(M,{tab:"设备列表",key:"1"},f.a.createElement(J,{enterButton:"查 找",allowClear:!0,loading:i,onSearch:function(e){c(!0),Object(I.b)(I.a.getDeviceInfoByIdOrMacAddress,{productId:"",query:e}).then((function(e){var t=e.data;t.key=t.deviceUniqueId,e.data})).finally((function(){c(!1)}))},maxLength:50,className:"search-box",placeholder:"请输入设备ID/物理地址查找"}),f.a.createElement(a.a,{columns:[{title:"设备ID",dataIndex:"deviceUniqueId",key:"deviceUniqueId",width:140},{title:"物理地址",dataIndex:"macAddress",width:140,key:"macAddress"}],dataSource:le,rowSelection:ae,pagination:{total:G.totalRows,defaultCurrent:1,defaultPageSize:G.currPageRows,showQuickJumper:!1,hideOnSinglePage:!0,size:"small",onChange:function(e){return re()},showTotal:function(e){return f.a.createElement("span",null,"共 ",f.a.createElement("a",null,e)," 条")}}})),f.a.createElement(M,{tab:"本地导入",key:"2"},B?f.a.createElement("div",{className:"local-import"},f.a.createElement("div",{className:"file-input-wrapper"},f.a.createElement(r.a,{type:"primary",className:"upload-btn"},f.a.createElement(L.a,null)," 选择本地设备数据文件"),f.a.createElement("input",{type:"file",onInput:function(e){var t=e.target;if(t.files&&t.files.length>0){var n=Object(p.e)(t.files,["xls","xlsx"],1e4),a=n.isOk;n.type,n.size;if(!a)return Object(O.a)({description:"文件类型或者大小不符合要求"});var r=t.files[0];Object(I.c)(I.a.importRemoteDeviceExcel,{uploadExcel:r,productId:""},{needFormData:!0,loading:!0}).then((function(e){if(e.data){var t=e.data,n=[],a=[];t.forEach((function(e,t){var r=e.errorType,l=e.deviceUniqueId;e.key=l,r?a.push({deviceUniqueId:l,errorType:r,key:l}):n.push(K({},e))})),j(K(K({},S),{},{allList:t,successList:n,errorList:a})),n.length>0&&(w({rightAllList:[].concat(n),rightTempList:[].concat(n)}),x([])),U(r.name),F(!0)}}))}},accept:".xls,.xlsx"}),f.a.createElement("a",{className:"get-template",onClick:function(){window.open(I.a.downloadRemoteDeviceTemplateExcel)}},"设备数据模板")),f.a.createElement("p",{className:"local-import-tip"},"支持xls、xlsx格式，每次添加最多支持20,000个设备，总体文件大小不超过10MB")):f.a.createElement("div",null,f.a.createElement("div",{className:"result-area"},f.a.createElement("h3",null,D||"--"),f.a.createElement("div",{style:{marginTop:14}},"共".concat(Y.length,"条数据")),f.a.createElement("div",{className:"upload-data"},"成功：",H.length,"条 / ",f.a.createElement("span",{className:"red"},"失败：",$.length,"条，请修改完成后重上传")),f.a.createElement("div",null,f.a.createElement("a",{onClick:function(){return j(K(K({},S),{},{errorVisible:!0}))}},"错误日志"))),f.a.createElement(r.a,{type:"primary",className:"upload-btn martop22",onClick:function(){return F(!1)}},f.a.createElement(L.a,null)," 重新上传")))))),f.a.createElement("div",{className:"transfer-icon",onClick:function(){var e=Z.filter((function(e){return y.includes(e.deviceUniqueId)})),t=Object(p.n)([].concat(R(W),R(e)),"deviceUniqueId");A&&(A.current.input.value=""),w({rightAllList:t,rightTempList:t})}}),f.a.createElement("div",{className:"device-block"},f.a.createElement("p",{className:"device-block-tip"},"已选中：",y.length||0,"条"),f.a.createElement("div",{className:"device-block-item"},f.a.createElement(J,{enterButton:"查 找",ref:A,onSearch:function(e){var t=R(W);if(e&&e.trim()){var n=e.trim();t=W.filter((function(e){var t=e.deviceUniqueId,a=e.macAddress;return t.indexOf(n)>-1||a.indexOf(n)>-1}))}w(K(K({},E),{},{rightTempList:t}))},maxLength:50,placeholder:"请输入设备ID/物理地址查找"}),f.a.createElement("div",{className:"remove-all"},f.a.createElement("a",{className:X.length>0?"":"disable",onClick:function(){w({rightAllList:[],rightTempList:[]}),g([])}},f.a.createElement(N.a,null)," 一键移除")),f.a.createElement(a.a,{columns:ee,dataSource:X,pagination:{total:X.length,defaultCurrent:1,defaultPageSize:7,showQuickJumper:!1,hideOnSinglePage:!0,size:"small",showTotal:function(e){return f.a.createElement("span",null,"共 ",f.a.createElement("a",null,e)," 条")}}}))),_&&f.a.createElement(q,{visible:_,errorList:$,onCancel:function(){return j(K(K({},S),{},{errorVisible:!1}))}}))};n("hplX");function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var W=c.a.TextArea,X=u.a.Option,Y=o.a.Step,H=[{title:"填写任务说明"},{title:"添加配置数据"},{title:"选择配置更新的设备"}];var $=function(e){var t=e.visible,n=e.onCancel,a=Object(m.useRef)(),i=Z(l.a.useForm(),1)[0],s=Z(Object(m.useState)(0),2),p=s[0],v=s[1],b=Z(Object(m.useState)(""),2),y=b[0],g=b[1],h=Z(Object(m.useState)([]),2),O=h[0],w=h[1],A=function(){0===p?i.submit():1===p&&(console.log(a,"refConfig"),a.current.onFinish())};return Object(m.useEffect)((function(){Object(I.b)(I.a.cloudGetProductList).then((function(e){w(e.data)}),(function(){return w([])}))}),[]),f.a.createElement(E.a,{title:"创建任务",centered:!0,destroyOnClose:!0,maskClosable:!1,visible:t,width:900,onCancel:n,wrapClassName:"remote-config-modal",footer:[0!==p&&f.a.createElement(r.a,{key:"previous",onClick:function(){v(p-1)}},"上一步"),f.a.createElement(r.a,{type:"primary",key:"next",onClick:function(){return A()}},2===p?"确认创建":"下一步")]},f.a.createElement("div",{className:"remote-config"},f.a.createElement("div",{className:"step-box"},f.a.createElement(o.a,{current:p},H.map((function(e,t){return f.a.createElement(Y,{key:e.title,title:e.title})})))),0===p&&f.a.createElement(l.a,{form:i,name:"filTask",labelCol:{span:4},wrapperCol:{span:18},initialValues:{},onFinish:function(e){console.log("Received values of form: ",e),g(e.productId);var t=d()(p);v(++t)},onFinishFailed:function(e){console.log("Failed:",e)}},f.a.createElement(l.a.Item,{label:"归属产品",name:"productId",rules:[{required:!0,message:"请选择归属产品"}]},f.a.createElement(u.a,{style:{width:"100%"},placeholder:"请选择归属产品"},O&&O.map((function(e){return f.a.createElement(X,{key:e.productId,value:e.productId},e.productName)})))),f.a.createElement(l.a.Item,{label:"任务名称",name:"taskName",rules:[{required:!0,message:"请输入任务名称"},{max:20,message:"最大输入长度为20"}]},f.a.createElement(c.a,{style:{width:"100%"},placeholder:"请输入任务名称，不能超过20个字符"})),f.a.createElement(l.a.Item,{label:"任务说明",name:"taskExplain",rules:[{required:!0,message:"请输入任务说明"}]},f.a.createElement(W,{showCount:!0,maxLength:100,placeholder:"请输入任务说明",autoSize:{minRows:4}}))),1===p&&f.a.createElement(P,{ref:a,productId:y,nextStep:function(){v(p+1)}}),2===p&&f.a.createElement(Q,null)))};n("VS/T");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var re=u.a.Option,le=o.a.Step,ie=c.a.Search,ce=["平台支持远程更新设备的配置数据，您可以提交远程配置任务，实时对设备的系统参数等数据进行远程更新，并且获取设备配置的更新状态；详细说明可参考文档"],oe=[{title:"创建远程配置任务"},{title:"添加配置数据"},{title:"选择设备"},{title:"执行任务"}],ue=["草稿","待执行","执行中","已执行"],se=["","执行中","执行成功","执行失败"];t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"product",t=Object(m.useState)([]),n=ne(t,2),c=n[0],s=(n[1],Object(m.useState)(!1)),b=ne(s,2),E=b[0],O=b[1],w=Object(m.useState)(null),A=ne(w,2),k=A[0],S=A[1],j=Object(m.useState)({pageIndex:1}),C=ne(j,2),x=C[0],P=C[1],T=Object(m.useState)({deletevisible:!1,deleteItem:null,deleteLoading:!1}),L=ne(T,2),N=L[0],D=L[1],q=Object(m.useState)([]),R=ne(q,2),U=R[0],K=R[1],V=Object(m.useState)(""),z=ne(V,2),B=z[0],F=z[1],J=Object(m.useState)(""),M=ne(J,2),Q=M[0],Z=M[1],G=x.totalRows,W=x.pageIndex,X=(x.pageRows,N.deletevisible),Y=N.deleteItem,H=N.deleteLoading,_=[{title:"任务ID",dataIndex:"taskId",key:"taskId"},{title:"任务名称",dataIndex:"taskName",key:"taskName"},{title:"任务说明",dataIndex:"taskExplain",key:"taskExplain",width:300},{title:"归属产品名称",dataIndex:"productName",key:"productName"},{title:"更新设备数量",dataIndex:"deviceTotal",key:"deviceTotal"},{title:"任务状态",dataIndex:"status",key:"status",render:function(e,t){var n=t.status;return f.a.createElement("span",{className:"h5-statu-".concat(n+1)},de[n])}},{title:"执行时间",dataIndex:"execTime",key:"execTime",render:function(e,t){var n=t.execTime;return f.a.createElement("span",null,n?p.a.utcToDev(n):"--")}},{title:"操作",key:"action",render:function(e,t){var n=t.status,a=t.taskId;return te?f.a.createElement("span",null,f.a.createElement("a",{onClick:function(){return fe(t)}},"查看"),""+n=="3"?f.a.createElement(f.a.Fragment,null,f.a.createElement(i.a,{type:"vertical"}),f.a.createElement("a",{onClick:function(){return pe(a)}},"重试"),f.a.createElement(i.a,{type:"vertical"}),f.a.createElement("a",{onClick:function(){return ve(t)}},"日志")):null):f.a.createElement("span",null,""+n=="1"?f.a.createElement(f.a.Fragment,null,f.a.createElement("a",{onClick:function(){return me(t)}},"编辑"),f.a.createElement(i.a,{type:"vertical"}),f.a.createElement("a",{onClick:function(){return D({deletevisible:!0,deleteItem:t})}},"删除")):f.a.createElement("a",{onClick:function(){return fe(t)}},"查看"))}}],te="device"===e,ae=d()(oe);te&&ae.splice(2,1);var de=te?se:ue,me=function(e){return alert("敬请期待！")},fe=function(){},pe=function(){},ve=function(){};Object(m.useEffect)((function(){ye()}),[W,te,B]);var be=function(e){ye(W,Q,e)},ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a={productId:B,pageRows:10,pageIndex:e||W,status:t,taskName:n};Object(I.c)(I.a.getRomoteConfigListByProduct5x,a,{loading:!0}).then((function(e){var t=e.data,n=t.pager,a=void 0===n?{}:n,r=t.list,l=void 0===r?[]:r;K(Object(p.c)(l)),P(a)}))},ge=function(e){ye(e)},he=function(){Y.taskId;D(ee(ee({},N),{},{deleteLoading:!0}))};return f.a.createElement("div",{id:"remote-config"},f.a.createElement(v.a,{title:"远程配置",selectOnchange:function(e){return F(e)}}),f.a.createElement("div",{className:"comm-shadowbox setp-tip"},f.a.createElement("div",{className:"step-title"},f.a.createElement("img",{src:y.a,alt:""}),f.a.createElement("span",null,"远程配置步骤")),f.a.createElement(g.a,{desc:ce,style:{marginBottom:22}}),f.a.createElement(o.a,{current:-1,initial:0},f.a.createElement(le,{title:"创建远程配置任务",description:"创建远程配置任务，填写任务的目的或备注信息。"}),f.a.createElement(le,{title:"添加配置数据",description:"添加要更新的产品配置数据字段和更新的数值。"}),f.a.createElement(le,{title:"选择设备",description:"可通过设备ID/物理地址，设备标签，本地导入确定要配置的设备。"}),f.a.createElement(le,{title:"执行任务",description:"提交执行远程配置任务，设备更新结果实时可见。"}))),f.a.createElement("div",{className:"comm-shadowbox device-content"},f.a.createElement("div",{className:"content-top"},f.a.createElement("div",{className:"content-top-left"},f.a.createElement(l.a,{layout:"inline",labelCol:{span:7},wrapperCol:{span:17}},f.a.createElement(l.a.Item,{label:"任务状态"},f.a.createElement(u.a,{allowClear:!0,onChange:function(e){return Z(e)},style:{width:150,marginRight:40}},ue.map((function(e,t){return f.a.createElement(re,{key:e,value:t},e)})))),f.a.createElement(l.a.Item,{label:"任务名称"},f.a.createElement(ie,{placeholder:"请输入任务名称",allowClear:!0,enterButton:!0,onSearch:be,style:{width:465}})))),f.a.createElement(r.a,{type:"primary",onClick:function(){return me()}},"创建任务")),f.a.createElement(a.a,{columns:_,className:"ant-table-fixed",rowKey:"taskId",dataSource:U,pagination:{total:G,current:W,defaultCurrent:1,defaultPageSize:10,onChange:function(e){return ge(e)},showQuickJumper:!0,hideOnSinglePage:!0,showTotal:function(e){return f.a.createElement("span",null,"共 ",f.a.createElement("a",null,e)," 条")}}})),E&&f.a.createElement($,{visible:E,onCancel:function(){O(!1),S(null)},editData:k,configProtoclList:c,isDeviceRomote:te}),X&&f.a.createElement(h.a,{visible:X,modalOKHandle:he,modalCancelHandle:function(){return D({deletevisible:!1,deleteItem:null,deleteLoading:!1})},targetName:Y.taskId,confirmLoading:H,title:"删除任务",needWarnIcon:!0,descText:"即将删除的任务",tipText:"任务的所有信息将完全被删除，无法找回，请谨慎操作"}))}},wmP4:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAOCAYAAAAmL5yKAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABsklEQVQokWWRvW4TQRSFv5nMLE4U8IJEEaFFUUJhCQpA4idNKFJQUiU0eYM8QOqUCCSQeAXShJISCQch4QYqQEHhV3LjmCoKyEnsvZdixrtr+xazO3N3vnPuWfP2c2dPoYEqqqBhQeMehucCwz78vH97fhHAqdIoLkHlcgRU9qGtqOoCsVzRjAAVjapaKI4ARIlSJaC0L1WVEUjhhGKMccCk7XJ+ZTKbIUCqI4zaRpVTgVY3Ze9wlt7AceFMn8a5I1Z3dPrlmumZ1x/bClrOVgH0BbZ/zNE5rpFY8AZ8fCZTtPoJK05VylmJTiS8v++mHBzXSAxs3IEshSe7YBS8YWkmZ9OGVKKqKCLKEPr18CzewMZd+NKBm5fg+lzpwhvWgwMpE64G1csd3sLlFB5cDaFldfh2ECCJJXMKzxQWwGCQmHr4eNbJ8kCm0se7QTmrw8MbkOfw4Td4S9swVs3mr9o/398W1bz15+Kt73/Pz1fDu7cIy1fg+Rtwlq0JwKt3+59U5JqiDMTQ7GYcDWZG/4AFZ2md5KxMAMZrdUen6zmb3rCeWDJvaTvDi5OcR0/XTO8/FFxXqP9J8G8AAAAASUVORK5CYII="}}]);