(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+YWi":function(e,t,a){"use strict";a.d(t,"a",(function(){return Ie}));a("vxpS"),a("ThRY"),a("6wma"),a("8OWE"),a("L4wC"),a("KzFV"),a("tpKs"),a("2Kt1"),a("gsuU"),a("rsdX"),a("L8Gl"),a("EO5n"),a("0AG1"),a("Jya7"),a("Y5Ue");var n=a("xc0u"),r=(a("bqBU"),a("4OHk")),o=(a("72Pr"),a("O4+N")),i=(a("7fbo"),a("LCR/")),c=(a("sbOf"),a("spxj")),l=a("Zx9X"),s=a.n(l),u=a("+Gi7"),p=a.n(u),d=a("CvKH"),m=a.n(d),f=(a("oCJ0"),a("SnyF"),a("n1yf"),a("eVIo"),a("M+R0"),a("N4lb"),a("DwF0"),a("h4PX"),a("SoGA"),a("mtIt"),a("3EvH"),a("eCT+"),a("q+fq")),y=a.n(f),h=a("P2RN"),b=a("ivud"),v=a("4EZn"),g=a("Nlzp"),E=a("DgvE"),O=(a("U4At"),a("KiF4")),I=(a("auFq"),a("g2HK")),w=(a("kvrU"),a("BPQb")),P=(a("eox1"),a("vW+X")),D=(a("/mds"),a("aLG4")),C=(a("6rnn"),a("d6B9")),S=(a("HzvR"),a("2n5t")),A=(a("rJH4"),a("nKmx")),k=(a("kCMX"),a("wlSd"),a("RWNY"),a("eRDW"),a("WWzu"),a("8QW8")),j=(a("TL2v"),a("M7r8")),_=a("FC04"),T=a("Ig/K"),N=a.n(T);a("n9Ql"),a("BpGR");function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"==typeof e)return V(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){H(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e,t,a){return t&&U(e.prototype,t),a&&U(e,a),e}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=z(e);if(t){var r=z(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Q(this,a)}}function Q(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?Y(e):t}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}A.a.TextArea;var X=c.a.TabPane,Z=S.a.Option,$={display:"inline-block",width:"100px"},ee=[{name:"字符",value:1},{name:"数值",value:2},{name:"枚举",value:3},{name:"布尔",value:4}],te=C.a.create({name:"form_in_modal-protocol-add"})(function(e){W(a,e);var t=q(a);function a(e){var n;K(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields((function(e,t){if(!e){var a=n.state,r=a.curProtocol,o=a.curParams,i=a.complexProtocol,c=a.arrSubLength,l=n.props,s=l.existedPropertyNames,u=l.dataTypeId,p=t.propertyName,d=t.remark,f=t.defaultPropertyValue,y=t.actionType,b=m()(r),v=m()(o),g=m()(i);if(!n.verifyParams(v,b))return void Object(h.a)({type:"error",message:"参数缺少",description:"有必填项未填写，请检查表单"});if(s.indexOf(p)>-1)return void Object(h.a)({type:"error",message:"名称重复",description:"已存在此名称协议，不可重复添加"});if(2==u&&(y=y?0:void 0),b=b.map((function(e,t){var a=n.getEditTypes(e),r="";if("字符型"===a)return F(F({},e),{},{propertyName:p,remark:d,defaultPropertyValue:f,actionType:y});if("数值型"===a){var o=v[t],i=o.min,c=o.max,l=o.gap,s=o.mulriple,u=o.unit;return r="".concat(i,"~").concat(c),F(F({},e),{},{propertyValueDesc:r,gap:l,mulriple:s,unit:u,propertyName:p,remark:d,defaultPropertyValue:f,actionType:y})}return r=v[t].map((function(e){return"".concat(e.key,"-").concat(e.name)})).join("|"),F(F({},e),{},{propertyValueDesc:r,propertyName:p,remark:d,defaultPropertyValue:f,actionType:y})})),i){var E=i.functionDataType;g=F(F({},i),{},{propertyName:p,remark:d}),10===E?(g.length=c,b=[F(F({isTemplateField:b[0]&&b[0].isTemplateField||0},g),{},{byteDefVO:b[0],protocolStructDefVO:null,protocolArrayDefVO:null})]):b=[F(F({isTemplateField:b[0]&&b[0].isTemplateField||0},g),{},{byteDefVOList:b,arrayDefVOList:null,structDefVOList:null})]}var O=n.props,I=O.addCustomHandle,w=O.modalType,P=O.editHandle;"add"===w?I(b,!!i):P(b,!!i)}}))},n.toggleShowDataSelect=function(){n.setState((function(e,t){return{isShowDataSelect:!e.isShowDataSelect}}))},n.searchHandle=function(){var e=n.state.searchParams,t=e.subjectId,a=e.functionId;""!==t&&""!==a?(n.setState({searchLoading:!0}),Object(g.c)(g.a.searchProtocolDictionary,F({},e),{needVersion:1.1}).then((function(e){var t=e.data;t&&n.dealDistAndCommonList(t)})).finally((function(){n.setState({searchLoading:!1})}))):Object(h.a)({type:"error",message:"参数缺少",description:"主体（1）和功能（3）为必选字段"})},n.commonDetailChangeHandle=function(e,t,a){var r=n.state.selectedDisctItem,o=m()(r);o.commonDetailList[e][t]=a,n.setState({selectedDisctItem:o})},n.getSelectedDisctItemDom=function(){var e=n.state,t=e.selectedCommonList,a=e.selectedDisctItem,o=a.functionDataType;return y.a.createElement("div",{className:"p-data-area"},y.a.createElement("h3",null,"数据定义"),y.a.createElement("h4",null,a.commonName||"",[10,11].includes(+o)&&y.a.createElement("span",{className:"margin-l-16",style:{fontWeight:"bold"}},["数组","结构体"][o-10])),a.commonDetailList.map((function(e,i){return y.a.createElement("div",{style:{marginBottom:"8px"},key:i},[10].includes(+o)&&y.a.createElement("span",{className:"margin-l-16",style:{fontWeight:"bold"}},"子元素："),y.a.createElement("span",{className:"margin-l-16"},e.commonMark),y.a.createElement("span",{className:"margin-l-16"},e.mark),y.a.createElement(D.a,{style:{display:"inline-block",width:"70px",marginLeft:"16px"},min:1,max:1024,value:e.functionLength,onChange:function(e){return n.commonDetailChangeHandle(i,"functionLength",e)}}),y.a.createElement("span",{className:"margin-l-8"},1==e.functionUnit?"字节":"位"),"数值型"===e.mark&&y.a.createElement(S.a,{value:+e.isSigned||0,onChange:function(e){return n.commonDetailChangeHandle(i,"isSigned",e)},style:{width:100,marginLeft:"16px"}},y.a.createElement(Z,{value:0},"无符号"),y.a.createElement(Z,{value:1},"有符号")),[6,7].includes(a.functionDataType)&&y.a.createElement("span",{className:"margin-l-16 select-icon",onClick:n.choiceCommonListHandle.bind(Y(n),i)},y.a.createElement(r.a,{type:"check-circle",theme:t.indexOf(i)>-1?"twoTone":null})))})))},n.changeOptionsHandle=function(e,t){var a=n.state.searchParams,r=m()(a);switch(r=Object.assign(r,H({},e,t)),e){case"subjectId":r.functionId="",r.functionExtendId="",n.getDistMenus(!1,!1,t,!1);break;case"functionId":r.functionExtendId="",n.getDistMenus(!1,!1,!1,t)}n.setState({searchParams:r})},n.getLabelId=function(e){var t=n.props,a=t.templates,r=t.dataTypeId,o=a.filter((function(t){return t.property==e}));if(o.length){var i=o[0],c=i.property,l=i.propertyName,s=i.javaType;Object(g.d)(g.a.saveNoProductId,{javaType:s,protocolType:r,labelName:l,labelNameEn:c,labelType:0}).then((function(e){e.data&&n.setState((function(){return{thingLabelData:{thingLabel:c,thingLabelName:l,thingLabelId:e.data.labelId}}}),(function(){n.changeFullCoustomData("thingLabel",c)}))}))}},n.changeFullCoustomData=function(e,t){var a=n.state.fullCoustomData,r=a.property;"functionDataType"!==e||r?("property"!==e||/^[a-zA-Z]{1}\w{0,49}$/.test(t)||Object(h.a)({description:"格式不符合规则"}),n.setState({fullCoustomData:F(F({},a),{},H({},e,t))},(function(){var e=n.state,t=e.fullCoustomData,a=e.thingLabelData,r=t.property,o=t.functionDataType;if(r&&o){var i=a.thingLabelId,c=void 0===i?"":i,l=a.thingLabel,s=void 0===l?"":l,u=a.thingLabelName,p=void 0===u?"":u;n.dealDistAndCommonList({functionDataType:o,commonDetailList:[{functionDataType:o,commonMark:r,thingLabelId:c,thingLabel:s,thingLabelName:p}]})}}))):Object(h.a)({description:"请先输入协议字段"})},n.getOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=1e3*Math.random(),n=e.map((function(e,t){return y.a.createElement(Z,{key:a+t,value:e.menuId},e.menuName)}));return n.unshift(y.a.createElement(Z,{key:a-1,value:""},t?"未选择":"不填写")),n},n.confirmDist=function(){var e=n.state,t=e.selectedDisctItem,a=e.selectedCommonList,r=e.curProtocol,o=null,i="",c="",l=null,s=null,u=!0;if(t?(!(o=F(F({},t),{},{commonDetailList:t.commonDetailList.filter((function(e,t){return a.indexOf(t)>-1}))}))||!o.commonDetailList||o.commonDetailList.length<1)&&(u=!1):u=!1,u){r&&r[0]&&(i=r[0].propertyName,c=r[0].remark,l=r[0].actionType);var p={commonName:o.commonName,functionDataType:o.functionDataType,bitDefList:9!=o.functionDataType?null:void 0,isSigned:0,gap:null,ignore:!1,isTemplateField:0,javaType:null,length:1,loop:null,mulriple:null,property:"",propertyName:i,propertyValueDesc:"",propertyValueType:"",remark:c,unit:null,actionType:l},d=n.props.form.getFieldValue("propertyFrom"),m=o.commonDetailList.map((function(e){var t=e.propertyValueDesc,a=e.propertyValueType,n=e.javaType,r=e.isSigned,i=e.commonMark,c=e.functionLength,l=e.functionDataType,s=e.commonName,u=e.thingLabel,m=e.thingLabelId,f=e.thingLabelName,y=F(F({},p),{},{length:+c||1,propertyValueDesc:t,propertyValueType:a,functionDataType:l,javaType:n,isSigned:+r||0,property:i,propertyFrom:d,thingLabel:u,thingLabelId:m,thingLabelName:f});return[10,11].includes(+o.functionDataType)&&(y.propertyName=s),y}));if([10,11].includes(+o.functionDataType)){var f=o;s={functionDataType:f.functionDataType,property:f.commonMark,remark:c,propertyName:i}}var y=n.parseParamsFromCurProtocol(m);n.toggleShowDataSelect(),n.setState({curProtocol:m,curParams:y,hasProperty:m.length>0,complexProtocol:s})}else Object(h.a)({type:"error",message:"参数缺失",description:"请先选择一个协议字段"})},n.getEditTypes=function(e){var t=e.propertyValueType,a=e.functionDataType,n=e.javaType,r=e.propertyValueDesc;return"STRING"==n?"字符型":9==a?"二进制":t?"RANGE"==t?"数值型":4==a?"布尔型":"枚举型":r?r.indexOf("~")>=0?"数值型":"枚举型":""},n.paramOnchangeHandle=function(e,t,a,r){if(r||0===r||""===r)if((""+r).match(/\||\~/g))Object(h.a)({type:"warn",message:"参数异常",description:"不能输入'|'和'~'字符"});else{var o=n.state.curParams,i=m()(o);r=(""+r).trim(),-1===a?i[t][e]=r:i[t][a][e]=r,n.setState({curParams:i})}},n.getEditItem=function(e,t){var a=n.getEditTypes(e),o=n.state.curParams,i=e.length,c=e.property,l=e.bitDefList,s=e.isSigned,u=e.propertyValueType,p=void 0===l?"位":"字节",d=null,m=o[t],f=e.functionDataType,h=[4,9].includes(+f);if("字符型"===a)d=y.a.createElement("div",{key:t,className:"ant-form ant-form-horizontal form-border edit-item"},y.a.createElement("p",{className:"protocol-des"},y.a.createElement("b",null,c)," ",y.a.createElement("span",null,a)," ",y.a.createElement("span",null,i," ",p)," ",y.a.createElement("span",null,"RANGE"==u?s?"有符号":"无符号":"")));else if("数值型"===a){var b=s?-(Math.pow(2,8*i-1)-1):0,v=s?Math.pow(2,8*i-1)-1:Math.pow(2,8*i)-1;d=y.a.createElement("div",{key:t,className:"ant-form ant-form-horizontal form-border edit-item"},y.a.createElement("p",{className:"protocol-des"},y.a.createElement("b",null,c)," ",y.a.createElement("span",null,a)," ",y.a.createElement("span",null,i," ",p)," ",y.a.createElement("span",null,"RANGE"==u?s?"有符号":"无符号":"")),y.a.createElement(C.a.Item,{label:"范围",className:"need-require-lable",style:{marginBottom:0}},y.a.createElement(C.a.Item,{style:$},y.a.createElement(D.a,{value:m.min,min:b,max:v,defaultValue:1,onChange:function(e){return n.paramOnchangeHandle("min",t,-1,e)}})),y.a.createElement("span",{style:{display:"inline-block",width:"24px",textAlign:"center"}}," ~ "),y.a.createElement(C.a.Item,{style:$},y.a.createElement(D.a,{value:m.max,min:b,max:v,defaultValue:1,onChange:function(e){return n.paramOnchangeHandle("max",t,-1,e)}}))),y.a.createElement(C.a.Item,{label:"数据间隔",className:"need-require-lable"},y.a.createElement(D.a,{value:m.gap,max:Math.pow(2,8*i),min:1,style:$,defaultValue:1,onChange:function(e){return n.paramOnchangeHandle("gap",t,-1,e)}})),y.a.createElement(C.a.Item,{label:"数据倍数"},y.a.createElement(P.a,{dataSource:["10","100","1000"],style:$,value:m.mulriple,onSelect:function(e){return n.paramOnchangeHandle("mulriple",t,-1,+e)}})),y.a.createElement(C.a.Item,{label:"单位"},y.a.createElement(A.a,{value:m.unit,placeholder:"比如：温度，湿度等，选填项",onChange:function(e){return n.paramOnchangeHandle("unit",t,-1,e.target.value)}})))}else d=y.a.createElement("div",{key:t,className:"ant-form ant-form-horizontal form-border edit-item"},y.a.createElement("p",{className:"protocol-des"},y.a.createElement("b",null,c)," ",y.a.createElement("span",null,a)," ",y.a.createElement("span",null,i," ",p)," ",y.a.createElement("span",null,"RANGE"==u?s?"有符号":"无符号":"")),m.map((function(e,a){return y.a.createElement(C.a.Item,{key:a,label:"参数".concat(a),className:"need-require-lable",style:{marginBottom:0}},y.a.createElement(C.a.Item,{style:$},y.a.createElement(D.a,{disabled:h,value:e.key,max:Math.pow(2,8*i),min:0,onChange:function(e){return n.paramOnchangeHandle("key",t,a,e)},placeholder:"参数"})),y.a.createElement("span",{style:{display:"inline-block",width:"24px",textAlign:"center"}}," - "),y.a.createElement(C.a.Item,{style:$},y.a.createElement(A.a,{value:e.name,maxLength:20,onChange:function(e){return n.paramOnchangeHandle("name",t,a,e.target.value)},placeholder:"字符名称"})),a>0&&!h&&y.a.createElement("span",{className:"sub-icon",onClick:n.controlParam.bind(Y(n),t,"sub","",a)},y.a.createElement(r.a,{type:"close-circle"})))})),!h&&y.a.createElement("div",{className:"re-select-property",onClick:n.controlParam.bind(Y(n),t,"add",i)},"添加参数"));return d};var o=n.props,i=o.curEditProtocol,c=o.deviceTypeId,l=o.modalType,s=o.isComplex,u=[],p=[],d=null,f=1,b={};if("edit"===l){if(s){var v=i[0],E=v.functionDataType,O=v.property,I=v.remark,w=v.propertyName,k=v.length;d={functionDataType:E,property:O,propertyName:w,remark:I,isTemplateField:v.isTemplateField},f=k,u="array"===s?[i[0].byteDefVO]:R(i[0].byteDefVOList)}else u=m()(i);p=n.parseParamsFromCurProtocol(u),b=n.parseFullCoustomDataFromCurProtocol(u)}return n.state={isShowDataSelect:!1,deviceTypeId:c,hasProperty:!!i,curProtocol:u,curParams:p,selectedDictListIndex:null,selectedDisctItem:null,selectedCommonList:[],subjectMenu:[],subjectExtendMenu:[],functionMenu:[],functionExtendMenu:[],searchLoading:!1,searchParams:{subjectId:"",subjectExtendId:"",functionId:"",functionExtendId:""},complexProtocol:d,arrSubLength:f,fullCoustomData:b,thingLabelData:{}},n.canCelHandle=n.canCelHandle.bind(Y(n)),n}return J(a,[{key:"parseFullCoustomDataFromCurProtocol",value:function(e){var t={};if(e&&e[0]){var a=e[0],n=a.thingLabel,r=void 0===n?"":n,o=a.functionDataType,i=void 0===o?1:o,c=a.property;t={thingLabel:r,functionDataType:i,property:void 0===c?"":c}}return t}},{key:"componentDidMount",value:function(){var e=this.props.deviceTypeId;this.getDistMenus(!0,e,!1,!1)}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.props.deviceTypeId,r=this.state.subjectMenu;e.deviceTypeId!==n&&this.setState({deviceTypeId:n},(function(){a.getDistMenus(!r.length,!0,!1,!1)}))}},{key:"verifyParams",value:function(e,t){var a=!0,n=this.state,r=n.complexProtocol,o=n.arrSubLength;return t&&0!==t.length||(a=!1),r&&10==r.functionDataType&&(o||(a=!1)),e[0]instanceof Array?e.map((function(e){e&&e.map((function(e){if(e){var t=e.name,n=e.key;""!==t&&""!==n||(a=!1)}}))})):e.map((function(e){if(e){var t=e.min,n=e.max,r=e.gap;""!==t&&""!==n&&""!==r||(a=!1)}})),a}},{key:"canCelHandle",value:function(){(0,this.props.onCancel)()}},{key:"getDistMenus",value:function(e,t,a,n){var r=this,o=this.props,i=o.dataTypeId,c=o.deviceTypeId;e&&Object(g.c)(g.a.getSubjectMenu).then((function(e){var t=e.data;t&&r.setState({subjectMenu:t})})),t&&Object(g.c)(g.a.getSubjectExtendMenu,{deviceTypeId:c}).then((function(e){var t=e.data;t&&r.setState({subjectExtendMenu:t})})),a&&Object(g.c)(g.a.getFunctionMenu,{subjectId:a,dataTypeId:i}).then((function(e){var t=e.data;t&&r.setState({functionMenu:t})})),n&&Object(g.c)(g.a.getFunctionExtendMenu,{functionId:n,deviceTypeId:c}).then((function(e){var t=e.data;t&&r.setState({functionExtendMenu:t})}))}},{key:"clickDictList",value:function(e){var t=this.props.protocolDictionaryCommonList;this.dealDistAndCommonList(t[e]),this.setState({selectedDictListIndex:e})}},{key:"dealDistAndCommonList",value:function(e){var t=m()(e),a=t.functionDataType,n=t.commonDetailList,r=void 0===n?[]:n,o=[];t.commonDetailList=r.map((function(e,t){var n=a;return o.push(t),10!==a&&11!==a||(n=e.functionDataType),F(F({},e),{},2==n||5==n||6==n||8==n||7==n&&1!=t?{propertyValueType:"RANGE",mark:"数值型",propertyValueDesc:"~",javaType:"LONG"}:1==n?{propertyValueType:"",mark:"字符型",propertyValueDesc:"",javaType:"STRING"}:4==n?{propertyValueType:"ENUM",mark:"布尔型",propertyValueDesc:"0-|1-",javaType:"LONG"}:9==n?{propertyValueType:"ENUM",mark:"二进制",propertyValueDesc:"0-|1-",javaType:"LONG"}:{propertyValueType:"ENUM",mark:"枚举型",propertyValueDesc:"-",javaType:"LONG"})})),this.setState({selectedDisctItem:t,selectedCommonList:o})}},{key:"choiceCommonListHandle",value:function(e){var t=this.state.selectedCommonList,a=m()(t);t.indexOf(e)>-1?a=a.filter((function(t){return t!=e})):a.push(e),this.setState({selectedCommonList:a})}},{key:"parseParamsFromCurProtocol",value:function(e){var t=this;return e.map((function(e){var a=t.getEditTypes(e);if("字符型"===a)return null;if("数值型"===a){var n=e.propertyValueDesc,r=e.gap,o=e.mulriple,i=e.unit,c=e.length,l=e.isSigned;n||(n="~");var s=x(n.split("~"),2),u=s[0],p=s[1],d=l?-(Math.pow(2,8*c-1)-1):0,m=l?Math.pow(2,8*c-1)-1:Math.pow(2,8*c)-1;return u&&u<d?u=d:u&&u>m&&(u=m),p&&p<d?p=d:p&&p>m&&(p=m),r&&r<1?r=1:r&&r>Math.pow(2,8*c)&&(r=Math.pow(2,8*c)),{min:u,max:p,gap:r,mulriple:o,unit:i}}var f=e.propertyValueDesc,y=void 0===f?"|":f;return y||(y=""),y.split("|").map((function(e){var t=x(e.split("-"),2);return{key:t[0],name:t[1]}}))}))}},{key:"controlParam",value:function(e,t,a,n){var r=this.state.curParams,o=m()(r);if("add"===t){if(o[e].length>Math.pow(2,8*a))return Object(h.a)({type:"warn",message:"无法添加",description:"参数格式已达到上限"}),!1;o[e].push({key:"",name:""})}else o[e]=o[e].filter((function(e,t){return t!==n}));this.setState({curParams:o})}},{key:"getParentNode",value:function(){return document.body}},{key:"getDefaultvalueDom",value:function(){var e=null,t=this.props.form.getFieldDecorator,a=this.props,n=(a.dataType,a.dataTypeId,a.dataTypeName),r=this.state,o=r.isShowDataSelect,i=r.hasProperty,c=r.curProtocol,l=void 0===c?[]:c,s=r.curParams;if(l.length&&l.length>1)return null;var u=l&&l[0]||{},p=u.defaultPropertyValue||"",d=this.getEditTypes(u);if("配置数据"==n&&!o&&i)if("字符型"===d||"数值型"==d)e=y.a.createElement(C.a.Item,{label:"默认值"},t("defaultPropertyValue",{rules:[{required:!0,message:"请输入默认值"},{max:30,message:"最大输入长度为30"}],initialValue:p})(y.a.createElement(A.a,{placeholder:"请输入默认值"})));else if("布尔型"===d||"枚举型"==d){var m=s[0]||[],f=[];for(var h in m){if(""==m[h].key||""==m[h].name){f=[];break}f.push(y.a.createElement(Z,{key:h,value:"".concat(m[h].key,"-").concat(m[h].name)},"".concat(m[h].key,"-").concat(m[h].name)))}e=y.a.createElement(C.a.Item,{label:"默认值"},t("defaultPropertyValue",{rules:[{required:!0,message:"请选择默认值"}],initialValue:p})(y.a.createElement(S.a,{disabled:0==f.length},f)))}return e}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,o=t.form,i=(t.protocolDictionaryCommonList,t.confirmLoading),l=t.dataTypeId,s=this.state,u=s.isShowDataSelect,p=s.hasProperty,d=s.curProtocol,m=(s.curParams,s.selectedDictListIndex,s.selectedDisctItem),f=s.subjectMenu,h=s.subjectExtendMenu,b=s.functionMenu,v=s.functionExtendMenu,g=s.searchParams,E=s.searchLoading,P=s.complexProtocol,k=s.arrSubLength,_=s.fullCoustomData,T=(s.thingLabelList,o.getFieldDecorator),N=o.getFieldValue,L=g.subjectId,x=g.subjectExtendId,R=g.functionId,M=g.functionExtendId,V=d&&d[0]?d[0].propertyName:"",B=d&&d[0]?d[0].remark:"",F=d&&d[0]&&void 0!==d[0].actionType?d[0].actionType:"",H=d&&d[0]?d[0].propertyFrom:0,K=_.property,U=_.thingLabel,J=_.functionDataType,W=o.getFieldValue("propertyFrom"),G=o.getFieldValue("actionType");return void 0===W&&(W=H),y.a.createElement(O.a,{visible:a,className:"self-modal",width:980,title:"自定义功能添加",centered:!0,closable:!1,footer:null,onCancel:this.canCelHandle,destroyOnClose:!0,maskClosable:!1},y.a.createElement(C.a,{labelCol:{span:4},wrapperCol:{span:20},onSubmit:this.handleSubmit},y.a.createElement(C.a.Item,{label:"数据名称"},T("propertyName",{rules:[{required:!0,message:"请输入数据名称"},{max:20,message:"最大输入长度为20"}],initialValue:V})(y.a.createElement(A.a,{placeholder:"请输入数据名称"}))),[3].includes(l)&&y.a.createElement(C.a.Item,{label:"数据区分"},T("actionType",{rules:[{required:!0,message:"请选择数据区分"}],initialValue:F})(y.a.createElement(w.a.Group,null,y.a.createElement(w.a,{value:0},"设备状态上传"),y.a.createElement(w.a,{value:1},"设备信息通知"),y.a.createElement(w.a,{value:2},"设备告警")))),[2].includes(l)&&y.a.createElement(C.a.Item,{label:"是否包含"},T("actionType",{initialValue:F})(y.a.createElement(I.a,null,"设备状态上传"))),y.a.createElement("div",{className:"ant-row ant-form-item"},y.a.createElement("div",{className:"ant-col ant-col-4 ant-form-item-label"},y.a.createElement("label",{className:"ant-form-item-required"},"定义数据")),y.a.createElement("div",{className:"ant-col ant-col-20"},u?y.a.createElement(C.a.Item,null,T("propertyFrom",{rules:[{required:!0,message:"请选择数据区分"}],initialValue:H})(y.a.createElement(w.a.Group,null,y.a.createElement(w.a.Button,{value:0},"协议字典"),y.a.createElement(w.a.Button,{value:1},"完全自定义")))):p?y.a.createElement("div",null,d&&d.length>0&&y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"item-header"},y.a.createElement("span",null,d[0].commonName),y.a.createElement("div",{onClick:this.toggleShowDataSelect,className:"re-select-property"},"重新选择")),y.a.createElement("div",{className:"edit-items-wrapper"},P&&10==P.functionDataType&&y.a.createElement("div",{key:-1,className:"ant-form ant-form-horizontal form-border edit-item"},y.a.createElement(C.a.Item,{label:"子元素个数",className:"need-require-lable"},y.a.createElement(D.a,{min:1,value:k,placeholder:"请输入数组子元素个数",onChange:function(t){return e.setState({arrSubLength:t})}}))),d.map((function(t,a){return e.getEditItem(t,a)}))))):y.a.createElement("a",{className:"select-a",onClick:this.toggleShowDataSelect},"选择"))),u&&y.a.createElement("div",{className:"ant-row ant-form-item"},y.a.createElement("div",{className:"ant-col ant-col-4 ant-form-item-label"}),y.a.createElement("div",{className:"ant-col ant-col-20 data-select-wrapper"},W?y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"ant-row ant-form-item"},y.a.createElement("div",{className:"ant-col ant-col-3 ant-form-item-label ant-form-item-required p-r-12"},"数据标识"),y.a.createElement("div",{className:"ant-col ant-col-21 ant-form-item-control"},y.a.createElement(A.a,{placeholder:"仅支持大小字母开头、下划线组成，最多50个字",onChange:function(t){e.changeFullCoustomData("property",t.target.value)},value:K,style:{width:"360px"}}))),y.a.createElement("div",{className:"ant-row ant-form-item"},y.a.createElement("div",{className:"ant-col ant-col-3 ant-form-item-label ant-form-item-required p-r-12"},"数据类型"),y.a.createElement("div",{className:"ant-col ant-col-21 ant-form-item-control"},y.a.createElement(S.a,{value:J,onChange:function(t){e.changeFullCoustomData("functionDataType",t)},style:{width:"360px",display:"block"}},ee.map((function(e){var t=e.name,a=e.value;return y.a.createElement(Z,{key:a,value:a},t)}))))),(G&&2==l||[3,4].includes(+l))&&y.a.createElement("div",{className:"ant-row ant-form-item"},y.a.createElement("div",{className:"ant-col ant-col-3 ant-form-item-label p-r-12"},"绑定物标签"),y.a.createElement("div",{className:"ant-col ant-col-21 ant-form-item-control"},y.a.createElement(S.a,{value:U,style:{width:"360px",display:"block"},onChange:function(t){e.getLabelId(t)},getPopupContainer:this.getParentNode,optionFilterProp:"children",showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},(this.props.templates||[]).map((function(e){var t=e.property,a=e.propertyName;return y.a.createElement(Z,{key:t,value:t},a)})))))):y.a.createElement(c.a,{defaultActiveKey:"0"},y.a.createElement(X,{tab:"查找",key:1},y.a.createElement("div",{className:"type-select"},y.a.createElement("p",null,"请描述这个数据的主体和功能，需要时使用扩展名进一步描述："),y.a.createElement("div",{className:"selects-wrapper"},y.a.createElement("div",{className:"select-item"},y.a.createElement(S.a,{value:L,onChange:function(t){e.changeOptionsHandle("subjectId",t)},getPopupContainer:this.getParentNode,optionFilterProp:"children",showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:{display:"block"}},this.getOptions(f,!0)),y.a.createElement("span",{className:"des"}," 数据承载的主体，可以是检测元器件，也可以是设备整机，如“基础功能”；")),y.a.createElement("div",{className:"select-item"},y.a.createElement(S.a,{value:x,onChange:function(t){e.changeOptionsHandle("subjectExtendId",t)},optionFilterProp:"children",showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},getPopupContainer:this.getParentNode,style:{display:"block"}},this.getOptions(h,!1)),y.a.createElement("span",{className:"des"}," 用来描述主体的词，如室内、室外，主体唯一时可选择不填写；")),y.a.createElement("div",{className:"select-item"},y.a.createElement(S.a,{value:R,onChange:function(t){e.changeOptionsHandle("functionId",t)},getPopupContainer:this.getParentNode,optionFilterProp:"children",showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:{display:"block"}},this.getOptions(b,!0)),y.a.createElement("span",{className:"des"}," 描述功能的核心词，如开关、模式设置、工作状态、设置值、检测值等；")),y.a.createElement("div",{className:"select-item"},y.a.createElement(S.a,{value:M,onChange:function(t){e.changeOptionsHandle("functionExtendId",t)},getPopupContainer:this.getParentNode,optionFilterProp:"children",showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:{display:"block"}},this.getOptions(v,!1)),y.a.createElement("span",{className:"des"}," 用来描述功能的词，如“检测值”的功能，可以加上“电压”，“温度”的扩展词细化描述；")),y.a.createElement("div",{className:"select-item-btn"},y.a.createElement(n.a,{type:"primary",icon:"search",loading:E,onClick:this.searchHandle},"查询")))))),m&&this.getSelectedDisctItemDom(),y.a.createElement("div",{className:"data-done"},y.a.createElement("span",{onClick:this.confirmDist},"完 成 ",y.a.createElement(r.a,{type:"arrow-up"}))))),this.getDefaultvalueDom(),y.a.createElement(j.a,{label:"备注",formId:"remark",astrictNub:"200",rows:"2",placeholder:"选填项",getFieldDecorator:T,initialVal:B,getFieldValue:N}),y.a.createElement(C.a.Item,{wrapperCol:{span:24}},y.a.createElement("div",{className:"form-in-modal-ok-cancel-btn"},y.a.createElement(n.a,{loading:i,type:"primary",htmlType:"submit",onClick:this.handleSubmit},"确定"),y.a.createElement(n.a,{type:"default",onClick:this.canCelHandle},"取消")))))}}]),a}(y.a.Component));function ae(e){var t=e.visible,a=e.deleteOkHandle,n=e.deleteCancelHandle,r=e.propertyName,o=e.deleteConfirmLoading;return y.a.createElement(_.a,{visible:t,modalOKHandle:a,confirmLoading:o,modalCancelHandle:n,targetName:r,title:"删除协议",descGray:!0,needWarnIcon:!0,descText:"即将删除的协议"})}var ne=function(e){W(a,e);var t=q(a);function a(e){var n;K(this,a),(n=t.call(this,e)).onSelectChange=function(e){n.setState({selectedRowKeys:e})},n.changeActionValues=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=R(n.state.actionTypeValues);r[e]=a?!r[e]:t,n.setState({actionTypeValues:r})};var r=n.props.dataTypeId;return n.state={selectedRowKeys:[],okLoading:!1,actionTypeValues:[]},n.columns=[{title:"数据名称",dataIndex:"propertyName",key:"propertyName",width:"150px",render:function(e,t){var a=t.propertyName,n=t.bits,r=[];return n&&n.length>0?n.forEach((function(e,t){r.push(y.a.createElement("div",{key:t},e.propertyName))})):r.push(y.a.createElement("span",{key:0},a)),r}},{title:"数据标识",dataIndex:"property",key:"property",width:"150px",render:function(e,t){var a=t.property,n=t.bits,r=[];return n&&n.length>0?n.forEach((function(e,t){r.push(y.a.createElement("div",{key:t},e.property))})):r.push(y.a.createElement("span",{key:0},a)),r}},{title:"数据类别",dataIndex:"dataTypeName",key:"dataTypeName",width:"100px"},{title:"数据类型",dataIndex:"javaType",key:"javaType",width:"100px",render:function(e,t){var a=t.bits,n=[];return a&&a.length>0?a.forEach((function(e,t){n.push(y.a.createElement("div",{key:t},Object(E.q)(e)))})):n.push(y.a.createElement("span",{key:0},Object(E.q)(t))),n}},{title:"数据属性",dataIndex:"propertyValueDesc",key:"propertyValueDesc",width:"200px",render:function(e,t){var a=t.propertyValueDesc,n=t.bits,r=t.functionDataType,o=t.openByteProtocol,i=t.openByteProtocolList,c=t.property,l=t.length,s=[];return n&&n.length>0?n.forEach((function(e,t){s.push(y.a.createElement("div",{key:t},e.propertyValueDesc))})):10===r?s.push(y.a.createElement("div",{key:c},"".concat(l,"个").concat(Object(E.q)(o),"子元素"))):11===r&&i?i.forEach((function(e,t){s.push(y.a.createElement("div",{key:t},e.propertyValueDesc))})):s.push(y.a.createElement("span",{key:0},a)),s}},{title:2==r?"是否包含":"数据区分",dataIndex:"dataTypeId",key:"dataTypeId",render:function(e,t,a){var r=t.dataType;return[2,3].includes(r)?2==r?y.a.createElement("span",null,y.a.createElement(I.a,{checked:n.state.actionTypeValues[a],onChange:function(e){return n.changeActionValues(a,e.target.checked,!0)}},"设备状态上传")):y.a.createElement("span",null,y.a.createElement(w.a.Group,{value:n.state.actionTypeValues[a],onChange:function(e){return n.changeActionValues(a,e.target.value)}},y.a.createElement(w.a,{value:0},"设备状态上传"),y.a.createElement(w.a,{value:1},"设备信息通知"),y.a.createElement(w.a,{value:2},"设备告警"))):null}}],n}return J(a,[{key:"onOkHandle",value:function(){var e=this,t=this.props,a=t.templates,n=t.productId,r=t.getProtocols,o=t.dataTypeId,i=this.state,c=i.selectedRowKeys,l=i.actionTypeValues;if(c.length>0){this.setState({okLoading:!0});var s=c.map((function(t){var a=F({},e.templatesList[t]);return void 0!==l[t]&&(2==o?l[t]&&(a.actionType=0):a.actionType=l[t]),a})),u=m()(a[0].templateList);s.forEach((function(e){var t=e.dataTypeIndex,a=e.protocolIndex,n=e.complex,r=e.actionType,o="list";"array"===n&&(o="openArrayProtocolList"),"struct"===n&&(o="openStructProtocolList"),u[t][o][a].isSelect=1,void 0!==r&&(u[t][o][a].actionType=r)})),Object(g.d)(g.a.addProtocolTemplates,{productId:n,templateId:this.templateId,data:JSON.stringify(u)},{needVersion:1.1}).then((function(t){e.onCancelHandle(),r()})).finally((function(){e.setState({okLoading:!1})}))}else Object(h.a)({type:"warn",message:"操作异常",description:"请先选择数据"})}},{key:"onCancelHandle",value:function(){var e=this.props.onCancel;this.setState({selectedRowKeys:[]}),e()}},{key:"dealTemplateProtocol",value:function(e){if(0===e.length)return e;var t=m()(e),a=t[0].templateList,n=[],r=this.props.dataTypeId;return this.templateId=t[0].templateId,a&&a.forEach((function(e,t){var a=e.dataTypeName,o=e.dataType,i=e.list,c=e.openArrayProtocolList,l=e.openStructProtocolList,s=t;r==o&&(i&&i.forEach((function(e,t){e.dataType=o,e.dataTypeName=a,e.dataTypeIndex=s,e.protocolIndex=t,e.complex=!1,e.isSelect||n.push(e)})),c&&c.forEach((function(e,t){e.dataType=o,e.dataTypeName=a,e.dataTypeIndex=s,e.protocolIndex=t,e.complex="array",e.functionDataType=10,e.isSelect||n.push(e)})),l&&l.forEach((function(e,t){e.dataType=o,e.dataTypeName=a,e.dataTypeIndex=s,e.protocolIndex=t,e.complex="struct",e.functionDataType=11,e.isSelect||n.push(e)})))})),Object(E.c)(n)}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.templates,n=this.state,r=n.selectedRowKeys,i=n.okLoading;this.templatesList=this.dealTemplateProtocol(a);var c={selectedRowKeys:r,fixed:"right",onChange:this.onSelectChange};return y.a.createElement(O.a,{visible:t,className:"self-modal fiexed-selected-right",width:1e3,title:"标准功能定义",okText:"确定",confirmLoading:i,onOk:this.onOkHandle.bind(this),cancelText:"取消",onCancel:this.onCancelHandle.bind(this),centered:!0,closable:!1,destroyOnClose:!0,maskClosable:!1},y.a.createElement("p",{className:"modal-content-p",style:{marginBottom:"24px"}},"C-Life云基于在智能家电产品领域多年的经验积累，给很多类目的产品提供了标准的功能定义供您选用。"),this.templatesList.length>0?y.a.createElement(o.a,{pagination:!1,rowSelection:c,columns:this.columns,scroll:{y:300},dataSource:this.templatesList}):y.a.createElement(k.a,{tipText:"没有标准功能"}))}}]),a}(f.PureComponent);function re(e){var t=e.visible,a=e.okLoading,n=e.onOkHandle,r=e.onCancelHandle,o=e.tslValue;return y.a.createElement(O.a,{visible:t,className:"self-modal",width:500,title:"查看物模型TSL",okText:"导出模型文件",confirmLoading:a,onOk:n,cancelText:"关闭",onCancel:r,centered:!0,closable:!1,destroyOnClose:!0,maskClosable:!1},y.a.createElement("div",{style:{padding:"12px"}},y.a.createElement(N.a,{mode:"json",theme:"github",height:"500px",width:"100%",value:o,showGutter:!1,showPrintMargin:!1,readOnly:!0,name:"tsl-edit",editorProps:{$blockScrolling:!0}})))}var oe,ie=a("v7xx"),ce=(a("1T97"),a("4VDu"));a("rwTb");function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=fe(e);if(t){var r=fe(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return de(this,a)}}function de(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?me(e):t}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function he(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(a),!0).forEach((function(t){be(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ve(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ge(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ee=c.a.TabPane,Oe=["2"];var Ie=Object(b.connect)((function(e){return{productProtocolLists:(t=e.getIn(["product","productProtocolLists"]).toJS().filter((function(e){return!!e.dataTypeId})),a=m()(t),a.map((function(e){var t=e.list,a=e.structDefVOList,n=e.arrayDefVOList,r=[];return t&&(r=ve(t)),n&&(r=[].concat(ve(r),ve(n.map((function(e){return he(he({},e),{},{functionDataType:10,complex:"array"})}))))),a&&(r=[].concat(ve(r),ve(a.map((function(e){return he(he({},e),{},{functionDataType:11,complex:"struct"})}))))),he(he({},e),{},{allList:r})}))),productBaseInfo:e.getIn(["product","productBaseInfo"]).toJS(),productConfigSteps:e.getIn(["product","productConfigSteps"]).toJS()};var t,a}),(function(e){return{getProtocolLists:function(t){return e(v.a.getProtocolLists(t))},getConfigSteps:function(t){return e(v.a.getConfigSteps(t))},triggerDebugger:function(t,a){return e(v.a.triggerDebugger(t,a))}}}))(oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(d,e);var t,a,l,u=pe(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=u.call(this,e)).state={curDataTypeId:void 0,curEditProtocol:[],editVisible:!1,addVisible:!1,deleteVisible:!1,addType:"custom",addSLoading:!1,addCLoading:!1,templates:[],protocolDictionaryCommonList:void 0,toBeDelectedProtocols:[],toBeDelectedIndex:[],deleteConfirmLoading:!1,editConfirmLoading:!1,addConfirmLoading:!1,isChangeProductId:!1,isChangeDataTypeId:!1,isComplex:!1,curDataTypeName:"",tslModalVisible:!1,tslComfirmLoading:!1,tslValue:"",curTemplates:[]},t.getConfigSteps=function(){var e=t.props.productConfigSteps,a=Object(E.o)(e,1);return a&&(t.configs=a),a},t.openEditProtocol=function(e){var a=t.state,n=a.isChangeProductId,r=a.protocolDictionaryCommonList,o=a.isChangeDataTypeId,i=t.getCurOperateProtocolAndIndex(e),c=i.curProtocol,l=i.protocolIndex,s=i.isBitDefList,u=i.isComplex;n||o||void 0===r?t.getProtocolDictionaryCommonList().then((function(e){var a=e.data;t.setState({protocolDictionaryCommonList:a,curEditProtocol:c,editProtocolIndex:l,isChangeDataTypeId:!1,isChangeProductId:!1,editVisible:!0,isBitDefList:s,isComplex:u})})):t.setState({curEditProtocol:c,editProtocolIndex:l,editVisible:!0,isBitDefList:s,isComplex:u})},t.editHandle=function(e){var a=t.getListByDataTypeId(),n=t.state,r=n.editProtocolIndex,o=n.isBitDefList,i=n.isComplex;if(o)r.forEach((function(t,n){a.list[t].bitDefList=e}));else{var c,l="list";"array"===i?(l="arrayDefVOList",e[0].byteDefVO&&(e[0].functionDataType=e[0].byteDefVO.functionDataType)):"struct"===i&&(l="structDefVOList"),a[l]=a[l].filter((function(e,t){return!r.includes(t)})),(c=a[l]).splice.apply(c,[r[0],0].concat(ve(e)))}t.setState({isBitDefList:!1,isComplex:!1,editConfirmLoading:!0}),t.saveProtocol(a).finally((function(){t.setState({editConfirmLoading:!1,editVisible:!1})}))},t.getTemplates=function(e){return Object(g.c)(g.a.getProtocolTemplates,{productId:e},{needVersion:1.1}).then((function(e){var t=e.data.lists;return t||(t=[]),t}))},t.openAddProtocol=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"custom",a=t.props.productId;if("standard"===e)t.setState({addSLoading:!0}),t.getTemplates(a).then((function(a){t.setState({addType:e,addVisible:!0,templates:a})})).finally((function(){t.setState({addSLoading:!1})}));else{var n=t.state,r=n.isChangeProductId,o=n.protocolDictionaryCommonList,i=n.isChangeDataTypeId,c=n.curDataTypeId;r||i||void 0===o?(t.getProtocolDictionaryCommonList(!0).then((function(a){var n=a.data;t.setState({protocolDictionaryCommonList:n,addType:e,isChangeDataTypeId:!1,isChangeProductId:!1,addVisible:!0})})).finally((function(){t.setState({addCLoading:!1})})),t.getTemplates(a).then((function(e){var a=[];e[0]&&e[0].templateList&&(a=e[0].templateList.filter((function(e){return e.dataType==c}))),t.setState({curTemplates:a[0]&&a[0].list||[]})}))):t.setState({addType:e,addVisible:!0})}},t.addCustomHandle=function(e,a){var n=t.getListByDataTypeId(),r=n.list||[];if(a){var o=e[0],i=o.functionDataType,c=o.byteDefVO,l=["arrayDefVOList","structDefVOList"][i-10];10==i&&c&&(e[0].functionDataType=c.functionDataType),n[l]=[].concat(ve(n[l]||[]),ve(e))}else n.list=[].concat(ve(r),ve(e));t.setState({addConfirmLoading:!0}),t.saveProtocol(n).finally((function(){t.setState({addConfirmLoading:!1,addVisible:!1})}))},t.deleteOkHandle=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=t.state,n=a.toBeDelectedProtocols,r=a.toBeDelectedIndex,o=a.isComplex,i=t.props.productProtocolLists,c=n[0].dataTypeIndex;e&&t.setState({deleteConfirmLoading:!0});var l=m()(i[c]),s="list";"array"===o?s="arrayDefVOList":"struct"===o&&(s="structDefVOList"),l[s]=l[s].filter((function(e,t){return!r.includes(t)})),t.saveProtocol(l).finally((function(){e&&t.setState({deleteVisible:!1,deleteConfirmLoading:!1,isComplex:!1})}))},t.goToNextTab=function(){var e=t.props,a=e.history,n=e.productId;a.push({pathname:"/open/base/product/edit/".concat(n,"/projectSelect")})},t.goToPreTab=function(){var e=t.props,a=e.history,n=e.productId;a.push({pathname:"/open/base/product/edit/".concat(n,"/info")})},t.exportProtocols=function(){var e=t.props.productId,a=g.a.exportProtocol+"?productId="+e;window.location.href=a},t.openTSLModal=function(){var e=t.props.productId;Object(g.c)(g.a.getTsl,{productId:e}).then((function(e){t.setState({tslModalVisible:!0,tslValue:JSON.stringify(JSON.parse(e.data||""),null,"\t")})}))},t.exportTSL=function(){var e=t.props.productId,a=g.a.exportTsl+"?productId="+e;window.location.href=a},t.closeTsl=function(){t.setState({tslModalVisible:!1,tslComfirmLoading:!1})},t.recordProtocols={},t.columns=[{title:"来源区分",dataIndex:"isTemplateField",key:"isTemplateField",width:"90px",render:function(e,t,a){var n=t.isTemplateField;return y.a.createElement("span",null,n?"标准":"自定义")}},{title:"数据名称",dataIndex:"propertyName",key:"propertyName",render:function(e,a,n){var r=a.recordResult,o={children:t.dealWhatToShow(a,n,"propertyName"),props:{}};return r.isArray&&(r.isFirst?o.props.rowSpan=r.length:o.props.rowSpan=0),o}},{title:"数据标识",dataIndex:"property",key:"property",render:function(e,a,n){return t.dealWhatToShow(a,n,"property")}},{title:"数据类型",dataIndex:"javaType",key:"javaType",render:function(e,a,n){return t.dealWhatToShow(a,n,"javaType",!0)}},{title:"数据区分",dataIndex:"actionType",key:"actionType",render:function(e,t,a){var n=t.actionType;return y.a.createElement("span",null,void 0!==n?["设备状态上传","设备信息通知","设备告警"][n]:"--")}},{title:"物标签",dataIndex:"thingLabelName",key:"thingLabelName"},{title:"数据长度",dataIndex:"length",key:"length",render:function(e,a,n){return t.dealWhatToShow(a,n,"length")}},{title:"数据属性",dataIndex:"propertyValueDesc",key:"propertyValueDesc",render:function(e,a,n){return t.dealWhatToShow(a,n,"propertyValueDesc")}},{title:"操作",key:"action",width:"110px",render:function(e,a,n){var r=a.property,o=a.recordResult,c={children:["Base_Null_Reserved_Null","updateFlag"].includes(r)?y.a.createElement("span",null):y.a.createElement("span",null,y.a.createElement("a",{onClick:t.openEditProtocol.bind(me(t),a)},"编辑"),y.a.createElement(i.a,{type:"vertical"}),y.a.createElement("a",{onClick:t.deleteProtocol.bind(me(t),a)},"删除")),props:{}};return o.isArray&&(o.isFirst?c.props.rowSpan=o.length:c.props.rowSpan=0),c}}],t.columnsSript=[{title:"名称",dataIndex:"name",width:"20%"},{title:"备注",dataIndex:"remark",width:"30%"},{title:"更新时间",dataIndex:"updateTime",width:"30%"},{title:"操作",width:"10%",render:function(){return y.a.createElement("a",null,"下载")}}],t}return t=d,(a=[{key:"componentDidMount",value:function(){var e=this;this.getProtocols(),setTimeout((function(){if(!e.getConfigSteps()){var t=e.props,a=t.productId,n=t.getConfigSteps,r={},o={productId:a,type:1};e.configs&&(r=e.configs.configInfo,o.stepId=e.configs.stepId),o.configInfo=JSON.stringify(he(he({},r),{},{loaded:!0})),Object(g.d)(g.a.saveConfigSteps,o).then((function(e){return n(a)}))}}),1e4)}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.productId,a=e.productProtocolLists,n=this.state.curDataTypeId;t&&t!==this.lastProductId&&(void 0!==this.lastProductId&&this.setState({isChangeProductId:!0}),this.getProtocols()),void 0===n&&a.length>0&&(n=a[0].dataTypeId,console.log("ProductProtocols -> componentDidUpdate -> curDataTypeId",n),this.lastDataTypeId=n,this.setState({curDataTypeId:n}))}},{key:"dealWhatToShow",value:function(e,t,a,n){var r=this,o=[e];return e.bitDefList&&(o=e.bitDefList),"struct"===e.complex&&"propertyValueDesc"===a&&(o=e.byteDefVOList),y.a.createElement("div",{key:t},o.map((function(e,t){return n?y.a.createElement("div",{key:t},Object(E.q)(e)):y.a.createElement("div",{key:t},r.getWhatToshow(e,a)||"")})))}},{key:"getWhatToshow",value:function(e,t){var a=e.complex;if("length"===t){if("array"===a&&e.byteDefVO&&e.byteDefVO.length)return e.length*e.byteDefVO.length;if("struct"===a&&e.byteDefVOList&&e.byteDefVOList.length>0){var n=0;return e.byteDefVOList.forEach((function(e){n+=e.length})),n}}if("propertyValueDesc"===t&&"array"===a){var r=e.length,o=e.byteDefVO;return"".concat(r,"个").concat(Object(E.q)(o),"子元素")}return e[t]}},{key:"isArrayInRecordProtocols",value:function(e){var t=e.propertyName,a=e.dataTypeIndex,n=e.property,r=this.recordProtocols["protocolsInDatatype".concat(a)],o={isArray:!1,isFirst:!1,length:null,array:null};return t&&r&&r[t]&&p()(r[t])&&(o.isArray=!0,o.array=r[t],o.length=r[t].length,o.length>0&&r[t][0].property===n&&(o.isFirst=!0)),o}},{key:"getProtocolDictionaryCommonList",value:function(e){var t=this.state.curDataTypeId,a=this.props.productBaseInfo.deviceTypeId;if(t)return e&&this.setState({addCLoading:!0}),Object(g.c)(g.a.getProtocolDictionaryCommonList,{dataTypeId:t,deviceTypeId:a});Object(h.a)({type:"error",message:"缺少参数",description:"没有获取到dataTypeId"})}},{key:"getProtocols",value:function(){var e=this.props,t=e.productId,a=e.getProtocolLists,n=e.getConfigSteps;t&&(this.lastProductId=t,a(t),n(t))}},{key:"filterProtocol",value:function(e,t,a){var n=this,r=e.filter((function(e){return t?e.isTemplateField:!e.isTemplateField}));return m()(r).map((function(e){return e.dataTypeIndex=a,e.recordResult=n.isArrayInRecordProtocols(e),e}))}},{key:"recordSamePropertyNameProtocols",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=m()(t);a.forEach((function(t,a){var n={};if(t.allList){t.allList.forEach((function(e){var t=e.propertyName;t&&(e.dataTypeIndex=a,n[t]?p()(n[t])?n[t].push(e):n[t]=[n[t],e]:n[t]=e)}));var r=e.recordProtocols["protocolsInDatatype".concat(a)];e.recordProtocols["protocolsInDatatype".concat(a)]=r?Object.assign({},r,n):n}}))}},{key:"recordExistedPropertyNames",value:function(){var e=this.props.productProtocolLists,t=this.state.curDataTypeId,a=[];if(e&&void 0!==t){var n=this.getListByDataTypeId();n&&n.allList&&n.allList.forEach((function(e){a.push(e.propertyName)}))}this.existedPropertyNames=a}},{key:"getTable",value:function(e,t){var a=this.filterProtocol(e.allList||[],1,t),n=this.filterProtocol(e.allList||[],0,t),r=[].concat(ve(a),ve(n));r=Object(E.c)(r).filter((function(e){return"updateFlag"!==e.property}));var i=m()(this.columns);return this.props.canOperate||i.pop(),2==this.state.curDataTypeId&&(i[4].title="是否包含",i[4].width="90px"),r.length>0?y.a.createElement(o.a,{pagination:!1,columns:i,className:"ant-table-fixed protocol-content-table",dataSource:r}):y.a.createElement(k.a,{tipText:"暂无功能数据"})}},{key:"tabChangeHandle",value:function(e){var t=e.dataTypeId,a=e.dataTypeName;void 0!==this.lastDataTypeId&&this.lastDataTypeId!=t&&(this.lastDataTypeId=t,this.setState({isChangeDataTypeId:!0})),this.setState({curDataTypeId:t,curDataTypeName:a})}},{key:"getListByDataTypeId",value:function(){var e=this.props.productProtocolLists,t=this.state.curDataTypeId,a=e.filter((function(e){return e.dataTypeId==t}));return 0===a.length&&console.log("未取到对应类型的协议 - curDataTypeId -"+t),m()(a[0]||{})}},{key:"getIndexInProtocolList",value:function(e,t,a){var n=this.getListByDataTypeId(),r=m()(e);if(t){var o=[];return n.list.forEach((function(e,t){r.forEach((function(e){return delete e.dataTypeIndex})),s()(e.bitDefList,r)&&o.push(t)})),o}var i=n.list;"array"===a&&(i=n.arrayDefVOList),"struct"===a&&(i=n.structDefVOList);var c=i.map((function(e){return e.property}));return e.map((function(e){return c.indexOf(e.property)}))}},{key:"isBitProtocol",value:function(e){return!!e.bitDefList}},{key:"getCurOperateProtocolAndIndex",value:function(e){var t,a,n=[e],r=!1;if(this.isBitProtocol(e)){var o=e.dataTypeIndex;n=m()(e.bitDefList).map((function(e){return e.dataTypeIndex=o,e})),r=!0}return{curProtocol:a=(t=this.isArrayInRecordProtocols(e)).isArray?m()(t.array):m()(n),protocolIndex:this.getIndexInProtocolList(a,r,e.complex),isBitDefList:r,isComplex:e.complex||!1}}},{key:"close",value:function(e){this.setState(be({},e,!1))}},{key:"deleteProtocol",value:function(e,t){var a=this.getCurOperateProtocolAndIndex(e),n=a.curProtocol,r=a.protocolIndex,o=a.isComplex;this.setState({deleteVisible:!0,toBeDelectedProtocols:n,toBeDelectedIndex:r,isComplex:o})}},{key:"updateflagToEnd",value:function(e){var t=e.map((function(e){return e.property})),a=[];a[0]=t.indexOf("Base_Null_Reserved_Null"),a[1]=t.indexOf("updateFlag");var n=e.filter((function(e){return!["Base_Null_Reserved_Null","updateFlag"].includes(e.property)}));return a[0]>0&&n.push(e[a[0]]),a[1]>0&&n.push(e[a[1]]),n}},{key:"dealUpdateProtocols",value:function(e,t,a){var n=this,r=m()(e),o=e.map((function(e){return e.property})),i={},c=this.props.productBaseInfo;if(c&&1===c.protocolFormat&&!a){if(t)o.indexOf("updateFlag")<0&&r.push({ignore:!1,javaType:"HEXSTRING",length:0,property:"updateFlag",propertyName:"功能变更",propertyValueDesc:"",propertyValueType:"",unit:""}),o=(r=this.updateflagToEnd(r)).map((function(e){return e.property})),0!==(i=Object(E.g)(r)).add&&o.indexOf("Base_Null_Reserved_Null")<0&&(r.push({bitDefList:null,commonName:"基础功能_保留",functionDataType:1,gap:null,ignore:!0,isSigned:0,isTemplateField:0,javaType:"STRING",length:0,loop:null,mulriple:null,property:"Base_Null_Reserved_Null",propertyName:"保留字",propertyValueDesc:"",propertyValueType:"ENUM",remark:"",unit:null}),o=r.map((function(e){return e.property}))),r.forEach((function(e){t&&("Base_Null_Reserved_Null"==e.property&&(e.length>=i.sub&&i.sub>0?(e.length-=i.sub,n.countType="sub"):(e.length+=i.add,n.countType="add")),"updateFlag"==e.property&&(e.length="sub"===n.countType?i.subupdateflag:i.addupdateflag,n.countType=void 0))}));else{var l=r.map((function(e){return e.length})).reduce((function(e,t){return e+t}))%16;if(0!==l)if(o.indexOf("Base_Null_Reserved_Null")<0)r.push({bitDefList:null,commonName:"基础功能_保留",functionDataType:1,gap:null,ignore:!0,isSigned:0,isTemplateField:0,javaType:"STRING",length:16-l,loop:null,mulriple:null,property:"Base_Null_Reserved_Null",propertyName:"保留字",propertyValueDesc:"",propertyValueType:"ENUM",remark:"",unit:null}),o=r.map((function(e){return e.property}));else{var s=r[o.indexOf("Base_Null_Reserved_Null")];s.length>=l?s.length-=l:s.length+=l}}o.indexOf("Base_Null_Reserved_Null")>0&&0===r[o.indexOf("Base_Null_Reserved_Null")].length&&(r=r.filter((function(e){return"Base_Null_Reserved_Null"!==e.property})))}return r.forEach((function(e){e.propertyValueType||"updateFlag"===e.property||a||(e.propertyValueDesc?e.propertyValueDesc.indexOf("~")>-1?e.propertyValueType="RANGE":e.propertyValueDesc.indexOf("|")>-1?e.propertyValueType="ENUM":e.propertyValueType="BOTH":e.propertyValueType="BOTH"),delete e.dataTypeIndex,delete e.key,delete e.recordResult,delete e.complex,e.bitDefList&&e.bitDefList.forEach((function(e){delete e.dataTypeIndex}))})),r}},{key:"saveProtocol",value:function(e){var t=this,a=e.dataType,n=e.dataTypeId,r=e.productId,o=e.protocolFormat,i=e.protocolId,c=e.list,l=e.arrayDefVOList,s=void 0===l?null:l,u=e.structDefVOList,p=void 0===u?null:u;return c=this.dealUpdateProtocols(c,Oe.includes(""+a)),s&&s.length>0&&(s=this.dealUpdateProtocols(s,!1,!0)),p&&p.length>0&&(p=this.dealUpdateProtocols(p,!1,!0)),Object(g.d)(g.a.saveProtocol,{dataType:a,dataTypeId:n,productId:r,protocolFormat:o,protocolId:i,list:c,arrayDefVOList:s,structDefVOList:p},{needJson:!0,noInstance:!0}).then((function(e){t.getProtocols()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isComplex,o=t.curEditProtocol,i=t.editVisible,l=t.addVisible,s=t.editConfirmLoading,u=t.addConfirmLoading,p=t.deleteVisible,d=t.curDataTypeName,m=t.curDataTypeId,f=t.addType,h=t.addSLoading,b=t.addCLoading,v=t.templates,g=t.curTemplates,E=t.deleteConfirmLoading,O=t.protocolDictionaryCommonList,I=t.tslModalVisible,w=t.tslComfirmLoading,P=t.tslValue,D=this.props,C=D.productProtocolLists,S=D.productId,A=D.productBaseInfo,k=D.canOperate,j=A.deviceTypeId,_=A.protocolFormat;return this.recordSamePropertyNameProtocols(C),this.recordExistedPropertyNames(C),y.a.createElement("div",{className:"product-protocol-wrapper"},C.length?y.a.createElement("div",{className:"export-wrapper"},y.a.createElement("span",{onClick:this.openTSLModal},y.a.createElement(r.a,{type:"book"})," 查看物模型TSL"),y.a.createElement("span",{onClick:this.exportProtocols},y.a.createElement(r.a,{type:"export"})," 导出完整协议")):null,y.a.createElement(c.a,{onChange:function(t){e.tabChangeHandle(C[t])},defaultActiveKey:"0"},C.map((function(t,a){return y.a.createElement(Ee,{tab:t.dataTypeName,key:a},y.a.createElement("div",{className:"protocol-item gray-bg"},y.a.createElement("div",{className:"standard-protocols"},k&&y.a.createElement("div",{style:{overflow:"hidden"}},y.a.createElement(n.a,{className:"float-right",onClick:function(){e.openAddProtocol("standard")},type:"ghost",loading:h},"标准功能添加"),y.a.createElement(n.a,{onClick:function(){e.openAddProtocol("custom")},className:"float-right",style:{marginRight:"24px"},loading:b,type:"ghost"},"自定义功能添加")),e.getTable(t,a)),3==_&&y.a.createElement("div",{className:"protocol-script"},y.a.createElement("span",{className:"protocol-name"},"数据解析"),y.a.createElement("div",{className:"protocol-script-content"},y.a.createElement("div",{className:"protocol-script-title"},"数据解析脚本"),y.a.createElement("div",{className:"protocol-script-example"},y.a.createElement("span",null,"支持开发者自定义解析脚本，将设备上下行的数据，分别解析成平台定义的标准数据格式。"),y.a.createElement(n.a,{type:"primary",className:"protocol-script-btn",onClick:e.props.triggerDebugger.bind(e,!0,S)},"调试上传脚本"))))))}))),k?y.a.createElement("div",{className:"com-footer"},y.a.createElement(ie.a,{preHandle:this.goToPreTab,nextHandle:this.goToNextTab})):null,l&&y.a.createElement(y.a.Fragment,null,"custom"===f?y.a.createElement(te,{modalType:"add",visible:l,addCustomHandle:this.addCustomHandle,protocolDictionaryCommonList:O,deviceTypeId:j,existedPropertyNames:this.existedPropertyNames,dataTypeId:m,dataTypeName:d,confirmLoading:u,templates:g,onCancel:this.close.bind(this,"addVisible")}):y.a.createElement(ne,{visible:l,templates:v,productId:S,dataTypeId:m,getProtocols:this.getProtocols.bind(this),onCancel:this.close.bind(this,"addVisible")})),i&&y.a.createElement(te,{modalType:"edit",curEditProtocol:o,isComplex:a,protocolDictionaryCommonList:O,deviceTypeId:j,dataTypeId:m,dataTypeName:d,existedPropertyNames:this.existedPropertyNames.filter((function(e){return e!==o[0].propertyName})),editHandle:this.editHandle,visible:i,confirmLoading:s,onCancel:this.close.bind(this,"editVisible")}),p&&y.a.createElement(ae,{visible:p,deleteConfirmLoading:E,deleteOkHandle:this.deleteOkHandle,propertyName:this.state.toBeDelectedProtocols[0].propertyName,deleteCancelHandle:this.close.bind(this,"deleteVisible")}),re&&y.a.createElement(re,{visible:I,okLoading:w,onOkHandle:this.exportTSL,onCancelHandle:this.closeTsl,tslValue:P}),y.a.createElement(ce.a,{productId:S,canOperate:k}))}}])&&se(t.prototype,a),l&&se(t,l),d}(f.Component))||oe},"1T97":function(e,t,a){},"2uph":function(e,t,a){"use strict";a.d(t,"a",(function(){return be}));a("0AG1"),a("Jya7"),a("rsdX"),a("vxpS"),a("oCJ0"),a("L8Gl"),a("eVIo"),a("EO5n"),a("ThRY"),a("h4PX"),a("6wma"),a("8OWE"),a("L4wC"),a("KzFV");var n=a("q+fq"),r=a.n(n),o=a("ivud"),i=(a("cBt3"),a("tpKs"),a("2Kt1"),a("gsuU"),a("72Pr"),a("O4+N")),c=(a("Y5Ue"),a("xc0u")),l=(a("bqBU"),a("4OHk")),s=(a("7fbo"),a("LCR/")),u=(a("rJH4"),a("nKmx")),p=a("Zx9X"),d=a.n(p),m=a("CvKH"),f=a.n(m),y=(a("SoGA"),a("mtIt"),a("SnyF"),a("n1yf"),a("Nlzp")),h=a("DgvE"),b=a("mU7p"),v=(a("U4At"),a("KiF4")),g=(a("6rnn"),a("d6B9")),E=(a("HzvR"),a("2n5t")),O=a("Sxid"),I=a.n(O),w=a("9Sz/"),P=a.n(w),D=(a("M+R0"),a("N4lb"),a("kCMX"),a("P2RN")),C=a("FC04");function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return k(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){T(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=V(e);if(t){var r=V(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return M(this,a)}}function M(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B=E.a.Option,F=g.a.create({name:"form_in_modal-h5-add"})(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(i,e);var t,a,n,o=R(i);function i(){var e;N(this,i);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=o.call.apply(o,[this].concat(a))).state={isShowAddItem:!1,protocolItemIndex:"",selectedProtocolList:[],ownUsedPropertys:[]},e.handleSubmit=function(t){var a=e.props,n=a.onAddOkHandle,r=a.type,o=e.state.selectedProtocolList;t.preventDefault(),e.props.form.validateFields((function(e,t){if(!e){if(0==o.length)return Object(D.a)({type:"error",message:"参数缺失",description:"请先添加数据点"}),!1;var a=o.map((function(e){var t=e.property,a=e.propertyName,n=e.functionDataType,r=e._functionDataType;return{property:t,propertyName:a,functionDataType:r||n}}));n(_(_({},t),{},{protocolList:JSON.stringify(a)}),r)}}))},e.showAddItem=function(){e.setState({isShowAddItem:!0})},e.hideAddItem=function(){e.setState({isShowAddItem:!1,protocolItemIndex:""})},e.deleteProtocol=function(t){var a=e.state,n=a.selectedProtocolList,r=a.ownUsedPropertys,o=n[t].propertyName,i=[],c=n.filter((function(e){return e.propertyName!=o||(i.push(e.property),!1)})),l=I()(r,i);e.setState({selectedProtocolList:c,ownUsedPropertys:l})},e.addProtocol=function(){var t=e.state,a=t.selectedProtocolList,n=t.protocolItemIndex,r=t.ownUsedPropertys;if(""===n)return Object(D.a)({type:"error",message:"参数缺失",description:"请先选择一个控制协议字段"}),!1;var o=e.protocolLists.filter((function(t){return t.propertyName==e.protocolNames[n]})),i=[],c=o.map((function(e){var t=e.property,a=e.propertyName,n=e.functionDataType,r=e.propertyValueDesc,o=e.byteDefVOList,c=e.byteDefVO,l=e.length,s=e._functionDataType;return i.push(t),{property:t,propertyName:a,functionDataType:n,propertyValueDesc:r,byteDefVOList:o,byteDefVO:c,length:l,_functionDataType:s}}));e.setState({selectedProtocolList:[].concat(A(a),A(c)),isShowAddItem:!1,protocolItemIndex:"",ownUsedPropertys:[].concat(A(r),i)})},e.dealProtocols=function(){var t=e.props.productProtocolLists,a=(void 0===t?[]:t)[0],n=a.list,r=a.structDefVOList,o=a.arrayDefVOList,i=e.state.ownUsedPropertys,c=n||[];return r&&(c=c.concat(r.map((function(e){return e._functionDataType=e.functionDataType,e.functionDataType=11,e})))),o&&(c=c.concat(o.map((function(e){return e._functionDataType=e.functionDataType,e.functionDataType=10,e})))),c=c.filter((function(e){return!(i.includes(e.property)||["Base_Null_Reserved_Null","updateFlag"].includes(e.property)||["5","6","7"].includes(""+e.functionDataType))})),e.protocolLists=c,e.protocolNames=P()(c.map((function(e){return e.propertyName}))),e.protocolNames},e.getProtocolOptions=function(){return e.dealProtocols().map((function(e,t){return r.a.createElement(B,{key:t,value:t},e)}))},e.changeProtocolItem=function(t){e.setState({protocolItemIndex:t})},e.showSelectedProtocolList=function(e){var t=f()(e),a=[],n={};return t.forEach((function(e,t){var r=e.propertyName;e._index=t,void 0!==n[r]?a[n[r]].push(e):(n[r]=t,a[t]=[e])})),a},e.getProtocolDes=function(e){var t=e.propertyValueDesc,a=e.functionDataType,n=e.byteDefVO,r=void 0===n?{}:n,o=e.byteDefVOList,i=void 0===o?{}:o,c=e.length;return 10===a?"".concat(c,"个").concat(Object(h.q)(r),"子元素"):11===a&&i?i.map((function(e){return e.propertyValueDesc})).join(";"):t},e}return t=i,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.usedPropertys,a=e.type,n=e.operateService,r={ownUsedPropertys:f()(t)};"edit"===a&&(r.selectedProtocolList=f()(n.timerServiceDetails)),this.setState(r)}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.form,o=t.onCancel,i=t.type,l=t.operateService,s=t.addLoading,p=this.state,d=p.isShowAddItem,m=p.protocolItemIndex,f=p.selectedProtocolList,y=n.getFieldDecorator,b=this.showSelectedProtocolList(f),O="";return"edit"===i&&(O=l.serviceName),r.a.createElement(v.a,{visible:a,className:"self-modal",width:800,title:"添加云端定时功能",centered:!0,closable:!1,footer:null,onCancel:o,destroyOnClose:!0,maskClosable:!1},r.a.createElement(g.a,{labelCol:{span:3},wrapperCol:{span:21},labelAlign:"left",onSubmit:this.handleSubmit},r.a.createElement(g.a.Item,{label:"功能名称"},y("serviceName",{rules:[{required:!0,message:"请输入功能名称"},{max:20,message:"最大输入长度为20"}],initialValue:O})(r.a.createElement(u.a,{placeholder:"不超过20个字符"}))),r.a.createElement("div",{className:"ant-row ant-form-item"},r.a.createElement("div",{className:"ant-col ant-col-3 ant-form-item-label"},r.a.createElement("label",{className:" text-right ant-form-item-required"},"关联协议")),r.a.createElement("div",{className:"ant-col ant-col-21 "},b.length>0&&r.a.createElement("div",{className:"protocol-item-area"},b.map((function(t,a){return r.a.createElement("div",{className:"time-protocol-item",key:a},r.a.createElement("p",{className:"item-name"},t[0].propertyName),r.a.createElement("div",{className:"item-p-l"},t.map((function(t,a){return r.a.createElement("p",{key:a},r.a.createElement("span",null,t.property),r.a.createElement("span",{className:"margin-l-16"},Object(h.q)(t)),r.a.createElement("span",{className:"margin-l-16"},e.getProtocolDes(t)))}))),r.a.createElement("span",{style:{top:"12px"},onClick:function(){return e.deleteProtocol(t[0]._index)},className:"re-select-property"},"删除"))}))),d&&r.a.createElement("div",{className:"add-time-service-wrapper"},r.a.createElement("div",{className:"protocol-select-area"},r.a.createElement(E.a,{value:m,onChange:function(t){return e.changeProtocolItem(t)},style:{width:300}},r.a.createElement(B,{key:"",value:""},"请选择需要关联的协议"),this.getProtocolOptions())),r.a.createElement("div",{className:"control-btns"},r.a.createElement(c.a,{size:"small",onClick:this.addProtocol,type:"primary"},"确认"),r.a.createElement(c.a,{className:"margin-l-16",size:"small",onClick:this.hideAddItem,type:"default"},"删除"))),r.a.createElement("a",{className:"select-a",onClick:this.showAddItem},"添加数据点"))),r.a.createElement(g.a.Item,{wrapperCol:{span:24}},r.a.createElement("div",{className:"form-in-modal-ok-cancel-btn"},r.a.createElement(c.a,{type:"primary",loading:s,htmlType:"submit"},"确认"),r.a.createElement(c.a,{type:"default",onClick:o},"取消")))))}}])&&L(t.prototype,a),n&&L(t,n),i}(r.a.Component));function H(e){var t=e.visible,a=e.updateOkHandle,n=e.updateCancelHandle,o=e.operate,i=e.serviceName,c=e.updateLoading,l=null;switch(o){case 1:l={title:"发布云端定时功能",desc:"即将发布的功能",tip:"功能发布后，APP上可以看到并启用，是否确认发布？",needWarnIcon:!1};break;case 2:l={title:"删除云端定时功能",desc:"即将删除的功能",tip:"功能删除后将无法找回，是否确认删除？",needWarnIcon:!0};break;case 3:l={title:"下线云端定时功能",desc:"即将下线的功能",tip:"功能下线后将无法看到，是否确认下线？",needWarnIcon:!0}}return r.a.createElement(C.a,{visible:t,modalOKHandle:function(){return a(o)},modalCancelHandle:n,targetName:i,title:l.title,descGray:!0,needWarnIcon:l.needWarnIcon,descText:l.desc,tipText:l.tip,confirmLoading:c})}var K=a("cu44"),U=a("2kug");function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return G(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){Y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function z(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=te(e);if(t){var r=te(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return $(this,a)}}function $(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ae,ne=u.a.Search,re=[{title:"创建定时功能"},{title:"发布定时功能"},{title:"APP端配置"},{title:"APP端应用"}],oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(u,e);var t,a,n,o=Z(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=o.call(this,e)).state={cloudAddVisible:!1,cloudAddLoading:!1,cloudUpdateVisible:!1,cloudUpdateLoading:!1,cloudPublishVisible:!1,cloudOffLineVisible:!1,cloudEditVisible:!1,usedPropertys:[],operate:"publish"},t.SearchInputHandle=function(e){var a=t.props;(0,a.getTimeServiceList)({productId:a.productId,serviceName:e})},t.openModal=function(e,a,n){var r=Y({},e,!0);"cloudAddVisible"!==e&&(r.operateService=a),n&&(r.operate=n),t.setState(r)},t.addOkHandle=function(e,a){var n=t.props,r=n.productId,o=n.getTimeServiceList,i=t.state.operateService,c=Q(Q({},e),{},{productId:r}),l="cloudAddVisible";"edit"===a&&(c.serviceId=i.serviceId,l="cloudEditVisible"),t.setState({cloudAddLoading:!0}),Object(y.d)(y.a.saveTimeService,c).then((function(e){t.close(l),o({productId:r})})).finally((function(){t.setState({cloudAddLoading:!1})}))},t.updateOkHandle=function(e){var a=t.state.operateService,n=t.props.getTimeServiceList,r=a.serviceId,o=a.productId;t.setState({cloudUpdateLoading:!0}),Object(y.d)(y.a.updateTimeService,{serviceId:r,productId:o,type:e}).then((function(e){t.close("cloudUpdateVisible"),n({productId:o})})).finally((function(){t.setState({cloudUpdateLoading:!1})}))},t.h5PageColumns=[{title:"功能名称",dataIndex:"serviceName",key:"serviceName",width:200},{title:"关联协议",dataIndex:"propertyName",width:160,key:"propertyName",render:function(e,t){return r.a.createElement("div",null,t.timerServiceDetails.map((function(e,t){return r.a.createElement("div",{key:t},e.propertyName)})))}},{title:"协议数据标识",dataIndex:"property",key:"property",render:function(e,t){return r.a.createElement("div",null,t.timerServiceDetails.map((function(e,t){return r.a.createElement("div",{key:t},e.property)})))}},{title:"协议数据类型",dataIndex:"functionDataType",key:"functionDataType",width:160,render:function(e,t){return r.a.createElement("div",null,t.timerServiceDetails.map((function(e,t){return r.a.createElement("div",{key:t},Object(h.q)(e))})))}},{title:"状态",dataIndex:"status",key:"status",width:120,render:function(e,t){return r.a.createElement("span",{className:"cloud-statu-".concat(t.status)},b.e[t.status])}},{title:"操作",key:"action",width:200,render:function(e,a){return r.a.createElement("span",null,"1"!=a.status?r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:t.openModal.bind(ee(t),"cloudEditVisible",a)},"编辑"),r.a.createElement(s.a,{type:"vertical"}),r.a.createElement("a",{onClick:t.openModal.bind(ee(t),"cloudUpdateVisible",a,1)},"发布"),r.a.createElement(s.a,{type:"vertical"}),r.a.createElement("a",{onClick:t.openModal.bind(ee(t),"cloudUpdateVisible",a,2)},"删除")):r.a.createElement("a",{onClick:t.openModal.bind(ee(t),"cloudUpdateVisible",a,3)},"下线"))}}],t}return t=u,(a=[{key:"compareServiceList",value:function(){var e=this.props.timeServiceList;if(!this.lastTimeServiceList||!d()(this.lastTimeServiceList,e)){this.lastTimeServiceList=f()(e);var t=[];e.forEach((function(e){t=[].concat(W(e.timerServiceDetails.map((function(e){return e.property}))),W(t))})),this.setState({usedPropertys:t})}}},{key:"componentDidMount",value:function(){this.compareServiceList()}},{key:"componentDidUpdate",value:function(e,t){this.compareServiceList()}},{key:"close",value:function(e){this.setState(Y({},e,!1))}},{key:"dealList",value:function(e){var t=f()(e);return Object(h.c)(t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.cloudAddVisible,n=t.cloudAddLoading,o=t.cloudUpdateVisible,s=t.cloudUpdateLoading,u=t.cloudEditVisible,p=t.usedPropertys,d=t.operateService,m=t.operate,y=this.props,h=y.timeServiceList,b=y.productProtocolLists,v=y.canOperate,g=this.dealList(h),E=b.filter((function(e){return 2==e.dataType})),O=f()(this.h5PageColumns);return v||O.pop(),r.a.createElement("div",{className:"app-control-wrapper"},r.a.createElement(K.a,{style:{margin:"0 0 24px"},title:"使用流程"},r.a.createElement("div",{className:"use-service-flow-wrapper"},r.a.createElement(U.a,{type:3,flowLists:re}),r.a.createElement("div",{className:"extra-descs"},r.a.createElement("div",{className:"descs-item"},r.a.createElement("p",null,"可以使用产品的控制数据功能点，创建定时功能。")),r.a.createElement("div",{className:"descs-item"},r.a.createElement("p",null,"定时功能确认无误后，可以发布到C家或您创建的APP上。")),r.a.createElement("div",{className:"descs-item"},r.a.createElement("p",null,"在APP端基于已经发布的定时功能，配置定时任务。")),r.a.createElement("div",{className:"descs-item"},r.a.createElement("p",null,"满足定时任务的触发条件后，自动发送指令控制设备。"))))),r.a.createElement("section",{style:{marginTop:0},className:"h5-manage-wrapper section-bg"},r.a.createElement("h3",null,"定时功能"),r.a.createElement("div",{className:"page-manage"},r.a.createElement("div",{className:"tool-area"},r.a.createElement("div",{className:"searchBox"},r.a.createElement(ne,{enterButton:!0,maxLength:20,onSearch:function(t){return e.SearchInputHandle(t)},placeholder:"请输入功能名称查找"})),v&&r.a.createElement(c.a,{type:"primary",style:{float:"right"},onClick:function(){return e.openModal("cloudAddVisible")}},r.a.createElement(l.a,{type:"plus"}),"创 建")),r.a.createElement("div",{className:"h5-manage-tab"},r.a.createElement(i.a,{columns:O,className:"ant-table-fixed",dataSource:g,pagination:!1})))),a&&r.a.createElement(F,{visible:a,productProtocolLists:E,type:"add",addLoading:n,onAddOkHandle:this.addOkHandle,usedPropertys:p,onCancel:this.close.bind(this,"cloudAddVisible")}),u&&r.a.createElement(F,{visible:u,type:"edit",addLoading:n,productProtocolLists:E,onAddOkHandle:this.addOkHandle,operateService:d,usedPropertys:p,onCancel:this.close.bind(this,"cloudEditVisible")}),o&&r.a.createElement(H,{visible:o,updateOkHandle:this.updateOkHandle,operate:m,updateLoading:s,serviceName:d.serviceName,updateCancelHandle:this.close.bind(this,"cloudUpdateVisible")}))}}])&&z(t.prototype,a),n&&z(t,n),u}(n.Component),ie=a("EZYW"),ce=a("MeRu");function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(Object(a),!0).forEach((function(t){pe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function de(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=he(e);if(t){var r=he(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return ye(this,a)}}function ye(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var be=Object(o.connect)((function(e){return{timeServiceList:e.getIn(["product","timeServiceList"]).toJS(),productProtocolLists:e.getIn(["product","productProtocolLists"]).toJS(),productConfigSteps:e.getIn(["product","productConfigSteps"]).toJS()}}),(function(e){return{getTimeServiceList:function(t){return e(Object(ie.getTimeServiceList)(t))},getProtocolLists:function(t){return e(Object(ie.getProtocolLists)(t))},getConfigSteps:function(t){return e(Object(ie.getConfigSteps)(t))}}}))(ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(i,e);var t,a,n,o=fe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).goBackServiceSelect=function(){t.props.history.goBack()},t.enableCloud=function(){var e=t.props,a=e.productId,n=e.getConfigSteps,r={},o={productId:a,type:3};t.configs&&(r=t.configs.configInfo,o.stepId=t.configs.stepId),o.configInfo=JSON.stringify(ue(ue({},r),{},{enableCloud:!0})),Object(y.d)(y.a.saveConfigSteps,o).then((function(e){return n(a)}))},t.getConfigSteps=function(){var e=t.props.productConfigSteps,a=Object(h.o)(e,3);return a&&(t.configs=a),a},t.compareProductId(),t}return t=i,(a=[{key:"compareProductId",value:function(){var e=this.props,t=e.productId,a=e.getTimeServiceList,n=e.getProtocolLists,r=e.getConfigSteps;t&&this.lastProductId!==t&&(this.lastProductId=t,a({productId:t}),n(t),r(t))}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.productId;e.productId!==a&&this.compareProductId()}},{key:"render",value:function(){var e=this.props,t=e.timeServiceList,a=e.productProtocolLists,n=e.getTimeServiceList,o=e.productId,i=e.noNeedTitle,c=void 0!==i&&i,l=e.canOperate,s=this.getConfigSteps();return s&&s.configInfo&&s.configInfo.enableCloud,r.a.createElement("div",{className:"app-control"},!c&&r.a.createElement(ce.a,{backHandle:this.goBackServiceSelect,title:"云端定时服务"}),r.a.createElement(oe,{canOperate:l,productId:o,timeServiceList:t,productProtocolLists:a,getTimeServiceList:n}))}}])&&de(t.prototype,a),n&&de(t,n),i}(r.a.Component))||ae},"3SHs":function(e,t,a){},"4VDu":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_object_get_prototype_of_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("0AG1"),core_js_modules_es_object_get_prototype_of_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_object_get_prototype_of_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("Jya7"),core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("vxpS"),core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ThRY"),core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("h4PX"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("6wma"),core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("8OWE"),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("L4wC"),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("KzFV"),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__),antd_es_modal_style_css__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("U4At"),antd_es_modal__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("KiF4"),antd_es_input_style_css__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("rJH4"),antd_es_input__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("nKmx"),antd_es_button_style_css__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("Y5Ue"),antd_es_button__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("xc0u"),antd_es_select_style_css__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("HzvR"),antd_es_select__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("2n5t"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("n1yf"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_17__),react__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("q+fq"),react__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_18__),_components_Notification__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("P2RN"),react_redux__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("ivud"),_store__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("4EZn");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var a,n=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Option=antd_es_select__WEBPACK_IMPORTED_MODULE_16__.a.Option,defaultJS="// 设备上报数据\nfunction RawDataToclinkJs (rawdata){\n    var jsonObj;\n    // todo\n    return jsonObj;\n}\n// 设备接受数据\nfunction clinkJsToRawData (jsonObj){\n    var rawdata;\n    // todo\n    return rawdata;\n}\n",defaultRawData="0x00022333",defaultJsonObj='{\n    "timestamp":1490858478589,\n    "data":{\n            "breathRate":0\n    }\n}',DebuggerModal=function(_React$Component){_inherits(DebuggerModal,_React$Component);var _super=_createSuper(DebuggerModal);function DebuggerModal(){var _this;_classCallCheck(this,DebuggerModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_this.state={type:1,result:"",dataType:2},_this.handleChange=function(e){_this.setState({type:e})},_this.changeDataType=function(e){_this.setState({dataType:e})},_this.handleRun=function(){var _this$state=_this.state,type=_this$state.type,dataType=_this$state.dataType,value=_this.refJs.state.value,input=_this.refInput.state.value;try{var funObj;try{eval(value+'funObj = {clinkJsToRawData: typeof clinkJsToRawData === "function" ? clinkJsToRawData: undefined,\n                RawDataToclinkJs: typeof RawDataToclinkJs === "function" ? RawDataToclinkJs: undefined}')}catch(e){throw new Error("脚本错误:\n"+e)}var clinkJsToRawData=funObj.clinkJsToRawData,RawDataToclinkJs=funObj.RawDataToclinkJs,fun=2===type?clinkJsToRawData:RawDataToclinkJs,result;try{if("function"!=typeof fun)throw new Error("".concat(2===type?"clinkJsToRawData 函数不存在":"RawDataToclinkJs 函数不存在"));result=fun(input,dataType),"object"===_typeof(result)&&(result=JSON.stringify(result,null,4))}catch(e){throw new Error("脚本错误:\n"+e)}_this.setState({result:result||"undefined"})}catch(e){_this.setState({result:e})}},_this.handleSubmit=function(){var productId=_this.props.productId,value=_this.refJs.state.value;try{var funObj;try{eval(value+'funObj = {clinkJsToRawData: typeof clinkJsToRawData === "function" ? clinkJsToRawData: undefined,\n                RawDataToclinkJs: typeof RawDataToclinkJs === "function" ? RawDataToclinkJs: undefined}')}catch(e){throw new Error("脚本错误:\n"+e)}var clinkJsToRawData=funObj.clinkJsToRawData,RawDataToclinkJs=funObj.RawDataToclinkJs;clinkJsToRawData&&RawDataToclinkJs?_this.props.submitJsContent(productId,value):Object(_components_Notification__WEBPACK_IMPORTED_MODULE_19__.a)({type:"error",duration:3,message:"脚本必须包含clinkJsToRawData和RawDataToclinkJs两个函数"})}catch(e){_this.setState({result:e})}},_this.handleClose=function(){_this.props.triggerDebugger(!1)},_this}return _createClass(DebuggerModal,[{key:"componentWillUpdate",value:function(e){var t=e.jsContent;t!==this.props.jsContent&&this.refJs.setState({value:t})}},{key:"componentWillReceiveProps",value:function(e){!e.visible&&this.props.visible&&(this.setState({result:""}),this.refInput.setState({value:""}),this.refJs.setState({value:defaultJS}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.type,n=t.result,r=t.dataType,o=this.props,i=o.visible,c=o.canOperate;return react__WEBPACK_IMPORTED_MODULE_18__.createElement(antd_es_modal__WEBPACK_IMPORTED_MODULE_10__.a,{visible:i,width:1100,wrapClassName:"debugger-modal",centered:!0,maskClosable:!1,footer:react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",{className:"debugger-modal-footer"},react__WEBPACK_IMPORTED_MODULE_18__.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_14__.a,{onClick:this.handleRun,disabled:!c},"运行"),react__WEBPACK_IMPORTED_MODULE_18__.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_14__.a,{onClick:this.handleSubmit,disabled:!c},"提交")),onCancel:this.handleClose},react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",{className:"debugger-modal-edit"},react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",{className:"debugger-modal-fun"},react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",{className:"debugger-modal-title"},react__WEBPACK_IMPORTED_MODULE_18__.createElement("span",null,"编辑脚本："),react__WEBPACK_IMPORTED_MODULE_18__.createElement("span",null,"语法： Js脚本")),react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",{className:"debugger-modal-input edit"},react__WEBPACK_IMPORTED_MODULE_18__.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_12__.a.TextArea,{placeholder:defaultJS,defaultValue:defaultJS,ref:function(t){return e.refJs=t},maxLength:10485760}))),react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",{className:"debugger-modal-fun"},react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",{className:"debugger-modal-title"},react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_18__.createElement("span",null,"模拟输入："),react__WEBPACK_IMPORTED_MODULE_18__.createElement("span",null,"输入模拟数据，点击执行，查看解析结果")),react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_18__.createElement("span",null,"模拟类型："),react__WEBPACK_IMPORTED_MODULE_18__.createElement(antd_es_select__WEBPACK_IMPORTED_MODULE_16__.a,{placeholder:"选择模拟数据类型",defaultValue:1,size:"small",style:{width:120},onChange:this.handleChange},react__WEBPACK_IMPORTED_MODULE_18__.createElement(Option,{key:"1",value:1},"设备上报数据"),react__WEBPACK_IMPORTED_MODULE_18__.createElement(Option,{key:"2",value:2},"设备接受数据")))),react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",{className:"debugger-modal-input input"},react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",{className:"data-type"},react__WEBPACK_IMPORTED_MODULE_18__.createElement("span",null,"数据类型："),react__WEBPACK_IMPORTED_MODULE_18__.createElement(antd_es_select__WEBPACK_IMPORTED_MODULE_16__.a,{placeholder:"选择数据类型",value:r,size:"small",style:{width:120},onChange:this.changeDataType},react__WEBPACK_IMPORTED_MODULE_18__.createElement(Option,{key:"2",value:2},"控制数据"),react__WEBPACK_IMPORTED_MODULE_18__.createElement(Option,{key:"3",value:3},"运行数据"),react__WEBPACK_IMPORTED_MODULE_18__.createElement(Option,{key:"4",value:4},"故障数据"))),react__WEBPACK_IMPORTED_MODULE_18__.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_12__.a.TextArea,{placeholder:1===a?defaultRawData:defaultJsonObj,defaultValue:"",ref:function(t){return e.refInput=t},maxLength:10485760})))),react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",{className:"debugger-modal-result"},react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",{className:"debugger-modal-fun"},react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",{className:"debugger-modal-title"},react__WEBPACK_IMPORTED_MODULE_18__.createElement("span",null,"运行结果：")),react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",{className:"debugger-modal-input"},react__WEBPACK_IMPORTED_MODULE_18__.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_12__.a.TextArea,{placeholder:2===a?defaultRawData:defaultJsonObj,defaultValue:"",value:n})),react__WEBPACK_IMPORTED_MODULE_18__.createElement("div",{className:"attention"},react__WEBPACK_IMPORTED_MODULE_18__.createElement("p",null,"提示：",react__WEBPACK_IMPORTED_MODULE_18__.createElement("br",null),"1、仅支持提交后的脚本才能被平台调用，草稿状态的脚本不能被调用；",react__WEBPACK_IMPORTED_MODULE_18__.createElement("br",null),"2、请使用真实设备与平台进行上下行消息通信，以验证平台能顺利调用脚本，解析上下行数据；",react__WEBPACK_IMPORTED_MODULE_18__.createElement("br",null),"3、产品发布后不支持更改提交后的脚本，请谨慎调试运行后提交；")))))}}]),DebuggerModal}(react__WEBPACK_IMPORTED_MODULE_18__.Component),mapStateToProps=function(e){return{visible:e.getIn(["product","visibleDebugger"]),jsContent:e.getIn(["product","jsContent"])}},mapDispatchToProps=function(e){return{triggerDebugger:function(t){return e(_store__WEBPACK_IMPORTED_MODULE_21__.a.triggerDebugger(t))},submitJsContent:function(t,a){return e(_store__WEBPACK_IMPORTED_MODULE_21__.a.submitJsContent(t,a))}}};__webpack_exports__.a=Object(react_redux__WEBPACK_IMPORTED_MODULE_20__.connect)(mapStateToProps,mapDispatchToProps)(DebuggerModal)},"84Fp":function(e,t,a){"use strict";a("0AG1"),a("Jya7"),a("rsdX"),a("vxpS"),a("oCJ0"),a("L8Gl"),a("eVIo"),a("EO5n"),a("3EvH"),a("ThRY"),a("h4PX"),a("6wma"),a("8OWE"),a("L4wC"),a("KzFV"),a("rJH4");var n=a("nKmx"),r=(a("6rnn"),a("d6B9")),o=(a("n1yf"),a("q+fq")),i=a("ivud"),c=(a("yIqo"),a("rwTb")),l=a("v7xx"),s=a("S18n"),u=a("EZYW"),p=a("cu44"),d=a("DndG"),m=a("rVDo"),f=a("fs4x"),y=a("nXTq"),h=a.n(y),b=a("YNSc");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){I(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=A(e);if(t){var r=A(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S(this,a)}}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=r.a.Item,j=!1,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(d,e);var t,a,i,u=C(d);function d(){var e;w(this,d);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=u.call.apply(u,[this].concat(a))).handleNext=function(){e.props.form.validateFields((function(t,a){if(!t){var n=e.props.productBaseInfo,r=e.productIcon.getFileListUrl();e.props.updateInfo(O(O({},a),{},{productId:n.productId,productIcon:r&&r.length?r[0]:""})).then((function(){j=!1,e.forceUpdate((function(){e.props.history.push("./protocols")}))}))}}))},e.passwordInputFocusHandel=function(){e.passwordRef.input.removeAttribute("readonly"),e.ssidRef.input.removeAttribute("readonly")},e.componentDidUpdate=function(){e.setIcon()},e}return t=d,(a=[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setIcon()}))}},{key:"componentWillUnmount",value:function(){j=!1}},{key:"setIcon",value:function(){var e=this.props.productBaseInfo.productIcon,t=void 0===e?"":e;this.setedIcon!==t&&this.productIcon&&(this.setedIcon=t,this.productIcon.setState({fileList:t?[{uid:1e3*Math.random(),name:"",status:"done",url:t}]:[]}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.form,i=t.canOperate,u=void 0===i||i,d=a.getFieldDecorator,y={labelCol:{span:3},wrapperCol:{span:10}},v=this.props.productBaseInfo,E=v.productId,O=v.productName,I=v.productCode,w=v.allCategoryName,P=v.accessModeName,D=v.productClassName,C=v.bindTypeName,S=v.protocolFormatName,A=v.netTypeName,_=v.deviceKey,T=v.productIdHex,N=v.ssid,L=v.ssidPassword,x=v.radiocastName,R=v.productClassId,M=v.gatewayCommType,V=v.isRelatedGateway,B=v.accessModeId,F=v.authorityType,H=v.bindType,K=v.netTypeId,U=v.productIcon,J="";J=0===B?2===F?"高级认证":1===F?"中级认证":"初级认证":1===B?0===F?"无认证":"有认证":"初级认证";var W=1===H&&3===K||2===H,G=1===K;return o.createElement(r.a,{className:"product-info-module"},o.createElement(f.a,{promptBoolean:j}),o.createElement(p.a,{title:"基础信息"},o.createElement("div",{className:"product-info-item-content"},o.createElement(k,g({label:"产品ID"},y),o.createElement("span",null,E),o.createElement("span",{className:"small-size"},"由系统自动分配的产品唯一标示码")),u?o.createElement(k,g({label:"产品名称"},y),d("productName",{initialValue:O||"",rules:[{required:!0,message:"产品名称不能为空"}]})(o.createElement(n.a,{placeholder:"请输入产品名称",maxLength:20,style:{width:468}}))):o.createElement(k,g({label:"产品名称"},y),o.createElement("span",null,O||"")),u?o.createElement(k,g({label:"产品型号"},y),d("productCode",{initialValue:I||""})(o.createElement(n.a,{placeholder:"请输入产品型号",maxLength:20,style:{width:468}}))):o.createElement(k,g({label:"产品型号"},y),o.createElement("span",null,I||"")),o.createElement(k,g({label:"所属分类"},y),o.createElement("span",null,w)),o.createElement(k,g({label:"产品图标"},y,{className:"clearfix"}),u?o.createElement(m.a,{onRef:function(t){return e.productIcon=t},maxCount:1,preferSize:"64*64",format:".gif,.jpeg,.jpg,.png",maxSize:.5}):o.createElement("div",{className:"icon-wrapper-in-detail"},o.createElement("img",{src:U||h.a,alt:""}))),o.createElement(k,g({label:"接入方式"},y),o.createElement("span",null,P),o.createElement("span",{className:"small-size"},0===B?"设备直连C-Life平台":"产品不直连C-Life云，已接入的云平台与C-Life云对接")),o.createElement(k,g({label:"产品类型"},y),o.createElement("span",null,D)),1===R&&o.createElement(k,g({label:"网关通信方案"},y),o.createElement("span",null,M)))),o.createElement(p.a,{title:"技术信息"},o.createElement("div",{className:"product-info-item-content"},o.createElement(k,g({label:"通信方式"},y),o.createElement("span",null,C)),o.createElement(k,g({label:"协议格式"},y),o.createElement("span",null,S)),o.createElement(k,g({label:"配网方式"},y),o.createElement("span",null,A)),o.createElement(k,g({label:"产品密钥"},y),o.createElement(s.a,{label:_,copy:!0,tip:"点击复制"}),o.createElement("span",{className:"small-size"},"由系统自动分配的密码")),o.createElement(k,g({label:"产品编码"},y),o.createElement("span",null,T),o.createElement("span",{className:"small-size"},"由系统自动分配的设备唯一编码")),o.createElement(k,g({label:"安全认证级别"},y),o.createElement("span",null,J)),0===R&&o.createElement(k,g({label:"关联网关"},y),o.createElement("span",null,1===V?"是":"否")))),W||G?o.createElement(p.a,{title:"技术方案"},o.createElement("div",{className:"product-info-item-content"},G?o.createElement("div",null,u?o.createElement(k,g({label:o.createElement(c.a,{label:"AP-SSID",tip:o.createElement("span",null,"AP配网时的密码"," ",o.createElement("a",null,"使用指南"))})},y),d("ssid",{initialValue:N||"",rules:[{pattern:/^\w{1,20}$/,message:"1-20个英文字母或数字"}]})(o.createElement(n.a,{maxLength:20,placeholder:"选填1-20个英文字母或数字",ref:function(t){return e.ssidRef=t},onFocus:this.passwordInputFocusHandel,readOnly:!0}))):o.createElement(k,g({label:o.createElement(c.a,{label:"AP-SSID",tip:o.createElement("span",null,"AP配网时的密码"," ",o.createElement("a",null,"使用指南"))})},y),o.createElement("span",null,N||"")),u?o.createElement(k,g({label:"AP-密码"},y),d("ssidPassword",{initialValue:L||"",rules:[{pattern:/^\w{8,20}$/,message:"8-20个英文字母或数字"}]})(o.createElement(n.a.Password,{maxLength:20,placeholder:"选填仅8-20个英文字母或数字",ref:function(t){return e.passwordRef=t},onFocus:this.passwordInputFocusHandel,readOnly:!0})),o.createElement("span",{className:"explain-text"},"配网时AP的SSID和密码")):o.createElement(k,g({label:"AP-密码"},y),o.createElement("span",null,L||""),o.createElement("span",{className:"explain-text"},"配网时AP的SSID和密码"))):null,W?u?o.createElement(k,g({label:"广播名"},y),d("radiocastName",{initialValue:x||""})(o.createElement(n.a,{placeholder:"请输入广播名",maxLength:20,style:{width:468}}))):o.createElement(k,g({label:"广播名"},y),o.createElement("span",null,x||"")):null)):null,o.createElement(b.a,{productIdHex:T||"${YourProductKey}",type:0}),u&&o.createElement("div",{className:"com-footer"},o.createElement(l.a,{preBtn:!1,nextHandle:this.handleNext})))}}])&&P(t.prototype,a),i&&P(t,i),d}(o.Component);t.a=Object(i.connect)((function(e){return{productBaseInfo:e.getIn(["product","productBaseInfo"]).toJS()}}),(function(e){return{updateInfo:function(t){return e(Object(u.updateInfo)(t))}}}))(r.a.create({onValuesChange:function(){console.log(11111),j=!0}})(Object(d.withRouter)(_)))},"8uAk":function(e,t){e.exports="data:image/png;base64,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"},CfbC:function(e,t,a){"use strict";var n=a("q+fq"),r=a.n(n),o=a("ivud"),i=a("EZYW"),c=(a("0AG1"),a("Jya7"),a("rsdX"),a("vxpS"),a("oCJ0"),a("L8Gl"),a("eVIo"),a("EO5n"),a("ThRY"),a("6wma"),a("8OWE"),a("L4wC"),a("KzFV"),a("72Pr"),a("O4+N")),l=(a("Y5Ue"),a("xc0u")),s=(a("bqBU"),a("4OHk")),u=(a("7fbo"),a("LCR/")),p=(a("rJH4"),a("nKmx")),d=a("CvKH"),m=a.n(d),f=(a("h4PX"),a("SoGA"),a("mtIt"),a("n1yf"),a("M+R0"),a("SnyF"),a("P2RN")),y=a("DgvE"),h=a("Nlzp"),b=a("FC04"),v=a("cu44"),g=a("2kug"),E=(a("z5lt"),a("mU7p")),O=(a("tpKs"),a("2Kt1"),a("gsuU"),a("auFq"),a("g2HK")),I=(a("+SM3"),a("SE39")),w=(a("U4At"),a("KiF4")),P=(a("kvrU"),a("BPQb")),D=(a("6rnn"),a("d6B9")),C=(a("sbOf"),a("spxj")),S=(a("HzvR"),a("2n5t")),A=a("cGgO"),k=a.n(A),j=a("tXLG"),_=a("8QW8"),T=a("TL2v"),N=(a("TOmL"),a("g8ug")),L=a.n(N);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return M(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){F(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function U(e,t,a){return t&&K(e.prototype,t),a&&K(e,a),e}function J(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Q(e);if(t){var r=Q(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return q(this,a)}}function q(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=S.a.Option,z=C.a.TabPane,X=D.a.create({name:"form_in_modal-h5-add",onFieldsChange:function(e,t,a){var n=t.projectType;n&&e.changeProjectTypeInAddForm(n.value)}})(function(e){J(a,e);var t=G(a);function a(){var e;H(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={templateId:null},e.handleSubmit=function(t){var a=e.props,n=a.form,r=a.h5AddOkHandle,o=a.sdkEdit,i=a.templateDetail;t.preventDefault(),n.validateFields((function(t,a){if(!t){var n=a.projectType,c=B({},a);if("2"==n)i&&i.templateId&&(c.templateId=i.templateId),r(c,n);else{if(!(e.zixInput&&e.zixInput.state&&e.zixInput.state.fileList&&e.zixInput.state.fileList[0]))return Object(f.a)({type:"error",message:"参数缺失",description:"请选择文件后再进行创建"}),!1;e.zixInput.upToTencentCloud((function(){if(c.filePath=e.zixInput.state.fileList[0].filesrc,!c.filePath)return Object(f.a)({type:"error",message:"上传文件失败",description:"未获取到上传文件路径"}),!1;o&&(c.projectId=o.projectId),r(c,n)}))}}}))},e}return U(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.form,o=t.onCancel,i=t.h5AddLoading,c=t.projectType,s=t.sdkEdit,u=t.openTemplateMarket,d=t.templateDetail,m=n.getFieldDecorator,f=null;d&&(f=d.page1);var y=s?"编辑SDK开发页面":"创建H5页面";return r.a.createElement(w.a,{visible:a,className:"self-modal",width:800,title:y,centered:!0,closable:!1,footer:null,onCancel:o,destroyOnClose:!0,maskClosable:!1},r.a.createElement(D.a,{labelCol:{span:3},wrapperCol:{span:21},labelAlign:"left",onSubmit:this.handleSubmit},r.a.createElement(T.a,{style:{marginBottom:8},desc:["您可以选择任意一种方式创建H5页面"]}),r.a.createElement(D.a.Item,{label:"产品名称"},m("projectName",{rules:[{required:!0,message:"请输入产品名称"},{max:20,message:"最大输入长度为20"}],initialValue:s?s.projectName:""})(r.a.createElement(p.a,{placeholder:"不超过20个字符"}))),r.a.createElement(D.a.Item,{label:"开发模式"},m("projectType",{rules:[{required:!0,message:"请选择开发类型"}],initialValue:c})(r.a.createElement(P.a.Group,{disabled:!!s},r.a.createElement(P.a,{value:"2"},"在线拖拽"),r.a.createElement(P.a,{value:"1"},"SDK开发")))),r.a.createElement("div",{className:"ant-row ant-form-item"},r.a.createElement("div",{className:"ant-col ant-col-3 ant-form-item-label"}),r.a.createElement("div",{className:"ant-col ant-col-21"},"1"==c?r.a.createElement("div",null,r.a.createElement(j.a,{maxsize:5e3,isNotImg:!0,onRef:function(t){return e.zixInput=t},format:"zix"}),r.a.createElement("div",{style:{marginTop:"12px",color:"rgba(140,140,140,1)"}},r.a.createElement("span",null,"支持zix压缩文件，大小不超过5MB")),s&&r.a.createElement("div",{style:{marginTop:"14px"}},r.a.createElement("span",null,"原开发包链接：".concat(s.filePath||"")))):r.a.createElement("div",{className:"h5-tool-wrapper"},r.a.createElement("div",{className:"blank-wrapper"},f?r.a.createElement("img",{src:f,alt:"模板图片"}):r.a.createElement("span",null,"空白模板")),r.a.createElement("p",{onClick:u},r.a.createElement("a",{className:"choose-template"},"选择H5模板"))))),r.a.createElement(D.a.Item,{wrapperCol:{span:24}},r.a.createElement("div",{className:"form-in-modal-ok-cancel-btn"},r.a.createElement(l.a,{type:"primary",htmlType:"submit",loading:i},s?"保存":"创建"),r.a.createElement(l.a,{type:"default",onClick:o},"取消")))))}}]),a}(r.a.Component)),Z=function(e){J(a,e);var t=G(a);function a(){var e;H(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={selectedAppId:null,status:"1",FormalPubHistory:[],GrayPubHistory:[]},e.getPubHistory=function(t,a){var n=e.props,r=n.productId,o=3==n.publishType?h.a.getGreyPubHistory:h.a.getFormalPubHistory;Object(h.c)(o,{appId:t,productId:r}).then((function(t){e.setState(F({},a,t.data))}))},e.changeStatus=function(t){e.setState({status:t})},e.selectApp=function(t,a){var n=e.state.selectedAppId,r=3==e.props.publishType?"GrayPubHistory":"FormalPubHistory",o={};o.selectedAppId=n===a?null:a,o[r]=[],null!==o.selectedAppId&&e.getPubHistory(a,r),e.setState(o)},e.getAppListDOM=function(t){var a=e.state.selectedAppId,n=e.props.appsByProductId.filter((function(e){return"0"==t?e.isOfficialApp:!e.isOfficialApp})),o="app-icon";return n.length>0?n.map((function(n){var i=n.appIcon,c=n.appName,l=n.appId;return o="app-icon",a==l&&(o+=" active"),r.a.createElement("div",{className:"app-item",key:t+"-"+l,onClick:function(){return e.selectApp(t,l)}},r.a.createElement("div",{className:o},r.a.createElement("img",{src:i||L.a,alt:"应用图标"})),r.a.createElement("span",{className:"gray-text app-name"},c))})):r.a.createElement("div",{style:{textAlign:"center"},className:"explain-text"},"该产品暂无".concat("0"==t?"官方":"私有","应用"))},e.okHandle=function(){var t=e.props.publishOkHandle,a=e.state,n=a.selectedAppId,r=a.status;if(!n)return Object(f.a)({type:"warn",message:"参数缺失",description:"请选中一个APP再进行发布"}),!1;t({newAppIds:""+n,status:r})},e}return U(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel,o=t.projectName,i=t.publishLoading,c=t.publishType,l=this.state,s=l.status,u=l.FormalPubHistory,p=l.GrayPubHistory;return r.a.createElement(w.a,{visible:a,className:"self-modal",width:700,title:"发布H5页面",okText:"发布",confirmLoading:i,onOk:this.okHandle,cancelText:"取消",onCancel:n,centered:!0,closable:!1,maskClosable:!1},r.a.createElement("div",null,r.a.createElement("p",{className:"desc-content"},"即将发布的页面：",r.a.createElement("span",null,o)),r.a.createElement("p",{style:{color:"rgba(0,0,0,0.85)"}},"发布到应用："),r.a.createElement(C.a,{defaultActiveKey:"0"},r.a.createElement(z,{tab:"C-Life官方应用",key:"0"},r.a.createElement("div",{className:"app-items-wrapper"},this.getAppListDOM("0"))),r.a.createElement(z,{tab:"私有应用",key:"1"},r.a.createElement("div",{className:"app-items-wrapper"},this.getAppListDOM("1")))),(3==c?p.length>0:u.length>0)&&r.a.createElement("div",{className:"app-has-pulish"},"该产品已发布过H5页面到该APP，继续发布将替换掉原H5页面"),r.a.createElement("div",{className:"select-update-type"},r.a.createElement("div",null,r.a.createElement("span",null,"发布模式:"),r.a.createElement(S.a,{value:s,onChange:function(t){return e.changeStatus(t)},style:{width:100,marginLeft:8}},r.a.createElement(Y,{value:"1"},"普通升级"),r.a.createElement(Y,{value:"2"},"强制升级"))),r.a.createElement("p",{className:"update-desc gray-text"},"1"==s?"APP将显示升级提醒，用户可以选择升级或不升级":"APP将显示升级提醒，用户必须确认升级才可以继续使用"))))}}]),a}(r.a.Component),$=function(e){J(a,e);var t=G(a);function a(e){var n;H(this,a),(n=t.call(this,e)).selectTemplate=function(){var e=n.props,t=e.onOk,a=e.h5TemplatesLists,r=n.state,o=r.curTempLateIndex,i=r.isKeepEvent;t(a[o],i)},n.changeListIndex=function(e){var t=n.state.curListIndex;n.setState({curListIndex:t+e})},n.changeTemplate=function(e){var t=n.props,a=t.getTemplateDetailAndAnalysis,r=t.h5TemplatesLists,o=n.state.curTempLateIndex,i=r[e].templateId;if(e===o)return!1;a(i).then(h.b.spread((function(t,a){n.setState({curTempLateIndex:e,templateDetail:t.data,templateAnalysis:a.data,images:n.parseImages(t.data),bigImageIndex:0})})))},n.changeImage=function(e){n.setState({bigImageIndex:e})},n.getTemplateChangeDom=function(){var e=n.state,t=e.curTempLateIndex,a=e.curListIndex,o=null,i=[],c=!1,l=n.templateLength-10*a;return l<11?i=Object(y.h)(l):(i=Object(y.h)(10),c=!0),o=i.map((function(e,o){var i=10*a+o,c=t===i?"active":null;return r.a.createElement("span",{className:c,key:o,onClick:function(){return n.changeTemplate(i)}},i+1)})),a&&o.unshift(r.a.createElement("span",{onClick:function(){return n.changeListIndex(-1)},key:-1},"<")),c&&o.push(r.a.createElement("span",{onClick:function(){return n.changeListIndex(1)},key:11},">")),r.a.createElement("div",{className:"item-content flex1"},o)},n.getAnalysisDom=function(){var e=n.state.templateAnalysis,t=e.existOnlyProduct,a=e.existOnlyTemplate,o=e.paramDiffList;return r.a.createElement("div",{className:"analysis-wrapper"},t.length>0&&n.getAnalysisItem(0,t),a.length>0&&n.getAnalysisItem(1,a),k()(o)>0&&n.getAnalysisItem(2,o))},n.getAnalysisItem=function(e,t){if(2===e){var a=Object.keys(t),o=[];a.forEach((function(e){o=[].concat(R(o),R(t[e]))})),t=o}return r.a.createElement("div",{className:"analysis-item"},r.a.createElement("p",null,n.analysisText[e]),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"协议名称"),r.a.createElement("th",null,"协议标识"),r.a.createElement("th",null,"协议类型"),r.a.createElement("th",null,"协议参数"))),r.a.createElement("tbody",null,t.map((function(t,a){var n=t.existType,o=t.propertyName,i=t.property,c=t.propertyValueDesc;return 2===e&&(o=(n?"模板 : ":"产品 : ")+o),r.a.createElement("tr",{key:a},r.a.createElement("td",null,o),r.a.createElement("td",null,i),r.a.createElement("td",null,Object(y.q)(t)),r.a.createElement("td",null,c))})))))},n.changeIsKeepEvent=function(e){n.setState({isKeepEvent:e})};var o=n.props,i=o.h5TemplatesLists,c=o.firstTemplateDetail,l=o.firstTemplateAnalysis;return n.templateLength=i.length,n.pages=[1,2,3,4,5],n.analysisText=["仅存在产品中的协议","仅存在模板中的协议","参数存在差异的协议"],n.state={curTempLateIndex:0,curListIndex:0,templateDetail:c,templateAnalysis:l,curPageIndex:0,images:n.parseImages(c),bigImageIndex:0,isKeepEvent:!0},n}return U(a,[{key:"parseImages",value:function(e){var t=[];return e&&this.pages.forEach((function(a,n){var r=e["page"+a];r&&t.push(r)})),t}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel,o=t.deviceTypeName,i=this.state,c=i.templateDetail,u=i.images,p=i.bigImageIndex,d=i.isKeepEvent,m=null,f=c||{},h=f.templateName,b=f.createTime,v=f.remark;return u.length>0&&(m=u[p]),r.a.createElement(w.a,{visible:a,className:"self-modal",width:900,title:"选择页面模板",onCancel:n,footer:null,centered:!0,maskClosable:!1,closable:!0},this.templateLength?r.a.createElement("div",{className:"template-wrapper flex-row"},r.a.createElement("div",{className:"template-img-area flex-column"},r.a.createElement("div",{className:"big-img gray-border flex1"},r.a.createElement("img",{src:m,alt:"模板图片"})),r.a.createElement("ul",{className:"img-changes-wrapper"},u.map((function(t,a){var n="img-change-item ";return a===p&&(n+="active"),r.a.createElement("li",{className:n,key:a,onClick:function(){return e.changeImage(a)}},r.a.createElement("img",{src:t,alt:"小图标"}))})))),r.a.createElement("div",{className:"template-infos flex1 flex-column"},r.a.createElement("div",{className:"info-item"},r.a.createElement("h2",null,h)),r.a.createElement("div",{className:"info-item flex-row"},r.a.createElement("span",{className:"item-title"},"模板类型 : "),r.a.createElement("div",{className:"flex1"},o)),r.a.createElement("div",{style:{marginBottom:"8px"},className:"info-item flex-row"},r.a.createElement("span",{className:"item-title"},"模板样式 : "),r.a.createElement("div",{className:"item-content flex1"},this.getTemplateChangeDom())),r.a.createElement("div",{className:"template-detail flex1"},r.a.createElement(C.a,{className:"self-tab-wrapper",defaultActiveKey:"0"},r.a.createElement(z,{tab:"模板信息",key:"0"},r.a.createElement("p",null,"发布时间 : ",r.a.createElement("span",null,y.a.utcToDev(b))),r.a.createElement("p",null,"模板说明 : ",r.a.createElement("span",null,v))),r.a.createElement(z,{tab:"模板分析",key:"1"},this.getAnalysisDom()))),r.a.createElement("div",{className:"template-actions"},r.a.createElement(l.a,{type:"primary",onClick:this.selectTemplate,size:"large"},"使用选中的模板"),r.a.createElement(O.a,{checked:d,onChange:function(t){return e.changeIsKeepEvent(t.target.checked)}},r.a.createElement("span",null,"保留模板事件 "),r.a.createElement(I.a,{title:"保留模板所有交互，协议逻辑"},r.a.createElement(s.a,{type:"question-circle",theme:"twoTone"})))))):r.a.createElement(_.a,{tipText:"没有配置模板数据哦！"}))}}]),a}(r.a.Component),ee=a("yiEb"),te=a.n(ee),ae=a("8uAk"),ne=a.n(ae);a("Xwn6");function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ue(e);if(t){var r=ue(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return le(this,a)}}function le(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?se(e):t}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pe=C.a.TabPane,de=S.a.Option,me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(i,e);var t,a,n,o=ce(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={configguide:"",configguidepage:"",configfail:"",configfailpage:"",displayMode:0,helpId:null},t.saveconfigguide=t.saveconfigguide.bind(se(t)),t.saveconfigfail=t.saveconfigfail.bind(se(t)),t.selectConfigGuid=t.selectConfigGuid.bind(se(t)),t.saveHelpImg=t.saveHelpImg.bind(se(t)),t.changeTab=t.changeTab.bind(se(t)),t}return t=i,(a=[{key:"componentDidMount",value:function(){this.getLinkConfiguration(1)}},{key:"getLinkConfiguration",value:function(e){var t=this,a=this.props.productId;Object(h.c)(h.a.getLinkConfiguration,{productId:a,helpType:e}).then((function(a){if(0==a.code){var n=a.data&&a.data.guidePage;if(n){var r=[{file:null,filename:n,filesrc:n}];1==e?(t.setState({configguide:"1",configguidepage:n}),t.addFirmwareInput.setState({fileList:r})):2==e&&(t.setState({configfail:"1",configfailpage:n}),t.visitConfigFailState.setState({fileList:r}))}else 1==e?t.setState({configguide:"2",configguidepage:""}):2==e&&t.setState({configfail:"2",configfailpage:""})}}))}},{key:"getLinkHelpImg",value:function(){var e=this,t=this.props.productId;Object(h.d)(h.a.getLinkHelpImg,{productId:t,version:1.1}).then((function(t){var a=[];if(0==t.code){""==(a=JSON.parse(t.data.imageUrlList))[0]&&(a=[]),e.setState({helpId:t.data.helpId||null});var n=[];a.map((function(e){""!=e&&n.push({file:null,filename:e,filesrc:e})})),e.visitHelpImg.setState({fileList:n})}}))}},{key:"selectConfigGuid",value:function(e,t){var a=this,n={};n[t]=e,this.setState(n,(function(){if(1==e){var n=a.state,r=n.configguidepage,o=n.configfailpage,i=[{file:null,filename:r,filesrc:r}];"configguide"==t&&r?a.addFirmwareInput.setState({fileList:i}):"configfail"==t&&o&&(i.filename=o,i.filesrc=o,a.visitConfigFailState.setState({fileList:i}))}}))}},{key:"saveconfigguide",value:function(){var e=this,t=this.props.productId,a=this.state.configguide,n={productId:t,helpType:1};if("2"==a)Object(h.c)(h.a.netWorkDelete,n).then((function(t){0==t.code&&(Object(f.a)({type:"success",description:"保存成功",duration:2}),e.getLinkConfiguration(1))}));else if("1"==a){var r=this.addFirmwareInput.state.fileList;if(0==r.length)Object(f.a)({description:"请添加图片",duration:2});else{var o=r[0].file;o?(n.guideType=1,n.guideFiles=o,Object(h.d)(h.a.netWorkAddAndUpdate,n,{needFormData:!0}).then((function(t){0==t.code&&(Object(f.a)({type:"success",description:"保存成功",duration:2}),e.getLinkConfiguration(1))}))):Object(f.a)({type:"success",description:"保存成功",duration:2})}}}},{key:"saveconfigfail",value:function(){var e=this,t=this.props.productId,a=this.state.configfail,n={productId:t,helpType:2};if("2"==a)Object(h.c)(h.a.netWorkDelete,n).then((function(t){0==t.code&&(Object(f.a)({type:"success",description:"保存成功",duration:2}),e.getLinkConfiguration(2))}));else if("1"==a){var r=this.visitConfigFailState.state.fileList;if(0==r.length)Object(f.a)({description:"请添加图片",duration:2});else{var o=r[0].file;o?(n.guideType=1,n.guideFiles=o,Object(h.d)(h.a.netWorkAddAndUpdate,n,{needFormData:!0}).then((function(t){0==t.code&&(Object(f.a)({type:"success",description:"保存成功",duration:2}),e.getLinkConfiguration(2))}))):Object(f.a)({type:"success",description:"保存成功",duration:2})}}}},{key:"saveHelpImg",value:function(){var e=this;this.visitHelpImg.upToTencentCloud((function(t){t.length>0?Object(h.d)(h.a.saveLinkHelpImg,{productId:e.props.productId,helpId:e.state.helpId,displayMode:0,imageUrlList:JSON.stringify(t),version:1.1}).then((function(t){0==t.code&&(Object(f.a)({type:"success",description:"保存成功",duration:2}),e.getLinkHelpImg())})):Object(f.a)({description:"请先上传文件",duration:2})}))}},{key:"changeTab",value:function(e){"0"==e?this.getLinkConfiguration(1):"1"==e?this.getLinkConfiguration(2):"2"==e&&this.getLinkHelpImg()}},{key:"render",value:function(){var e=this,t=this.state,a=t.configguide,n=t.configfail;return r.a.createElement("section",{className:"app-help-wrapper section-bg"},r.a.createElement("h3",null,"产品帮助配置"),r.a.createElement("div",{className:"app-help-tab"},r.a.createElement(C.a,{defaultActiveKey:"0",onChange:this.changeTab},r.a.createElement(pe,{tab:"联网配置",key:"0"},r.a.createElement(T.a,{desc:["若您的产品支持Wi-Fi或蓝牙配置能力，建议您设置配置时的用户指引图片，方便用户正确绑定设备。若不配置联网指引，APP将使用默认的联网指引图片。"]}),r.a.createElement(S.a,{value:a,style:{width:200,marginTop:12},onChange:function(t){return e.selectConfigGuid(t,"configguide")}},r.a.createElement(de,{value:"1"},"配置联网指引"),r.a.createElement(de,{value:"2"},"不配置联网指引")),r.a.createElement("div",{className:"img-wrapper guide"},r.a.createElement("img",{src:te.a,alt:"指引图片"})),r.a.createElement("div",{className:"bind-explain"},r.a.createElement("div",{className:"title"},r.a.createElement("span",null),"绑定指引："),r.a.createElement("span",null,"1.长按开关键几秒；"),r.a.createElement("span",null,"2.Wi-Fi指示灯开始闪烁，设备进入绑定状态，如果没有，请重复步骤1；"),r.a.createElement("span",null,"3.点击绑定设备按钮")),"1"==a&&r.a.createElement(j.a,{onRef:function(t){return e.addFirmwareInput=t},maxsize:"500",format:"gif,jpeg,jpg,png",explainTxt:"上传自定义配置文件，页面中部加载该图片，支持gif,jpeg,jpg,png格式，大小不超过500k"}),r.a.createElement(l.a,{style:{float:"right"},type:"",onClick:this.saveconfigguide},"保存")),r.a.createElement(pe,{tab:"联网失败指引",key:"1"},r.a.createElement(T.a,{desc:["可配置联网失败指引信息，在产品联网失败时，用户可以根据指引解决问题顺利联网。若不配置联网失败指引，APP将显示空白。"]}),r.a.createElement(S.a,{value:n,style:{width:200,marginTop:12},onChange:function(t){return e.selectConfigGuid(t,"configfail")}},r.a.createElement(de,{value:"1"},"配置联网失败指引"),r.a.createElement(de,{value:"2"},"不配置联网失败指引")),r.a.createElement("div",{className:"img-wrapper fail"},r.a.createElement("img",{src:ne.a,alt:"联网失败"})),r.a.createElement("div",{className:"bind-explain"},r.a.createElement("span",null,"1.检查Wi-Fi网络是否正常；"),r.a.createElement("span",null,"2.检查设备是否正常进入绑定状态；")),"1"==n&&r.a.createElement(j.a,{onRef:function(t){return e.visitConfigFailState=t},maxsize:"500",format:"gif,jpeg,jpg,png",explainTxt:"上传自定义配置文件，页面中部加载该图片，支持gif,jpeg,jpg,png格式，大小不超过500k"}),r.a.createElement(l.a,{style:{float:"right"},type:"",onClick:this.saveconfigfail},"保存")),r.a.createElement(pe,{tab:"使用帮助",key:"2"},r.a.createElement(T.a,{desc:["若您在APP添加了设备的“使用帮助”菜单,在这里可以维护管理“使用帮助”的素材。"]}),"帮助信息显示样式：",r.a.createElement(S.a,{defaultValue:"1",style:{width:200,marginTop:12,marginLeft:10}},r.a.createElement(de,{value:"1"},"图片轮播")),r.a.createElement("p",{style:{padding:"10px 0 20px 133px",color:"#8C8C8C",fontSize:"14px"}},"最多可添加5张图片素材，客户端左右滑动切换素材;"),"图片素材：",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(j.a,{onRef:function(t){return e.visitHelpImg=t},maxcount:5,maxsize:"500",format:"gif,jpeg,jpg,png",explainTxt:"支持gif,jpeg,jpg,png格式，大小不超过500k，建议素材宽度为375px"}),r.a.createElement(l.a,{style:{float:"right"},type:"",onClick:this.saveHelpImg},"保存")))))}}])&&oe(t.prototype,a),n&&oe(t,n),i}(n.Component);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function he(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(a),!0).forEach((function(t){be(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ve(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ie(e);if(t){var r=Ie(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Oe(this,a)}}function Oe(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var we=p.a.Search,Pe=[{title:"创建H5页面"},{title:"配置产品帮助"},{title:"调试H5页面"},{title:"发布H5页面"}],De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(i,e);var t,a,n,o=Ee(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={h5AddVisible:!1,h5AddLoading:!1,sdkEdit:null,h5CopyVisible:!1,copyLoading:!1,h5DeleteVisible:!1,deleteLoading:!1,h5PublishVisible:!1,publishType:null,publishLoading:!1,h5OffLineVisible:!1,offLineLoading:!1,currentOperateItem:null,projectType:"2",listPager:{pageRows:20,pageIndex:1},projectName:"",h5TemplateVisible:!1,h5TemplatesLists:null,firstTemplateDetail:null,firstTemplateAnalysis:null,isKeepEvent:!0,templateDetail:null},t.addNewPage=function(){var e=t.props.productH5Pages,a=e.maxProjectNum;e.projectNum>=a?Object(f.a)({message:"无法新建",description:"已超出页面支持上限！"}):t.openModal("h5AddVisible")},t.openModal=function(e,a,n){var r=be({},e,!0);if("h5PublishVisible"==e){var o=a.judgeStatu,i=a.projectStatus,c=a.projectType,l=1==o||n?3:4;if("0"==i&&"2"==c)return Object(f.a)({type:"warn",message:"无法发布",description:"此条HTML数据没有保存，请先保存！"}),!1;r.publishType=l}a&&"h5AddVisible"!==e&&(r.currentOperateItem=a),"h5AddVisible"==e&&a&&(r.projectType="1",r.sdkEdit=a),t.setState(r)},t.deleteOkHandle=function(){var e=t.state.currentOperateItem.projectId;t.setState({deleteLoading:!0},(function(){Object(h.d)(h.a.delProject,{projectId:e}).then((function(e){t.setState({h5DeleteVisible:!1}),t.getPages()})).finally((function(){t.setState({deleteLoading:!1})}))}))},t.copyOKHandle=function(){var e=t.state.currentOperateItem,a=t.props.productId,n=e.projectId;t.setState({copyLoading:!0}),Object(h.d)(h.a.copyProject,{projectId:n,productId:a}).then((function(e){t.getPages(),t.setState({h5CopyVisible:!1})})).finally((function(){t.setState({copyLoading:!1})}))},t.offLineOkHandle=function(){var e=t.state.currentOperateItem,a=t.props.productId,n=e.projectId,r=e.judgeStatu,o=h.a.cancelGrayUpdate,i={projectId:n};t.setState({offLineLoading:!0}),"4"==r&&(o=h.a.offlineUiDesign,i.productId=a),Object(h.d)(o,i,{needVersion:"1.1"}).then((function(e){t.getPages(),t.setState({h5OffLineVisible:!1})})).finally((function(){t.setState({offLineLoading:!1})}))},t.publishOkHandle=function(e){var a=t.state,n=a.currentOperateItem,r=a.publishType,o=t.props.productId,i=n.projectId,c=h.a.garyUpdate;"4"==r&&(c=h.a.formalUpdate,e.appId=e.newAppIds,delete e.newAppIds),t.setState({publishLoading:!0}),Object(h.d)(c,he(he({},e),{},{projectId:i,productId:o}),{needVersion:"1.1"}).then((function(e){t.setState({h5PublishVisible:!1}),t.getPages()})).finally((function(){t.setState({publishLoading:!1})}))},t.changeProjectTypeInAddForm=function(e){t.setState({projectType:e})},t.h5AddOkHandle=function(e,a){var n=t.props.productId;t.setState({h5AddLoading:!0}),Object(h.d)(h.a.saveProject,he(he({},e),{},{productId:n}),{needFormData:!0,needVersion:1.1}).then((function(e){var n=t.state,r=n.templateDetail,o=n.isKeepEvent,i=e.data.projectId,c=r?o?2:1:0;t.setState({h5AddVisible:!1,templateDetail:null,isKeepEvent:!0},(function(){2==a?t.goToH5ToolPage(i,c):t.getPages()}))})).finally((function(){t.setState({h5AddLoading:!1})}))},t.goToH5ToolPage=function(e,t){var a=window.location.hostname,n="/wCloud_v2";"open.clife.net"==a||"open.clife.cn"==a||"cms.clife.cn"==a?n="":"test.cms.clife.cn"==a||"pre.cms.clife.cn"==a||"itest.clife.net"==a?n="/pre-wCloud-v2":"localhost"!=a&&"127.0.0.1"!=a||(n="https://200.200.200.50"+n);var r="".concat(n,"/app-developer/page/playground.html#/develop/edit/").concat(e)+(t?"?keepEvent=".concat(t):"");window.location=r},t.getPages=function(){var e=t.state,a=e.listPager,n=e.projectName,r=t.props,o=r.productId;(0,r.getH5Manages)(he(he({},a),{},{projectName:n,productId:o}))},t.openTemplateMarket=function(){t.state.h5TemplatesLists?t.setState({h5TemplateVisible:!0}):t.getTemplateLists().then((function(e){var a=e.data;if(a.length>0){var n=a[0].templateId;t.getTemplateDetailAndAnalysis(n).then(h.b.spread((function(e,n){t.setState({h5TemplatesLists:a,firstTemplateDetail:e.data,firstTemplateAnalysis:n.data},(function(){t.setState({h5TemplateVisible:!0})}))})))}else t.setState({h5TemplatesLists:a},(function(){t.setState({h5TemplateVisible:!0})}))}))},t.getTemplateLists=function(){var e=t.props.productId;return Object(h.d)(h.a.getTemplateMarket,{productId:e},{loading:!0,needVersion:1.1})},t.getTemplateDetailAndAnalysis=function(e){var a=t.props.productId;return h.b.all([Object(h.d)(h.a.getTemplateBaseInfo,{templateId:e},{loading:!0}),Object(h.d)(h.a.getTemplateAnalysis,{productId:a,templateId:e},{loading:!0,needVersion:1.1})])},t.selectTemplate=function(e,a){t.setState({templateDetail:e,isKeepEvent:a,h5TemplateVisible:!1})},t.changePageIndex=function(e){t.setState({listPager:{pageIndex:e,pageRows:20}},t.getPages)},t.SearchInputHandle=function(e){t.setState({projectName:e})},t.judgeH5Status=function(e){var t=e.isGray,a=e.status,n=e.verifyStatus;return"1"==t?3:"0"==a?1:"3"==n?2:"1"==n?4:1},t.h5PageColumns=[{title:"ID",dataIndex:"projectId",key:"projectId"},{title:"页面名称",dataIndex:"projectNameVersion",key:"projectNameVersion"},{title:"模式",dataIndex:"projectType",key:"projectType",render:function(e,t){return r.a.createElement("span",null,E.g[t.projectType])}},{title:"发布应用",dataIndex:"appName",key:"appName"},{title:"状态",dataIndex:"judgeStatu",key:"judgeStatu",render:function(e,t){return r.a.createElement("span",{className:"h5-statu-".concat(t.judgeStatu)},E.a[t.judgeStatu])}},{title:"操作",key:"action",width:260,render:function(e,a){var n=a.judgeStatu,o=a.projectType;return r.a.createElement("span",null,[1,3].includes(n)&&r.a.createElement(r.a.Fragment,null,t.getH5EditDOM(a),r.a.createElement(u.a,{type:"vertical"})),[3].includes(n)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:function(e){return t.openModal("h5PublishVisible",a,!0)}},"更新"),r.a.createElement(u.a,{type:"vertical"})),[1,3].includes(n)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:function(e){return t.openModal("h5PublishVisible",a)}},1===n?"灰度":"发布"),r.a.createElement(u.a,{type:"vertical"})),"2"==o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:function(e){return t.openModal("h5CopyVisible",a)}},"复制"),r.a.createElement(u.a,{type:"vertical"})),[1].includes(n)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:function(e){return t.openModal("h5DeleteVisible",a)}},"删除")),[3,4].includes(n)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:function(e){return t.openModal("h5OffLineVisible",a)}},"下线")))}}],t}return t=i,(a=[{key:"componentDidMount",value:function(){this.getPages()}},{key:"getH5EditDOM",value:function(e){var t=this,a=e.projectId;return"1"==e.projectType?r.a.createElement("a",{onClick:function(){return t.openModal("h5AddVisible",e)}},"编辑"):r.a.createElement("a",{onClick:function(){return t.goToH5ToolPage(a)}},"编辑")}},{key:"close",value:function(e){this.setState(be({},e,!1)),"h5AddVisible"==e&&this.setState({projectType:"2",sdkEdit:null,templateDetail:null})}},{key:"dealList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=this.props.productName,n=m()(t);return n=(n=Object(y.c)(n)).map((function(t){var n=t.projectName,r=t.externalVersion;return t.projectNameVersion=a==n?"".concat(n," - V").concat(r):n,t.judgeStatu=e.judgeH5Status(t),t}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.h5AddVisible,n=t.sdkEdit,o=t.h5AddLoading,i=t.projectType,u=t.h5DeleteVisible,p=t.h5TemplateVisible,d=t.h5CopyVisible,f=t.h5PublishVisible,y=t.h5OffLineVisible,h=t.listPager,E=t.projectName,O=t.currentOperateItem,I=t.deleteLoading,w=t.copyLoading,P=t.offLineLoading,D=t.publishType,C=t.publishLoading,S=t.h5TemplatesLists,A=t.firstTemplateDetail,k=t.firstTemplateAnalysis,j=t.templateDetail,_=this.props,T=_.productH5Pages,N=_.appsByProductId,L=_.productId,x=_.deviceTypeName,R=_.canOperate,M=h.pageIndex,V=h.pageRows,B=T.list,F=T.pager,H=this.dealList(B),K=m()(this.h5PageColumns);return R||K.pop(),r.a.createElement("div",{className:"app-control-wrapper"},r.a.createElement(v.a,{style:{margin:"0 0 24px"},title:"使用流程"},r.a.createElement("div",{className:"use-service-flow-wrapper"},r.a.createElement(g.a,{type:3,flowLists:Pe}),r.a.createElement("div",{className:"extra-descs"},r.a.createElement("div",{className:"descs-item"},r.a.createElement("div",null,"使用","H5开发工具","拖拽生成页面;"),r.a.createElement("div",null,"基于","H5 SDK","开发页面并上传;")),r.a.createElement("div",{className:"descs-item"},r.a.createElement("p",null,"配置产品在APP上的联网指引、使用帮助等信息。")),r.a.createElement("div",{className:"descs-item"},r.a.createElement("p",null,"通过","调试工具","验证H5页面面的控制功能和状态显示是否正常。")),r.a.createElement("div",{className:"descs-item"},r.a.createElement("p",null,"调试完成后，可以将页面发布到C家或您创建的APP上。"))))),r.a.createElement("section",{className:"h5-manage-wrapper section-bg"},r.a.createElement("h3",null,"H5页面"),r.a.createElement("div",{className:"page-manage"},r.a.createElement("div",{className:"tool-area"},r.a.createElement("div",{className:"searchBox"},r.a.createElement(we,{enterButton:!0,value:E,onChange:function(t){return e.SearchInputHandle(t.target.value)},onSearch:this.getPages,maxLength:20,placeholder:"请输入页面名称查找"})),R&&r.a.createElement(l.a,{type:"primary",style:{float:"right",marginRight:"12px"},onClick:this.addNewPage},r.a.createElement(s.a,{type:"plus"}),"新建H5页面")),r.a.createElement("div",{className:"h5-manage-tab"},r.a.createElement(c.a,{columns:K,dataSource:H,pagination:!!F&&{total:F.totalRows,current:M,defaultCurrent:1,pageSize:V,defaultPageSize:20,onChange:function(t){return e.changePageIndex(t)},showTotal:function(e){return r.a.createElement("span",null,"共 ",r.a.createElement("a",null,e)," 条")},showQuickJumper:!0,hideOnSinglePage:!0}})))),r.a.createElement(me,{productId:L}),a&&r.a.createElement(X,{visible:a,h5AddLoading:o,h5AddOkHandle:this.h5AddOkHandle,projectType:i,sdkEdit:n,templateDetail:j,openTemplateMarket:this.openTemplateMarket,changeProjectTypeInAddForm:this.changeProjectTypeInAddForm,onCancel:this.close.bind(this,"h5AddVisible")}),f&&r.a.createElement(Z,{visible:f,appsByProductId:N,projectName:O.projectNameVersion,productId:L,publishType:D,publishOkHandle:this.publishOkHandle,publishLoading:C,onCancel:this.close.bind(this,"h5PublishVisible")}),u&&r.a.createElement(b.a,{visible:u,modalOKHandle:this.deleteOkHandle,modalCancelHandle:this.close.bind(this,"h5DeleteVisible"),targetName:O.projectNameVersion,confirmLoading:I,title:"删除页面",descGray:!0,descText:"即将删除的页面",needWarnIcon:!0,tipText:"页面删除后将无法找回，是否确认删除？"}),d&&r.a.createElement(b.a,{visible:d,modalOKHandle:this.copyOKHandle,modalCancelHandle:this.close.bind(this,"h5CopyVisible"),targetName:O.projectNameVersion,confirmLoading:w,title:"复制页面",descGray:!0,descText:"即将复制的页面",tipText:"将创建与原页面功能一样的新页面，是否确认创建？"}),y&&r.a.createElement(b.a,{visible:y,modalOKHandle:this.offLineOkHandle,modalCancelHandle:this.close.bind(this,"h5OffLineVisible"),targetName:O.projectNameVersion,confirmLoading:P,title:"下线页面",descGray:!0,descText:"即将下线的页面",needWarnIcon:!0,tipText:"页面下线后，已发布的APP将无法拉取到该页面，是否确认下线？"}),p&&r.a.createElement($,{visible:p,h5TemplatesLists:S,firstTemplateDetail:A,firstTemplateAnalysis:k,getTemplateDetailAndAnalysis:this.getTemplateDetailAndAnalysis,deviceTypeName:x,onOk:this.selectTemplate,onCancel:this.close.bind(this,"h5TemplateVisible")}))}}])&&ve(t.prototype,a),n&&ve(t,n),i}(n.Component),Ce=(a("unqh"),a("MeRu"));t.a=Object(o.connect)((function(e){return{productH5Pages:e.getIn(["product","productH5Pages"]).toJS(),productBaseInfo:e.getIn(["product","productBaseInfo"]).toJS(),appsByProductId:e.getIn(["product","appsByProductId"]).toJS(),productConfigSteps:e.getIn(["product","productConfigSteps"]).toJS()}}),(function(e){return{getH5Manages:function(t){return e(Object(i.getH5Manages)(t))},getAppsByProductId:function(t){return e(Object(i.getAppsByProductId)(t))},getConfigSteps:function(t){return e(Object(i.getConfigSteps)(t))}}}))((function(e){var t=e.productId,a=e.getH5Manages,o=e.productH5Pages,i=e.getAppsByProductId,c=e.appsByProductId,l=e.getConfigSteps,s=e.productBaseInfo,u=e.noNeedTitle,p=e.canOperate,d=e.history,m=s.productName,f=s.deviceTypeId,y=s.deviceSubtypeId,h=s.allCategoryName||"";return Object(n.useEffect)((function(){t&&(a({productId:t}),i(t))}),[t,a,i,l]),r.a.createElement("div",{className:"app-control"},!u&&r.a.createElement(Ce.a,{backHandle:function(){d.goBack()},title:"APP控制服务"}),r.a.createElement(De,{productId:t,productName:m,deviceTypeId:f,deviceSubtypeId:y,productH5Pages:o,appsByProductId:c,deviceTypeName:h,noNeedTitle:u,canOperate:p,getH5Manages:a}))}))},DQSZ:function(e,t,a){},"Do1+":function(e,t,a){},DyLZ:function(e,t,a){},"E+3K":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAFm0lEQVRoQ92aW2wUVRiAv392e0WFCkp3qZcYHmwioXiJJvCgDxDjA4WokAgmElC0Qlt90FbQNCIUfdBtAQVEwQgmgAmtD2rgQR7AGwRqMJFEYlTKDmoREGhp3Z3fnGGXtMteptsuZZ2nzc6cc/5vzn8/IwzDVbFDS5w/mK5RHkK4U5WJIpShXO9OL5xT5bQIx1COio+vrPHs6ZwjPUNdXrKd4NZ3tSwaodpxqEaYoUpp4lwiXDT/qVKc5F43ym7Lot3np/33GjmdjSyDBghu0FLt5UV1eAkuvWGBHoU9YvG5OPziE2wdRbhzkfxt7lds0hvlAsGoElCLO9ThEYHpCiUxoc+JxVtSxNvhxdI9GBDPAI/vUN8+m4WqNAEBhKjAdrHYSSG7B7uweRH0MUMdHleYi+IDbBGapgX4YOcciXoB8QRQ8Z5OiPbSpnCv+8aFdvw02s/LT14WyfRMYJ1WEqFZlerYjh70FTGr8zk5kWlsRoCKtXp/JMIu89YFDomP2vBS2Z9p4mzuB9foVI3SqnC32Q2/n9mdS+S7dHOlBQiEdD7C+8YIRdhWdAOLfl0grmHm6rp9sxb3/sMmVea5TkB52q6XranWSwlghFf4GHAsWBaul9W5EjrZvMGQNjiwErAEnkwFkRTAqE00yl5VCrGYe7JWPr2awsfXKm/Vx3DYLkKfz8eDydTpCgBjsJFeDhidtywawrXy5kgIH18z2KovOw5m921/EfclGvYAANdVhvnWeBuj83adzB9J4eNrB1p0q2sTcHBakAf6u9gBAIEWfUaVDcbbFI1maq4N1uvLcQ37LPuNdxJhsV0nG+NjLwOYwOL0cMxVHR/TcuUqvQqd+JxxsU6UfUaVrBImxgPnZYBAqy5XhxUmSNl1MivbhXI5LtCibSbYicWrdq28EQt6YBKzvj5+QygVP5OSRdgpy/RRx2EdyvhcCinCGVEaD6+W9YnrmIitEY6gdBcWcptJAN0dmNCqT0UdNovwiV0n85IJWNWgfwFlwNFcAqhQKXC+o1lGJ1sn0KLbVHnCZ7HgRK1scQECId2lMMvyMTu8VNqSDZzcoCrCqY5mGTelUW8aXcTpvU0SMb8PraJLRHRKkwYPN0l4KIBVDXoGYVRHsxQkDXBrdJYTZZdAm10vs8UUI1GbLhSREsalyirjAAKVqtgKH/mFjRHlG7F4AYiow1rLYuHhVfJhthBVjXoWKE0JYNL5HroQ1BdgnATX6EwnSjvw2cl6cbNBDzvwGsrXhcV833uR5SJssXz0RqLUFFqEDqyU41kDZNgBM295SI28My0f1RJo0ZAqdWLxrF0rG9IBIJy3oCZb4byMM3EIoSDVDrgq36qL1WG9QMgAfKHKwxbMCNfLnrQAXiQYhmdEiKQDCIZ0ugO7RfhSykP6MzCxQJh0vE5+zKBC3aq8PuAZoQBlRcwnL1eIDJFhiQjl6QBuadG7/lWOAMfMDnSpMtZ/HWPjNWwmG+h//54mLY1c5IL5r6yYkr1NQ6sXqhrVJJJV6QBMjR05zynjFSUQ0l4Ex66TeIGd0YhHGsC1gxbtQbH+BwDDqEL+MYy5ufRSLyjbKxxmvwiTPavQII3YjcSpVChboRPHZfJCiUbs2Y3GU4lUACJ0KDhDBKkScDy70UBI31Go9xLIMgEMixfyEIkHBLJsUomceiEPAANSicEmc+ls4GrsgNub7Z/MuT51kOn0SO5AMDGdNsIMsaCxFCpjqYTplQ7JiE1Bg/LnD6slkMwZJC1orrGS0gZqOpqvLKxSlpSxFDV/i3oDkPdtlViClL+NLQOQ961FA3HNNXcvtdmbPTV3424rr9vrcYgBBxwWr1ztNnusrb4qqwOO/hB5e8TUX53y9pDvMkQ+H7PGIfL6oLt/UpW3nxokZoZ5+7FHshR3JD+3+Q91tAeb8JtBNAAAAABJRU5ErkJggg=="},G74a:function(e,t,a){},HorS:function(e,t,a){"use strict";a.d(t,"a",(function(){return we}));a("0AG1"),a("Jya7"),a("rsdX"),a("vxpS"),a("oCJ0"),a("L8Gl"),a("eVIo"),a("EO5n"),a("ThRY"),a("h4PX"),a("6wma"),a("8OWE"),a("L4wC"),a("KzFV");var n=a("q+fq"),r=a.n(n),o=a("ivud"),i=a("EZYW"),c=(a("cBt3"),a("G74a"),a("Nlzp")),l=a("DgvE"),s=a("MeRu"),u=(a("tpKs"),a("2Kt1"),a("72Pr"),a("O4+N")),p=(a("Y5Ue"),a("xc0u")),d=(a("bqBU"),a("4OHk")),m=(a("7fbo"),a("LCR/")),f=a("TGzU"),y=a.n(f),h=a("CvKH"),b=a.n(h),v=(a("M+R0"),a("1f2v"),a("RXaF"),a("7gXV"),a("tI+s"),a("4LyV"),a("49MP"),a("oRfP"),a("rPzz"),a("T8f6"),a("nMWN"),a("jyy6"),a("riQy"),a("XJEh"),a("UeXb"),a("ClUO"),a("xb74"),a("JySD"),a("SnyF"),a("n1yf"),a("SoGA"),a("mtIt"),a("kCMX"),a("N4lb"),a("gsuU"),a("P2RN")),g=a("FC04"),E=a("cu44"),O=a("2kug"),I=(a("3EvH"),a("auFq"),a("g2HK")),w=(a("/mds"),a("aLG4")),P=(a("rJH4"),a("nKmx")),D=(a("U4At"),a("KiF4")),C=(a("6rnn"),a("d6B9")),S=(a("HzvR"),a("2n5t")),A=(a("wlSd"),a("WWzu"),a("DwF0"),a("36rt")),k=a("TL2v"),j=a("8QW8"),_=(a("Do1+"),a("mU7p"));function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function R(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t,a){return t&&V(e.prototype,t),a&&V(e,a),e}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=J(e);if(t){var r=J(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return U(this,a)}}function U(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=S.a.Option,G={labelCol:{span:4},wrapperCol:{span:20}},q=C.a.create({name:"form_in_modal_batch_add"})(function(e){F(a,e);var t=K(a);function a(){var e;M(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={selectedActionPropertyNames:[],selectedConditionPropertyNames:[]},e.onOk=function(){var t=e.props.batchAddOkHandle,a=e.state,n=a.selectedActionPropertyNames,r=a.selectedConditionPropertyNames;n.length+r.length<1?Object(v.a)({type:"warn",message:"缺少参数",description:"请至少选择一个条件或者动作"}):t({selectedActionPropertyNames:n,selectedConditionPropertyNames:r})},e.toggleItem=function(t,a){var n="condition"===a?"selectedConditionPropertyNames":"selectedActionPropertyNames",r=b()(e.state[n]);r.includes(t)?r=r.filter((function(e){return e!==t})):r.push(t),e.setState(R({},n,r))},e}return B(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel,o=t.actionsProtocolsList,i=void 0===o?[]:o,c=t.conditionsProtocolsList,l=void 0===c?[]:c,s=t.batchAddLoading,u=this.state,d=u.selectedActionPropertyNames,m=u.selectedConditionPropertyNames;return r.a.createElement(D.a,{visible:a,className:"self-modal",width:1e3,title:"批量添加场景动作",centered:!0,closable:!1,onCancel:n,confirmLoading:s,onOk:this.onOk,destroyOnClose:!0,maskClosable:!1},r.a.createElement(k.a,{desc:["条件、动作下的选项分别为产品运行和控制协议，批量添即将协议和场景功能一对一方式导出，可批量选择多个协议同时导出多个场景功能；"]}),r.a.createElement("div",{className:"height-premit"},r.a.createElement("section",{className:"modal-content-section-wrapper"},r.a.createElement("div",{className:"title-in-modal-content"},"条件："),r.a.createElement("div",{className:"content-in-modal justify-list-wrapper"},l.map((function(t,a){var n=m.includes(t)?"primary":"default";return r.a.createElement("span",{className:"justify-list-item",key:a},r.a.createElement(p.a,{type:n,onClick:function(){return e.toggleItem(t,"condition")}},t))})))),r.a.createElement("section",{className:"modal-content-section-wrapper"},r.a.createElement("div",{className:"title-in-modal-content"},"动作："),r.a.createElement("div",{className:"content-in-modal justify-list-wrapper"},i.map((function(t,a){var n=d.includes(t)?"primary":"default";return r.a.createElement("span",{className:"justify-list-item",key:a},r.a.createElement(p.a,{type:n,onClick:function(){return e.toggleItem(t,"action")}},t))}))))))}}]),a}(n.Component)),Q=C.a.create({name:"form_in_modal_custom_add"})(function(e){F(a,e);var t=K(a);function a(e){var n;M(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),n.isEditIng()||n.props.form.validateFields((function(e,t){if(!e){var a=n.props,r=a.customOkHandle,o=a.getConditionProtocolByPropertyName,i=n.state.paramList,c=t.name,l=t.cmdType,s=t.cmdName,u=null;if(i.length<1){if(n.isShowParamArea)return void Object(v.a)({type:"warn",message:"缺少参数",description:"请至少添加一组参数"});if(1==l){var p=o(s)[0],d=p.propertyValueDesc,m=p.propertyValueType;i.push({paramPropertyValueDesc:d,paramPropertyValueType:m})}}if(1==l){var f=o(s)[0],y=f.property,h=f.gap,g=f.mulriple;u={name:c,cmdField:y,cmdName:f.propertyName,deviceCmdParam:{cmdParamType:"1",costumParamList:b()(i)}},isNaN(""+h)||(u.step=h),isNaN(""+g)||(u.mutiple=g)}else u={name:c};r(u,l)}}))},n.getConditionDesc=function(e){var t=n.props.getConditionProtocolByPropertyName(e)[0]||{},a=t.propertyValueDesc,o=void 0===a?"~":a,i=t.gap;return r.a.createElement("div",{className:"ant-row ant-form-item"},r.a.createElement(k.a,{desc:[r.a.createElement("span",null,'条件关联协议 "',r.a.createElement("a",null,e),'" ，协议范围: ',r.a.createElement("a",null,o),"，精度为: ",r.a.createElement("a",null,i),"。")]}))},n.getIsShowParamArea=function(e,t){if(!e)return!1;var a=n.props.getConditionProtocolByPropertyName(e);return 2!=t&&(!!a[0]&&"数值型"===Object(l.q)(a[0]))},n.getTableDom=function(e){var t,a=n.state,o=a.paramList,i=a.curEditParamIndex,c=n.props.getConditionProtocolByPropertyName(e)[0].propertyValueDesc,s=L((void 0===c?"~":c).split("~"),2),u=s[0],p=s[1];return u=+u,p=+p,(t=o.map((function(e,t){var a=e.paramName,o=e.paramRule,c=e.paramMinValue,s=e.paramMaxValue;return t===i?r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(P.a,{style:{width:"260px"},maxLength:14,value:a,onChange:function(e){return n.paramChangeHandle("paramName",e.target.value)},placeholder:"请输入功能名称"})),r.a.createElement("td",null,r.a.createElement(S.a,{style:{width:"80px"},value:o,onChange:function(e){return n.paramChangeHandle("paramRule",e)}},r.a.createElement(W,{value:1},"大于"),r.a.createElement(W,{value:2},"小于"),r.a.createElement(W,{value:3},"范围"))),r.a.createElement("td",null,1==o?r.a.createElement(w.a,{min:u,max:p,formatter:l.l,parser:l.l,onChange:function(e){return n.paramChangeHandle("paramMinValue",e)},value:c,style:{width:"160px"}}):2==o?r.a.createElement(w.a,{max:p,min:u,formatter:l.l,parser:l.l,onChange:function(e){return n.paramChangeHandle("paramMaxValue",e)},value:s,style:{width:"160px"}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{min:u,max:p-1,formatter:l.l,parser:l.l,onChange:function(e){return n.paramChangeHandle("paramMinValue",e)},value:c,style:{width:"70px"}}),r.a.createElement("span",null," ~ "),r.a.createElement(w.a,{max:p,min:u+1,formatter:l.l,parser:l.l,onChange:function(e){return n.paramChangeHandle("paramMaxValue",e)},value:s,style:{width:"70px"}}))),r.a.createElement("td",null,r.a.createElement("a",{onClick:n.saveParam},"保存")," ",r.a.createElement(m.a,{type:"vertical"}),r.a.createElement("a",{onClick:n.cancelParamEdit},"取消"))):r.a.createElement("tr",{key:t},r.a.createElement("td",null,a),r.a.createElement("td",null,_.b[o]),1==o?r.a.createElement("td",null,"触发值： > ",c):2==o?r.a.createElement("td",null,"触发值： < ",s):r.a.createElement("td",null,"触发值：",c," ~ ",s),r.a.createElement("td",null,r.a.createElement("a",{onClick:function(){return n.editConditionParams(t)}},"编辑"),r.a.createElement(m.a,{type:"vertical"}),r.a.createElement("a",{onClick:function(){return n.deleteConditionParams(t)}},"删除")))}))).length>0?r.a.createElement("table",{className:"my-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"参数名称"),r.a.createElement("th",null,"规则"),r.a.createElement("th",null,"触发值"),r.a.createElement("th",null,"操作"))),r.a.createElement("tbody",null,t)):null},n.conditionAddParam=function(){if(!n.isEditIng()){var e=n.state.paramList,t=b()(e),a={paramName:"",paramRule:1,paramMinValue:"",paramMaxValue:""};t.push(a),n.setState({paramList:t,curEditParamIndex:t.length-1,isNewAdd:!0,tempParams:b()(a)})}},n.paramChangeHandle=function(e,t){var a=n.state,r=a.curEditParamIndex,o=a.paramList,i=b()(o),c=i[r],l=c.paramMaxValue,s=c.paramMinValue;3===c.paramRule&&("paramMinValue"===e&&""!==l&&+l<=t&&(t=+l-1),"paramMaxValue"===e&&""!==s&&+s>=t&&(t=+s+1)),i[r][e]=null===t?"":t,"paramRule"===e&&(i[r].paramMinValue="",i[r].paramMaxValue=""),n.setState({paramList:i})},n.editConditionParams=function(e){if(!n.isEditIng()){var t=n.state.paramList;n.setState({curEditParamIndex:e,tempParams:b()(t[e])})}},n.deleteConditionParams=function(e){if(!n.isEditIng()){var t=n.state.paramList,a=b()(t);a.splice(e,1),n.setState({paramList:a})}},n.isEditIng=function(){return-1!==n.state.curEditParamIndex&&(Object(v.a)({type:"warn",message:"操作不规范",description:"有正在编辑的参数，请先保存"}),!0)},n.saveParam=function(){var e=n.state,t=e.curEditParamIndex,a=e.paramList[t],r=a.paramName,o=a.paramRule,i=a.paramMinValue,c=a.paramMaxValue;[r,o,i].includes("")&&[r,o,c].includes("")?Object(v.a)({type:"warn",message:"参数缺失",description:"所有的参数都必须填写"}):n.setState({tempParams:null,curEditParamIndex:-1,isNewAdd:!1})},n.cancelParamEdit=function(){var e=n.state,t=e.paramList,a=e.curEditParamIndex,r=e.tempParams,o=e.isNewAdd,i=b()(t);o?i.splice(a,1):i[a]=r,n.setState({paramList:i,curEditParamIndex:-1,tempParams:null,isNewAdd:!1})},n.changeCmdName=function(e){n.setState({paramList:[],curEditParamIndex:-1})},n.changeCmdType=function(e){var t=n.props.resetSelectedActions;n.setState({paramList:[],curEditParamIndex:-1}),t()};var o=[],i=n.props.editScene;return i&&i.paramList&&(o=i.paramList),n.state={paramList:o,curEditParamIndex:-1,tempParams:null,isNewAdd:!1},n.isShowParamArea=!1,n}return B(a,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.form,o=e.customLoading,i=e.editScene,c=e.conditionsProtocolsList,l=void 0===c?[]:c,s=e.selectedActions,u=void 0===s?[]:s,m=e.openModal,f=e.operateSelectedActions,y=(e.getActionDetailByProperty,i||{}),h=y.name,b=y.cmdType,v=y.cmdList,g=n.getFieldDecorator,E=n.getFieldValue,O=E("cmdType"),I=E("cmdName");return this.firstRendered||(O=b||1,I=v?v&&v[0]&&v[0].cmdName:"",this.firstRendered=!0),this.isShowParamArea=this.getIsShowParamArea(I,O),r.a.createElement(D.a,{visible:t,className:"self-modal",width:800,title:"自定义配置",centered:!0,closable:!1,footer:null,destroyOnClose:!0,maskClosable:!1},r.a.createElement(C.a,N({},G,{onSubmit:this.handleSubmit}),r.a.createElement(C.a.Item,{label:"场景名称"},g("name",{rules:[{required:!0,message:"请输入场景名称"},{max:20,message:"最大输入长度为20"}],initialValue:h||""})(r.a.createElement(P.a,{placeholder:"请输入场景名称"}))),r.a.createElement(C.a.Item,{label:"场景类型"},g("cmdType",{rules:[{required:!0}],initialValue:O})(r.a.createElement(S.a,{style:{width:"300px"},onChange:this.changeCmdType,disabled:!!i},r.a.createElement(W,{value:1},"条件"),r.a.createElement(W,{value:2},"动作")))),2!=O&&r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a.Item,{label:"关联协议"},g("cmdName",{rules:[{required:!0,message:"请选个一个协议"}],initialValue:I})(r.a.createElement(S.a,{style:{width:"300px"},onChange:this.changeCmdName},r.a.createElement(W,{value:"",key:-1},"请选择"),l.map((function(e,t){return r.a.createElement(W,{key:t,value:e},e)}))))),I&&(this.isShowParamArea?this.getConditionDesc(I):r.a.createElement(k.a,{desc:["非数值型协议不支持参数编辑"]})),this.isShowParamArea&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"ant-row ant-form-item"},r.a.createElement("div",{className:"ant-col ant-col-4 ant-form-item-label"},r.a.createElement("label",{className:"ant-form-item-required"},"功能参数映射")),r.a.createElement("div",{style:{textAlign:"right",lineHeight:"40px"},className:"ant-col ant-col-20"},r.a.createElement("a",{onClick:this.conditionAddParam},r.a.createElement(d.a,{type:"plus"})," 添加"))),r.a.createElement(C.a.Item,{wrapperCol:{span:24}},this.getTableDom(I)))),2==O&&r.a.createElement(C.a.Item,{wrapperCol:{span:24}},r.a.createElement("div",{className:"ant-col ant-col-4 ant-form-item-label"},r.a.createElement("label",{className:"ant-form-item-required"},"关联协议")),r.a.createElement("div",{className:"ant-col ant-col-20 link-protocol-wrapper"},r.a.createElement("div",{style:{padding:0},className:"justify-list-wrapper"},u.map((function(e,t){return r.a.createElement("span",{key:t,className:"justify-list-item link-protocol-item"},e,r.a.createElement("span",{onClick:function(){return f([e],"delete")}},"X"))})),r.a.createElement("a",{style:{padding:"0 24px 12px 0"},className:"justify-list-item",onClick:function(){return m("linkProtocolsVisible")}},r.a.createElement(d.a,{type:"plus"})," 添加")))),r.a.createElement(C.a.Item,{wrapperCol:{span:24}},r.a.createElement("div",{className:"form-in-modal-ok-cancel-btn"},r.a.createElement(p.a,{loading:o,type:"primary",htmlType:"submit"},"确定"),r.a.createElement(p.a,{type:"default",onClick:a},"取消")))))}}]),a}(n.Component)),Y=["审核中","全部验证通过","验证未通过","部分验证通过"],z=function(e){F(a,e);var t=K(a);function a(){return M(this,a),t.apply(this,arguments)}return B(a,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.auditRecordList,o=void 0===n?[]:n;return r.a.createElement(D.a,{visible:t,className:"self-modal",width:1e3,title:"验证审批记录",centered:!0,closable:!0,footer:null,onCancel:a,destroyOnClose:!0,maskClosable:!1},r.a.createElement("div",{className:"height-premit"},o.length>0?o.map((function(e,t){var a=e.status,n=e.remark,o=e.createTime;return r.a.createElement("section",{key:t,className:"approver-item"},r.a.createElement("div",{style:{marginTop:0},className:"title-in-modal-content"},r.a.createElement("span",{className:"color".concat(a)},r.a.createElement(A.a,{type:"icon-arrrow-right"})," ",Y[+a]),r.a.createElement("span",{className:"float-right"},l.a.utcToDev(o))),r.a.createElement("div",{className:"approver-content"},r.a.createElement("div",{className:"content-replys"},r.a.createElement("p",{className:"bold-text"},"验证回复："),r.a.createElement("p",null,n))))})):r.a.createElement(j.a,{tipText:"没有审批记录"})))}}]),a}(n.Component),X=C.a.create({name:"link_protocols_add"})(function(e){F(a,e);var t=K(a);function a(){var e;M(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={newSelectedActions:[]},e.onOk=function(){var t=e.state.newSelectedActions,a=e.props.LinkProtocolsOkhandle;t.length<1?Object(v.a)({type:"warn",message:"缺少参数",description:"请先选择控制数据"}):a(t)},e.checkboxChangeHandle=function(t){e.setState({newSelectedActions:t})},e}return B(a,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.actionsProtocolsList,o=void 0===n?[]:n,i=e.selectedActions,c=void 0===i?[]:i;return r.a.createElement(D.a,{visible:t,className:"self-modal",width:1e3,title:"添加协议",centered:!0,closable:!1,onCancel:a,onOk:this.onOk,destroyOnClose:!0,maskClosable:!1},r.a.createElement(k.a,{desc:["动作类型的添加可以选择单个或者多个协议组合成一个功能"]}),r.a.createElement("div",{className:"height-premit"},r.a.createElement("section",{className:"modal-content-section-wrapper"},r.a.createElement("div",{className:"title-in-modal-content"},"控制数据"),r.a.createElement(I.a.Group,{style:{width:"100%"},defaultValue:c,onChange:this.checkboxChangeHandle,className:"justify-list-wrapper"},o.map((function(e,t){return r.a.createElement("span",{key:t,className:"justify-list-item single-text limit-width"},r.a.createElement(I.a,{value:e},e))}))))))}}]),a}(n.Component)),Z=a("v7xx");function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(a),!0).forEach((function(t){ae(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ne(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return re(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function oe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=se(e);if(t){var r=se(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return le(this,a)}}function le(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ue,pe=["Base_Null_Reserved_Null","updateFlag"],de=[{title:"配置自动化"},{title:"验证自动化"},{title:"发布自动化"},{title:"配置场景"}],me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(i,e);var t,a,n,o=ce(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={sceneFunctionList:[],batchAddVisible:!1,batchAddLoading:!1,customVisible:!1,linkProtocolsVisible:!1,selectedActions:[],customLoading:!1,approverVisible:!1,approverLoading:!1,allActionProtocols:[],allCondtionProtocols:[],conditionsProtocolsList:[],actionsProtocolsList:[],usedConditions:[],usedActions:[],auditRecordList:[],deleteVisible:!1,deleteLoading:!1,verifyLoading:!1,curSceneItem:null,sceneStatus:null},t.dealProtocols=function(){var e=t.props.productProtocolLists,a=[],n=[],r=[],o=[];(void 0===e?[]:e).forEach((function(e){var t=e.dataType,i=e.list,c={};2===t&&(o=i.filter((function(e){return!pe.includes(e.property)&&!!e.propertyValueDesc})),n=ne(new Set(o.map((function(e){return e.propertyName}))))),3===t&&(i.forEach((function(e){var t=e.propertyName;c[t]?c[t]=c[t]+1:c[t]=1})),r=b()(i).filter((function(e){return!!e.propertyValueDesc&&1===c[e.propertyName]})),a=ne(new Set(r.map((function(e){return e.propertyName})))))})),t.setState({allActionProtocols:o,allCondtionProtocols:r,conditionsProtocolsList:a,actionsProtocolsList:n})},t.getSceneFunctionList=function(){var e=t.props.productId;t.state.searchInputValue;e&&Object(c.c)(c.a.getSceneFunctionList,{productId:e},{loading:!0}).then((function(e){var a=e.data&&e.data.list||[],n=[],r=[],o=null;a.forEach((function(e){var t=e.cmdType,a=e.cmdList,i=void 0===a?[]:a,c=e.status;1===i.length&&(i.forEach((function(e){1==t&&n.push(e.cmdName),2==t&&r.push(e.cmdName)})),2==c&&(o="verify"))})),t.setState({sceneFunctionList:a,usedConditions:n,usedActions:r,sceneStatus:o})}))},t.openModal=function(e,a){var n=ae({},e,!0);a&&(n.curSceneItem=b()(a)),t.setState(n)},t.batchAddOkHandle=function(e){var a=e.selectedActionPropertyNames,n=e.selectedConditionPropertyNames,r={productId:t.props.productId},o=n.map((function(e){return t.getConditionProtocolByPropertyName(e).map((function(e){var t=e.property,a=e.propertyName,n=e.gap,r=e.mulriple,o={cmdField:t,cmdName:a,cmdType:1,paramList:[{paramType:e.propertyValueType,paramValue:e.propertyValueDesc}]};return isNaN(""+n)||(o.step=n),isNaN(""+r)||(o.mutiple=r),{cmdList:[o]}}))})),i=a.map((function(e){return{cmdList:t.getActionDetailByPropertyName(e).map((function(e){var t=e.property,a=e.propertyName,n=e.gap,r=e.mulriple,o={cmdField:t,cmdName:a,cmdType:2,paramList:[{paramType:e.propertyValueType,paramValue:e.propertyValueDesc}]};return isNaN(""+n)||(o.step=n),isNaN(""+r)||(o.mutiple=r),o}))}}));r.deviceCmdList=y()(i.concat(o),1),t.setState({batchAddLoading:!0}),Object(c.d)(c.a.addBatchSceneFunction,r,{needJson:!0,noInstance:!0}).then((function(e){t.close("batchAddVisible"),t.getSceneFunctionList()})).finally((function(){t.setState({batchAddLoading:!1})}))},t.customOkHandle=function(e,a){var n=t.props.productId,r=t.state,o=r.selectedActions,i=r.curSceneItem,l={},s=c.a.addOrUpdateSingleCondition;if(1==a)l=te(te({},e),{},{productId:n}),i&&(l.deviceCmdId=i.deviceCmdId);else{if(o.length<1)return Object(v.a)({type:"warn",message:"缺少参数",description:"请为动作关联协议"}),!1;var u=o.map((function(e){return t.getActionDetailByPropertyName(e).map((function(t){var a=t.property,n=t.gap,r=t.mulriple,o=t.propertyValueType,i=t.propertyValueDesc,c={cmdField:a,cmdName:e,paramList:[{paramType:o,paramValue:i}]};return isNaN(""+n)||(c.step=n),isNaN(""+r)||(c.mutiple=r),c}))}));l=te(te({},e),{},{productId:n,deviceCmdParam:{cmdParamType:"6",cmdList:y()(u,1)}}),s=c.a.addCustomAction}t.setState({customLoading:!0}),Object(c.d)(s,l,{needJson:!0,noInstance:!0}).then((function(e){t.close("customVisible"),t.getSceneFunctionList()})).finally((function(){t.setState({customLoading:!1})}))},t.LinkProtocolsOkhandle=function(e){t.operateSelectedActions(e,"add"),t.close("linkProtocolsVisible")},t.deleteOkHandle=function(){var e=t.state.curSceneItem,a=t.props.productId,n=e.deviceCmdId,r=e.cmdType;t.setState({deleteLoading:!0}),Object(c.d)(c.a.deleteSceneFunctionById,{deviceCmdId:n,cmdType:r,productId:a}).then((function(e){t.close("deleteVisible"),t.getSceneFunctionList()})).finally((function(){t.setState({deleteLoading:!1})}))},t.operateSelectedActions=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",n=t.state.selectedActions,r=[];"add"===a&&(r=ne(new Set(e))),"delete"===a&&(r=n.filter((function(t){return t!==e[0]}))),t.setState({selectedActions:r})},t.getActionDetailByPropertyName=function(e){return t.state.allActionProtocols.filter((function(t){return t.propertyName===e}))},t.getConditionProtocolByPropertyName=function(e){return t.state.allCondtionProtocols.filter((function(t){return t.propertyName===e}))},t.submitVerify=function(){var e=t.props.productId,a=t.state.sceneFunctionList,n=[];a.forEach((function(e){var t=e.deviceCmdId,a=e.cmdType;1==e.status&&n.push({deviceCmdId:t,cmdType:a})})),t.setState({verifyLoading:!0}),Object(c.d)(c.a.auditBatchSceneFunction,{productId:e,list:n},{needJson:!0,loading:!0,noInstance:!0}).then((function(e){t.getSceneFunctionList()})).finally((function(){t.setState({verifyLoading:!1})}))},t.getAuditRecord=function(){var e=t.props.productId;t.setState({approverLoading:!0}),Object(c.c)(c.a.getAuditRecord,{productId:e}).then((function(e){t.setState({auditRecordList:e.data||[],approverVisible:!0})})).finally((function(){t.setState({approverLoading:!1})}))},t.resetSelectedActions=function(){t.setState({selectedActions:[]})},t.getSceneFunctionList(),t.sceneListColumns=[{title:"功能名称",dataIndex:"name",key:"name",width:"160px"},{title:"类型",dataIndex:"cmdType",key:"cmdType",width:"100px",render:function(e,t){return r.a.createElement("span",null,_.d[""+t.cmdType])}},{title:"触发协议",dataIndex:"cmdList",key:"cmdList",render:function(e,t){var a=t.cmdList;return a=Object(l.s)(a,"cmdName"),r.a.createElement("span",null,a.map((function(e){return e.cmdName})).join("，"))}},{title:"触发参数",dataIndex:"paramList",key:"paramList",width:340,render:function(e,t){return r.a.createElement("span",null,t.paramList?t.paramList.map((function(e){var t=e.paramName,a=e.paramRule,n=e.paramMinValue,r=e.paramMaxValue;return 1==a?" ".concat(t," : 大于 ").concat(n," "):2==a?" ".concat(t," : 小于 ").concat(r," "):" ".concat(t," : 范围 ").concat(n," ~ ").concat(r," ")})).join("；"):null)}},{title:"状态",dataIndex:"status",key:"status",width:"120px",render:function(e,t){return r.a.createElement("span",{className:"verify-statu-".concat(t.status)},_.c[""+t.status])}},{title:"操作",key:"action",width:120,render:function(e,a){var n=a.status,o=a.cmdType;return r.a.createElement("span",null,[1,4].includes(+n)&&"1"==o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:function(e){return t.openModal("customVisible",a)}},"编辑"),r.a.createElement(m.a,{type:"vertical"})),[1,3,4].includes(+n)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:function(e){return t.openModal("deleteVisible",a)}},"删除")))}}],t}return t=i,(a=[{key:"componentDidMount",value:function(){this.dealProtocols()}},{key:"componentDidUpdate",value:function(e){e.productId!==this.props.productId&&this.getSceneFunctionList(),e.productProtocolLists.length<1&&this.props.productProtocolLists.length>=1&&this.dealProtocols()}},{key:"close",value:function(e){var t=ae({},e,!1);"customVisible"===e&&(t.selectedActions=[]),["customVisible","deleteVisible"].includes(e)&&(t.curSceneItem=null),this.setState(t)}},{key:"render",value:function(){var e=this,t=this.state,a=(t.searchInputValue,t.sceneStatus),n=t.auditRecordList,o=t.verifyLoading,i=t.sceneFunctionList,c=t.batchAddVisible,s=t.selectedActions,m=t.approverLoading,f=t.customVisible,y=t.approverVisible,h=t.linkProtocolsVisible,v=t.conditionsProtocolsList,I=t.actionsProtocolsList,w=t.customLoading,P=t.curSceneItem,D=t.deleteVisible,C=t.deleteLoading,S=t.batchAddLoading,A=t.usedConditions,k=t.usedActions,j=this.props.canOperate,_=b()(this.sceneListColumns),T=v.filter((function(e){return!A.includes(e)})),N=I.filter((function(e){return!k.includes(e)})),L="verify"===a,x=!1;return i.forEach((function(e){1==+e.status&&(x=!0)})),j||_.pop(),r.a.createElement("div",{className:"app-control-wrapper"},r.a.createElement(E.a,{style:{margin:"0 0 24px"},title:"使用流程"},r.a.createElement("div",{className:"use-service-flow-wrapper"},r.a.createElement(O.a,{type:3,flowLists:de}),r.a.createElement("div",{className:"extra-descs"},r.a.createElement("div",{className:"descs-item"},r.a.createElement("p",null,"进入产品设备联动服务，配置自动化条件和动作")),r.a.createElement("div",{className:"descs-item"},r.a.createElement("p",null,"通过调试白名单对草稿状态下条件和动作全功能调试验证，验证完成提交发布申请。")),r.a.createElement("div",{className:"descs-item"},r.a.createElement("p",null,"审核通过，完成配置的条件和动作上线，上线后可供用户正常使用。")),r.a.createElement("div",{className:"descs-item"},r.a.createElement("p",null,"使用已发布的自动化条件和动作配置场景。"))))),r.a.createElement("section",{style:{marginTop:0},className:"h5-manage-wrapper section-bg"},r.a.createElement("h3",null,"场景功能配置"),r.a.createElement("div",{className:"page-manage"},r.a.createElement("div",{className:"tool-area clearfloat"},j&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{type:"primary",style:{float:"right"},onClick:function(){return e.openModal("customVisible")}},r.a.createElement(d.a,{type:"plus"})," 自定义 "),r.a.createElement(p.a,{type:"primary",style:{float:"right",marginRight:"24px"},onClick:function(){return e.openModal("batchAddVisible")}},r.a.createElement(d.a,{type:"plus"})," 批量添加 ")),r.a.createElement(p.a,{type:"primary",style:{float:"right",marginRight:"24px"},loading:m,onClick:function(){return e.getAuditRecord()}},"最新审批记录 ")),r.a.createElement("div",{className:"h5-manage-tab"},r.a.createElement(u.a,{columns:_,className:"ant-table-fixed",dataSource:Object(l.c)(i),pagination:!1}))),j&&r.a.createElement(Z.a,{preBtn:!1,nextHandle:this.submitVerify,nextLoading:o,nextDisable:L||!x,nextText:L?"审核中":"提交验证"})),c&&r.a.createElement(q,{visible:c,batchAddOkHandle:this.batchAddOkHandle,openModal:this.openModal,conditionsProtocolsList:T,actionsProtocolsList:N,batchAddLoading:S,onCancel:function(){return e.close("batchAddVisible")}}),f&&r.a.createElement(Q,{visible:f,openModal:this.openModal,customOkHandle:this.customOkHandle,selectedActions:s,resetSelectedActions:this.resetSelectedActions,conditionsProtocolsList:T,getActionDetailByPropertyName:this.getActionDetailByPropertyName,getConditionProtocolByPropertyName:this.getConditionProtocolByPropertyName,editScene:P,operateSelectedActions:this.operateSelectedActions,customLoading:w,onCancel:function(){return e.close("customVisible")}}),y&&r.a.createElement(z,{visible:y,auditRecordList:n,onCancel:function(){return e.close("approverVisible")}}),h&&r.a.createElement(X,{visible:h,actionsProtocolsList:N,LinkProtocolsOkhandle:this.LinkProtocolsOkhandle,selectedActions:s,onCancel:function(){return e.close("linkProtocolsVisible")}}),D&&r.a.createElement(g.a,{visible:D,modalOKHandle:this.deleteOkHandle,modalCancelHandle:function(){return e.close("deleteVisible")},targetName:P.name,confirmLoading:C,title:"删除场景",descGray:!0,descText:"即将删除的场景",needWarnIcon:!0,tipText:"场景删除后将无法找回，是否确认删除？"}))}}])&&oe(t.prototype,a),n&&oe(t,n),i}(n.Component);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function he(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(a),!0).forEach((function(t){be(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ve(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ie(e);if(t){var r=Ie(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Oe(this,a)}}function Oe(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var we=Object(o.connect)((function(e){return{productBaseInfo:e.getIn(["product","productBaseInfo"]).toJS(),productConfigSteps:e.getIn(["product","productConfigSteps"]).toJS(),productProtocolLists:e.getIn(["product","productProtocolLists"]).toJS()}}),(function(e){return{getConfigSteps:function(t){return e(Object(i.getConfigSteps)(t))},getProtocolLists:function(t){return e(Object(i.getProtocolLists)(t))}}}))(ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(i,e);var t,a,n,o=Ee(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).getConfigSteps=function(){var e=t.props.productConfigSteps,a=Object(l.o)(e,3);return a&&(t.configs=a),a},t.enableScene=function(){var e=t.props,a=e.productId,n=e.getConfigSteps,r={},o={productId:a,type:3};t.configs&&(r=t.configs.configInfo,o.stepId=t.configs.stepId),o.configInfo=JSON.stringify(he(he({},r),{},{enableScene:!0})),Object(c.d)(c.a.saveConfigSteps,o).then((function(e){return n(a)}))},t.goBackServiceSelect=function(){t.props.history.goBack()},t.getConfigSteps=function(){var e=t.props.productConfigSteps,a=Object(l.o)(e,3);return a&&(t.configs=a),a},t.getProductStepsAndProtocols(),t}return t=i,(a=[{key:"getProductStepsAndProtocols",value:function(){var e=this.props,t=e.productId,a=e.getConfigSteps,n=e.getProtocolLists;t&&(a(t),n(t))}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.productId;e.productId!==a&&this.getProductStepsAndProtocols()}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.getConfigSteps()||e.enableScene()}),1e4)}},{key:"render",value:function(){var e=this.props,t=e.noNeedTitle,a=e.productProtocolLists,n=e.productId,o=e.canOperate,i=this.getConfigSteps();return i&&i.configInfo&&i.configInfo.enableScene,r.a.createElement("div",{className:"app-control"},!t&&r.a.createElement(s.a,{backHandle:this.goBackServiceSelect,title:"场景联动配置"}),r.a.createElement(me,{canOperate:o,productId:n,productProtocolLists:a}))}}])&&ve(t.prototype,a),n&&ve(t,n),i}(r.a.Component))||ue},M6wy:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Ke}));a("0AG1"),a("Jya7"),a("rsdX"),a("vxpS"),a("L8Gl"),a("eVIo"),a("EO5n"),a("ThRY"),a("h4PX"),a("6wma"),a("8OWE"),a("L4wC"),a("KzFV"),a("Y5Ue");var n=a("xc0u"),r=(a("U4At"),a("KiF4")),o=(a("sbOf"),a("spxj")),i=a("CvKH"),c=a.n(i),l=(a("SnyF"),a("kCMX"),a("oCJ0"),a("n1yf"),a("wlSd"),a("WWzu"),a("61Aj"),a("3EvH"),a("q+fq")),s=a.n(l),u=a("t+M7"),p=a("jobn"),d=a.n(p);a("VDO2");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,a){return t&&y(e.prototype,t),a&&y(e,a),e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=O(e);if(t){var r=O(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return E(this,a)}}function E(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){b(a,e);var t=g(a);function a(){return f(this,a),t.apply(this,arguments)}return h(a,[{key:"render",value:function(){var e="",t="",a="",n=this.props.jsonKey,r=m(this.props.jsonValue),o=!1;if(this.props.jsonValue instanceof Array&&(r="array"),null===this.props.jsonValue&&(r="null"),"object"==r){var i="{",c="}";this.props.isClose?(e="icon-chevron-thin-right",a=r+i+"..."+c,t="tag"):(e="icon-chevron-thin-down",a=i,t="tag",o=!0)}else if("array"==r){i="[",c="]";this.props.isClose?(e="icon-chevron-thin-right",a=r+i+"..."+c,t="tag"):(e="icon-chevron-thin-down",a=i,t="tag",o=!0)}else"string"==r&&"tag"!=this.props.type?(a='"'+this.props.jsonValue+'"',t="string"):"number"==r?(a=this.props.jsonValue,t="number"):"string"==r&&"tag"==this.props.type?(a=this.props.jsonValue,t="tag"):"null"==r?(a="null",t="null"):"boolean"==r&&(a=this.props.jsonValue.toString(),t="boolean");return s.a.createElement("p",{className:"json-format-node",style:{"margin-left":this.props.isEndTag?"-25px":""}},s.a.createElement("i",{className:e,onClick:this.props.onCloseOrOpen}," "),s.a.createElement("span",{className:"json-format-key"},n?'"'+n+'"':""),n?":":"",s.a.createElement("span",{className:"json-format-value "+t},a),o||this.props.isLast?"":",")}}]),a}(s.a.Component),w=function(e){b(a,e);var t=g(a);function a(e){var n;return f(this,a),(n=t.call(this,e)).state={json:c()(n.props.json),jsonCode:n.props.jsonCode},n}return h(a,[{key:"componentWillReceiveProps",value:function(e){var t=c()(e.json);e.jsonCode==this.state.jsonCode&&"object"==m(e.json)&&null!==e.json&&void 0!==e.json&&(t=d()(!0,this.state.json,t)),this.setState({json:t,jsonCode:e.jsonCode})}},{key:"componentWillUpdate",value:function(){}},{key:"onCloseOrOpen",value:function(e){var t=this.state.json,a=t;for(var n in e){a=a[e[n]]}a._isClose=!a._isClose,this.setState(t)}},{key:"render",value:function(){var e=this;var t=function t(a,n,r,o){var i=[];if("object"!=m(a)||null===a)return i.push(s.a.createElement(I,{jsonValue:a,level:n,isLast:o})),i;var c=null;for(var l in a)u(l,a,!1);function u(a,o,l){if("_isClose"!=a)if(null!=c){var u=c;c=a;var p=o[u],d=r.concat();d.push(u);var f=n+1,y=u;if(o instanceof Array&&(y=null),"object"==m(p)&&null!==p){if(i.push(s.a.createElement(I,{jsonKey:y||null,jsonValue:p,level:f,isClose:p._isClose,onCloseOrOpen:e.onCloseOrOpen.bind(e,d),isLast:l})),!p._isClose){var h=t(p,f,d,null==a);i.push(s.a.createElement("div",{style:{"padding-left":"25px"}},h))}}else i.push(s.a.createElement(I,{jsonKey:y||null,jsonValue:p,level:f,isLast:l}))}else c=a}if(u(null,a,!0),"object"==m(a)&&!a._isClose){var p="}";a instanceof Array&&(p="]"),i.push(s.a.createElement(I,{jsonValue:p,level:n+1,type:"tag",isEndTag:!0,isLast:o}))}var d=[];return"object"==m(a)&&1==n?(d.push(s.a.createElement(I,{jsonValue:a,level:n+1,type:"tag",isClose:a._isClose,onCloseOrOpen:e.onCloseOrOpen.bind(e,[]),isLast:o})),a._isClose||d.push(s.a.createElement("div",{style:{"padding-left":"25px"}},i)),d):i}(this.state.json,1,[],!0);return s.a.createElement("div",null,t)}}]),a}(l.Component),P=a("ivud"),D=(a("97dn"),a("OV+i")),C=(a("6rnn"),a("d6B9")),S=(a("HzvR"),a("2n5t")),A=a("yq+b"),k=a.n(A);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function T(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=M(e);if(t){var r=M(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return x(this,a)}}function x(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){F(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var H=S.a.Option,K=(k()(),C.a.create({name:"exportStagerDataDialog",onFieldsChange:function(e,t){"{}"!==JSON.stringify(t)&&e.changeFormData(t)},mapPropsToFields:function(e){return{selectedMac:C.a.createFormField(B(B({},e.selectedMac),{},{value:e.selectedMac.value})),date:C.a.createFormField(B(B({},e.date),{},{value:e.date.value}))}}})(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(i,e);var t,a,r,o=L(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var a=c()(t.props.macList)||[];return t.state={macList:a||[],showWarn:!1,productId:t.props.productId,debugMacId:""},t.handleSubmit=t.handleSubmit.bind(R(t)),t}return t=i,(a=[{key:"componentDidMount",value:function(){}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),(0,this.props.form.validateFieldsAndScroll)((function(e,a){if(!e){var n=a.selectedMac,r=a.date,o=window.location.origin+"/v1/web/open/protoManage/exportRunDataToExcel?mac="+n+"&searchDate="+r.format("YYYYMMDD")+"&productId="+t.props.productId;window.location.href=o,t.props.onCancel()}}))}},{key:"render",value:function(){var e=this.state.macList,t=this.props.form.getFieldDecorator;return s.a.createElement("div",{className:"exportData"},s.a.createElement(C.a,_({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:this.handleSubmit,className:""}),s.a.createElement(C.a.Item,{label:"选择Mac：",hasFeedback:!0},t("selectedMac",{rules:[{required:!0,message:"请选择Mac!"}]})(s.a.createElement(S.a,{style:{width:174},placeholder:"请选择产品"},e.map((function(e,t){return s.a.createElement(H,{key:"mac"+t,value:e.mac||e.id},e.mac||e.id)}))))),s.a.createElement(C.a.Item,{label:"选择日期：",hasFeedback:!0},t("date",{rules:[{type:"object",required:!0,message:"请选择时间!"}]})(s.a.createElement(D.a,{format:"YYYY/MM/DD"}))),s.a.createElement(n.a,{type:"primary",htmlType:"submit",icon:"download",block:!0},"下载")))}}])&&T(t.prototype,a),r&&T(t,r),i}(s.a.Component))),U=(a("rJH4"),a("nKmx")),J=(a("+SM3"),a("SE39")),W=(a("bqBU"),a("4OHk")),G=a("Nlzp"),q=a("tXLG"),Q=a("P2RN");function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function X(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ae(e);if(t){var r=ae(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return ee(this,a)}}function ee(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?te(e):t}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(a),!0).forEach((function(t){oe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function oe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ie,ce=S.a.Option,le=C.a.create({name:"exportStagerDataDialog",onFieldsChange:function(e,t){"{}"!==JSON.stringify(t)&&e.changeFormData(t)},mapPropsToFields:function(e){return{productId:C.a.createFormField(re(re({},e.productId),{},{productId:e.productId})),firmwareVersionType:C.a.createFormField(re(re({},e.firmwareVersionType),{},{value:e.firmwareVersionType.value})),totalVersion:C.a.createFormField(re(re({},e.totalVersion),{},{value:e.totalVersion.value})),mainVersion:C.a.createFormField(re(re({},e.mainVersion),{},{value:e.mainVersion.value}))}}})(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(i,e);var t,a,r,o=$(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).onCancel=function(){t.props.form.resetFields(),t.addUpdataDevice.setState({fileList:[]}),t.props.onCancel()},t.state={allFirmwareVersionTypeList:[]},t.handleSubmit=t.handleSubmit.bind(te(t)),t}return t=i,(a=[{key:"componentDidMount",value:function(){var e=this;Object(G.c)(G.a.getAllFirmwareVersionType,{deviceVersionTypeId:1}).then((function(t){e.setState({allFirmwareVersionTypeList:t.data})}))}},{key:"componentDidUpdate",value:function(e){}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),(0,this.props.form.validateFieldsAndScroll)((function(e,a){if(!e){var n=re({},a),r=t;n.deviceVersionType=t.props.deviceVersionType;for(var o=t.props.macList||[],i=0;i<o.length;i++)t.props.mac!=o[i].physicalAddr&&t.props.mac!=o[i].id||(n.id=o[i].id);t.addUpdataDevice.upToTencentCloud((function(e){var t=(n.totalVersion+"").replace(/^\s+|\s+$/g,""),a=(n.mainVersion+"").replace(/^\s+|\s+$/g,"");return/^[\w\.-]*$/.test(t)?+a>2147483647?(Object(Q.a)({description:"内部版本号大小超过范围，最大2147483647"}),!1):/^[0-9]*$/.test(a)?(n.file=e[0],n.file?void Object(G.d)(G.a.upgradeDebug,n,{needFormData:!0}).then((function(e){0==e.code&&(r.onCancel(),r.props.get_clearDevData2())})):(Object(Q.a)({description:"请选择文件！"}),!1)):(Object(Q.a)({description:"内部版本须为不小于0的整数"}),!1):(Object(Q.a)({description:"固件系列标示只能包含字母、数字、下划线、短横线、点号"}),!1)}))}}))}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,r=a.tipconts,o=a.firmwareModules;return s.a.createElement("div",{className:"add_firmware_dialog"},s.a.createElement(C.a,z({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:this.handleSubmit}),s.a.createElement(C.a.Item,{label:"固件类型："},s.a.createElement("span",{className:"ant-form-text"},r)),s.a.createElement(C.a.Item,{label:s.a.createElement("span",null,"固件模块：",s.a.createElement(J.a,{placement:"top",title:"请选择固件的细分模块，升级时将只针对该模块升级。"},s.a.createElement(W.a,{type:"question-circle-o"}))),hasFeedback:!0},t("firmwareVersionType",{rules:[{required:!0,message:"请选择模块!"}]})(s.a.createElement(S.a,{style:{width:174},placeholder:"请选择"},o.map((function(e,t){return s.a.createElement(ce,{key:"固件模块："+t,value:e.firmwareVersionTypeNo},e.firmwareVersionTypeName)}))))),s.a.createElement(C.a.Item,{label:s.a.createElement("span",null,"固件系列标识：",s.a.createElement(J.a,{placement:"top",title:"区分不同固件包，只有相同的固件才能升级"},s.a.createElement(W.a,{type:"question-circle-o"}))),hasFeedback:!0},t("totalVersion",{rules:[{required:!0,message:"请输入固件系列标识!"}]})(s.a.createElement(U.a,{maxLength:30,placeholder:"只能包含字母、数字、下划线、短横线、点号"}))),s.a.createElement(C.a.Item,{label:s.a.createElement("span",null,"内部版本号：",s.a.createElement(J.a,{placement:"top",title:"同一系列的固件根据内部版本号决定是否升级"},s.a.createElement(W.a,{type:"question-circle-o"}))),hasFeedback:!0},t("mainVersion",{rules:[{required:!0,message:"请输入内部版本号!"}]})(s.a.createElement(U.a,{maxLength:10,placeholder:"内部版本须为不小于0的整数"}))),s.a.createElement(C.a.Item,{label:"固件程序：",hasFeedback:!0},s.a.createElement(q.a,{isNotImg:!0,format:"bin,hex,zip,cyacd",maxsize:"5120",upFileShowType:!0,chooseWay:!0,onRef:function(t){return e.addUpdataDevice=t}})),s.a.createElement(n.a,{style:{position:"relative",left:"320px"},type:"primary",onClick:this.onCancel},"取消"),s.a.createElement(n.a,{style:{position:"absolute",right:"24px"},type:"primary",htmlType:"submit"},"确定")))}}])&&X(t.prototype,a),r&&X(t,r),i}(s.a.Component)),se=a("E+3K"),ue=a.n(se),pe=a("DgvE"),de=a("GNPG");a("VWUe");function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(a),!0).forEach((function(t){he(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function he(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ge(e,t,a){return t&&ve(e.prototype,t),a&&ve(e,a),e}function Ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=De(e);if(t){var r=De(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return we(this,a)}}function we(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?Pe(e):t}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ce=o.a.TabPane;function Se(e){Object(pe.f)(e)}var Ae,ke,je,_e=function(e){Ee(a,e);var t=Ie(a);function a(e){var n;be(this,a),(n=t.call(this,e))._value="",n.state={value:""};var r=n.props.value;return n.rule(n.props.ruletype,r)||(r=""),n.props.value&&(n.state.value=r),n._value=r,n.rule=n.rule.bind(Pe(n)),n}return ge(a,[{key:"componentWillReceiveProps",value:function(e){var t=e.value;this.rule(this.props.ruletype,t)||(t=""),this.state.initValue!=e.value&&this.setState({value:t,initValue:t})}},{key:"rule",value:function(e,t){return!e||!t||(!("mac"!=(e=e.toLocaleLowerCase())||!/^[A-Fa-f0-9]{0,12}$/.test(t))||(!("long"!=e&&"integer"!=e||!/^-?[0-9]*$/.test(t))||(!("float"!=e||!/^(\d+\.\d*|\d+)$/.test(t))||(!("hexstring"!=e||!/^[A-Fa-f0-9]*$/.test(t))||"string"==e))))}},{key:"render",value:function(){var e=c()(this.props),t=this.props.onChange;return e.value=this.state.value,e.onChange=function(e){if(e){var a=e.target.value;this.rule(this.props.ruletype,a)?(t&&t(a),this.setState({value:a}),this._value=a):this.setState({value:this._value?this._value:""})}}.bind(this),s.a.createElement("input",e)}}]),a}(s.a.Component),Te=function(e){Ee(a,e);var t=Ie(a);function a(e){var n;be(this,a);var r=(n=t.call(this,e)).props.filterState?n.props.filterState:{},o=!!n.props.isFilter&&n.props.isFilter;return n.state={filterObj:r,isFilter:o,activeKey:n.props.activeKey},n._onReset=n._onReset.bind(Pe(n)),n.onClear=n.onClear.bind(Pe(n)),n._onChange=n._onChange.bind(Pe(n)),n._onChangeSelect=n._onChangeSelect.bind(Pe(n)),n._onChangeCheckbox=n._onChangeCheckbox.bind(Pe(n)),n.exportDataHandler=n.exportDataHandler.bind(Pe(n)),n}return ge(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(ye({},e._state))}},{key:"_onChange",value:function(e,t){var a=this.state.filterObj;a[e]=t,this.setState(a),this.props.onChange&&this.props.onChange(this.state.isFilter,a)}},{key:"_onChangeSelect",value:function(e,t){this._onChange(e,t.target.value)}},{key:"_onChangeCheckbox",value:function(){var e=!this.state.isFilter;this.setState({isFilter:e}),this.props.onChange&&this.props.onChange(e,this.state.filterObj)}},{key:"_onReset",value:function(){this.setState({filterObj:{}}),this.props.onChange&&this.props.onChange(this.state.isFilter,{})}},{key:"onClear",value:function(){1==this.state.activeKey?this.state.get_clearDevData1():this.state.get_clearDevData2()}},{key:"exportDataHandler",value:function(){this.props.openDialog()}},{key:"render",value:function(){var e=this.props.dataTypeList.data.map((function(e,t){return s.a.createElement("option",{key:"dataTypeOption"+t,value:e.commandList?e.commandList.join(","):""},e.typeName)})),t=this.props.activeKey;return s.a.createElement("div",{className:"dev-test-filter-panel"},s.a.createElement("form",null,s.a.createElement("div",{style:{display:1==t?"inline-block":"none"}},s.a.createElement("label",null,"命令类型："),s.a.createElement("select",{className:"has-next sclt-cont",onChange:this._onChangeSelect.bind(this,"filterCommand")},e),s.a.createElement("label",null,"数据类型："),s.a.createElement("select",{className:"has-next sclt-cont",onChange:this._onChangeSelect.bind(this,"filterDataType")},s.a.createElement("option",{value:""},"全部"),s.a.createElement("option",{value:"U"},"上行数据"),s.a.createElement("option",{value:"D"},"下行数据"))),s.a.createElement("div",{style:{display:2==t?"inline-block":"none"}},s.a.createElement("label",null,"升级类型："),s.a.createElement("select",{className:"has-next sclt-cont firm-up",onChange:this._onChangeSelect.bind(this,"bussinessType")},s.a.createElement("option",{value:""},"全部"),s.a.createElement("option",{value:"2"},"Wi-Fi固件升级"),s.a.createElement("option",{value:"3"},"PCB固件升级"))),s.a.createElement("label",null,"MAC地址："),s.a.createElement(_e,{ruletype:"mac",type:"text",className:"has-next",maxLength:"12",value:this.state.filterObj.filterMac,onChange:this._onChange.bind(this,"filterMac")}),s.a.createElement("input",{type:"reset",value:"重置",className:"has-next",onClick:this._onReset})),s.a.createElement("div",{className:"filterBox"},s.a.createElement("input",{type:"checkbox",id:"isFilter",value:"9",name:"filterIsFilter",onChange:this._onChangeCheckbox.bind(this,"filterIsFilter")}),s.a.createElement("label",{className:"by-checkbox has-next",htmlFor:"isFilter"},"过滤"),s.a.createElement("input",{type:"button",value:"清空报文列表",onClick:this.onClear}),1==t&&s.a.createElement("span",{className:"fr export-excel-btn",onClick:this.exportDataHandler},"导出数据")))}}]),a}(s.a.Component),Ne=function(e){Ee(a,e);var t=Ie(a);function a(){return be(this,a),t.apply(this,arguments)}return ge(a,[{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.title,n=e.children;return s.a.createElement("div",{className:"dev-test-common-panel "+(t||"")},s.a.createElement("div",{className:"common-panel-title"},s.a.createElement("p",null,a)),s.a.createElement("div",{className:"common-panel-content"},n))}}]),a}(s.a.Component),Le=function(e){Ee(a,e);var t=Ie(a);function a(e){var n;be(this,a);var r={};return(n=t.call(this,e)).props.selectedRowId&&(r.selectedId=n.props.selectedRowId),n.state=r,n.selectRow=n.selectRow.bind(Pe(n)),n}return ge(a,[{key:"filter",value:function(e){return(this.props.filter?this.props.filter:function(){return!0})(e)}},{key:"selectRow",value:function(e,t){e&&e.id&&(this.setState({selectedId:e.id}),t&&t(e))}},{key:"generateTHead",value:function(){var e=this,t=(this.props.thead?this.props.thead:[]).map((function(t,a){return s.a.createElement("td",{key:a,width:e.props.rowsWidth&&e.props.rowsWidth[a]?e.props.rowsWidth[a]:""},t)})),a="";return this.props.thead&&(a=s.a.createElement("thead",null,s.a.createElement("tr",{key:"1"},t))),a}},{key:"generateTBody",value:function(){var e=this.props.generateRule?this.props.generateRule:"",t=function(e,t,a){return a&&"string"!=a?"json"==a?e[(this.props.rowKey?this.props.rowKey:[])[t]]:"function"==a?(this.props.rowFn?this.props.rowFn:[])[t](e):void 0:e[t]}.bind(this),a=function(e){return this.props.thead?this.props.thead.length:this.props.colCount?this.props.colCount:e&&"string"!=e?"json"==e?this.props.rowKey?this.props.rowKey.length:0:"function"==e?this.props.rowFn?this.props.rowFn.length:0:void 0:this.props.rows[0]?this.props.rows[0].length:0}.bind(this),n=this.props.minRowCount?parseInt(this.props.minRowCount):0,r=this.props.rows?this.props.rows:[],o=a(e);if(r.length<n){for(var i=[],c=0;c<o;c++)i.push("");for(var l=n-r.length,u=[],p=0;p<l;p++)u.push(i);r=r.concat(u)}for(var d=[],m=0,f=[],y=0;y<o;y++)f.push(s.a.createElement("td",{width:this.props.rowsWidth&&this.props.rowsWidth[y]?this.props.rowsWidth[y]:"",key:"tbody"+y}));for(var h=0;h<r.length;h++){var b=r[h],v=m%2==1?"odd":"";if(this.filter(b)){if(m++,this.props.maxRow&&m>=this.props.maxRow)break;var g=this.state.selectedId;g&&b&&g==b.id&&(v+=" active");for(var E=[],O=0;O<o;O++){var I=t(b,O,e);E.push(s.a.createElement("td",{key:"curValue"+O,width:this.props.rowsWidth&&this.props.rowsWidth[O]?this.props.rowsWidth[O]:""},I))}E=E&&E.length>0?E:s.a.createElement("td",null),d.push(s.a.createElement("tr",{key:h,className:v,onClick:this.selectRow.bind(this,b,this.props.selectedRow)},E))}}for(var w=d.length;w<n;w++){var P=w%2==1?"odd":"";d.push(s.a.createElement("tr",{key:f+w,className:P},f))}return d}},{key:"render",value:function(){var e=this.generateTHead(),t=this.generateTBody();return s.a.createElement("div",{className:"dev-test-table"},s.a.createElement("table",{className:this.props.tableClass?this.props.tableClass:""},e,s.a.createElement("tbody",null,t)))}}]),a}(s.a.Component),xe=function(e){Ee(a,e);var t=Ie(a);function a(e){var n;return be(this,a),(n=t.call(this,e)).clearErrorMsg=function(){n.state.get_clearException1()},n.state=n.props._state,n.changeFilter=n.changeFilter.bind(Pe(n)),n.commitData=n.commitData.bind(Pe(n)),n.editJsonData=n.editJsonData.bind(Pe(n)),n.analysisData=n.analysisData.bind(Pe(n)),n.tableFilter=n.tableFilter.bind(Pe(n)),n.changeParseData=n.changeParseData.bind(Pe(n)),n.selectedTableRow=n.selectedTableRow.bind(Pe(n)),n}return ge(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(ye({},e._state))}},{key:"tableFilter",value:function(e){if(!e)return!1;if(0!=e.bussinessType&&1!=e.bussinessType)return!1;if(!this.state.isFilter)return!0;var t=this.state.filterObj;return!(t.filterMac&&t.filterMac.length>0&&(!e.macAddress||0!=e.macAddress.indexOf(t.filterMac)))&&(!(t.filterDataType&&(!e.dataType||e.dataType!=t.filterDataType))&&!(t.filterCommand&&(!e.command||t.filterCommand.indexOf(e.command)<0)))}},{key:"selectedTableRow",value:function(e){this.state.get_SelectedData1(e)}},{key:"changeParseData",value:function(e,t){this.state.selectedData1.parseData[e]=t}},{key:"analysisData",value:function(){var e=this.state.deviceAndWs.productInfo.data,t=this.state.propertyConfig.propertyConfig,a=this.state.propertyConfig.propertyConfigId;if(!(e&&a&&t&&this.state.selectedData1))return[];var n=a[[e.productVersion,e.deviceTypeId,e.deviceSubTypeId,this.state.selectedData1.command].join("-")];if(!n)return[];var r=t[n]?t[n]:{},o=this.state.selectedData1.parseData,i=[];if(1==this.state.selectedData1.dataFormat)for(var c in o)if("0104"==this.state.selectedData1.command||"0007"===this.state.selectedData1.command){i.push([c,s.a.createElement(_e,{type:"text",value:o[c],onChange:this.changeParseData.bind(this,c)})])}else i.push([c,o[c]]);else if(o)for(var l in r){var u=r[l].property,p=o[u];if(o&&void 0!==p){var d=r[l];if(d)if("0104"==this.state.selectedData1.command||"0007"===this.state.selectedData1.command){var m="text";"long"!=d.valueType&&"integer"!=d.valueType||(m="number"),i.push([d.propertyName,s.a.createElement(_e,{ruletype:d.javaType,type:m,value:p,onChange:this.changeParseData.bind(this,u)})])}else i.push([d.propertyName,p])}}return i}},{key:"editJsonData",value:function(e){var t=this.state.selectedData1,a=!t.editJson;if(a)t.editJson=a,this.setState({selectedData1:t});else{var n=this.refs.editJsonTextArea.getDOMNode().value,r=null;try{null!=(r=JSON.parse(n))&&(t.parseData=r),t.editJson=a,this.setState({selectedData1:t})}catch(e){Object(Q.a)({description:"JSON格式化异常，请检查JSON字符串语法",type:"warn"})}}}},{key:"commitData",value:function(){var e=this.state.selectedData1;if(e){var t={packetStart:e.packetStart,deviceType:e.deviceType,deviceSubType:e.deviceSubType,dataVersion:e.dataVersion,command:e.command,macAddress:e.macAddress,parseData:e.parseData};Ae.send(JSON.stringify(t))}}},{key:"getExceptionDom",value:function(){var e=this.state.websocketMessage.deviceDebuggerException;if(e)return e.split("\r\n").map((function(e,t){return s.a.createElement("p",{key:"ExceptionDom"+t},e)}))}},{key:"changeFilter",value:function(e,t){this.setState({isFilter:e,filterObj:t})}},{key:"render",value:function(){var e=this.state,t=e.dataTypeList,a=e.websocketMessage,n=e.selectedData1;return s.a.createElement("div",null,s.a.createElement(Te,{_state:this.state,dataTypeList:t,activeKey:"1",onChange:this.changeFilter,openDialog:this.props.openDialog}),s.a.createElement("div",{className:"dev-test-tab-content data-debug-page"},s.a.createElement("div",{className:"dev-test-data-wrap"},s.a.createElement("div",{className:"left-wrap"},s.a.createElement(Ne,{title:"报文列表",className:"add_data_table_scroll"},s.a.createElement(Le,{thead:["处理时间","MAC地址","命令字","包标识","数据类型","报文长度","数据长度"],rows:a.devData,rowKey:["time","macAddress","command","packetSequence","dataTypeString","packetLengthString","dataLengthString"],rowsWidth:["","125px"],generateRule:"json",minRowCount:15,maxRow:601,tableClass:"fixed-head",filter:this.tableFilter,selectedRow:this.selectedTableRow,selectedRowId:n?n.id:null})),s.a.createElement(Ne,{title:"原始报文数据"},s.a.createElement("div",{className:"data-area"},s.a.createElement("div",{className:"data-input"},s.a.createElement("p",null,(n.packet?n.packet:"").replace(/(.{2})/g,"$1 "))),s.a.createElement("div",{className:"data-opera"},s.a.createElement("div",{className:"inner"},s.a.createElement("input",{type:"button",value:"复制",onClick:Se.bind(this,n?n.packet:"")}))))),s.a.createElement(Ne,{title:"设备明文数据"},s.a.createElement("div",{className:"data-area"},s.a.createElement("div",{className:"data-input"},s.a.createElement("p",null,(n.data?n.data:"").replace(/(.{2})/g,"$1 "))),s.a.createElement("div",{className:"data-opera"},s.a.createElement("div",{className:"inner"},s.a.createElement("input",{type:"button",value:"复制",onClick:Se.bind(this,n?n.data:"")}))))),s.a.createElement(Ne,{title:"调试错误信息"},s.a.createElement("div",{className:"data-area"},s.a.createElement("div",{className:"data-input exception-text"},this.getExceptionDom()),s.a.createElement("div",{className:"data-opera"},s.a.createElement("div",{className:"inner"},s.a.createElement("input",{type:"button",value:"复制",onClick:Se.bind(this,a.deviceDebuggerException)}),s.a.createElement("p",null,s.a.createElement("input",{type:"button",value:"删除",onClick:this.clearErrorMsg}))))))),s.a.createElement("div",{className:"right-wrap"},s.a.createElement(Ne,{title:"报文解析列表"},n&&1==n.dataFormat&&null!=n.parseData?s.a.createElement("div",{className:"json-format-panel"},n&&n.editJson?s.a.createElement("div",{className:"editJsonPanel"},s.a.createElement("textarea",{defaultValue:n&&n.parseData?JSON.stringify(n.parseData):n.parseData+"",ref:"editJsonTextArea"})):s.a.createElement(w,{json:n.parseData,jsonCode:n.id})):s.a.createElement(Le,{rows:this.analysisData(),minRowCount:24,rowsWidth:["60%",""],tableClass:"fixed-head"})),s.a.createElement("div",{className:"send-command-area"},s.a.createElement("div",{className:"inner"},s.a.createElement("p",null,s.a.createElement("input",{type:"button",value:n&&n.editJson?"保存编辑数据":"编辑JSON数据",style:{display:!n||1!=n.dataFormat||"0103"!=n.command&&"0104"!=n.command&&"0007"!=n.command?"none":"inline-block"},onClick:this.editJsonData}),s.a.createElement("input",{type:"button",value:"下发控制命令",style:{display:!n||"0104"!=n.command&&"0007"!=n.command?"none":"inline-block"},onClick:this.commitData}))))))))}}]),a}(s.a.Component),Re=function(e){Ee(a,e);var t=Ie(a);function a(e){var n;return be(this,a),(n=t.call(this,e)).handleConfirm=function(e,t){n.setState({upgradeDialogClosable:!1,upgradeDialogTip:{},upgradeData:null})},n.handlecancel=function(){n.setState({upgradeDialogClosable:!1})},n.state=ye({upgradeDialogClosable:!1,upgradeDialogTip:{},upgradeData:null,firmwareModules:[],deviceVersionType:"",mac:""},n.props._state),n.tableFilter=n.tableFilter.bind(Pe(n)),n.selectedTableRow=n.selectedTableRow.bind(Pe(n)),n.getOnlineDevice=n.getOnlineDevice.bind(Pe(n)),n.selectedDeviceFn=n.selectedDeviceFn.bind(Pe(n)),n.upgrade=n.upgrade.bind(Pe(n)),n.clearErrorMsg=n.clearErrorMsg.bind(Pe(n)),n.getExceptionDom=n.getExceptionDom.bind(Pe(n)),n.changeFilter=n.changeFilter.bind(Pe(n)),n}return ge(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(ye({},e._state))}},{key:"tableFilter",value:function(e){if(!e)return!1;if(2!=e.bussinessType&&3!=e.bussinessType)return!1;if(!this.state.isFilter)return!0;var t=this.state.filterObj;return!(t.filterMac&&t.filterMac.length>0&&(!e.macAddress||0!=e.macAddress.indexOf(t.filterMac)))&&(!t.bussinessType||t.bussinessType==e.bussinessType)}},{key:"selectedTableRow",value:function(e){this.state.get_SelectedData2(e)}},{key:"getOnlineDevice",value:function(){var e=[],t=0;for(var a in this.state.websocketMessage.onlineDevice)if((new Date).getTime()-this.state.websocketMessage.onlineDevice[a].time<=25e3){var n={id:++t,mac:a,packetStart:this.state.websocketMessage.onlineDevice[a].packetStart};e.push(n)}return e}},{key:"selectedDeviceFn",value:function(e){this.selectedDevice=e}},{key:"upgrade",value:function(e){var t=this;if(this.selectedDevice){var a=1==e?"模组升级":"MCU升级";Object(G.c)(G.a.getAllFirmwareVersionType,{deviceVersionTypeId:1==e?1:2}).then((function(e){0==e.code&&t.setState({firmwareModules:e.data})})),this.setState({upgradeDialogClosable:!0,tipconts:a,deviceVersionType:e,mac:this.selectedDevice.mac})}else Object(Q.a)({description:"请先选择升级的设备！"})}},{key:"clearErrorMsg",value:function(){this.state.get_clearException2()}},{key:"getExceptionDom",value:function(){if(this.state.websocketMessage)return this.state.websocketMessage.deviceDebuggerException2.split("\r\n").map((function(e,t){return s.a.createElement("p",{key:"deviceDebuggerException2"+t},e)}))}},{key:"changeFilter",value:function(e,t){this.setState({isFilter:e,filterObj:t})}},{key:"render",value:function(){var e=this.state,t=e.selectedData2,a=e.upgradeDialogClosable,n=e.upgradeDialogTip,o=e.tipconts,i=e.firmwareModules,c=e.deviceVersionType,l=e.mac,u=this.props,p=u.firmwareVersionType,d=u.totalVersion,m=u.mainVersion,f=u.macList;return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(Te,{_state:this.state,dataTypeList:this.state.dataTypeList,activeKey:"2",onChange:this.changeFilter}),s.a.createElement("div",{className:"dev-test-tab-content equipment-upgrade-page"},s.a.createElement("div",{className:"dev-test-data-wrap"},s.a.createElement("div",{className:"left-wrap"},s.a.createElement(Ne,{title:"在线设备列表"},s.a.createElement("div",{className:"device-list"},s.a.createElement(Le,{rows:this.getOnlineDevice(),rowKey:["id","mac"],generateRule:"json",minRowCount:26,rowsWidth:["25%",""],selectedRow:this.selectedDeviceFn})),0==this.props.hardwareType?s.a.createElement("div",{className:"device_upgrade_opera"},s.a.createElement("p",null,s.a.createElement("input",{type:"button",value:"模组升级",onClick:this.upgrade.bind(this,"1")})),s.a.createElement("p",{className:"line"}),s.a.createElement("p",null,s.a.createElement("input",{type:"button",value:"MCU升级",onClick:this.upgrade.bind(this,"2")}))):s.a.createElement("div",{className:"device_upgrade_opera"},s.a.createElement("p",null,s.a.createElement("input",{type:"button",value:"模组升级",onClick:this.upgrade.bind(this,"1")}))))),s.a.createElement("div",{className:"right-wrap"},s.a.createElement(Ne,{title:"报文列表",className:"add_data_table_scroll"},s.a.createElement(Le,{thead:["处理时间","MAC地址","命令字","包标识","数据类型","报文长度","数据长度"],rows:this.state.websocketMessage.devData2,rowKey:["time","macAddress","command","packetSequence","dataTypeString","packetLengthString","dataLengthString"],rowsWidth:["","125px"],generateRule:"json",minRowCount:15,maxRow:601,tableClass:"fixed-head",filter:this.tableFilter,selectedRow:this.selectedTableRow,selectedRowId:this.state.selectedData1?this.state.selectedData1.id:null})),s.a.createElement(Ne,{title:"原始报文数据"},s.a.createElement("div",{className:"data-area"},s.a.createElement("div",{className:"data-input"},s.a.createElement("p",null,(t.packet?t.packet:"").replace(/(.{2})/g,"$1 "))),s.a.createElement("div",{className:"data-opera"},s.a.createElement("div",{className:"inner"},s.a.createElement("input",{type:"button",value:"复制",onClick:Se.bind(this,t?t.packet:"")}))))),s.a.createElement(Ne,{title:"设备明文数据"},s.a.createElement("div",{className:"data-area"},s.a.createElement("div",{className:"data-input"},s.a.createElement("p",null,(t.data?t.data:"").replace(/(.{2})/g,"$1 "))),s.a.createElement("div",{className:"data-opera"},s.a.createElement("div",{className:"inner"},s.a.createElement("input",{type:"button",value:"复制",onClick:Se.bind(this,t?t.data:"")}))))),s.a.createElement(Ne,{title:"调试信息控制台"},s.a.createElement("div",{className:"data-area"},s.a.createElement("div",{className:"data-input exception-text"}," ",this.getExceptionDom()," "),s.a.createElement("div",{className:"data-opera"},s.a.createElement("div",{className:"inner"},s.a.createElement("input",{type:"button",value:"复制",onClick:Se.bind(this,this.state.websocketMessage.deviceDebuggerException2)}),s.a.createElement("p",null,s.a.createElement("input",{type:"button",value:"删除",onClick:this.clearErrorMsg})))))))))),s.a.createElement(r.a,{className:"upgradeDialog",title:n.tipconts||"",visible:a,footer:null,onCancel:this.handlecancel,maskClosable:!1},s.a.createElement(le,{tipconts:o,onCancel:this.handlecancel,deviceVersionType:c,macList:f,mac:l,firmwareModules:i,firmwareVersionType:p,totalVersion:d,mainVersion:m,changeFormData:this.props.changeFormData,get_clearDevData2:this.state.get_clearDevData2})))}}]),a}(s.a.Component),Me=function(e){Ee(a,e);var t=Ie(a);function a(e){var n;return be(this,a),(n=t.call(this,e)).state={param:{command:n.props.code,mac:n.props.defaultMac}},n.vaild=n.vaild.bind(Pe(n)),n.onConfirm=n.onConfirm.bind(Pe(n)),n.onCancel=n.onCancel.bind(Pe(n)),n.bindParam=n.bindParam.bind(Pe(n)),n}return ge(a,[{key:"onConfirm",value:function(){var e=this.vaild();if(e)Object(Q.a)({type:"error",description:e});else{var t=c()(this.state.param);t.command=this.props.code,this.props.onConfirm&&this.props.onConfirm(t),this.setState({param:{}})}}},{key:"onCancel",value:function(){this.setState({param:{}}),this.props.onCancel()}},{key:"vaild",value:function(){return!0}},{key:"bindParam",value:function(e,t,a){var n=Object.assign({},this.state.param),r=t;!t&&a&&(r=a.target.value),n[e]=r,this.setState({param:n})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:""},s.a.createElement("div",{className:"modal-body"},function(t){switch(t){case"0102":return e.vaild=function(){return e.state.param.mac?/[A-Fa-f\d]{12}/.test(e.state.param.mac)?void 0:"请输入正确的MAC地址":"请输入设备的MAC地址"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"设备MAC地址"),s.a.createElement("div",{className:"form-group-input-out"},s.a.createElement(_e,{ruletype:"mac",type:"text",maxLength:"12",value:e.state.param.mac,onChange:e.bindParam.bind(e,"mac")})));case"0103":return e.vaild=function(){if(!e.state.param.mac)return"请输入设备的MAC地址";if(!/[A-Fa-f\d]{12}/.test(e.state.param.mac))return"请输入正确的MAC地址";try{JSON.parse(e.state.param.json)}catch(e){return"json格式错误，请校验"}},s.a.createElement("div",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"设备MAC地址"),s.a.createElement("div",{className:"form-group-input-out"},s.a.createElement(_e,{ruletype:"mac",type:"text",maxLength:"12",value:e.state.param.mac,onChange:e.bindParam.bind(e,"mac")}))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"JSON"),s.a.createElement("div",{className:"form-group-input-out"},s.a.createElement("textarea",{onChange:e.bindParam.bind(e,"json",null)}))));case"0104":return e.vaild=function(){if(!e.state.param.mac)return"请输入设备的MAC地址";if(!/[A-Fa-f\d]{12}/.test(e.state.param.mac))return"请输入正确的MAC地址";if(!e.state.param.mac)return"请输入硬件配置信息";try{JSON.parse(e.state.param.json)}catch(e){return"json格式错误，请校验"}},s.a.createElement("div",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"设备MAC地址"),s.a.createElement("div",{className:"form-group-input-out"},s.a.createElement(_e,{ruletype:"mac",type:"text",maxLength:"12",value:e.state.param.mac,onChange:e.bindParam.bind(e,"mac")}))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"JSON"),s.a.createElement("div",{className:"form-group-input-out"},s.a.createElement("textarea",{onChange:e.bindParam.bind(e,"json",null)}))));case"0107":return e.vaild=function(){if(!e.state.param.mac)return"请输入设备的MAC地址";if(!/[A-Fa-f\d]{12}/.test(e.state.param.mac))return"请输入正确的MAC地址";if(!e.state.param.json)return"请输入硬件配置信息";try{JSON.parse(e.state.param.json)}catch(e){return"json格式错误，请校验"}},s.a.createElement("div",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"设备MAC地址"),s.a.createElement("div",{className:"form-group-input-out"},s.a.createElement(_e,{ruletype:"mac",type:"text",maxLength:"12",value:e.state.param.mac,onChange:e.bindParam.bind(e,"mac")}))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"硬件配置信息(json)"),s.a.createElement("div",{className:"form-group-input-out"},s.a.createElement("textarea",{onChange:e.bindParam.bind(e,"json",null)}))));case"0109":return e.vaild=function(){return e.state.param.mac?/[A-Fa-f\d]{12}/.test(e.state.param.mac)?e.state.param.ip?e.state.param.port?void 0:"请输入服务器端口":"请输入服务器IP地址":"请输入正确的MAC地址":"请输入设备的MAC地址"},s.a.createElement("div",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"设备MAC地址"),s.a.createElement("div",{className:"form-group-input-out"},s.a.createElement(_e,{ruletype:"mac",type:"text",maxLength:"12",value:e.state.param.mac,onChange:e.bindParam.bind(e,"mac")}))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"服务器IP地址"),s.a.createElement("div",{className:"form-group-input-out"},s.a.createElement("input",{type:"text",value:e.state.param.ip,onChange:e.bindParam.bind(e,"ip",null)}))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"服务器端口"),s.a.createElement("div",{className:"form-group-input-out"},s.a.createElement(_e,{ruletype:"integer",type:"number",maxLength:"4",value:e.state.param.port,onChange:e.bindParam.bind(e,"port")}))));case"010A":return e.vaild=function(){return e.state.param.mac?/[A-Fa-f\d]{12}/.test(e.state.param.mac)?e.state.param.uploadCycle?e.state.param.collectCycle?e.state.param.heatBeatCycle?void 0:"请输入心跳周期":"请输入采集周期":"请输入上传周期":"请输入正确的MAC地址":"请输入设备的MAC地址"},s.a.createElement("div",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"设备MAC地址"),s.a.createElement("div",{className:"form-group-input-out"},s.a.createElement(_e,{ruletype:"mac",type:"text",maxLength:"12",value:e.state.param.mac,onChange:e.bindParam.bind(e,"mac")}))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"上传周期(秒)"),s.a.createElement("div",{className:"form-group-input-out"},s.a.createElement(_e,{ruletype:"integer",type:"number",value:e.state.param.uploadCycle,onChange:e.bindParam.bind(e,"uploadCycle")}))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"采集周期(秒)"),s.a.createElement("div",{className:"form-group-input-out"},s.a.createElement(_e,{ruletype:"integer",type:"number",value:e.state.param.collectCycle,onChange:e.bindParam.bind(e,"collectCycle")}))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"心跳周期(秒)"),s.a.createElement("div",{className:"form-group-input-out"},s.a.createElement(_e,{ruletype:"integer",type:"number",value:e.state.param.heatBeatCycle,onChange:e.bindParam.bind(e,"heatBeatCycle")}))));case"010B":case"0405":case"1405":case"0404":case"1404":case"1403":case"140E":return e.vaild=function(){return e.state.param.mac?/[A-Fa-f\d]{12}/.test(e.state.param.mac)?void 0:"请输入正确的MAC地址":"请输入设备的MAC地址"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"设备MAC地址"),s.a.createElement("div",{className:"form-group-input-out"},s.a.createElement(_e,{ruletype:"mac",type:"text",maxLength:"12",value:e.state.param.mac,onChange:e.bindParam.bind(e,"mac")})));default:return null}}(this.props.code)),s.a.createElement("div",{className:"modal-footer"},s.a.createElement(n.a,{type:"primary",onClick:this.onConfirm},"确定"),s.a.createElement(n.a,{className:"cancel",onClick:this.onCancel},"取消")))}}]),a}(s.a.Component),Ve=function(e){Ee(a,e);var t=Ie(a);function a(){return be(this,a),t.apply(this,arguments)}return ge(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"dev-test-header"},this.props.children)}}]),a}(s.a.Component),Be=function(e){Ee(a,e);var t=Ie(a);function a(e){var n;return be(this,a),(n=t.call(this,e)).state={},n}return ge(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"dev-test-item dev-test-receive "+this.props.className},s.a.createElement("p",null,s.a.createElement("input",{id:"btnReceive",type:"checkbox",checked:this.props.value,onChange:this.props.onChange}),s.a.createElement("label",{htmlFor:"btnReceive"},"接收报文")))}}]),a}(s.a.Component),Fe=function(e){Ee(a,e);var t=Ie(a);function a(e){var n;return be(this,a),(n=t.call(this,e)).state={focus:!1},n.selectCommand=n.selectCommand.bind(Pe(n)),n._onFocusHandler=n._onFocusHandler.bind(Pe(n)),n._onBlurHandler=n._onBlurHandler.bind(Pe(n)),n}return ge(a,[{key:"_onFocusHandler",value:function(e){e.nativeEvent.stopImmediatePropagation(),this.setState({focus:!this.state.focus})}},{key:"_onBlurHandler",value:function(){this.setState({focus:!1})}},{key:"componentDidMount",value:function(){document.addEventListener("click",this._onBlurHandler,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this._onBlurHandler,!1)}},{key:"selectCommand",value:function(e,t){this.props.onSelect&&this.props.onSelect(e)}},{key:"render",value:function(){return s.a.createElement("div",{className:"dev-test-item dev-test-command "+this.props.className,onClick:this._onFocusHandler,style:{display:1==this.props.activeKey?"block":"none"}},s.a.createElement("div",{className:"command-select",style:{display:this.state.focus?"block":"none"}},s.a.createElement("ul",null,s.a.createElement("li",{onClick:this.selectCommand.bind(this,"0102")},s.a.createElement("span",{className:"num"},"0102-"),s.a.createElement("span",{className:"txt",title:"请求加密"},"请求加密")),s.a.createElement("li",{onClick:this.selectCommand.bind(this,"0103")},s.a.createElement("span",{className:"num"},"0103-"),s.a.createElement("span",{className:"txt",title:"非WIF实时数据"},"非WIF实时数据")),s.a.createElement("li",{onClick:this.selectCommand.bind(this,"0104")},s.a.createElement("span",{className:"num"},"0104-"),s.a.createElement("span",{className:"txt",title:"控制数据"},"控制数据")),s.a.createElement("li",{onClick:this.selectCommand.bind(this,"0107")},s.a.createElement("span",{className:"num"},"0107-"),s.a.createElement("span",{className:"txt",title:"硬件配置"},"硬件配置")),s.a.createElement("li",{onClick:this.selectCommand.bind(this,"0109")},s.a.createElement("span",{className:"num"},"0109-"),s.a.createElement("span",{className:"txt",title:"切换服务器"},"切换服务器")),s.a.createElement("li",{onClick:this.selectCommand.bind(this,"010A")},s.a.createElement("span",{className:"num"},"010A-"),s.a.createElement("span",{className:"txt",title:"更改上传周期"},"更改上传周期")),s.a.createElement("li",{onClick:this.selectCommand.bind(this,"010B")},s.a.createElement("span",{className:"num"},"010B-"),s.a.createElement("span",{className:"txt",title:"解绑命令"},"解绑命令")),s.a.createElement("li",{onClick:this.selectCommand.bind(this,"0405")},s.a.createElement("span",{className:"num"},"0405-"),s.a.createElement("span",{className:"txt",title:"上传运行数据"},"上传运行数据")),s.a.createElement("li",{onClick:this.selectCommand.bind(this,"1405")},s.a.createElement("span",{className:"num"},"1405-"),s.a.createElement("span",{className:"txt",title:"上传历史运行数据"},"上传历史运行数据")),s.a.createElement("li",{onClick:this.selectCommand.bind(this,"0404")},s.a.createElement("span",{className:"num"},"0404-"),s.a.createElement("span",{className:"txt",title:"上传控制数据"},"上传控制数据")),s.a.createElement("li",{onClick:this.selectCommand.bind(this,"1404")},s.a.createElement("span",{className:"num"},"1404-"),s.a.createElement("span",{className:"txt",title:"上传历史控制数据"},"上传历史控制数据")),s.a.createElement("li",{onClick:this.selectCommand.bind(this,"1403")},s.a.createElement("span",{className:"num"},"1403-"),s.a.createElement("span",{className:"txt",title:"非Wi-Fi设备数据"},"非Wi-Fi设备数据")),s.a.createElement("li",{onClick:this.selectCommand.bind(this,"140E")},s.a.createElement("span",{className:"num"},"140E-"),s.a.createElement("span",{className:"txt",title:"上传历史故障数据"},"上传历史故障数据")))))}}]),a}(s.a.Component),He=window.location.protocol;ke=He.replace(/https?/,"wss");var Ke=Object(P.connect)((function(e){return{deviceAndWs:e.getIn(["deviceDebug","deviceAndWs"]).toJS(),websocketMessage:e.getIn(["deviceDebug","websocketMessage"]).toJS(),dataTypeList:e.getIn(["deviceDebug","dataTypeList"]).toJS(),propertyConfig:e.getIn(["deviceDebug","propertyConfig"]).toJS(),deviceDebugAccountList:e.getIn(["deviceDebug","deviceDebugAccountList"]).toJS(),deviceDebugMacList:e.getIn(["deviceDebug","deviceDebugMacList"]).toJS(),selectedData1:e.getIn(["deviceDebug","selectedData1"]).toJS(),selectedData2:e.getIn(["deviceDebug","selectedData2"]).toJS(),productBaseInfo:e.getIn(["product","productBaseInfo"]).toJS()}}),(function(e){return{updateDevice:function(t){return e(Object(de.f)(t))},getwebsocketMessage:function(t){return e(Object(de.l)(t))},getToken:function(){return e(Object(de.k)())},resetData:function(){return e(Object(de.s)())},getDataTypeList:function(t){return e(Object(de.e)(t))},getPropertyConfig:function(t){return e(Object(de.i)(t))},get_SelectedData1:function(t){return e(Object(de.m)(t))},get_SelectedData2:function(t){return e(Object(de.n)(t))},get_clearException1:function(){return e(Object(de.q)())},get_clearException2:function(){return e(Object(de.r)())},get_clearDevData1:function(){return e(Object(de.o)())},get_clearDevData2:function(){return e(Object(de.p)())},updateDeviceDebugAccountList:function(t){return e(Object(de.t)(t))},updateDeviceDebugMacList:function(t){return e(Object(de.u)(t))}}}))(ie=function(e){Ee(a,e);var t=Ie(a);function a(e){var n;return be(this,a),(n=t.call(this,e)).bindEvent=function(){Ae.onopen=function(){n.webSocketStatu=1,clearInterval(je),je=setInterval((function(){Ae.send("33")}),5e3);var e=n.props.deviceAndWs.productInfo.data,t="["+n.props.deviceAndWs.token.data+"|"+e.customerCode+"|"+e.deviceTypeId+"#"+e.deviceSubTypeId+"#"+e.productVersion+"]";Ae.send(t)},Ae.onmessage=function(e){n.state.isReceive&&n.props.getwebsocketMessage(JSON.parse(e.data))},Ae.onclose=function(e){n.webSocketStatu=0,clearInterval(je),n._mount&&"1006"==e.code&&setTimeout(function(){this.props.getToken()}.bind(Pe(n)),5e3),Ae=null}},n.goout=function(){console.log("---销毁---"),n.props.resetData(),Ae&&Ae.close(),clearInterval(je),Ae=null,n._mount=!1},n.setVisibleTestInfo=function(){n.setState({visibleTestInfo:!n.state.visibleTestInfo})},n.debugVisible=function(){n.setState({visibleTestInfo:!0})},n.changeFormData=function(e){n.setState(ye({},e))},n.state={visibleTestInfo:!1,visibleExportData:!1,isReceive:!0,macList:[],command:{active:!1},activeKey:"1",selectedMac:{value:void 0},date:{value:void 0},firmwareVersionType:{value:void 0},mainVersion:{value:void 0},totalVersion:{value:void 0}},n.webSocketStatu=null,n.onCloseDialog=n.onCloseDialog.bind(Pe(n)),n.onSendCommand=n.onSendCommand.bind(Pe(n)),n.handleCancel=n.handleCancel.bind(Pe(n)),n.onSelectTab=n.onSelectTab.bind(Pe(n)),n.changeReceiveState=n.changeReceiveState.bind(Pe(n)),n.selectCommand=n.selectCommand.bind(Pe(n)),n.openDialog=n.openDialog.bind(Pe(n)),n}return ge(a,[{key:"componentDidMount",value:function(){var e=this;this.props.onRef&&this.props.onRef(this);var t=Object(pe.j)("productId")||this.props.productId,a=[],n=[];Object(G.d)(G.a.deviceDebugAccountGetList,{productId:t},{loading:!0}).then((function(r){0==r.code&&(a=r.data||[],e.props.updateDeviceDebugAccountList(r),Object(G.d)(G.a.debugSecretList,{productId:t},{loading:!0}).then((function(r){0==r.code&&(n=r.data||[],e.props.updateDeviceDebugMacList(r),a.length>0&&n.length>0&&(e._mount=!0,e.props.updateDevice(t),e.props.getDataTypeList(t),e.props.getPropertyConfig(t)),n.length||e.setVisibleTestInfo())})))}))}},{key:"componentWillUpdate",value:function(e,t){var a=e.deviceAndWs.wsUrl.data.ip,n=this.props.deviceAndWs.wsUrl.data.ip;if(a&&a!==n){if(!WebSocket||Ae)return;Ae=new WebSocket(ke+"//"+a),this.bindEvent()}var r=t.token,o=this.state.token;null==Ae&&r&&r!==o&&(Ae=new WebSocket(ke+"//"+e.queryServerConfig.ip),this.bindEvent())}},{key:"componentWillUnmount",value:function(){this.goout()}},{key:"onSelectTab",value:function(e){this.setState({activeKey:e})}},{key:"selectCommand",value:function(e){this.setState({command:{active:!0,code:e,mac:this.props.selectedData1?this.props.selectedData1.macAddress:""}})}},{key:"onSendCommand",value:function(e){var t={command:e.command,macAddress:e.mac,parseData:{}},a=null;for(var n in e)if("mac"==n)t.macAddress=e.mac;else if("command"==n)t.command=e.command;else if("json"==n){var r=JSON.parse(e.json);for(var o in null===a&&(a={}),r)a[o]=r[o]}else null===a&&(a={}),a[n]=e[n];t.parseData=a,Ae?this.setState({command:{active:!1}},(function(){return Ae.send(JSON.stringify(t))})):Object(Q.a)({description:"没有已连接的设备"})}},{key:"onCloseDialog",value:function(){this.setState({command:{active:!1}})}},{key:"changeReceiveState",value:function(){var e=this.state.isReceive;this.setState({isReceive:!e})}},{key:"openDialog",value:function(){this.refs.dialog.openDialog()}},{key:"handleCancel",value:function(e){1==e?this.setState({visibleExportData:!this.state.visibleExportData}):this.setState({command:{active:!this.state.command.active}})}},{key:"render",value:function(){var e=this.state,t=e.visibleTestInfo,a=e.visibleExportData,n=e.activeKey,i=e.selectedMac,c=e.date,l=e.firmwareVersionType,p=e.mainVersion,d=e.totalVersion,m=e.isReceive,f=this.props,y=f.deviceDebugAccountList,h=f.deviceDebugMacList,b=f.productBaseInfo,v=f.productId,g=Object(pe.j)("productId")||v,E=Object(pe.j)("hardwareType")||b.hardwareType;return s.a.createElement("div",{className:"devDebuggingBox commonContentBox"},s.a.createElement("div",{className:"title"},s.a.createElement("div",{className:"titleName"},"在线设备调试工具"),s.a.createElement("div",{className:"titleOperation",onClick:this.setVisibleTestInfo},s.a.createElement("img",{src:ue.a}),s.a.createElement("span",null,"配置调试信息"))),s.a.createElement("div",{className:"msui-wrapper-devDeviceList centent"},s.a.createElement("div",{className:"dev-test-content"},s.a.createElement(Ve,null,s.a.createElement(o.a,{defaultActiveKey:n,onChange:this.onSelectTab},s.a.createElement(Ce,{tab:"数据设备调试",key:"1"}),s.a.createElement(Ce,{tab:"升级调试",key:"2"})),s.a.createElement("div",{className:1==this.webSocketStatu?"linkState":"linkState linkError"},1==this.webSocketStatu?"链接成功":"链接失败"),s.a.createElement("div",{className:"dev-test-header-right"},s.a.createElement(Be,{className:1==n?"line":"",value:m,onChange:this.changeReceiveState}),s.a.createElement(Fe,{onSelect:this.selectCommand,activeKey:n}))),s.a.createElement("div",{style:{display:1==n?"block":"none"}},s.a.createElement(xe,{_state:this.props,openDialog:this.handleCancel.bind(this,1)})),s.a.createElement("div",{style:{display:2==n?"block":"none"}},s.a.createElement(Re,{_state:this.props,productBaseInfo:b,hardwareType:E,firmwareVersionType:l,totalVersion:d,mainVersion:p,changeFormData:this.changeFormData,macList:h.data}))),s.a.createElement(r.a,{className:"commandsDebugSytle",title:this.state.command.code+"命令调试",visible:this.state.command.active,maskClosable:!1,onCancel:this.onCloseDialog,footer:null},s.a.createElement(Me,{code:this.state.command.code,defaultMac:this.state.command.mac,onConfirm:this.onSendCommand,onCancel:this.onCloseDialog})),s.a.createElement("textarea",{id:"copyInput"}),a&&s.a.createElement(r.a,{title:"导出数据",visible:a,onCancel:this.handleCancel.bind(this,1),footer:null,maskClosable:!1},s.a.createElement(K,{macList:h.data,productId:g,selectedMac:i,date:c,onCancel:this.handleCancel.bind(this,1),changeFormData:this.changeFormData}))),s.a.createElement(u.a,{visibleFun:this.setVisibleTestInfo,pid:g,authorityType:b.authorityType,visible:t,deviceDebugAccountList:y,deviceDebugMacList:h}))}}]),a}(l.Component))||ie},PnIC:function(e,t,a){},"T+3h":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAD/ElEQVRoQ+1ZXU7bQBDeyfq96QmAExQr6+fCCUpPUDgBcALgBA0nKD0B6QlIn72WwwkKN4B321ONtY6Wze56beKgSLGEBInX/r6Z+eYPYFt+wZbjZzsCH+3BnQdsHsjzfD+O46dNeGetHsjz/LAsy3vG2D4AXE4mk+nQJNZGQIF/YIyNCTQi/k2S5GgrCJjgFejvQoiZjwCdK4pibzQaHSLiy2g0WgDAYxzHL6HE3+0BG3gAOJtMJncOfYyrqjpHxFMKNQfQGSLeJkkybyPyLgI9wC810gZMfX8nhDjz3dubQFfwWZadIuLPRiMNKNJK8zsAkEf2dMCIuIii6NgVVr0I9AT/ywB2E0XR1ASWpikJ/xoAvmr3Oz3RmcAawL9yzo/iOF74QkNKSRr6oXnq2KaJTgQ2Bb4BnabpXPPEkxDiwCQdTGDT4AkoVfSyLP81oDnnsem5IAIfAb4BLaWkUPtCf9uqeyuBjwRPoNM0JUFfqep+kyTJtR5GXgJ5no/Lssz1guMrUipV6tkmSLA+MesEGGO3QoiLYAJpmuYAcKjlaWeF7Qo+y7IrRLxGxGmSJJcuElJKagjPO3vAYE7xtzbwUkryErUS9SWEcEaClJJEXLccNgzWgyp06GDdWTLGfgshli/UrdXV8iZ4xtijEGLpZf3ZVNQAgDrc+uKcH5hzhpWAUUSehRDWpst8AWPMG/M28KqorXSfZMSiKB6aEHa15y4CXrepHG0KfDDwyvorNaAOK1M8Km1S5vHGZ5ZlF6o5o/sGBe+b7lYIGOL9I4Q4sWUIvcz7XvCesGnTn9UDbYWjISOlpKG9bn0R0dpoDQ3eSkBKSWPgNwVspfI1BHQPIOLKfZsA7yKwbGNtwBoChgYoi5zRDKxSMA0uetp9DM02IWGjh7RXAz4CCig1Wm8mKIteBgNv9YBu2bbViMpYNHh/sgmdzkdRdGIbB80839Xyzfta0yjn/LNvzaF6dupXat2o6xkApq7F1rrAWz1AHxoZxilk0+pUmaMoWrQQflNh+1re6QH6wqgFL6oHCV422cKJPlun5b0ElEApzzex3bqfcYFuPh8CvDOELF6wjnNtoIcG7yWgtLAsagpMZ0+QyIuiuNcHI197HmoUbwjplivLktJkPVTTRZsyxthl296SQkbtQGkEbOYKeoRztugKvtUDmvBmxqasITLnnL/ZQFdVRbMDNYC0YdOB05ngjBZKpnUr0TxIn01DH67d9woAF66NdY/nLY8EE1DeoEUTrTWWK7+2l5PVbTvQtnOh33cioGujqqoTRKSfsRIopdxnRHwCAErBM875vMs/K0JB6/f1ItDnRUOd2REYyrKhz915INRSQ9239R74D/CbIF56JftOAAAAAElFTkSuQmCC"},TIHI:function(e,t,a){},TOmL:function(e,t){e.exports="data:image/png;base64,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"},VD1n:function(e,t,a){},VWUe:function(e,t,a){},WfMB:function(e,t,a){},Xwn6:function(e,t,a){},"Yq1/":function(e,t,a){},ZN3w:function(e,t,a){},"c0+R":function(e,t,a){},g8ug:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAyCAYAAABLXmvvAAAEEElEQVRYR+2YXWgcVRTH//+ZTVYEH0JlS4kGLYJoI6L1o35RqYoVFUEkCtpooO1DE9bszCAIilAEX+bOpBorUSM2iNTQZz8awTxYQSSKn+BLKY0RG61EidBsnfnLXXZhs0m6W7Jr+pB52A/uved3z/8c7j1ziPIzPDy8YWFh4QUAdwK4TlK2Mraab5ILAL4H8Hk2m315YGDgtLVH+xHH8d1pmh6WtHE1kHprSZ5yHOeJQqEwyTAMLwXwI4AcgDMk3yI5BcDutBlPVtJWSXsAXARgFsAWGmMOSMqXobf7vv/NcjRJThzHm13XLalU+yRJokKhcJxkuty4MeYGSV9YOMlXLXhK0o0ADgZB0L+Si8aYLyXdUkeCqSAIblppThiGrwPYR/JrCy5KagOwJwiCt1fw1s77DkB3HfBPvu93k9Ry88Iw3A3AhvKsjXFpEsmnfd8fW8nw+Ph4+8zMTHeSJMtK7bquOjs7f+jp6SmeQ7VeSYdKvAoYwJskjzUjm1ayIekOAHtrwa1kLrFdLXUCYNmMbOKOHEnuIo/rxbgZcGPM0hivg5shba2NdakbOrmaIf261Bee1GEY3kfyqra2tnfy+XypIjHGPARgU/lGs0fsbEdHx0RfX9+ZOI4fTJKkszwmSb/ncrmJ3t7ef8pr659ctuKIougXSZscx3nc87zx8uJJSdtrku3XbDZ7c7FYHJN0T/UYyT9I3up53vGGkst6C+BoefdHfd+/vxrsOM6jaZqK5G2SniP5mqQtAHaQ3CVpnqStVvcDOBQEwTONgm1RsAvAVwC2ZjKZKwcHB08aY0oe+77v2vrKGHO5pJMAjpDssB47jrPB87w/R0dHL5mbm/sLwITdeF3wyMjIxfPz86cATJMcTNP0E8dxXvI8b38FTHJEsg7zLknXAHiKZJ8Fk3y3XKVuk3Q9yX2+779RFxyG4ZMA3iN5AsC3kh6xvz3P2xxF0WfVMbb1laSxrq6uvdPT0x/WxhjA4Vwut9smWF2wMeYjSTsB/FtOFAeAQ/JeAC9asOu610o6m81mf+vv758vx/9TC85kMtvSND2dyWRm8/n835VkOyd4aGhoY5IkM5KOBUFQyt4oiranaTpJ8n0AndUxrs5gY0wJXInxed1OxphBSbHjOP2e5x20i20soyg6ISlH8mcbt0pyNQ0cx/EDaZpeQfIDm5kVw3Ec70jT9OrKf5sstR5FUfSwpMuqD5yajdU/QJpxG52X1K0ANpRc6+BmKlD3AGkm7ILO6ldc1/24Vd5au0mS7JT0fOmqrXpNbSVzie21B5N8tr29/Ugr3S4Wi49JOrBI6vW3xVZIvugAaaTd1KxNLGo3Ndpgawa8tsHWUEtxteAlLcU1a6JaT9akbVyR8P9ulP8HrDxrnBogArkAAAAASUVORK5CYII="},ivPg:function(e,t,a){e.exports=a.p+"static/images/no-source-tip.681eb7825cf81b5da33967ff8571f3c6.png"},l9Z0:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return sn}));a("8OWE"),a("h4PX"),a("SoGA"),a("L4wC"),a("KzFV"),a("wlSd"),a("RWNY");var n=a("q+fq"),r=a.n(n),o=a("DndG"),i=a("etip"),c=(a("0AG1"),a("Jya7"),a("vxpS"),a("ThRY"),a("6wma"),a("qb5G"),a("wLbl")),l=(a("rJH4"),a("nKmx")),s=a("CvKH"),u=a.n(s),p=(a("eRDW"),a("mtIt"),a("n1yf"),a("SnyF"),a("P2RN")),d=a("ivud"),m=a("8QW8"),f=a("EZYW"),y=(a("bqBU"),a("4OHk")),h=a("kqA8"),b=a("mU7p");a("DQSZ");function v(e){var t=e.Info,a=t.productName,n=t.productId,o=(t.productCode,t.bindTypeName),i=t.createTime,c=t.mode,l=t.productIcon,s=t.productClassName,u=e.copyFunction,p=e.deleteFunction;return r.a.createElement("div",{className:"product-item-card"},r.a.createElement("div",{className:"product-info flex-column"},r.a.createElement("div",{className:"product-info-header"},r.a.createElement("span",{className:"name",onClick:e.productInfo},a),r.a.createElement("span",{className:"status status-".concat(c)},b.f[""+c]||"")),r.a.createElement("div",{className:"product-cut flex1 flex-row"},r.a.createElement("div",{className:"flex1"},r.a.createElement("div",{className:"product-tags"},s&&r.a.createElement("span",{className:"gray-tag"},s),s&&r.a.createElement("span",{className:"gray-tag"},o)),r.a.createElement("div",{className:"product-info-body flex1 flex-row"},r.a.createElement("div",{className:"infos flex1 flex-column"},r.a.createElement("span",{className:"id"},"产品ID：".concat(n)),r.a.createElement("span",{className:"bind-typeName"},"通信技术：".concat(o)),r.a.createElement("span",{className:"create-time"},"创建时间：".concat(i))))),r.a.createElement(h.a,{icon:l}))),r.a.createElement("div",{className:"btn-controls"},r.a.createElement("span",{className:"btn-base border-right "+("2"==c?"disable":"isOk"),onClick:u},r.a.createElement(y.a,{type:"copy"})," 复制"),"|",r.a.createElement("span",{className:"btn-base "+("2"==c?"disable":"isOk"),onClick:p},r.a.createElement(y.a,{type:"delete"})," 删除")))}var g,E=r.a.memo(v),O=a("Nlzp"),I=a("FC04"),w=a("MeRu");a("vCa9");function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function C(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=_(e);if(t){var r=_(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return k(this,a)}}function k(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T,N=l.a.Search,L=Object(d.connect)((function(e){return{productList:e.getIn(["product","productList"]).toJS()}}),(function(e){return{getProductList:function(t){return e(Object(f.getProductListAction)(t))}}}))(g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(i,e);var t,a,n,o=A(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).searchProduct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e.trim();var a=u()(t.state.listParams);a.productName=e,a.pageIndex=1,t.setState({listParams:a},t.getProductList)},t.copyModalOKHandle=function(){var e=t.state,a=e.copyInputValue,n=e.selectedItem,r=a.trim(),o=n.productId;if(!r)return Object(p.a)({type:"warn",message:"异常操作",description:"请输入产品名称！"}),!1;t.setState({copyLoading:!0},(function(){Object(O.d)(O.a.copyProduct,{productId:o,productName:r},{needVersion:1.1}).then((function(e){0===e.code&&Object(p.a)({type:"success",description:"复制成功！"}),t.setState({listParams:u()(t.defaultListParams),copyModalVisible:!1},t.getProductList)})).finally((function(){t.setState({copyLoading:!1})}))}))},t.modalCancelHandle=function(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copyModalVisible";t.setState((D(e={},a,!1),D(e,"deleteInputValue",""),e))},t.deleteModalOKHandle=function(){var e=t.state,a=e.deleteInputValue,n=e.selectedItem,r=a.trim(),o=n.productId;if(!r||"delete"!==r)return Object(p.a)({type:"warn",message:"异常操作",description:'请输入"delete"来确认删除!'}),!1;t.setState({deleteLoading:!0},(function(){Object(O.d)(O.a.delectProduct,{productId:o},{needVersion:1.1}).then((function(e){0===e.code&&Object(p.a)({type:"success",description:"删除成功！"}),t.setState({deleteModalVisible:!1,deleteInputValue:""}),t.getProductList()})).finally((function(){t.setState({deleteLoading:!1})}))}))},t.inputOnChangeHandle=function(e,a){a.persist();var n=a.target.value;t.setState(D({},e,n))},t.goToAddNewProduct=function(){var e=t.props,a=e.history,n=e.productList,r=n.maxProductNum;n.productNum>=r-10?Object(p.a)({message:"无法添加",description:"已超出产品个数上限！"}):a.push({pathname:"/open/base/product/add"})},t.modalWidth=460,t.defaultListParams={pageIndex:1,pageRows:6,productName:""},t.state={curAllItem:1,copyModalVisible:!1,copyInputValue:"",copyLoading:!1,deleteModalVisible:!1,deleteLoading:!1,deleteInputValue:"",selectedItem:null,listParams:u()(t.defaultListParams)},t.clickProductInfo=t.clickProductInfo.bind(j(t)),t}return t=i,(a=[{key:"componentDidMount",value:function(){this.getProductList()}},{key:"componentDidUpdate",value:function(){this.setItemLenth()}},{key:"setItemLenth",value:function(){var e=(this.props.productList.list||[]).length+1;e!==this.state.curAllItem&&this.setState({curAllItem:e})}},{key:"getProductList",value:function(){var e=this.state.listParams;this.props.getProductList(e)}},{key:"changePage",value:function(e){var t=u()(this.state.listParams);t.pageIndex=e,this.setState({listParams:t},this.getProductList)}},{key:"openCopyModal",value:function(e){if("2"==e.mode)return!1;this.setState({copyModalVisible:!0,selectedItem:e})}},{key:"openDeleteModal",value:function(e){if("2"==e.mode)return!1;this.setState({deleteModalVisible:!0,selectedItem:e})}},{key:"clickProductInfo",value:function(e,t){var a="details";1!==e&&(a="edit"),this.props.history.push({pathname:"/open/base/product/".concat(a,"/").concat(t)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.curAllItem,n=t.listParams,o=t.copyModalVisible,i=t.deleteModalVisible,s=t.selectedItem,u=t.copyInputValue,p=t.copyLoading,d=t.deleteInputValue,f=t.deleteLoading,y=this.props.productList,h=y.list,b=y.pager,v=a<=6?"lists-wrapper flex-row flex1":"lists-wrapper flex-row flex1 six-item";return r.a.createElement("section",{className:"page-main-wrapper flex-column"},r.a.createElement(w.a,{noback:!0,title:"产品",needBtn:!0,btnText:"新建产品",btnIcon:"plus",btnClickHandle:this.goToAddNewProduct}),r.a.createElement("header",{className:"page-content-header"},r.a.createElement("div",{className:"searchBox"},r.a.createElement(N,{placeholder:"请输入产品ID，名称，型号搜索产品项目",maxLength:20,onSearch:function(t){return e.searchProduct(t)},enterButton:!0}))),r.a.createElement("div",{className:"bg-wrapper flex1 flex-column"},r.a.createElement("div",{className:"page-main-content-wrapper flex-column flex1"},h&&h.length>0?r.a.createElement("section",{className:v},h.map((function(t,a){return r.a.createElement("div",{className:"list-item",key:"x-".concat(a)},r.a.createElement(E,{Info:t,copyFunction:e.openCopyModal.bind(e,t),deleteFunction:e.openDeleteModal.bind(e,t),productInfo:e.clickProductInfo.bind(e,t.mode,t.productId)}))}))):r.a.createElement(m.a,{style:{marginTop:"100px"},tipText:"暂无产品数据"}),r.a.createElement("footer",{className:"list-pagination"},b&&b.totalRows>0?r.a.createElement(c.a,{className:"self-pa",total:b.totalRows,current:n.pageIndex,defaultCurrent:1,defaultPageSize:n.pageRows,onChange:function(t){return e.changePage(t)},showTotal:function(e){return r.a.createElement("span",null,"共 ",r.a.createElement("a",null,e)," 条")},showQuickJumper:!0,hideOnSinglePage:!0}):null))),s&&o&&r.a.createElement(I.a,{visible:o,modalOKHandle:this.copyModalOKHandle,modalCancelHandle:this.modalCancelHandle.bind(this,"copyModalVisible"),targetName:s.productName,confirmLoading:p,title:"复制产品",descText:"即将复制的产品",tipText:"创建与原产品的功能和服务配置一样的新产品"},r.a.createElement(l.a,{className:"modal-content-input",onChange:function(t){e.inputOnChangeHandle("copyInputValue",t)},onPressEnter:this.copyModalOKHandle,value:u,maxLength:20,placeholder:"新产品名称"})),s&&i&&r.a.createElement(I.a,{visible:i,modalOKHandle:this.deleteModalOKHandle,modalCancelHandle:this.modalCancelHandle.bind(this,"deleteModalVisible"),targetName:s.productName,confirmLoading:f,title:"删除产品",needWarnIcon:!0,descText:"即将删除的产品",tipText:"产品的所有信息将完全被删除，无法找回，请谨慎操作"},r.a.createElement(l.a,{className:"modal-content-input",onChange:function(t){e.inputOnChangeHandle("deleteInputValue",t)},onPressEnter:this.deleteModalOKHandle,placeholder:"请输入“delete”确认删除该产品",maxLength:20,value:d})))}}])&&C(t.prototype,a),n&&C(t,n),i}(n.PureComponent))||g,x=(a("rsdX"),a("oCJ0"),a("L8Gl"),a("eVIo"),a("EO5n"),a("3EvH"),a("Y5Ue"),a("xc0u")),R=(a("mvry"),a("2L3m")),M=(a("bjE3"),a("wty1")),V=(a("auFq"),a("g2HK")),B=(a("kvrU"),a("BPQb")),F=(a("6rnn"),a("d6B9")),H=(a("HzvR"),a("2n5t")),K=a("Zx9X"),U=a.n(K),J=(a("WWzu"),a("2Kt1"),a("3SHs"),a("52nd")),W=a("rwTb"),G=a("GiKM"),q=a("DgvE");function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function X(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Z(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ne(e);if(t){var r=ne(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return te(this,a)}}function te(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?ae(e):t}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var re=H.a.Option,oe=[{id:1,contentText:1},{id:2,contentText:2},{id:3,contentText:3},{id:4,contentText:4},{id:5,contentText:5},{id:6,contentText:6},{id:7,contentText:7},{id:8,contentText:8},{id:9,contentText:9},{id:10,contentText:10}],ie=[{text:"初级安全认证",id:0}],ce=[{title:"平台生成设备ID/设备密钥"},{title:"烧录设备ID/设备密钥",explain:"设备注册"},{title:"使用设备ID/设备密钥正常通讯"}],le=[{title:"平台导入物理地址",explain:"设备注册"},{title:"校验设备物理地址"},{title:"设备存储平台传输的设备ID/设备密钥"},{title:"使用设备ID/设备密钥正常通讯"}],se=[{title:"烧录产品秘钥",explain:"设备注册"},{title:"生成设备ID/设备秘钥"},{title:"使用设备ID/设备密钥正常通讯"}],ue=[{title:"在平台导入物理地址/SN号/序列号等"},{title:"生成设备ID/设备密钥",explain:"设备注册"},{title:"校验设备ID/设备密钥是否合法"},{title:"使用设备ID/设备密钥正常通讯"}],pe=Object(d.connect)((function(e){return{optionsList:e.getIn(["product","optionsList"]).toJS(),productBaseTypeList:e.getIn(["product","productBaseTypeList"]).toJS()}}),(function(e){return{getCatalogList:function(){return e(Object(f.getCatalogListAction)())},getProductBaseTypeList:function(){return e(Object(f.getProductBaseTypeListAction)())},getAddProduct:function(t){return e(Object(f.getAddProductAction)(t))}}}))(T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(i,e);var t,a,n,o=ee(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).handleBack=function(){t.props.history.go(-1)},t.state={productName:"",thirdCategoryId:"",optionsList:{},productBaseTypeList:{},accessDeviceList:[],accessModeId:0,apnTypeList:[],productClassId:0,protocolFormatList:[],protocolFormat:1,distributionNetworkList:[],netTypeIdsList:null,netTypeId:"",technicalSolutionList:[],gatewayTchnicalSolutionList:[],bindType:"",associatedGatewayList:[],isRelatedGateway:1,portShow:0,portNumber:1,authorityType:0,selectedOptions:[]},t.changeSelect=t.changeSelect.bind(ae(t)),t.changeJoinUp=t.changeJoinUp.bind(ae(t)),t.dataProcessor=t.dataProcessor.bind(ae(t)),t.createProduct=t.createProduct.bind(ae(t)),t.changeProName=t.changeProName.bind(ae(t)),t}return t=i,(a=[{key:"componentDidMount",value:function(){this.props.getCatalogList(),this.props.getProductBaseTypeList(),this.props.form.setFieldsValue({associatedGatewayList:1,authorityType:0})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(!U()(e.productBaseTypeList,this.state.productBaseTypeList)){for(var a=e.productBaseTypeList.data||[],n=this.state,r=n.accessDeviceList,o=n.apnTypeList,i=n.protocolFormatList,c=n.distributionNetworkList,l=n.technicalSolutionList,s=0;s<a.length;s++){var u=a[s];1==u.type?r.push(u):2==u.type?o.push(u):3==u.type?i.push(u):4==u.type?c.push(u):5==u.type&&l.push(u)}this.setState({productBaseTypeList:e.productBaseTypeList,accessDeviceList:r,apnTypeList:o,protocolFormatList:i,distributionNetworkList:c,technicalSolutionList:l},(function(){t.props.form.setFieldsValue({accessModeId:r[0].baseTypeId,productClassId:o[0].baseTypeId})}))}U()(e.optionsList,this.state.optionsList)||this.setState({optionsList:e.optionsList})}},{key:"changeProName",value:function(e){this.setState({productName:e.target.value})}},{key:"changeSelect",value:function(e,t){t[2]&&t[2].defaultDeviceSubtype?this.setState({portShow:t[2].defaultDeviceSubtype.controlClass}):this.setState({portShow:0}),this.setState({selectedOptions:t})}},{key:"changeJoinUp",value:function(e,t,a){if(1==e)t=t.target.value,this.props.form.resetFields("authorityType"),this.setState({accessModeId:t}),0==t?this.props.form.setFieldsValue({authorityType:0}):this.props.form.setFieldsValue({authorityType:1});else if(2==e){if(t=t.target.value,this.props.form.resetFields("bindType"),this.props.form.resetFields("associatedGatewayList"),1==t){for(var n=[],r=[],o=0;o<this.state.technicalSolutionList.length;o++){var i=this.state.technicalSolutionList[o];null!=i.isShow&&(0==i.isShow?n.push(i):r.push(i))}this.setState({gatewayTchnicalSolutionList:n,associatedGatewayList:r})}this.setState({productClassId:t})}else if(3==e)this.setState({protocolFormat:t});else if(4==e)this.setState({netTypeId:t});else if(5==e){for(var c=this.state.distributionNetworkList,l=[],s=a.split(","),u=0;u<c.length;u++)for(var p=c[u],d=0;d<s.length;d++){var m=s[d];p.baseTypeId==m&&l.push(p)}this.setState({bindType:t,netTypeIdsList:l})}else if(6==e)this.setState({isRelatedGateway:t.target.value});else if(7==e){var f=this.state.associatedGatewayList;f[t].selected=!f[t].selected,this.setState({associatedGatewayList:f})}else 8==e?this.setState({portNumber:t}):9==e&&this.setState({authorityType:t})}},{key:"dataProcessor",value:function(e){var t=[];if(e.length>0)for(var a=0;a<e.length;a++){var n=u()({}),r=e[a];if(n.value=r.categoryId,n.label=r.categoryName,n.key="one"+a,n.children=[],r.subCategoryList.length>0){for(var o=0;o<r.subCategoryList.length;o++){var i=u()(r.subCategoryList[o]);if(n.children.push({value:i.subCategoryId,label:i.subCategoryName,key:"two"+o}),n.children[o].children=[],i.deviceTypeList.length>0)for(var c=0;c<i.deviceTypeList.length;c++){var l=i.deviceTypeList[c];n.children[o].children=n.children[o].children?n.children[o].children:[],n.children[o].children.push({value:l.deviceTypeId,label:l.deviceTypeName,key:"three"+c,defaultDeviceSubtype:l.defaultDeviceSubtype})}else n.children[o].children.push({value:"",label:""})}t.push(n)}else n.children=[{value:"",label:"",children:[{value:"",label:""}]}],t.push(n)}return t}},{key:"createProduct",value:function(e){var t=this;e.preventDefault(),(0,this.props.form.validateFieldsAndScroll)((function(e,a){if(!e){var n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){X(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a),r=n.accessModeId,o=n.productClassId,i=n.protocolFormat,c=n.productName,l=n.thirdCategoryId,s=n.bindType,u=n.netTypeId,p=n.authorityType,d=n.associatedGatewayList,m=n.portNumber,f=(t.state.selectedOptions,{version:1.2,accessModeId:r,productClassId:o,protocolFormat:i,productName:c,thirdCategoryId:l=l[2]?l[2]:"",bindType:s,netTypeId:u,authorityType:p,portNumber:m});if(0==o)f.isRelatedGateway=d;else{for(var y="",h=0;h<d.length;h++)y+=","+d[h];f.gatewayCommType=y.slice(1,y.length)}Object(q.j)("projectId")&&(f.projectId=Object(q.j)("projectId")),t.props.getAddProduct(f)}}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.optionsList,n=t.accessDeviceList,o=t.apnTypeList,i=t.protocolFormatList,c=t.distributionNetworkList,s=t.netTypeIdsList,u=t.technicalSolutionList,p=t.associatedGatewayList,d=t.gatewayTchnicalSolutionList,m=t.accessModeId,f=t.productClassId,y=(t.protocolFormat,t.bindType,t.netTypeId,t.portShow),h=(t.portNumber,t.authorityType);c=s||c;var b=[];a.data&&a.data.length>0&&(b=this.dataProcessor(a.data));var v=0==f?u:d,g=0==m?{0:se,1:le,2:ce}[h]:ue,E=this.props.form,O=E.getFieldDecorator;return E.getFieldValue,r.a.createElement(F.a,Y({},{labelCol:{xs:{span:3},sm:{span:3}},wrapperCol:{xs:{span:15},sm:{span:15}}},{onSubmit:this.handleSubmit,className:"productInformation"}),r.a.createElement("div",{className:"commonContentBox basicsInfoBox"},r.a.createElement("div",{className:"title"},"产品基础信息"),r.a.createElement("div",{className:"centent"},r.a.createElement(F.a.Item,{label:"产品名称",hasFeedback:!0},O("productName",{rules:[{required:!0,message:"请填写名称"},{max:20,message:"最大输入长度为20"}]})(r.a.createElement(l.a,{className:"input",style:{width:"350px"},placeholder:"请输入您的产品名称"}))),r.a.createElement(F.a.Item,{label:r.a.createElement(W.a,{label:"所属分类",tip:"平台定义了产品分类的标准功能模型，您可以直接选用，也可以根据实际需要添加自定义功能。"}),hasFeedback:!0},O("thirdCategoryId",{rules:[{required:!0,message:"请选择产品分类!"}]})(r.a.createElement(G.a,{options:b,onChange:this.changeSelect,placeholder:"请选择类目",style:{width:"350px"}}))),r.a.createElement(F.a.Item,{label:"接入方式",hasFeedback:!0},O("accessModeId",{rules:[{required:!0,message:"请选择接入设备!"}]})(r.a.createElement(B.a.Group,{onChange:this.changeJoinUp.bind(this,1)},n.length>0?n.map((function(e,t){return r.a.createElement(B.a,{key:"接入设备"+t,value:e.baseTypeId},e.baseTypeName)})):null))),r.a.createElement(F.a.Item,{colon:!1,wrapperCol:{offset:3}},r.a.createElement("div",{className:"aListInfo"},0===m?r.a.createElement("div",{className:"joinUpExplain_explainPng"},r.a.createElement("p",null,"设备直连C-Life平台，适合新产品开发接入"),r.a.createElement("div",{className:"explainPng"})):r.a.createElement("div",{className:"joinUpExplain_thePhirdParty"},r.a.createElement("p",null,"产品不直连C-Life云，已接入的云平台与C-Life云对接，适合已上市产品接入"),r.a.createElement("div",{className:"thePhirdParty"})))),r.a.createElement(F.a.Item,{label:r.a.createElement(W.a,{label:"产品类型",tip:0===f?"一般可联网的设备，包括可通过路由器，基站连接网络的设备，也包括可通过网关设备连接网络的设备。":"设备本身可连接网络，同时可代理其他通信方式的设备联网，具备管理能力。"}),hasFeedback:!0},O("productClassId",{rules:[{required:!0,message:"请选择产品类型!"}]})(r.a.createElement(B.a.Group,{onChange:this.changeJoinUp.bind(this,2)},o.map((function(e,t){return r.a.createElement(B.a,{key:"产品类型"+t,value:e.baseTypeId},e.baseTypeName)}))))),1===y?r.a.createElement(F.a.Item,{label:"控制端口",hasFeedback:!0},O("portNumber",{rules:[{required:!0,message:"请选择控制端口!"}]})(r.a.createElement(H.a,{getPopupContainer:function(e){return e.parentElement},style:{width:"240px"},onChange:this.changeJoinUp.bind(this,8)},oe.map((function(e,t){return r.a.createElement(re,{key:e.id+t,value:e.id},e.contentText)}))))):null)),r.a.createElement("div",{className:"commonContentBox technicalProtocolsBox"},r.a.createElement("div",{className:"title"},"产品技术方案"),r.a.createElement("div",{className:"centent"},r.a.createElement(F.a.Item,{label:"通信方式",hasFeedback:!0},O("bindType",{rules:[{required:!0,message:"请选择通讯技术!"}]})(r.a.createElement(H.a,{getPopupContainer:function(e){return e.parentElement},placeholder:"请选择通信方式",style:{width:"240px"}},v.map((function(t,a){return r.a.createElement(re,{key:"通讯技术"+a,value:t.baseTypeId,onClick:e.changeJoinUp.bind(e,5,t.baseTypeId,t.netTypeIds)},t.baseTypeName)}))))),0===m?r.a.createElement(F.a.Item,{label:"协议格式",hasFeedback:!0},O("protocolFormat",{rules:[{required:!0,message:"请选择协议格式！"}]})(r.a.createElement(H.a,{getPopupContainer:function(e){return e.parentElement},placeholder:"请选择协议格式",style:{width:"240px"},onChange:this.changeJoinUp.bind(this,3)},i.map((function(e,t){return r.a.createElement(re,{key:"协议格式"+t,value:e.baseTypeId},e.baseTypeName)}))))):r.a.createElement(F.a.Item,{label:"协议格式",hasFeedback:!0},O("protocolFormat")(r.a.createElement("span",null,"CLink标准数据格式（JSON）"))),r.a.createElement(F.a.Item,{label:"配网方式",hasFeedback:!0},O("netTypeId",{rules:[{required:!0,message:"请选择配网方式"}]})(r.a.createElement(H.a,{getPopupContainer:function(e){return e.parentElement},placeholder:"请选择配网方式",style:{width:"240px"},onChange:this.changeJoinUp.bind(this,4)},c.map((function(e,t){return r.a.createElement(re,{key:"配网方式"+t,value:e.baseTypeId},e.baseTypeName)}))))),r.a.createElement(F.a.Item,{label:"安全认证级别",hasFeedback:!0},O("authorityType",{rules:[{required:!0,message:"请填写名称"}]})(r.a.createElement(B.a.Group,null,0===m?ie.map((function(t,a){return r.a.createElement(B.a,{key:"安全认证级别"+a,value:t.id,onClick:e.changeJoinUp.bind(e,9,t.id)},t.text)})):r.a.createElement(B.a,{value:1,onClick:this.changeJoinUp.bind(this,9,1)},"安全认证(推荐)")))),r.a.createElement(F.a.Item,{colon:!1,wrapperCol:{offset:3}},r.a.createElement("div",{className:"msgSelectBox"},r.a.createElement(J.a,{flowLists:g}))),r.a.createElement(F.a.Item,{label:0===f?"是否接入网关":"网关通信方案",hasFeedback:!0},O("associatedGatewayList",{rules:[{required:!0,message:"请选择关联网关"}]})(0===f?r.a.createElement(B.a.Group,{onChange:this.changeJoinUp.bind(this,6)},r.a.createElement(B.a,{value:1},"接入"),r.a.createElement(B.a,{value:0},"不接入")):r.a.createElement(V.a.Group,{style:{width:"50%"}},r.a.createElement(R.a,null,p.map((function(e,t){return r.a.createElement(M.a,{span:8,key:"网关通信方案"+t},r.a.createElement(V.a,{value:e.baseTypeId},e.baseTypeName))})))))))),r.a.createElement("div",{className:"commonButBox"},r.a.createElement(x.a,{className:"addProductBut",type:"primary",onClick:this.createProduct},"确定"),r.a.createElement(x.a,{className:"addProductBut",type:"default",onClick:this.handleBack},"取消")))}}])&&Z(t.prototype,a),n&&Z(t,n),i}(n.Component))||T,de=F.a.create({name:"productInformation"})(pe),me=(a("sbOf"),a("spxj")),fe=a("84Fp"),ye=a("+YWi"),he=(a("72Pr"),a("O4+N")),be=(a("7fbo"),a("LCR/")),ve=(a("4MyQ"),a("m/9F")),ge=(a("U4At"),a("KiF4")),Ee=(a("8R7O"),a("TL2v")),Oe=(a("kCMX"),a("61Aj"),a("rVDo"));a("ZN3w");function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function De(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ce(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=_e(e);if(t){var r=_e(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return ke(this,a)}}function ke(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?je(e):t}function je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Te=H.a.Option,Ne=F.a.create({name:"addFirmwareDialog"})(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(i,e);var t,a,n,o=Ae(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).addFirmware=function(){t.props.form.resetFields(),t.addFirmwareInput.setState({fileList:[]}),t.props.addFirmware()},t.state={deviceVersionTypeList:[],deviceVersionType:"",allFirmwareVersionTypeList:[],firmwareVersionType:"",totalVersion:"",mainVersion:"",extVersion:""},t.handleSubmit=t.handleSubmit.bind(je(t)),t.deviceVersionType=t.deviceVersionType.bind(je(t)),t}return t=i,(a=[{key:"componentDidMount",value:function(){var e=this;Object(O.c)(O.a.getAllDeviceVersionType,{checkProductId:this.props.productId,bindType:this.props.bindType}).then((function(t){e.setState({deviceVersionTypeList:t.data})}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.form;a.deviceVersionTypeList,(0,a.validateFieldsAndScroll)((function(e,a){if(!e){var n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(a),!0).forEach((function(t){De(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a),r=t;if(n.productId=t.props.productId,n.upgradeFile=t.addFirmwareInput.getFileListUrl().length>0?t.addFirmwareInput.getFileListUrl().join(","):"",!n.upgradeFile)return Object(p.a)({description:"请选择文件"}),!1;var o=(n.totalVersion+"").replace(/^\s+|\s+$/g,""),i=(n.mainVersion+"").replace(/^\s+|\s+$/g,""),c=(n.extVersion+"").replace(/^\s+|\s+$/g,"");if(!/^[\w\.-]*$/.test(o))return Object(p.a)({description:"固件系列标示只能包含字母、数字、下划线、短横线、点号"}),!1;if(+i>2147483647)return Object(p.a)({description:"内部版本号大小超过范围，最大2147483647"}),!1;if(!/^[0-9]*$/.test(i))return Object(p.a)({description:"内部版本须为不小于0的整数"}),!1;if(!/^[\w\.-]*$/.test(c))return Object(p.a)({description:"外部版本只能包含字母、数字、下划线、短横线、点号"}),!1;Object(O.d)(O.a.versionAdd,n,{needFormData:!0,needVersion:1.1}).then((function(e){0==e.code&&(t.props.form.resetFields(),r.addFirmwareInput.setState({fileList:[]},(function(){t.props.addFirmware("添加固件成，请求列表")})))}))}}))}},{key:"deviceVersionType",value:function(e){var t=this;this.props.form.resetFields("firmwareVersionType"),Object(O.c)(O.a.getAllFirmwareVersionType,{deviceVersionTypeId:e}).then((function(e){t.setState({allFirmwareVersionTypeList:e.data})}))}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.deviceVersionTypeList,o=a.allFirmwareVersionTypeList;return r.a.createElement("div",{className:"add_firmware_dialog"},r.a.createElement(F.a,we({},{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},{onSubmit:this.handleSubmit,className:""}),r.a.createElement(F.a.Item,{label:r.a.createElement(W.a,{label:"添加固件",tip:"该产品采用的是独立MCU方案，您可以管理PCB和模组的固件程序"}),hasFeedback:!0},t("deviceVersionType",{rules:[{required:!0,message:"请选择模组固件!"}]})(r.a.createElement(H.a,{style:{width:174},placeholder:"请选择",onChange:this.deviceVersionType},n.map((function(e,t){return r.a.createElement(Te,{key:e.deviceVersionTypeId+t,value:e.deviceVersionTypeId},e.deviceVersionTypeName)}))))),r.a.createElement(F.a.Item,{label:r.a.createElement(W.a,{label:"添加模块",tip:"请选择固件的细分模块，升级时将只针对该模块升级。"}),hasFeedback:!0},t("firmwareVersionType",{rules:[{required:!0,message:"请选择模块!"}]})(r.a.createElement(H.a,{style:{width:174},placeholder:"请选择"},o.map((function(e,t){return r.a.createElement(Te,{key:e.firmwareVersionTypeNo+t,value:e.firmwareVersionTypeNo},e.firmwareVersionTypeName)}))))),r.a.createElement(F.a.Item,{label:r.a.createElement(W.a,{label:"固件系列标识",tip:"区分不同固件包，只有相同的固件才能升级"}),hasFeedback:!0},t("totalVersion",{rules:[{required:!0,message:"请输入固件系列标识!"}]})(r.a.createElement(l.a,{maxLength:30,placeholder:"固件系列标示只能包含字母、数字、下划线、短横线、点号"}))),r.a.createElement(F.a.Item,{label:r.a.createElement(W.a,{label:"内部版本号",tip:"同一系列的固件根据内部版本号决定是否升级"}),hasFeedback:!0},t("mainVersion",{rules:[{required:!0,message:"请输入内部版本号!"}]})(r.a.createElement(l.a,{maxLength:10,placeholder:"内部版本须为不小于0的整数"}))),r.a.createElement(F.a.Item,{label:r.a.createElement(W.a,{label:"外部版本号",tip:"升级提示时，用户可见的版本号"}),hasFeedback:!0},t("extVersion",{rules:[{required:!0,message:"请输入外部版本号!"}]})(r.a.createElement(l.a,{maxLength:30,placeholder:"外部版本只能包含字母、数字、下划线、短横线、点号"}))),r.a.createElement(F.a.Item,{label:"固件程序：",hasFeedback:!0},r.a.createElement(Oe.a,{onRef:function(t){return e.addFirmwareInput=t},isNotImg:!0,format:".bin,.hex,.zip,.cyacd",maxSize:20})),r.a.createElement("div",{className:"but"},r.a.createElement(x.a,{type:"primary",htmlType:"submit"},"确定"),r.a.createElement(x.a,{className:"cancel",onClick:this.addFirmware},"取消"))))}}])&&Ce(t.prototype,a),n&&Ce(t,n),i}(r.a.Component)),Le=(a("EYKc"),a("TGLo"));function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(){return(Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Me(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ke(e);if(t){var r=Ke(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Fe(this,a)}}function Fe(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?He(e):t}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Je(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(a),!0).forEach((function(t){We(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function We(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ge=H.a.Option,qe=l.a.TextArea,Qe=[{id:"0",text:"全部设备升级"},{id:"1",text:"指定设备升级"}],Ye=[{id:"1",text:"普通升级"},{id:"2",text:"强制升级"},{id:"3",text:"静默升级"}],ze=["","用户可感知，升级触发时用户可以在app上查看到升级提醒，确认后才能升级","用户可感知，用户可以在app上查看到升级提示，无需确认自动开始升级","用户无感知，无需确认，直接推送到设备进行升级"],Xe=F.a.create({name:"releaseFirmware",mapPropsToFields:function(e){return{deviceVersionId:F.a.createFormField(Je(Je({},e.deviceVersionId),{},{deviceVersionId:e.deviceVersionId}))}}})(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(i,e);var t,a,n,o=Be(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).beforeUpload=function(e){return e.size/1024<500?(Object(O.d)(O.a.versionCheckMac,{multipartFile:e},{needFormData:!0}).then((function(e){if(0==e.code){var a=e.data,n=a.successes,r=a.fails,o="",i="无";if(n.length>0){for(var c=0;c<n.length;c++)o+=n[c]+";";o=o.slice(0,o.length-1)}if(r.length>0){i="";for(var l=r.length>4?4:r.length,s=0;s<l;s++)i+=r[s]+";";i=i.slice(0,i.length-1),r.length>4&&(i+="...")}t.setState({macList:o});var u=a.successCount>0?a.successCount:0;Object(p.a)({type:"info",message:"上传mac返回提示",description:"总共导入"+a.totalCount+"条,成功了"+u+"条，失败"+a.failCount+"条，（失败："+i+"）"})}else Object(p.a)({type:"error",message:"上传mac返回提示",description:e.msg})})),!1):(Object(p.a)({description:"文件上传大小超过500k限制"}),!1)},t.state={releaseWayId:"",upgradeType:"",file:null,macList:""},t.handleSubmit=t.handleSubmit.bind(He(t)),t.releaseWayType=t.releaseWayType.bind(He(t)),t.upgradeType=t.upgradeType.bind(He(t)),t.downloadMac=t.downloadMac.bind(He(t)),t.changeMacList=t.changeMacList.bind(He(t)),t.releaseFirmware=t.releaseFirmware.bind(He(t)),t}return t=i,(a=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.form;a.deviceVersionTypeList,(0,a.validateFieldsAndScroll)((function(e,a){if(!e){var n=t.props,r=n.deviceVersionId,o=n.releaseState,i=n.releaseFirmware,c=n.macListOperationRecords,l={deviceVersionId:r,status:a.upgradeWay,upgradeType:a.releaseWayId,releaseNote:a.promptInformation};if(l.macSet=c?t.state.macList:t.state.macList||o.macSet,console.log("data------999-----",l),1==l.upgradeType&&!l.macSet)return Object(p.a)({description:"请输入Mac！"}),!1;Object(O.c)(O.a.versionPublish,l).then((function(e){0==e.code?t.setState({macList:""},(function(){i("修改成功，请求列表数据","","")})):Object(p.a)({description:e.msg})}))}}))}},{key:"releaseWayType",value:function(e){this.setState({releaseWayId:e+""})}},{key:"upgradeType",value:function(e){this.setState({upgradeType:ze[e]})}},{key:"downloadMac",value:function(){var e=window.location.origin+"/v1/web/open/device/mac/download?type=2";window.location.href=e}},{key:"changeMacList",value:function(e){this.props.macListOperationRecordsFunc(),this.setState({macList:e.target.value})}},{key:"releaseFirmware",value:function(e,t,a){var n=this;this.setState({macList:"",releaseWayId:"",upgradeType:"",file:null},(function(){n.props.releaseFirmware(e,t,a),n.props.form.resetFields()}))}},{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator,a=e.getFieldValue,n={color:"#2F78FF",cursor:"pointer",padding:"5px 10px"},o=this.state,i=o.releaseWayId,c=o.macList,l=this.props,s=l.releaseState,u=l.macListOperationRecords;i=i+""?i+"":s.status?s.status+"":"0",c=u?c:c||s.macSet;var p=a("upgradeWay")||"";return r.a.createElement("div",{className:"release_firmware"},r.a.createElement(F.a,Re({},{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},{onSubmit:this.handleSubmit,className:""}),r.a.createElement(F.a.Item,{label:"发布方式：",hasFeedback:!0},t("releaseWayId",{initialValue:i},{rules:[{required:!0,message:"请选择发布方式!"}]})(r.a.createElement(H.a,{style:{width:174},placeholder:"请选择",onChange:this.releaseWayType},Qe.map((function(e,t){return r.a.createElement(Ge,{key:e.id+t,value:e.id},e.text)}))))),1==i?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("span",{style:{verticalAlign:"top",margin:"0 10px 0 23px",color:"rgba(0, 0, 0, 0.85)"}},"MAC地址:"),r.a.createElement("textarea",{value:c,rows:"10",cols:"69",style:{borderRadius:"3px",padding:"10px"},onChange:this.changeMacList})),r.a.createElement("div",{style:{position:"relative",padding:"0 0 20px 80px"}},r.a.createElement("span",{style:n,onClick:this.downloadMac},"下载模板"),r.a.createElement("span",{style:n},"批量导入"),r.a.createElement(F.a.Item,{label:""},t("file",{rules:[{required:!1}]})(r.a.createElement("div",{style:{position:"absolute",top:"-30px",left:"80px",opacity:0}},r.a.createElement(Le.a,{beforeUpload:this.beforeUpload,fileList:this.state.file,accept:".xls,.xlsx"},r.a.createElement(x.a,null,r.a.createElement(y.a,{type:"upload"}),"批量倒入"))))))):null,r.a.createElement(F.a.Item,{label:"升级方式：",hasFeedback:!0},t("upgradeWay",{initialValue:s.upgradeType?s.upgradeType+"":"1"},{rules:[{required:!0,message:"请选择升级方式!"}]})(r.a.createElement(H.a,{style:{width:174},placeholder:"请选择"},Ye.map((function(e,t){return r.a.createElement(Ge,{key:e.id+t,value:e.id},e.text)})))),r.a.createElement("p",{style:{height:"10px",fontSize:"12px"}},ze[p||s.upgradeType])),r.a.createElement(F.a.Item,{label:"升级提示信息：",hasFeedback:!0},t("promptInformation",{initialValue:s.releaseNote},{rules:[{required:!0,message:"请输入升级提示信息!"}]})(r.a.createElement(qe,null)),r.a.createElement("p",{style:{height:"10px",fontSize:"12px"}},"选择普通升级和强制升级时，用户可在app查看到升级提示")),r.a.createElement("div",{className:"but"},r.a.createElement(x.a,{type:"primary",htmlType:"submit"},"确定"),r.a.createElement(x.a,{className:"cancel",onClick:this.releaseFirmware.bind(this,"","","")},"取消"))))}}])&&Me(t.prototype,a),n&&Me(t,n),i}(r.a.Component));function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(){return($e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function et(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ot(e);if(t){var r=ot(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return nt(this,a)}}function nt(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?rt(e):t}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ct(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?it(Object(a),!0).forEach((function(t){lt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):it(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function lt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var st,ut=F.a.create({name:"validationFirmwareDialog",mapPropsToFields:function(e){return{deviceVersionId:F.a.createFormField(ct(ct(ct(ct({},e.deviceVersionId),{},{deviceVersionId:e.deviceVersionId},e.validationFirmware),{},{validationFirmware:e.validationFirmware},e.macListStr),{},{macListStr:e.validationState}))}}})(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(i,e);var t,a,n,o=at(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).beforeUpload=function(e){return e.size/1024<500?(Object(O.d)(O.a.versionCheckMac,{multipartFile:e},{needFormData:!0}).then((function(e){if(0==e.code){var a=e.data,n=a.successes,r=a.fails,o="",i="无";if(n.length>0){for(var c=0;c<n.length;c++)o+=n[c]+";";o=o.slice(0,o.length-1)}if(r.length>0){i="";for(var l=r.length>4?4:r.length,s=0;s<l;s++)i+=r[s]+";";i=i.slice(0,i.length-1),r.length>4&&(i+="...")}t.setState({macList:o});var u=a.successCount>0?a.successCount:0;Object(p.a)({message:"上传mac返回提示",description:"总共导入"+a.totalCount+"条,成功了"+u+"条，失败"+a.failCount+"条，（失败："+i+"）"})}else Object(p.a)({type:"error",message:"上传mac返回提示",description:e.msg})})),!1):(Object(p.a)({description:"文件上传大小超过500k限制"}),!1)},t.state={deviceVersionId:t.props.deviceVersionId,file:null,macList:""},t.handleSubmit=t.handleSubmit.bind(rt(t)),t.downloadMac=t.downloadMac.bind(rt(t)),t.changeMacList=t.changeMacList.bind(rt(t)),t.validationFirmware=t.validationFirmware.bind(rt(t)),t}return t=i,(a=[{key:"componentDidMount",value:function(){}},{key:"handleSubmit",value:function(e){var t=this,a=this;e.preventDefault(),(0,this.props.form.validateFieldsAndScroll)((function(e,n){if(!e){var r=a.state.macList,o=a.props,i=o.macListValidationRecords,c=o.deviceVersionId,l=o.validationState,s={deviceVersionId:c,macSet:i?r:r||l};if(!s.macSet)return Object(p.a)({message:"请输入Mac！"}),!1;Object(O.d)(O.a.versionValidate,s).then((function(e){0==e.code?t.setState({macList:""},(function(){a.props.validationFirmware("接口成功后，关闭弹窗刷新列表")})):Object(p.a)({type:"error",message:"验证固件提示",description:e.msg})}))}}))}},{key:"downloadMac",value:function(){var e=window.location.origin+"/v1/web/open/device/mac/download?type=2";window.location.href=e}},{key:"changeMacList",value:function(e){this.props.macListValidationRecordsFunc(),this.setState({macList:e.target.value})}},{key:"validationFirmware",value:function(e,t,a){var n=this;this.setState({macList:""},(function(){n.props.validationFirmware(e,t,a)}))}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={color:"#2F78FF",cursor:"pointer",padding:"5px 10px"},a=this.props,n=a.deviceVersionId,o=a.validationState,i=a.macListValidationRecords,c=(a.macListValidationRecordsFunc,this.state.macList);return c=i?c:c||o,r.a.createElement("div",{className:"validation_firmware_dialog"},r.a.createElement(F.a,$e({},{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},{onSubmit:this.handleSubmit,className:""}),r.a.createElement("div",null,r.a.createElement("span",{style:{verticalAlign:"top",marginRight:"10px"}},"MAC地址:"),r.a.createElement("textarea",{value:c,rows:"10",cols:"73",style:{borderRadius:"3px",padding:"10px"},onChange:this.changeMacList})),r.a.createElement("div",{style:{position:"relative",paddingLeft:"60px"}},r.a.createElement("span",{style:t,onClick:this.downloadMac},"下载模板"),r.a.createElement("span",{style:t},"批量导入"),r.a.createElement(F.a.Item,{label:""},e("file",{rules:[{required:!1}]})(r.a.createElement("div",{style:{position:"absolute",top:"-30px",left:"80px",opacity:0}},r.a.createElement(Le.a,{beforeUpload:this.beforeUpload,fileList:this.state.file,accept:".xls,.xlsx"},r.a.createElement(x.a,null,r.a.createElement(y.a,{type:"upload"}),"批量倒入")))))),r.a.createElement("div",{className:"but"},r.a.createElement(x.a,{type:"primary",htmlType:"submit"},"确定"),r.a.createElement(x.a,{className:"cancel",onClick:this.validationFirmware.bind(this,"",n,o)},"取消"))))}}])&&et(t.prototype,a),n&&et(t,n),i}(r.a.Component)),pt=a("yq+b"),dt=a.n(pt);a("VD1n");function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ft(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=gt(e);if(t){var r=gt(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return bt(this,a)}}function bt(e,t){return!t||"object"!==mt(t)&&"function"!=typeof t?vt(e):t}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Et=["温馨提示：","1. 产品支持整包以及差分包的上传升级；","2. 差分包需厂商自行完成差分包生成，以及设备的差分还原程序开发；","3. 固件包支持多批次的发布，以及发布对象设备的查看管理；","4. 可在消息中心查看设备OTA失败详细信息；"],Ot=l.a.Search,It=ge.a.confirm,wt=Object(d.connect)((function(e){return{productBaseInfo:e.getIn(["product","productBaseInfo"]).toJS()}}),(function(e){return{}}))(st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(i,e);var t,a,n,o=ht(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).macListOperationRecordsFunc=function(){t.setState({macListOperationRecords:!0})},t.macListValidationRecordsFunc=function(){t.setState({macListValidationRecords:!0})},t.state={versionList:[],pager:{pageIndex:1,totalRows:1},addFirmwareDialog:!1,releaseFirmwareDialog:!1,validationFirmwareDialog:!1,deviceVersionId:"",releaseState:null,validationState:"",macListOperationRecords:!1,macListValidationRecords:!1},t.search=t.search.bind(vt(t)),t.addFirmware=t.addFirmware.bind(vt(t)),t.releaseFirmware=t.releaseFirmware.bind(vt(t)),t.showDeleteConfirm=t.showDeleteConfirm.bind(vt(t)),t.validationFirmware=t.validationFirmware.bind(vt(t)),t.pagerIndex=t.pagerIndex.bind(vt(t)),t.columns=[{title:"固件ID",dataIndex:"id",key:"id"},{title:"固件类型",dataIndex:"firmwareVersionTypeName",key:"firmwareVersionTypeName"},{title:"固件标识",dataIndex:"deviceVersionTypeName",key:"deviceVersionTypeName"},{title:"内部版本号",dataIndex:"mainVersion",key:"mainVersion"},{title:"外部版本号",dataIndex:"extVersion",key:"extVersion"},{title:"时间",dataIndex:"releaseTime",key:"releaseTime"},{title:"状态",key:"updateStatus",dataIndex:"updateStatus",render:function(e){return r.a.createElement("span",null,e.map((function(e,t){var a="已发布"==e?"green":"待验证"==e?"blue":"gold";return r.a.createElement(ve.a,{color:a,key:"tag"+t},e)})))}},{title:"操作",key:"tags",dataIndex:"tags",render:function(e,a){return r.a.createElement("span",null,e.map((function(n,o){if(1==e.length)return r.a.createElement("span",{key:"tags"+o},r.a.createElement("a",{onClick:t.releaseFirmware.bind(vt(t),"",a.id,a.releaseObj)},n));if(2==e.length)return 0==o?r.a.createElement("span",{key:"tags"+o},r.a.createElement("a",{onClick:t.validationFirmware.bind(vt(t),"",a.id,"")},n),r.a.createElement(be.a,{type:"vertical"})):r.a.createElement("span",{key:"tags"+o},r.a.createElement("a",{onClick:t.showDeleteConfirm.bind(vt(t),a.id)},n));if(3==e.length){if(0==o)return r.a.createElement("span",{key:"tags"+o},r.a.createElement("a",{onClick:t.releaseFirmware.bind(vt(t),"",a.id,"")},n),r.a.createElement(be.a,{type:"vertical"}));if(1==o)return r.a.createElement("span",{key:"tags"+o},r.a.createElement("a",{onClick:t.validationFirmware.bind(vt(t),"",a.id,a.macSet)},n),r.a.createElement(be.a,{type:"vertical"}));if(2==o)return r.a.createElement("span",{key:"tags"+o},r.a.createElement("a",{onClick:t.showDeleteConfirm.bind(vt(t),a.id)},n))}})))}}],t}return t=i,(a=[{key:"componentDidMount",value:function(){var e=this;this.props.productId&&Object(O.c)(O.a.versionList,{productId:this.props.productId,pageIndex:1,pageRows:10}).then((function(t){var a=e.listData(t.data.list);e.setState({versionList:a,bindType:e.props.productBaseInfo.bindType,pager:t.data.pager})}))}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.productBaseInfo.bindType&&e.productBaseInfo.productId!=this.props.productId){var a=this.state.pager.pageIndex?this.state.pager.pageIndex:1;Object(O.c)(O.a.versionList,{productId:this.props.productId,pageIndex:a,pageRows:10}).then((function(e){var a=t.listData(e.data.list);t.setState({versionList:a,bindType:t.props.productBaseInfo.bindType,pager:e.data.pager})}))}}},{key:"listData",value:function(e){var t=[];return e.map((function(e,a){return t.push({key:a,id:e.deviceVersionId,firmwareVersionTypeName:e.firmwareVersionTypeName,deviceVersionTypeName:e.totalVersion,mainVersion:e.mainVersion,extVersion:e.extVersion,releaseTime:dt()(e.releaseTime).format("YYYY-MM-DD HH:mm:ss"),updateStatus:2==e.updateStatus?["已发布"]:0==e.updateStatus?["待验证"]:["验证中"],tags:2==e.updateStatus?["修改发布"]:0==e.updateStatus?["验证","删除"]:["发布","修改验证","删除"],macSet:e.macSet,releaseObj:{upgradeType:e.status,status:e.upgradeType,releaseNote:e.releaseNote,macSet:e.macSet}})})),t}},{key:"search",value:function(e){var t=this;Object(O.c)(O.a.versionList,{totalVersion:e,productId:this.props.productId,pageIndex:1,pageRows:10}).then((function(e){var a=t.listData(e.data.list);t.setState({versionList:a,bindType:t.props.productBaseInfo.bindType,pager:e.data.pager})}))}},{key:"addFirmware",value:function(e){var t=this;e&&Object(O.c)(O.a.versionList,{productId:this.props.productId,pageIndex:1,pageRows:10}).then((function(e){var a=t.listData(e.data.list);t.setState({versionList:a,bindType:t.props.productBaseInfo.bindType,pager:e.data.pager})})),this.setState({addFirmwareDialog:!this.state.addFirmwareDialog})}},{key:"validationFirmware",value:function(e,t,a){var n=this;e&&Object(O.c)(O.a.versionList,{productId:this.props.productId,pageIndex:1,pageRows:10}).then((function(e){var t=n.listData(e.data.list);n.setState({versionList:t,bindType:n.props.productBaseInfo.bindType,pager:e.data.pager})})),this.setState({validationFirmwareDialog:!this.state.validationFirmwareDialog,deviceVersionId:t,validationState:a||"",macListValidationRecords:!1})}},{key:"releaseFirmware",value:function(e,t,a){var n=this;e&&Object(O.c)(O.a.versionList,{productId:this.props.productId,pageIndex:1,pageRows:10}).then((function(e){var t=n.listData(e.data.list);n.setState({versionList:t,bindType:n.props.productBaseInfo.bindType,pager:e.data.pager})})),this.setState({releaseFirmwareDialog:!this.state.releaseFirmwareDialog,deviceVersionId:t,releaseState:a||"",macListOperationRecords:!1})}},{key:"showDeleteConfirm",value:function(e){var t=this;It({title:"固件删除",content:"你确定要删除此固件吗？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){Object(O.c)(O.a.versionDelete,{deviceVersionId:e}).then((function(e){if(0==e.code){var a=t.state.pager,n=a.totalRows,r=a.pageIndex;r=n%(10*(r-1))>1?r:r-1,Object(O.c)(O.a.versionList,{productId:t.props.productId,pageIndex:r,pageRows:10}).then((function(e){var a=t.listData(e.data.list);t.setState({versionList:a,bindType:t.props.productBaseInfo.bindType,pager:e.data.pager})}))}}))},onCancel:function(){}})}},{key:"pagerIndex",value:function(e){var t=this;Object(O.c)(O.a.versionList,{productId:this.props.productId,pageIndex:e,pageRows:10}).then((function(e){var a=t.listData(e.data.list);t.setState({versionList:a,bindType:t.props.productBaseInfo.bindType,pager:e.data.pager})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.versionList,n=t.pager,o=t.macListOperationRecords,i=t.addFirmwareDialog,c=t.releaseState,l=t.bindType,s=t.releaseFirmwareDialog,u=t.validationFirmwareDialog,p=t.validationState,d=t.deviceVersionId,m=t.macListValidationRecords;return r.a.createElement("div",{className:"firmware_management"},r.a.createElement("div",{className:"commonContentBox"},r.a.createElement("div",{className:"centent"},r.a.createElement(Ee.a,{desc:Et})),r.a.createElement("div",{className:"fonction_fence"},r.a.createElement("span",null,"固件标识："),r.a.createElement("div",{className:"searchBox"},r.a.createElement(Ot,{placeholder:"请输入固件",onSearch:function(t){return e.search(t)},enterButton:!0})),r.a.createElement(x.a,{className:"button",onClick:this.addFirmware,type:"primary"},"添加固件")),r.a.createElement("div",{className:"listBox"},r.a.createElement(he.a,{columns:this.columns,dataSource:a,pagination:{defaultCurrent:n.pageIndex,total:n.totalRows,hideOnSinglePage:!1,onChange:this.pagerIndex}})),r.a.createElement(ge.a,{title:"新建固件",visible:i,onOk:this.addFirmware,onCancel:this.addFirmware,width:600,footer:null,maskClosable:!1},r.a.createElement(Ne,{bindType:l,addFirmware:this.addFirmware,productId:this.props.productId})),r.a.createElement(ge.a,{title:"发布固件",visible:s,onOk:this.releaseFirmware,onCancel:this.releaseFirmware,width:600,footer:null,maskClosable:!1},r.a.createElement(Xe,{releaseState:c,deviceVersionId:d,bindType:l,releaseFirmware:this.releaseFirmware,productId:this.props.productId,macListOperationRecords:o,macListOperationRecordsFunc:this.macListOperationRecordsFunc})),r.a.createElement(ge.a,{title:"验证固件",visible:u,onOk:this.validationFirmware,onCancel:this.validationFirmware,width:600,footer:null,maskClosable:!1},r.a.createElement(ut,{deviceVersionId:d,validationState:p,validationFirmware:this.validationFirmware,macListValidationRecords:m,macListValidationRecordsFunc:this.macListValidationRecordsFunc}))))}}])&&ft(t.prototype,a),n&&ft(t,n),i}(n.Component))||st,Pt=a("M6wy"),Dt=a("CfbC"),Ct=a("2uph"),St=a("HorS"),At=(a("tpKs"),a("gsuU"),a("yqJg"));function kt(e){var t=e.showDialog,a=e.registerImport,o=e.productBaseInfo,i=e.registerDialog,c=Object(n.useRef)(),l=function(e){t(e)};return r.a.createElement(ge.a,{width:"50%",visible:i,centered:!0,title:"注册设备",className:"register-device-modal",onCancel:function(){return l("registerDialog")},maskClosable:!1,footer:[r.a.createElement(x.a,{key:"submit",type:"primary",onClick:function(){var e=c.current.getFileListUrl()[0];if(!e)return Object(p.a)({description:"请选择文件"}),!1;a(e)}},"确认"),r.a.createElement(x.a,{key:"cancel",onClick:function(){return l("registerDialog")}},"取消")]},r.a.createElement("div",{className:"register-device-form-wrapper"},0===o.accessModeId?r.a.createElement("div",{className:"tips"},r.a.createElement("div",null,"您已选择“初级认证”安全机制； "),r.a.createElement("div",null,"可选择“指定数据生成”机制，从本地导入数据，例如设备的物理地址、SN号、序列号、MAC列表；",r.a.createElement("a",{href:"http://skintest.hetyj.com/31438/6b0b20891e06ac31d0eed37a5083cca9.xlsx"},"导入模版")),r.a.createElement("div",null,"平台将生成12位的设备ID，总量最多生成2万条数据；")):r.a.createElement("div",{className:"tips"},r.a.createElement("div",null,"您的产品选择了云对云接入，需要从本地导入数据，例如设备的物理地址、SN号、序列号、MAC列表。",r.a.createElement("a",{href:"http://skintest.hetyj.com/31438/6b0b20891e06ac31d0eed37a5083cca9.xlsx"},"导入模版")),r.a.createElement("div",null," 平台将根据设备物理地址生成12位设备ID， 本次最多可以注册2万台设备。")),r.a.createElement("div",{className:"register-file"},r.a.createElement(R.a,{gutter:8,align:"middle"},r.a.createElement(M.a,{span:3},r.a.createElement("span",{className:"address"},"地址附件：")),r.a.createElement(M.a,{span:21},r.a.createElement(Oe.b,{ref:c,maxSize:10,format:".xls,.xlsx",isNotImg:!0}))))))}a("WfMB");function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(e){return function(e){if(Array.isArray(e))return Tt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Tt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Tt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Lt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(a),!0).forEach((function(t){xt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Nt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function xt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vt(e,t,a){return t&&Mt(e.prototype,t),a&&Mt(e,a),e}function Bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ut(e);if(t){var r=Ut(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Kt(this,a)}}function Kt(e,t){return!t||"object"!==jt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ut(e){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jt=H.a.Option,Wt=l.a.Search,Gt={pageRows:10,pageIndex:1},qt=function(e){Bt(a,e);var t=Ht(a);function a(e){var n;return Rt(this,a),(n=t.call(this,e)).componentDidMount=function(){n._getStatisticsData(n.productId),n.getDeviceList(Lt({},Gt))},n.onChange=function(e){n.getDeviceList(Lt(Lt({},Gt),{},{pageIndex:e}))},n._getStatisticsData=function(e){Object(O.c)(O.a.getStatisticsData,{productId:e},{loading:!0}).then((function(e){var t=e.code,a=e.data;t===At.a&&n.setState((function(){return{statisticsData:a}}))}))},n.getDeviceList=function(e){Object(O.c)(O.a.getDeviceRegisterList,Lt(Lt({},e),{},{productId:n.productId}),{loading:!0}).then((function(e){var t=e.code,a=e.data;t===At.a&&n.setState((function(){return{deviceRegister:a}}))}))},n.registerImport=function(e){Object(O.d)(O.a.registerImport,{data:e,productId:n.productId},{loading:!0}).then((function(e){var t=e.code,a=e.data;if(t===At.a){if(a.failCount>0)return void Object(p.a)({type:"error",description:"设备注册失败，失败条数 ".concat(a.failCount," ,成功条数 ").concat(a.totalCount," ")});Object(p.a)({type:"success",description:"设备注册成功"}),n.setState((function(e){return{registerDialog:!e.registerDialog}}),(function(){n.getDeviceList(Lt({},Gt))}))}}))},n.showSecret=function(e){n.setState((function(t){return t.secret[e]=!t.secret[e],{preState:t}}))},n.changeState=function(e){n.setState((function(t){return xt({},e,!t[e])}))},n.showDialog=function(e){n.changeState(e)},n._getAntDDeviceRegisterListData=function(){var e=n.state,t=e.deviceRegister,a=e.secret,o=t.list;return o.forEach((function(e,t){e.key=e.id})),{deviceRegisterList:o,columns:[{title:"设备ID",dataIndex:"id",key:"id",width:"150px"},{title:"物理地址",dataIndex:"physicalAddr",key:"physicalAddr"},{title:"设备秘钥",dataIndex:"deviceSecret",key:"deviceSecret",width:"340px",render:function(e,t,o){var i=a[o]?"eye-invisible":"eye",c=a[o]?e:Object(q.r)(e,10);return r.a.createElement("div",null,r.a.createElement("span",{key:"detail"},c),r.a.createElement(y.a,{type:i,style:{fontSize:"18px",marginLeft:"6px"},theme:"twoTone",twoToneColor:"#2874FF",onClick:function(){return n.showSecret(o)}}))}},{title:"入网状态",dataIndex:"status",key:"status",width:"100px",render:function(e){var t={color:"#FF2E00",marginRight:"10px"},a="未入网";return 0===e?(t.color="#FF2E00",a="未入网"):(t.color="#00B72E",a="已入网"),r.a.createElement("div",null,r.a.createElement("span",{style:t},"●"),r.a.createElement("span",null,a))}},{title:"入网时间",dataIndex:"activeTime",key:"activeTime",width:"200px",render:function(e){return e?q.a.utcToDev(e):"--"}}]}},n.productId=e.productId,n.state={statisticsData:{},deviceRegister:{list:[],pager:{}},secret:[],registerDialog:!1},n}return Vt(a,[{key:"render",value:function(){var e=this,t=this._getAntDDeviceRegisterListData(),a=t.deviceRegisterList,n=t.columns,o=this.state,i=o.statisticsData,c=o.deviceRegister,l=o.registerDialog,s=this.props.productBaseInfo,u=(s.authorityType,s.accessModeId),p=c.pager,d=["温馨提示："];return d=[].concat(_t(d),0===u?["1. 您的产品已选择“初级认证”安全机制，可选择导入设备的物理地址或SN号或序列号或MAC列表；","2. 平台将按照您导入的数据，生成12位的设备ID，每次最多生成2万条数据；","3. 您可以在这里管理注册设备，查看所有的设备入网状态。"]:["1. 您的产品已选择了云接入“安全认证”能力，需要提前导入设备的物理地址或SN号或序列号或MAC列表；","2. 平台将按照您导入的数据，生成12位的设备ID，每次最多可以注册2万台设备。"]),r.a.createElement("section",{className:"device-register-wrapper flex-column"},r.a.createElement("div",{className:"device-statistic"},r.a.createElement("div",{className:"total flex-column"},r.a.createElement("span",{className:"flex1"},"设备总数量"),r.a.createElement("span",{className:"flex1"},i.total)),r.a.createElement("div",{className:"register flex-column"},r.a.createElement("span",{className:"flex1"},"已入网设备"),r.a.createElement("span",{className:"flex1"},i.activate)),r.a.createElement("div",{className:"unregistered flex-column"},r.a.createElement("span",{className:"flex1"},"未入网设备"),r.a.createElement("span",{className:"flex1"},i.unactivate))),r.a.createElement("div",{className:"device-register-content-wrapper"},r.a.createElement(Ee.a,{desc:d}),r.a.createElement("div",{className:"content-list-wrapper"},r.a.createElement("h4",null,"设备列表"),r.a.createElement("div",{className:"content-list"},r.a.createElement("div",{className:"content-list-top clearfix"},r.a.createElement(Yt,{getDeviceList:this.getDeviceList,productBaseInfo:s}),r.a.createElement(x.a,{className:"register-btn",type:"primary",onClick:function(){return e.showDialog("registerDialog")}},"注册设备")),r.a.createElement(he.a,{className:"content",dataSource:a,columns:n,pagination:{onChange:this.onChange,defaultCurrent:1,current:p.pageIndex,pageSize:p.pageRows,total:p.totalRows,showQuickJumper:!0}})))),l&&r.a.createElement(kt,{registerImport:this.registerImport,showDialog:this.showDialog,registerDialog:l,productBaseInfo:s}))}}]),a}(n.PureComponent),Qt=function(e){Bt(a,e);var t=Ht(a);function a(){var e;Rt(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(t,a){a.preventDefault();var n=e.props.form.validateFieldsAndScroll,r=e.props.getDeviceList;n((function(e,t){if(!e){console.log("Received values of form: ",t);var a=Lt({},Gt);t.id&&(a.id=t.id),(t.status||0===t.status)&&(a.status=t.status),r(a)}}))},e}return Vt(a,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a="请输入设备ID号";return 2===this.props.productBaseInfo.authorityType&&(a="请输入设备ID号"),r.a.createElement(F.a,{layout:"inline",className:"search-form"},r.a.createElement(F.a.Item,{label:"",colon:!1,style:{marginRight:0}},t("status",{initialValue:""})(r.a.createElement(H.a,{style:{width:"150px"},optionFilterProp:"children"},r.a.createElement(Jt,{key:"allStatus",value:""},"全部状态"),r.a.createElement(Jt,{key:"unRegistered",value:0},"未入网"),r.a.createElement(Jt,{key:"register",value:1},"已入网")))),r.a.createElement(F.a.Item,{label:"",colon:!1},t("id",{rules:[{max:100,message:"最多可以输入100个字符"}]})(r.a.createElement(Wt,{placeholder:a,enterButton:!0,onSearch:function(t,a){return e.handleSubmit(t,a)}}))))}}]),a}(n.Component),Yt=F.a.create({name:"deviceSearch"})(Qt),zt=a("q5+0"),Xt=a("v7xx"),Zt=a("M7r8");a("yuMk");function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ea(){return(ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ta(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aa(e,t){return(aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function na(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=oa(e);if(t){var r=oa(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return ra(this,a)}}function ra(e,t){return!t||"object"!==$t(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oa(e){return(oa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aa(e,t)}(i,e);var t,a,n,o=na(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).click_1=function(){t.props.upData()},t.click_2=function(e){e.preventDefault();var a=t.props.form,n=a.validateFieldsAndScroll;a.resetFields;n((function(e,a){if(!e){var n=a,r={productId:t.props.productId};for(var o in n.productPic=t.imgForm.getFileList(),n.productPic.length>0?n.productPic=JSON.stringify(n.productPic.map((function(e,t){return{file:null,filename:e.name,filesrc:e.url}}))):n.productPic="",n.instruction=t.fileForm.getFileList(),n.instruction.length>0?n.instruction=JSON.stringify(n.instruction.map((function(e,t){return{file:null,filename:e.name,filesrc:e.url}}))):n.instruction="",n)n[o]?r[o]=n[o]:r[o]="";Object(O.d)(O.a.saveCommerceInfo,r,{needFormData:!0,loading:!0}).then((function(e){0==e.code&&t.props.upData(!0)}))}}))},t.weightCheck=function(e,t,a){0!=+t&&!+t||+t>2147483647?a("重量的输入值应为数字且小于2147483647"):a()},t.state={size:"",weight:"",productParam:"",introduction:"",supplier:"",contact:"",tel:"",productPic:[],instruction:[]},t.imgBack=!1,t.fileBack=!1,t}return t=i,(a=[{key:"componentDidMount",value:function(){var e=this,t=this.props.productId;t&&Object(O.d)(O.a.getCommerceInfo,{productId:t},{loading:!0}).then((function(t){if(0==t.code){var a=t.data;e.setState({size:a.size,weight:a.weight,productParam:a.productParam,introduction:a.introduction,supplier:a.supplier,contact:a.contact,tel:a.tel});var n=t.data.productPic?JSON.parse(t.data.productPic):[],r=Object(q.b)(n);n&&n.length>0&&(""==n[0]&&(r=[]),e.imgForm.setState({fileList:r}));var o=t.data.instruction?JSON.parse(t.data.instruction):[],i=Object(q.b)(o);o&&o.length>0&&(""==o[0]&&(i=[]),e.fileForm.setState({fileList:i}))}}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.size,n=t.weight,o=t.productParam,i=t.introduction,c=t.supplier,s=t.contact,u=t.tel,p=this.props.form,d=p.getFieldDecorator,m=p.getFieldValue;return r.a.createElement(F.a,ea({},{labelCol:{xs:{span:2},sm:{span:2}},wrapperCol:{xs:{span:18},sm:{span:18}}},{onSubmit:this.click_2,className:"commercialInfo"}),r.a.createElement("div",{className:"commercialInfo"},r.a.createElement("div",{className:"commonContentBox marginFR"},r.a.createElement("div",{className:"title"},"商业化信息",r.a.createElement("span",{className:"explain"},"填写商业化信息，以便于确保您的产品真实合法有效")),r.a.createElement("div",{className:"centent"},r.a.createElement("div",{className:"common_title_input"},r.a.createElement(F.a.Item,{label:"成品照片："},r.a.createElement(Oe.a,{onRef:function(t){return e.imgForm=t},maxCount:"9",format:".jpg,.png",maxSize:10}))),r.a.createElement(F.a.Item,{label:"尺寸："},d("size",{rules:[{max:20,message:"最大输入长度为20"}],initialValue:a})(r.a.createElement(l.a,{style:{width:"350px"},placeholder:"请输入您的尺寸 例:50*30*20",suffix:"mm"}))),r.a.createElement(F.a.Item,{label:"重量："},d("weight",{rules:[{validator:this.weightCheck,message:"重量的输入值应为数字且小于2147483647"}],initialValue:n&&n+""})(r.a.createElement(l.a,{style:{width:"350px"},placeholder:"请输入您的重量 例:10",suffix:"Kg"}))),r.a.createElement(Zt.a,{label:"产品参数：",formId:"productParam",astrictNub:"1000",rows:"5",placeholder:"产品参数,1000字符以内",getFieldDecorator:d,initialVal:o,getFieldValue:m}),r.a.createElement(Zt.a,{label:"产品介绍：",formId:"introduction",astrictNub:"1000",rows:"5",placeholder:"产品介绍,1000字符以内",getFieldDecorator:d,initialVal:i,getFieldValue:m}))),r.a.createElement("div",{className:"commonContentBox marginFR"},r.a.createElement("div",{className:"title"},"产品附件"),r.a.createElement("div",{className:"centent"},r.a.createElement("div",{className:"common_title_input"},r.a.createElement("span",{className:"common_title"},"产品说明书："),r.a.createElement("div",{className:"common_content"},r.a.createElement(Oe.a,{onRef:function(t){return e.fileForm=t},maxCount:"5",isNotImg:!0,format:".doc,.docx,.pdf,.jpg,.png",maxSize:20}))))),r.a.createElement("div",{className:"commonContentBox marginFR"},r.a.createElement("div",{className:"title"},"供应链信息",r.a.createElement("span",{className:"explain"},"填写商业化信息，以便于确保您的产品真实合法有效")),r.a.createElement("div",{className:"centent"},r.a.createElement(F.a.Item,{label:"供应商公司："},d("supplier",{rules:[{max:40,message:"最大输入长度为40"}],initialValue:c})(r.a.createElement(l.a,{style:{width:"350px"},placeholder:"请输入您的供应商公司名称"}))),r.a.createElement(F.a.Item,{label:"联系人："},d("contact",{rules:[{max:20,message:"最大输入长度为20"}],initialValue:s})(r.a.createElement(l.a,{style:{width:"350px"},placeholder:"请输入您的联系人姓名"}))),r.a.createElement(F.a.Item,{label:"联系方式："},d("tel",{rules:[{max:20,message:"最大输入长度为20"}],initialValue:u})(r.a.createElement(l.a,{style:{width:"350px"},placeholder:"请输入您的联系人方式"}))))),r.a.createElement(Xt.a,{preHandle:this.click_1,nextText:this.props.isEdit?"更新":"发布产品",nextHandle:this.click_2})))}}])&&ta(t.prototype,a),n&&ta(t,n),i}(n.Component),ca=F.a.create({name:"UpDataCommercialInfo"})(ia);a("TIHI");function la(e){return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ua(e,t){return(ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=fa(e);if(t){var r=fa(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return da(this,a)}}function da(e,t){return!t||"object"!==la(t)&&"function"!=typeof t?ma(e):t}function ma(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fa(e){return(fa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ya=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ua(e,t)}(i,e);var t,a,n,o=pa(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={publishProductInfo:{commerceInfo:{},moduleInfo:{},productBaseInfo:{}},upDataShow:!1},t.clickFile=t.clickFile.bind(ma(t)),t.upData=t.upData.bind(ma(t)),t.getPublishProductInfoFun=t.getPublishProductInfoFun.bind(ma(t)),t}return t=i,(a=[{key:"getPublishProductInfoFun",value:function(){var e=this;Object(O.d)(O.a.getPublishProductInfo,{productId:this.props.productId},{loading:!0}).then((function(t){0==t.code&&e.setState({publishProductInfo:t.data})}))}},{key:"componentDidMount",value:function(){this.props.productId&&this.getPublishProductInfoFun()}},{key:"componentDidUpdate",value:function(e){this.props.productId&&e.productId!=this.props.productId&&this.getPublishProductInfoFun()}},{key:"clickFile",value:function(e){window.open(e)}},{key:"upData",value:function(e,t){e&&this.getPublishProductInfoFun(),this.setState({upDataShow:!this.state.upDataShow})}},{key:"render",value:function(){var e=this,t=this.state,a=t.publishProductInfo,n=t.upDataShow,o=null,i=a.moduleInfo,c=i.createTime,l=i.modifyTime,s=a.commerceInfo?a.commerceInfo.mode:null;if(a.commerceInfo){var u=a.commerceInfo,p=u.supplier,d=u.contact,f=u.tel,h=u.size,b=u.weight,v=u.introduction,g=u.productParam,E=u.instruction,O=u.productPic;o=r.a.createElement("div",null,r.a.createElement("div",{className:"commonContentBox"},r.a.createElement("div",{className:"title"},"商业化信息",0==s?r.a.createElement("div",{className:"update_box"},r.a.createElement("span",{className:"update under_review"},"审核中")):r.a.createElement("div",{className:"update_box"},r.a.createElement("span",{className:"createTime"},dt()(l||c).format("YYYY-MM-DD HH:mm:ss")),r.a.createElement("span",{className:"update",onClick:this.upData.bind(this,!1)},r.a.createElement(y.a,{type:"undo",style:{marginRight:"10px"}}),"更新"))),r.a.createElement("div",{className:"centent"},r.a.createElement("div",{className:"introductionBar"},r.a.createElement("div",{className:"common_title_input"},r.a.createElement("span",{className:"common_title"},"成品图片："),r.a.createElement("div",{className:"common_content"},O?JSON.parse(O).map((function(e,t){return r.a.createElement("img",{className:"productPic",key:"成品图片"+t,src:e.filesrc})})):"--")),r.a.createElement("div",{className:"common_title_input"},r.a.createElement("span",{className:"common_title"},"尺寸："),r.a.createElement("div",{className:"common_content"},r.a.createElement("span",null,h||"--"," mm"))),r.a.createElement("div",{className:"common_title_input"},r.a.createElement("span",{className:"common_title"},"重量："),r.a.createElement("div",{className:"common_content"},r.a.createElement("span",null,b||"--"," Kg"))),r.a.createElement("div",{className:"common_title_input"},r.a.createElement("div",{className:"common_title"},"产品参数："),r.a.createElement("div",{className:"common_content"},g)),r.a.createElement("div",{className:"common_title_input"},r.a.createElement("span",{className:"common_title"},"产品介绍："),r.a.createElement("div",{className:"common_content"},r.a.createElement("span",null,v||"--")))))),r.a.createElement("div",{className:"commonContentBox"},r.a.createElement("div",{className:"title"},"产品附件"),r.a.createElement("div",{className:"centent"},r.a.createElement("div",{className:"common_title_input"},r.a.createElement("span",{className:"common_title"},"产品附件："),r.a.createElement("div",{className:"common_content"},E?JSON.parse(E).map((function(t,a){return r.a.createElement("div",{className:"links",key:"产品附件"+a,onClick:e.clickFile.bind(e,t.filesrc)},t.filename)})):null)))),r.a.createElement("div",{className:"commonContentBox"},r.a.createElement("div",{className:"title"},"供应链信息"),r.a.createElement("div",{className:"centent"},r.a.createElement("div",{className:"common_title_input"},r.a.createElement("span",{className:"common_title"},"供应商公司："),r.a.createElement("div",{className:"common_content"},r.a.createElement("span",null,p||"--"))),r.a.createElement("div",{className:"common_title_input"},r.a.createElement("span",{className:"common_title"},"联系人："),r.a.createElement("div",{className:"common_content"},r.a.createElement("span",null,d||"--"))),r.a.createElement("div",{className:"common_title_input"},r.a.createElement("span",{className:"common_title"},"联系方式："),r.a.createElement("div",{className:"common_content"},r.a.createElement("span",null,f||"--"))))))}return r.a.createElement("div",null,n?r.a.createElement(ca,{upData:this.upData,productId:this.props.productId,isEdit:!0}):r.a.createElement("div",{className:"product_info"},a.commerceInfo?o:r.a.createElement("div",null,r.a.createElement("div",{className:"commonContentBox"},r.a.createElement("div",{className:"title"},"商业化信息"),r.a.createElement("div",{className:"centent"},r.a.createElement(m.a,null))),r.a.createElement("div",{className:"commonContentBox"},r.a.createElement("div",{className:"title"},"产品附件"),r.a.createElement("div",{className:"centent"},r.a.createElement(m.a,null))),r.a.createElement("div",{className:"commonContentBox"},r.a.createElement("div",{className:"title"},"供应链信息"),r.a.createElement("div",{className:"centent"},r.a.createElement(m.a,null))))))}}])&&sa(t.prototype,a),n&&sa(t,n),i}(n.Component),ha=Object(zt.withRouter)(ya),ba=(a("+SM3"),a("SE39")),va=a("nXTq"),ga=a.n(va);function Ea(e){return(Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ia(e,t){return(Ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ca(e);if(t){var r=Ca(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Pa(this,a)}}function Pa(e,t){return!t||"object"!==Ea(t)&&"function"!=typeof t?Da(e):t}function Da(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ca(e){return(Ca=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ia(e,t)}(i,e);var t,a,n,o=wa(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={publishProductInfo:{commerceInfo:{},moduleInfo:{},productBaseInfo:{}}},t.moduleDetails=t.moduleDetails.bind(Da(t)),t.download=t.download.bind(Da(t)),t.getPublishProductInfoFun=t.getPublishProductInfoFun.bind(Da(t)),t}return t=i,(a=[{key:"getPublishProductInfoFun",value:function(){var e=this;Object(O.d)(O.a.getPublishProductInfo,{productId:this.props.productId},{loading:!0}).then((function(t){0==t.code&&e.setState({publishProductInfo:t.data})}))}},{key:"componentDidMount",value:function(){this.props.productId&&this.getPublishProductInfoFun()}},{key:"componentDidUpdate",value:function(e){this.props.productId&&e.productId!=this.props.productId&&this.getPublishProductInfoFun()}},{key:"moduleDetails",value:function(e){window.open(e)}},{key:"download",value:function(e){if(!e)return Object(p.a)({description:"下载地址为空！"}),!1;window.location=e}},{key:"render",value:function(){var e=this.state.publishProductInfo,t=e.moduleInfo,a=t.burnFileName,n=t.burnFileVersion,o=t.hetModuleTypeName,i=t.bindTypeName,c=t.netTypeName,l=t.supportFileTransfer,s=t.communicateSpeed,u=t.applyScope,p=t.originalModuleTypeName,d=t.readmePdf,m=t.modulePicture,f=t.burnFile,y=t.sourceCodeName,h=t.sourceCodeVersion,b=t.sourceCode,v=e.moduleInfo,g=(v.sizeHeight||"- * ")+(v.sizeThickness||"- * ")+(v.sizeWidth||"-"),E=e.productBaseInfo,O=E.hardwareType,I=E.commFreq;return r.a.createElement("div",null,r.a.createElement("div",{className:"product_info"},r.a.createElement("div",{className:"commonContentBox"},r.a.createElement("div",{className:"title"},"硬件方案"),r.a.createElement("div",{className:"centent"},r.a.createElement("h4",null,"独立MCU方案"),r.a.createElement("p",null,"通信模组负责与云端信息的交互，通过串口与主控板（即MCU）进行通信，需要在MCU上进行协议解析与外设控制的开发。独立MCU方案能提供更丰富的系统资源，适合复杂的智能硬件设备。"))),r.a.createElement("div",{className:"commonContentBox"},r.a.createElement("div",{className:"title"},"通信模组"),r.a.createElement("div",{className:"centent"},r.a.createElement("div",{className:"strategy"},r.a.createElement("div",{className:"strategy-content"},r.a.createElement("img",{className:"strategy-img",src:m||ga.a}),r.a.createElement("div",{className:"moduleTypeName"},o),r.a.createElement("div",{className:"moduleDetails"},r.a.createElement("span",null,"芯片： "),r.a.createElement("span",null,p||"--")),r.a.createElement("div",{className:"moduleDetails"},r.a.createElement("span",null,"尺寸： "),r.a.createElement("span",null,g||"--")),r.a.createElement("div",{className:"moduleDetails single-text"},r.a.createElement("span",null,"适用： "),r.a.createElement(ba.a,{placement:"topLeft",title:u||"--"},r.a.createElement("span",null,u||"--"))),r.a.createElement("div",{className:"moduleLink",onClick:this.moduleDetails.bind(this,d)},"模组详情"))),r.a.createElement("div",{className:"table"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"支持通信技术"),r.a.createElement("td",null,i||"--")),r.a.createElement("tr",null,r.a.createElement("td",null,"支持配网方式"),r.a.createElement("td",null,c||"--")),r.a.createElement("tr",null,r.a.createElement("td",null,"文件传输能力"),r.a.createElement("td",null,null==l?"--":0==l?"否":"是")),r.a.createElement("tr",null,r.a.createElement("td",null,"通信通讯速率"),r.a.createElement("td",null,s||"--")),r.a.createElement("tr",null,r.a.createElement("td",null,"数据上报频率"),r.a.createElement("td",null,I||"--"))))),r.a.createElement("div",{className:"download"},r.a.createElement("p",null,"您选择的模组有通用固件程序，您可以下载固件程序自行烧录。"),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{width:"25%"},"已选模组："),r.a.createElement("td",{width:"75%"},o)),r.a.createElement("tr",null,r.a.createElement("td",{width:"25%"},"固件程序："),r.a.createElement("td",{width:"75%"},0==O?a:y)),r.a.createElement("tr",null,r.a.createElement("td",{width:"25%"},"固件版本："),r.a.createElement("td",{width:"75%"},0==O?n:h)))),r.a.createElement("div",{className:"commonButBox"},r.a.createElement("div",{className:"commonButs",onClick:this.download.bind(this,0==O?f:b)},0==O?"下载固件程序":"下载模组源码")))))))}}])&&Oa(t.prototype,a),n&&Oa(t,n),i}(n.Component),Aa=Object(zt.withRouter)(Sa),ka=a("8sIe"),ja=(a("eox1"),a("vW+X"));a("PnIC");function _a(e){return(_a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ta(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Na(e,t){return(Na=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function La(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ra(e);if(t){var r=Ra(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return xa(this,a)}}function xa(e,t){return!t||"object"!==_a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ra(e){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ma=["温馨提示：","产品标签是您给产品自定义的标识，标签的结构为：Key：value，您可以使用标签功能实现产品的分类统一管理。"],Va=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Na(e,t)}(i,e);var t,a,n,o=La(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={pageIndex:1,productLabelList:[],pager:{},labelBaseList:[],editid:-1,editkey:"",editval:"",addkey:"",addval:"",delLabelId:"",deleteLoading:!1,dellabelKey:"",dellabelValue:""},t}return t=i,(a=[{key:"componentDidMount",value:function(){this.getProductLabelList(),this.getLabelBaseList()}},{key:"getProductLabelList",value:function(){var e=this,t=this.state.pageIndex,a=this.props.productId;Object(O.c)(O.a.getProductLabelList,{productId:a,labelType:1,pageIndex:t,pageRows:10}).then((function(t){0==t.code&&(e.setState({productLabelList:t.data.list||[],pager:t.data.pager||{}}),console.log(111,t.data))}))}},{key:"getLabelBaseList",value:function(){var e=this;Object(O.c)(O.a.getProductLabelBaseList,{labelType:1,pageIndex:1,pageRows:9999}).then((function(t){0==t.code&&(console.log(222,t.data),e.setState({labelBaseList:t.data||[]}))}))}},{key:"deleteOkHandle",value:function(){var e=this,t=this.state.delLabelId;this.setState({deleteLoading:!0},(function(){Object(O.d)(O.a.delProductLabel,{id:t}).then((function(t){e.setState({delLabelId:""}),0==t.code&&e.getProductLabelList()})).finally((function(){e.setState({deleteLoading:!1})}))}))}},{key:"openDelMod",value:function(e,t,a){this.setState({delLabelId:e,dellabelKey:t,dellabelValue:a})}},{key:"closeDelLabelMod",value:function(){this.setState({delLabelId:""})}},{key:"addConfirm",value:function(){var e=this,t=this.state,a=t.addkey,n=t.addval;if(""==a||""==n)return Object(p.a)({description:"请将添加输入框补充完整",type:"warn"}),!1;var r=this.props.productId;Object(O.d)(O.a.addProductLabel,{productId:r,labelKey:a,labelValue:n,labelType:1}).then((function(t){0==t.code&&(e.setState({addkey:"",addval:""}),e.getProductLabelList(),e.getLabelBaseList())}))}},{key:"editLabel",value:function(e,t,a){this.setState({editid:e,editkey:t,editval:a})}},{key:"onChangeInput",value:function(e,t){if(t&&t.length>50)return!1;var a={};a[e]=t,this.setState(a)}},{key:"editConfirm",value:function(e,t){var a=this,n=this.state,r=n.editid,o=n.editkey,i=n.editval;""==o&&""==i&&Object(p.a)({description:"请将编辑输入框补充完整",type:"warn"}),Object(O.d)(O.a.updateProductLabel,{id:r,labelKey:o||e,labelValue:i||t,labelType:1}).then((function(e){0==e.code&&(a.setState({editid:-1,editkey:"",editval:""}),a.getProductLabelList(),a.getLabelBaseList())}))}},{key:"getDataSource",value:function(e){var t=this.state.labelBaseList,a=[],n=[];return t.forEach((function(t){a.push(t.label||"无法识别的Key"),e&&e==t.label&&t.labelDatas.forEach((function(e){n.push(e.label||"无法识别的Value")}))})),null==e?a:n}},{key:"getListHtml",value:function(){var e=this,t=this.state,a=t.productLabelList,n=t.editid,o=t.editkey,i=t.editval;return a.map((function(t,a){var c=t.id,l=t.labelKey,s=t.labelValue;return c==n?r.a.createElement("tr",{key:"tr_"+a},r.a.createElement("td",null,r.a.createElement(ja.a,{value:o,dataSource:e.getDataSource(),style:{width:"80%"},onChange:e.onChangeInput.bind(e,"editkey"),placeholder:"Key",filterOption:!0})),r.a.createElement("td",null,r.a.createElement(ja.a,{value:i,dataSource:e.getDataSource(o),style:{width:"80%"},onChange:e.onChangeInput.bind(e,"editval"),placeholder:"Value",filterOption:!0})),r.a.createElement("td",null,r.a.createElement("a",{href:"javascript:",onClick:e.editConfirm.bind(e,l,s)},"确认"),r.a.createElement(be.a,{type:"vertical"}),r.a.createElement("a",{href:"javascript:",onClick:e.editLabel.bind(e,-1,"","")},"取消"))):r.a.createElement("tr",{key:"tr_"+a},r.a.createElement("td",null,l),r.a.createElement("td",null,s),r.a.createElement("td",null,r.a.createElement("a",{href:"javascript:",onClick:e.editLabel.bind(e,c,l,s)},"编辑"),r.a.createElement(be.a,{type:"vertical"}),r.a.createElement("a",{href:"javascript:",onClick:function(){return e.openDelMod(c,l,s)}},"删除")))}))}},{key:"changePage",value:function(e){this.setState({pageIndex:e},this.getProductLabelList)}},{key:"render",value:function(){var e=this,t=this.state,a=t.pageIndex,n=t.pager,o=t.addkey,i=t.addval,l=t.delLabelId,s=t.dellabelKey,u=t.dellabelValue,p=t.deleteLoading;return r.a.createElement("div",{className:"productlabelpage"},r.a.createElement("div",{className:"contbox"},r.a.createElement("div",{className:"centent"},r.a.createElement(Ee.a,{desc:Ma})),r.a.createElement("table",{className:"labeltable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"38%"}},"标签Key"),r.a.createElement("th",{style:{width:"38%"}},"标签Value"),r.a.createElement("th",{style:{width:"24%"}},"管理"))),r.a.createElement("tbody",null,this.getListHtml(),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(ja.a,{value:o,dataSource:this.getDataSource(),style:{width:"80%"},onChange:this.onChangeInput.bind(this,"addkey"),placeholder:"Key",maxLength:"100",filterOption:!0})),r.a.createElement("td",null,r.a.createElement(ja.a,{value:i,dataSource:this.getDataSource(o),style:{width:"80%"},onChange:this.onChangeInput.bind(this,"addval"),placeholder:"Value",maxLength:"100",filterOption:!0})),r.a.createElement("td",null,r.a.createElement("a",{href:"javascript:",onClick:this.addConfirm.bind(this)},"确认"))))),r.a.createElement("footer",{className:"list-pagination"},n&&n.totalRows>0?r.a.createElement(c.a,{className:"self-pa",total:n.totalRows,current:a,defaultCurrent:1,defaultPageSize:10,onChange:function(t){return e.changePage(t)},showTotal:function(e){return r.a.createElement("span",null,"共 ",r.a.createElement("a",null,e)," 条")},showQuickJumper:!0,hideOnSinglePage:!0}):null)),r.a.createElement(I.a,{visible:!!l,modalOKHandle:this.deleteOkHandle.bind(this),modalCancelHandle:this.closeDelLabelMod.bind(this),targetName:"key: ".concat(s,", value: ").concat(u),confirmLoading:p,title:"删除标签",needWarnIcon:!0,descText:"即将删除的标签"}))}}])&&Ta(t.prototype,a),n&&Ta(t,n),i}(n.Component),Ba=a("YNSc");a("c0+R");function Fa(e){return(Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ha(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ka(e,t){return(Ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ua(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Wa(e);if(t){var r=Wa(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Ja(this,a)}}function Ja(e,t){return!t||"object"!==Fa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wa(e){return(Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ga,qa=l.a.Search,Qa=H.a.Option,Ya=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ka(e,t)}(c,e);var t,a,n,i=Ua(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=t.state,n=a.labelName,r=a.labelType,o={productId:t.props.productId,pageIndex:e,pageRows:10,labelType:r};n&&(o.labelName=n),Object(O.c)(O.a.getThingLabelList,o).then((function(e){var a=e.data;console.log("--data--",a),t.setState({tagList:a.list,pager:a.pager})}))},t.cngSearchType=function(e){t.setState({labelType:e})},t.resetList=function(){t.setState({labelName:"",labelType:0},(function(){t.getList(1)}))},t.cngSearchName=function(e){t.setState({labelName:e.target.value})},t.state={tagList:[],pager:{pageIndex:1,totalRows:1},typeList:[{id:0,name:"基础标签"},{id:1,name:"复合标签"},{id:2,name:"设备事件标签"},{id:3,name:"设备属性标签"}],labelType:0,labelName:""},t.columns=[{title:"ID",dataIndex:"labelId",key:"labelId"},{title:"标签名称",dataIndex:"labelName",key:"labelName"},{title:"英文名",dataIndex:"labelNameEn",key:"labelNameEn"},{title:"类型",dataIndex:"labelType",key:"labelType",render:function(e){return{0:"基础标签",1:"复合标签",2:"设备事件标签",3:"设备属性标签"}[e]}},{title:"操作",dataIndex:"action",key:"action",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(o.Link,{to:"#"},"数据分析"))}}],t}return t=c,(a=[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.tagList,n=t.pager,o=t.typeList,i=t.labelType,c=t.labelName;return r.a.createElement("div",{className:"firmware_management protocal-tag-page"},r.a.createElement("div",{className:"commonContentBox"},r.a.createElement("div",{className:"centent"},r.a.createElement("div",{className:"search-box"},r.a.createElement("span",null,"标签类型："),r.a.createElement(H.a,{className:"select",placeholder:"选择标签类型",onChange:this.cngSearchType,value:i},o.map((function(e){return r.a.createElement(Qa,{key:e.id,value:e.id},e.name)}))),r.a.createElement("span",null,"标签名："),r.a.createElement("div",{className:"searchBox"},r.a.createElement(qa,{placeholder:"请输入物标签名",value:c,onChange:this.cngSearchName,enterButton:!0,maxLength:20,onSearch:function(){return e.getList(1)}})),r.a.createElement(x.a,{className:"btnreset",onClick:this.resetList},"重置")),r.a.createElement(he.a,{rowKey:"labelId",columns:this.columns,dataSource:a,pagination:{defaultCurrent:n.pageIndex,total:n.totalRows,hideOnSinglePage:!1,onChange:this.getList}}))))}}])&&Ha(t.prototype,a),n&&Ha(t,n),c}(n.Component),za=a("GNPG");a("DyLZ");function Xa(e){return(Xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Za(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $a(e,t){return($a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function en(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=an(e);if(t){var r=an(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return tn(this,a)}}function tn(e,t){return!t||"object"!==Xa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function an(e){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nn=me.a.TabPane,rn=Object(d.connect)((function(e){return{deviceDebugAccountList:e.getIn(["deviceDebug","deviceDebugAccountList"]).toJS(),deviceDebugMacList:e.getIn(["deviceDebug","deviceDebugMacList"]).toJS()}}),(function(e){return{updateDeviceDebugAccountList:function(t){return e(Object(za.t)(t))},updateDeviceDebugMacList:function(t){return e(Object(za.u)(t))}}}))(Ga=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$a(e,t)}(i,e);var t,a,n,o=en(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).callback=function(e){var a=t.props.productId;if(window.location.hash="#/open/base/product/details/".concat(a,"?step=").concat(e),"4"==e){var n=[];t.setState({steps:e},(function(){Object(O.d)(O.a.deviceDebugAccountGetList,{productId:a}).then((function(e){0==e.code&&(e.data,t.props.updateDeviceDebugAccountList(e),Object(O.d)(O.a.debugSecretList,{productId:a}).then((function(e){0==e.code&&(n=e.data,t.props.updateDeviceDebugMacList(e),n.length<1&&t.debugVisible.debugVisible())})))}))}))}else t.debugVisible&&t.debugVisible.goout&&t.debugVisible.goout(),t.setState({steps:e})},t.state={steps:Object(q.j)("step")||"1"},t}return t=i,(a=[{key:"render",value:function(){var e=this,t=this.props,a=t.productId,n=t.productBaseInfo,o=t.protocolLists;return n.authorityType,n.accessModeId,r.a.createElement("div",{className:"product_tabs"},r.a.createElement(me.a,{defaultActiveKey:this.state.steps,onChange:function(t){return e.callback(t)}},r.a.createElement(nn,{key:"1",tab:"基本信息"},r.a.createElement(fe.a,{productId:a,canOperate:!1})),r.a.createElement(nn,{key:"14",tab:"物标签"},r.a.createElement(Ya,{productId:a})),r.a.createElement(nn,{key:"13",tab:"topic列表"},r.a.createElement("div",{style:{padding:"1px",background:"#e9e9e9"}},r.a.createElement(Ba.a,{productIdHex:n.productIdHex||"${YourProductKey}",type:0,canOperate:!1}))),r.a.createElement(nn,{key:"2",tab:"功能定义"},r.a.createElement(ye.a,{productId:a,canOperate:!1})),r.a.createElement(nn,{key:"10",tab:"硬件开发"},r.a.createElement(Aa,{productId:a})),r.a.createElement(nn,{key:"3",tab:"固件管理"},r.a.createElement(wt,{productId:a})),r.a.createElement(nn,{key:"4",tab:"调试工具"},r.a.createElement("div",{className:"gray-bg-padding"},r.a.createElement(Pt.default,{productId:a,onRef:function(t){return e.debugVisible=t}}))),r.a.createElement(nn,{key:"11",tab:"标签"},r.a.createElement(Va,{productId:a})),r.a.createElement(nn,{key:"12",tab:"远程配置"},r.a.createElement(ka.a,{productId:a,protocolLists:o})),r.a.createElement(nn,{key:"5",tab:"APP控制"},r.a.createElement(Dt.a,{productId:a,canOperate:!0,noNeedTitle:!0})),r.a.createElement(nn,{key:"6",tab:"云端定时"},r.a.createElement(Ct.a,{productId:a,canOperate:!0,noNeedTitle:!0})),r.a.createElement(nn,{key:"7",tab:"场景服务"},r.a.createElement(St.a,{productId:a,canOperate:!0,noNeedTitle:!0})),r.a.createElement(nn,{key:"8",tab:"设备注册"},r.a.createElement(qt,{productId:a,productBaseInfo:n})),r.a.createElement(nn,{key:"9",tab:"商业化信息"},r.a.createElement(ha,{productId:a}))))}}])&&Za(t.prototype,a),n&&Za(t,n),i}(n.Component))||Ga;a("Yq1/");var on=Object(d.connect)((function(e){return{productBaseInfo:e.getIn(["product","productBaseInfo"]).toJS(),protocolLists:e.getIn(["product","productProtocolLists"]).toJS()}}),(function(e){return{getProductBaseInfo:function(t){return e(Object(f.getProductBaseInfo)(t))},getProtocolLists:function(t){return e(Object(f.getProtocolLists)(t))}}}))((function(e){var t=e.productBaseInfo,a=e.match,o=e.getProductBaseInfo,i=e.getProtocolLists,c=e.protocolLists,l=function(e){return+e.params.id}(a);return Object(n.useEffect)((function(){l&&(o(l),i(l))}),[o,i,l]),l?r.a.createElement("div",{className:"eidt-wrapper"},r.a.createElement(w.a,{title:t.productName}),r.a.createElement("div",{className:"edit-content-wrapper no-padding"},r.a.createElement(rn,{productId:l,protocolLists:c,productBaseInfo:t}))):r.a.createElement(m.a,{tipText:"没有传入产品ID哦"})})),cn=Object(i.default)((function(){return Promise.all([a.e("vendor"),a.e(5)]).then(a.bind(null,"cW1n"))})),ln=Object(i.default)((function(){return Promise.resolve().then(a.bind(null,"M6wy"))}));function sn(e){var t=e.match.path;return r.a.createElement(o.Switch,null,r.a.createElement(o.Route,{path:"".concat(t,"/list"),component:L}),r.a.createElement(o.Route,{path:"".concat(t,"/add"),component:de}),r.a.createElement(o.Route,{path:"".concat(t,"/edit/:id"),component:cn}),r.a.createElement(o.Route,{path:"".concat(t,"/details/:id"),component:on}),r.a.createElement(o.Route,{path:"".concat(t,"/deviceDebugging"),component:ln}),r.a.createElement(o.Redirect,{to:"".concat(t,"/list")}))}},mU7p:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"g",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return s}));var n={0:"开发中",1:"已发布",2:"审核中"},r={1:"草稿",2:"审核中",3:"灰度版本",4:"正式版本"},o={1:"SDK开发",2:"在线拖拽"},i={0:"草稿",1:"已发布",2:"删除"},c={1:"大于",2:"小于",3:"范围"},l={1:"条件",2:"动作"},s={1:"草稿",2:"审核中",3:"已发布",4:"驳回"}},nXTq:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAHF0lEQVR4Xu2dgZHdNBCGpQo4KiCpgKSCRG4glwpIKiBUAFTAUQGXCrg0YIUOjgo4KuCoQMxe9OCdybNWWvlpJf+eyeRmniWv9v+8suVd2xpsu/aA3fXoMXgDAHYOAQAAADv3wM6HjwgAAHbugZ0PHxEAAOzcAzsfPiIAANi5B3Y+fEQAALBzD+x8+IgAAGDnHtj58BEBAMDOPbDz4WdFAO/9E2PM98aYl8YY+hubHg/cGWNujDE/O+fob9bGBsB7/8YY8wurV+zU0gP3xpjvnHPXHCNYAEB8jivV7fPaOUcRYXVLAuC9vzDG/GGMof+x9eMBigRPnXP0/8mNA8CVMebbfsYNS488QFMB6VcOwDzPH621L+DW/jwQQvhtmia6YC8HwHsf+hs6LI4euHPOPd0MAOdccgqBFNt7YO0kTWmUFFDS+fZDxxHIAxKNAMAADAGAAUSUDAEASLw3QFsAMICIkiEAAIn3BmgLAAYQUTIEACDx3gBtAcAAIkqGAAAk3hugLQAYQETJEACAxHsDtAUAA4goGQIAkHhvg7bee0qgoRzKZ0fd3xpjrpxz72sfEgDU9mhhf957EpwSZ4+FX/ZGIFC+HjtzN2UOAEh56Ay/Z+ZOEgQula/HNRsAcD214X7ee0rD/ibjEO+dczRNiDcAIHahrINYMEOZ07nblzWiAADIdXvl/b3374wxPxV0S9PAx4J2j5oAAKkHhe299z/EkrncnpJp25wOAQDHSxvuAwA2dG4PXQtK5zAF9CBwysZ4C/hXar/j30MIf0/TVKXcbvgpwHt/KEknH9ICCs2dqzVvOWLU2Nd7n1tC96Nzjq4dxNuwAMQzi1bWLhdeqrqQIlbgU27+RQiByui+TvXHKdlK9XH8+5AARPH9yrKqVghuErWU9CzgXc0INhwADPEPJ4A6CMgw7z0VZL4JIdBbVOjfnbWWbL2pcd+/jA5DAZAhvmoIckK4dN9hACgQHxCMUhsoEP8AAd0V0H01hdpdbd1HgAri7xqCrgGISRS/pl47RwsnpLK19ovE6b27SNAtAFF8utVbXREj8a21D686iffagODoLOgSgAzxf7fWXh5SqKgdIHgcA7sDIFP8l8tFE0DQMQBS8Q9DBwT/QdBNBKglPiDoMALE5VG62k9d8NGc/7+wf+rKH5Ggg5dEcRMmQghZ4iMSfPKA6ilga/GPIHgSQqAncanHscOtE6gFgCu+MeYDPT2TPiLNeCZ/Vghi2vi9dHwr0+DJt7k2e1FkhvjVCiRiOOQmZmwOwWdKxSgF/G3NsjCVU0Ar8Y+mg+YQRB9QrcDyorc6eKqmgNbia4CA4YOqEKgBICZvchIdq4b9lbnx7JHAe085jJyav2oQqAAgY+BnEf/ckSA+0qaQzxG/6uPr5gBoFf9cEAjzGSjN/bnkDqEpANrF3xoC5kshUhlKouTWZgAYY6gmnhPy6NaH9RmzlKckv9deJ+A+22DaXAxBSwA4Y1Mhfu1IsHKb98gnMZnlMoRwxVilLIJAMwCqxK8FAeM27+FQ8dkGrXDeZkSfbAi0AqBSfCkE3Guezz3Y2goCjQCoFr8QgtfxHUCca56TzzYiBLfW2q8S8yc7EmgDoAvxCyDgXO/QPsl1jowcBhYEmgDoSvwNIGCXfNeEoDkAhyvdLQofuaeddL+M+fnUobLhrwVBUwAOOfsjlGSVQBDHT+XeRescNSBoBsBI4pdMB7XGnwOBc+75MgQ1AyCuYQ9XjMmJBCGEP2PBSpXxZ0Bw7Zx7ewxBMwBS6UbSebll+zUISpNXU+MphQAApDxb+Ht8ykdz+6u4skc1ije1X/GyOJu5pW//RgIAUCgwt1kE4cm5LnRzIwEA4CrZ0X45EKw9kU1N0/h6uGIoMiA4OQoAoFhgjmlSCAAAx8vK9/He04syqa4yewMA2S7T2YCbg7C0HgDo1LPIqhIIAECRq/U2yoUAAOjVstiyHAgAQLGbdTfkQgAAdOsoso4DAQAQuVh/4xQEAEC/hmIL8SxA7MK+OwAAfesnth4AiF3YdwcAoG/9xNYDALEL++5gUwDmeb5feUe/+MPHfbtejfUPr9JfbpS7OE3TszUrkwkh8zzTt/BeqBkqDMnxwAfn3PKbi4/aJwFILTTkWIN9z+6BZLVSEgAyeZ5n+u5dqpr17KPDAU97gOoWpmmibxaubiwApGlJKSPwe10P5FQssQAg8yIE14zXnNQdDXrL8kBuxRIbgIMV8ZqA3nlzgYvDLG0225k+Rm2tpRdP0qdps4pUswHYbBTouIkHAEATt+s5KADQo0UTSwBAE7frOSgA0KNFE0sAQBO36zkoANCjRRNLAEATt+s5KADQo0UTSwBAE7frOSgA0KNFE0sAQBO36zkoANCjRRNLAEATt+s5KADQo0UTSwBAE7frOSgA0KNFE0v+AYzG38xSFB3XAAAAAElFTkSuQmCC"},"t+M7":function(e,t,a){"use strict";a.d(t,"a",(function(){return w}));a("0AG1"),a("Jya7"),a("vxpS"),a("ThRY"),a("h4PX"),a("6wma"),a("8OWE"),a("L4wC"),a("KzFV"),a("U4At");var n,r=a("KiF4"),o=(a("7fbo"),a("LCR/")),i=(a("rJH4"),a("nKmx")),c=(a("+SM3"),a("SE39")),l=(a("DwF0"),a("wlSd"),a("RWNY"),a("SnyF"),a("q+fq")),s=a.n(l),u=a("ivud"),p=a("P2RN"),d=a("Nlzp"),m=a("yq+b"),f=a.n(m),y=a("GNPG");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=I(e);if(t){var r=I(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return E(this,a)}}function E(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=Object(u.connect)((function(e){return{}}),(function(e){return{changeDeviceDebugMacData:function(t){return e(Object(y.b)(t))},deleteDeviceDebugMacData:function(t,a,n){return e(Object(y.c)(t,a,n))},editDeviceDebugMacData:function(t){return e(Object(y.d)(t))},addDeviceDebugMacList:function(t,a){return e(Object(y.a)(t,a))},getDeviceDebugAccountInsert:function(t,a){return e(Object(y.a)(t,a))},getRenewalAccount:function(t){return e(Object(y.j)(t))},getDeviceDebugMacList:function(t){return e(Object(y.h)(t))},updateDeviceDebugAccountList:function(t){return e(Object(y.t)(t))},getDeviceDebugAccountList:function(t){return e(Object(y.g)(t))}}}))(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(u,e);var t,a,n,l=g(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).deleteMac=function(e,a){if(console.log("type ， id,",e,a),2==e){var n=t.props.deviceDebugMacList;n.data.splice(a,1),t.props.deleteDeviceDebugMacData(t.props.pid,a,n)}else t.props.deleteDeviceDebugMacData(t.props.pid,a)},t.macAdd=function(e){var a=e.target.value;t.setState({macStr:a})},t.insertMac=function(){var e=t.state.macStr;if(!e)return Object(p.a)({description:"物理地址不能为空!",type:"warn"}),!1;if(!e.match(/^[\da-zA-Z]{1,50}$/))return Object(p.a)({description:"物理地址格式错误，应为50位以内的大小写字母加数字组成!",type:"warn"}),!1;var a={physicalAddr:t.state.macStr,productId:+t.props.pid};Object(d.d)(d.a.addDebugMac,a,{loading:!0}).then((function(e){0==e.code&&t.setState({macStr:""},(function(){t.props.getDeviceDebugMacList(t.props.pid)}))}))},t.state={macStr:"",macInput:"",editAccount:"",remark:"",addAccountInput:"",addRemarkInput:""},t.eidtMac=t.eidtMac.bind(O(t)),t.macInput=t.macInput.bind(O(t)),t.deviceMacAdd=t.deviceMacAdd.bind(O(t)),t.addAccountDom=t.addAccountDom.bind(O(t)),t.deleteAccountDom=t.deleteAccountDom.bind(O(t)),t.accountInput=t.accountInput.bind(O(t)),t.productIdInput=t.productIdInput.bind(O(t)),t.eidtAccount=t.eidtAccount.bind(O(t)),t.deleteAccount=t.deleteAccount.bind(O(t)),t.eidtAddAccoun=t.eidtAddAccoun.bind(O(t)),t.remark=t.remark.bind(O(t)),t.addAccountInput=t.addAccountInput.bind(O(t)),t.addAccount=t.addAccount.bind(O(t)),t.addRemark=t.addRemark.bind(O(t)),t.cancelEdit=t.cancelEdit.bind(O(t)),t}return t=u,(a=[{key:"componentDidMount",value:function(){}},{key:"eidtMac",value:function(e){var t=this.props.deviceDebugMacList;t.data[e].editOrDelete=!0,this.props.changeDeviceDebugMacData(t),this.setState({macInput:t.data[e].mac})}},{key:"macInput",value:function(e,t){var a=t.target.value,n=this.props.deviceDebugMacList;n.data[e].mac=a,this.props.editDeviceDebugMacData(n)}},{key:"deviceMacAdd",value:function(){var e=this.props.deviceDebugMacList;if(e.data=e.data?e.data:[],e.data.length>19)return Object(p.a)({description:"最多只能添加20个MAC！",type:"warn"}),!1;e.data.push({}),this.props.addDeviceDebugMacList(e)}},{key:"addAccountDom",value:function(){var e=this.props.deviceDebugAccountList;if(e.data.length>19)return Object(p.a)({description:"最多只能添加20个调试账号！",type:"warn"}),!1;e.data.push({}),this.props.getRenewalAccount(e)}},{key:"eidtAccount",value:function(e){var t=this.props.deviceDebugAccountList;t.data[e].editOrDelete=!0,this.props.updateDeviceDebugAccountList(t),this.setState({editAccount:t.data[e].account,remark:t.data[e].remark})}},{key:"deleteAccount",value:function(e,t){var a=this;Object(d.d)(d.a.deviceDebugAccountDelete,{productId:e,debugAccountId:t},{needVersion:1.1,loading:!0}).then((function(t){0==t.code&&a.props.getDeviceDebugAccountList(e)}))}},{key:"deleteAccountDom",value:function(e){var t=this.props.deviceDebugAccountList;t.data.splice(e,1),this.props.getRenewalAccount(t)}},{key:"accountInput",value:function(e,t){var a=this.props.deviceDebugAccountList;a.data[e].account=t.target.value,this.props.getRenewalAccount(a)}},{key:"remark",value:function(e,t){var a=this.props.deviceDebugAccountList;a.data[e].remark=t.target.value,this.props.getRenewalAccount(a)}},{key:"cancelEdit",value:function(e){var t=this.state,a=t.editAccount,n=t.remark,r=this.props.deviceDebugAccountList;r.data[e].account=a,r.data[e].remark=n,r.data[e].editOrDelete=!1,this.props.getRenewalAccount(r)}},{key:"eidtAddAccoun",value:function(e,t,a,n,r){var o=this,i=this.state,c=i.editAccount,l=i.remark,s=!1,u={productId:n,debugAccountId:a,account:t,remark:r};if(""!=t&&c!=t&&(u.account=t,s=!0),""!=r&&l!=r&&(u.remark=r,s=!0),!u.account)return Object(p.a)({description:"账号不能为空",type:"warn"}),!1;if(s)Object(d.d)(d.a.deviceDebugAccountInsert,u,{needVersion:1.1,loading:!0}).then((function(e){0==e.code&&o.props.getDeviceDebugAccountList(n)}));else{var m=this.props.deviceDebugAccountList;m.data[e].editOrDelete=!1,this.props.getRenewalAccount(m)}}},{key:"addAccountInput",value:function(e){this.setState({addAccountInput:e.target.value})}},{key:"addRemark",value:function(e){this.setState({addRemarkInput:e.target.value})}},{key:"productIdInput",value:function(e,t){var a=this.props.deviceDebugAccountList;a.data[e].productId=t.target.value,this.props.getRenewalAccount(a)}},{key:"addAccount",value:function(){var e=this,t=this.state,a=t.addAccountInput,n=t.addRemarkInput,r=this.props.pid;if(!a)return Object(p.a)({description:"账号不能为空",type:"warn"}),!1;var o={productId:r,account:a,remark:n};Object(d.d)(d.a.deviceDebugAccountInsert,o,{needVersion:1.1,loading:!0}).then((function(t){0==t.code&&e.setState({addAccountInput:""},(function(){e.props.getDeviceDebugAccountList(r)}))}))}},{key:"render",value:function(){var e=this,t=this.state,a=(t.editAccount,t.remark,t.addAccountInput),n=t.addRemarkInput,l=this.props,u=l.visible,p=l.deviceDebugAccountList,d=l.deviceDebugMacList,m=l.pid,y=l.authorityType,h="";return 0==y?h="初级安全认证":1==y?h="中级安全认证":2==y&&(h="高级安全认证"),s.a.createElement("div",null,s.a.createElement(r.a,{title:"配置调试信息",visible:u,onOk:this.props.visibleFun,onCancel:this.props.visibleFun,width:"800px",className:"debuggingInformation self-modal",maskClosable:!1},s.a.createElement("div",{className:"debuggingInfo_box"},s.a.createElement("div",{className:"title"},"调试设备"),s.a.createElement("div",{className:"instructions"},"您的产品使用了",'"',h,'"'," 能力，","高级安全认证"===h?s.a.createElement("span",null,"每台设备需要烧录平台颁发的设备密钥，进行身份认证通过后才可以激活设备，连接平台通信。使用烧录工具烧录设备ID/设备密钥，让设备连接平台完成激活，再录入设备物理地址即可开始调试。每个产品最多可以添加20个设备进行调试。"):"中级安全认证"===h?s.a.createElement("span",null,"每台设备需要烧录所属产品的密钥，并提前在平台注册设备信息，才可以完成身份认证，可以激活设备，连接平台通信。在这里添加设备物理地址可以注册设备，设备激活成功后，即可开始调试。每个产品最多可以添加20个设备进行调试。"):s.a.createElement("span",null,"每台设备需要烧录所属产品的密钥，进行身份认证通过后才可以激活设备，连接平台通信。设备激活成功后，录入设备的物理地址即可开始调试。每个产品最多可以添加20个设备进行调试。")),s.a.createElement("div",{className:"macListBox"},d.data&&d.data.map((function(t,a){return t.physicalAddr?s.a.createElement("div",{className:"macItem",key:"debuggingInfoMacItem"+a},s.a.createElement("div",{className:"macOrImei"},s.a.createElement("p",null,s.a.createElement("span",{className:"lable"},"物理地址："),s.a.createElement(c.a,{title:t.physicalAddr},s.a.createElement("span",{className:"details single-text"},t.physicalAddr))),s.a.createElement("p",null,s.a.createElement("span",{className:"lable"},"设备ID："),s.a.createElement(c.a,{title:t.id},s.a.createElement("span",{className:"details single-text"},t.id))),s.a.createElement("p",null,s.a.createElement("span",{className:"lable"},"设备密钥："),s.a.createElement(c.a,{title:t.deviceSecret},s.a.createElement("span",{className:"details single-text"},t.deviceSecret))),s.a.createElement("span",{className:"operationBut delete",onClick:e.deleteMac.bind(e,1,t.id)},"删除"))):s.a.createElement("div",{className:"macItem addDom",key:"debuggingInfoMacItem"+a},s.a.createElement(i.a,{placeholder:"请输入设备物理地址",maxLength:50,defaultValue:"",onChange:e.macAdd}),s.a.createElement("span",{className:"operationBut",onClick:e.insertMac.bind(e,2)},"保存"),s.a.createElement(o.a,{type:"vertical"}),s.a.createElement("span",{className:"",onClick:e.deleteMac.bind(e,2,a)},"删除"))})),s.a.createElement("div",{className:"add",onClick:this.deviceMacAdd},s.a.createElement("span",null,"添加调试设备"))),s.a.createElement("div",null,s.a.createElement("div",{className:"title"},"调试白名单"),s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{style:{width:"10%"}},"账号ID"),s.a.createElement("th",{style:{width:"20%"}},"手机号"),s.a.createElement("th",{style:{width:"30%"}},"备注"),s.a.createElement("th",{style:{width:"25%"}},"添加时间"),s.a.createElement("th",{style:{width:"15%"}},"操作"))),s.a.createElement("tbody",null,p.data.map((function(t,r){return t.editOrDelete?s.a.createElement("tr",{key:"account"+r},s.a.createElement("td",{colSpan:"5"},s.a.createElement("div",{className:"accountBox"},s.a.createElement(i.a,{placeholder:"请输入C-Life账号",maxLength:11,value:t.account,onChange:e.accountInput.bind(e,r)}),s.a.createElement(i.a,{placeholder:"请输入备注",maxLength:20,value:t.remark,onChange:e.remark.bind(e,r)}),s.a.createElement("div",{className:"saveTime"},f()(t.createTime).utcOffset(-480).format("YYYY-MM-DD HH:mm:ss")),s.a.createElement("span",{className:"save",onClick:e.eidtAddAccoun.bind(e,r,t.account,t.debugAccountId,t.productId,t.remark)},"保存"),s.a.createElement(o.a,{type:"vertical"}),s.a.createElement("span",{onClick:e.cancelEdit.bind(e,r)},"取消"),s.a.createElement(o.a,{type:"vertical"}),s.a.createElement("span",{onClick:e.deleteAccount.bind(e,m,t.debugAccountId)},"删除")))):t.productId?s.a.createElement("tr",{key:"account"+r},s.a.createElement("td",null,r+1),s.a.createElement("td",null,t.account),s.a.createElement("td",null,t.remark||"-"),s.a.createElement("td",null,f()(t.createTime).utcOffset(-480).format("YYYY-MM-DD HH:mm:ss")),s.a.createElement("td",null,s.a.createElement("span",{className:"save",onClick:e.eidtAccount.bind(e,r)},"编辑"))):s.a.createElement("tr",{key:"account"+r},s.a.createElement("td",{colSpan:"5"},s.a.createElement("div",{className:"accountBox"},s.a.createElement(i.a,{placeholder:"请输入C-Life账号",maxLength:11,onChange:e.addAccountInput,value:a}),s.a.createElement(i.a,{placeholder:"请输入备注",maxLength:20,onChange:e.addRemark,value:n}),s.a.createElement("div",{className:"saveTime"},f()(new Date).format("YYYY-MM-DD HH:mm:ss")),s.a.createElement("span",{className:"save",onClick:e.addAccount},"保存"),s.a.createElement(o.a,{type:"vertical"}),s.a.createElement("span",{onClick:e.deleteAccountDom.bind(e,r)},"删除"))))}))))),s.a.createElement("div",{className:"accountAdd"},s.a.createElement("span",{onClick:this.addAccountDom},"添加账号")))))}}])&&b(t.prototype,a),n&&b(t,n),u}(l.Component))||n},unqh:function(e,t,a){},vCa9:function(e,t,a){},yIqo:function(e,t,a){},yiEb:function(e,t){e.exports="data:image/png;base64,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"},yqJg:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=0},yuMk:function(e,t,a){},z5lt:function(e,t,a){}}]);