(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"0Zna":function(e,t,n){},"7TnZ":function(e,t,n){},A5vn:function(e,t,n){},Eh1p:function(e,t,n){},IygI:function(e,t,n){},J2fM:function(e,t,n){},QZRf:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={"/userCenter":{title:{titleIcon:"user",titleText:"用户中心"},tabs:[{tabText:"基本资料",tabPath:"/userCenter/info"},{tabText:"安全设置",tabPath:"/userCenter/security"},{tabText:"访问用户",tabPath:["/userCenter/visit","/userCenter/look"]},{tabText:"用户角色",tabPath:["/userCenter/role","/userCenter/add"]},{tabText:"操作日志",tabPath:"/userCenter/log"},{tabText:"实例管理",tabPath:["/userCenter/case"]},{tabText:"授权管理",tabPath:["/userCenter/authorize"]},{tabText:"数据资产",tabPath:["/userCenter/dataasset","userCenter/assetdetail"]}]},"/messageCenter":{title:{titleIcon:"sound",titleText:"消息中心"},notRoute:!0,tabs:[{tabText:"全部消息"},{tabText:"未读消息"},{tabText:"已读消息"}]}}},a5gO:function(e,t,n){},bc1A:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return za}));n("0AG1"),n("Jya7"),n("3EvH"),n("vxpS"),n("ThRY"),n("h4PX"),n("6wma"),n("8OWE"),n("L4wC"),n("KzFV");var r=n("x+i1"),a=n.n(r),o=(n("wlSd"),n("RWNY"),n("q+fq")),i=n.n(o),c=n("DndG"),s=n("ivud"),l=n("Nlzp"),u=n("vS40"),f=n("MeRu"),p=n("cu44"),d=(n("rsdX"),n("oCJ0"),n("L8Gl"),n("eVIo"),n("EO5n"),n("Y5Ue"),n("xc0u")),m=(n("6rnn"),n("d6B9")),h=(n("rJH4"),n("nKmx")),y=(n("wxLI"),n("SseY")),b=(n("HzvR"),n("2n5t"));n("SnyF");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var a=x(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R,I=b.a.Option,C={labelCol:{span:4},wrapperCol:{span:20}},L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(o,e);var t,n,r,a=j(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getCityList=function(e){Object(l.c)(l.a.getCityByProvinceId,{provinceId:e}).then((function(n){t.setState((function(t){return{cityListObj:Object.assign({},t.cityListObj,k({},e,n.data))}}))}))},t.handleSubmit=function(e){e.preventDefault();var n=t.state,r=n.province,a=n.city;t.props.form.validateFields((function(e,n){if(!e){var o=O(O({},n),{},{province:r,city:a,countryId:0});Object(l.d)(l.a.upDeveloperInfo,O({},o),{loading:!0}).then((function(e){y.a.success({message:"更新成功",description:"用户信息更新成功！"}),t.props.getDeveloperInfo()}))}}))},t.getOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"province",n=t.state,r=n.provinceList,a=n.province,o=n.cityListObj,c=i.a.createElement(I,{key:-999,value:""},"请选择"),s=[],l=o[a]||[];return(s="province"===e?r.map((function(e){var t=e.provinceId,n=e.provinceName;return-1===t?null:i.a.createElement(I,{key:t,value:t},n)})):l.map((function(e){var t=e.cityId,n=e.cityName;return i.a.createElement(I,{key:t,value:""+t},n)}))).unshift(c),s},t.changeHandle=function(e,n){if("province"===e){var r=n;r&&t.getCityList(r),t.setState({city:""})}t.setState(k({},e,n))};var n=t.props.developerInfo,r=void 0===n?{}:n,c=r.province,s=r.city;return t.state={provinceList:[],cityListObj:{},province:c||"",city:s||""},t}return t=o,(n=[{key:"componentDidMount",value:function(){this.getProvinceList()}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=JSON.stringify(e.developerInfo),a=JSON.stringify(this.props.developerInfo);if("{}"===r&&r!==a){var o=this.props.developerInfo,i=o.province,c=o.city;this.setState({province:i||"",city:c||""},(function(){n.getProvinceList()}))}}},{key:"getProvinceList",value:function(){var e=this,t=this.state,n=t.province;0===t.provinceList.length&&Object(l.c)(l.a.getProvince).then((function(t){e.setState({provinceList:t.data})})),n&&this.getCityList(n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.form,r=t.loading,a=t.developerInfo,o=this.state,c=o.province,s=o.city,l=a.mobilePhone,u=a.contactPerson,f=a.contactAddr,p=n.getFieldDecorator;return-1==+c&&(c=""),i.a.createElement(m.a,v({},C,{onSubmit:this.handleSubmit}),i.a.createElement(m.a.Item,{label:"国家"},i.a.createElement(h.a,{value:"中国",disabled:!0,placeholder:"请选择国家"})),i.a.createElement(m.a.Item,{label:"所在地区",style:{marginBottom:0}},i.a.createElement(m.a.Item,{style:{display:"inline-block",width:"30%"}},i.a.createElement(b.a,{style:{width:"90%"},value:c,onChange:function(t){return e.changeHandle("province",t)}},this.getOptions("province"))),i.a.createElement(m.a.Item,{style:{display:"inline-block",width:"30%"}},i.a.createElement(b.a,{style:{width:"90%"},value:s,onChange:function(t){return e.changeHandle("city",t)}},this.getOptions("city",s)))),i.a.createElement(m.a.Item,{label:"联系地址"},p("contactAddr",{rules:[{max:100,message:"最大输入长度为100"}],initialValue:f})(i.a.createElement(h.a,{placeholder:"请输入联系地址"}))),i.a.createElement(m.a.Item,{label:"联系人"},p("contactPerson",{rules:[{pattern:/^[a-zA-Z0-9\u4e00-\u9fa5]{2,20}$/,message:"请输入2到20长度的汉字、字母和数字"}],initialValue:u})(i.a.createElement(h.a,{placeholder:"请输入联系人"}))),i.a.createElement(m.a.Item,{label:"联系电话"},p("mobilePhone",{rules:[{pattern:/^(((\d{3,4}-)?\d{7,8})|(1\d{10}))$/,message:"请输入固话号码或者手机号码"}],initialValue:l})(i.a.createElement(h.a,{placeholder:"请输入联系电话"}))),i.a.createElement(m.a.Item,{wrapperCol:{span:24}},i.a.createElement("div",{className:"ant-col ant-col-4 ant-form-item-label"}),i.a.createElement("div",null,i.a.createElement(d.a,{type:"primary",htmlType:"submit",loading:r},"保存"))))}}])&&S(t.prototype,n),r&&S(t,r),o}(o.Component),N=m.a.create({name:"contact-information"})(L),P=n("NJiU"),D=(n("IygI"),n("DgvE"));function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var a=W(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return q(this,n)}}function q(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G,H=Object(s.connect)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS()}}),(function(e){return{getDeveloperInfo:function(){return e(Object(u.d)())}}}))(R=function(e){M(n,e);var t=K(n);function n(){return F(this,n),t.apply(this,arguments)}return B(n,[{key:"render",value:function(){var e=this.props,t=e.developerInfo,n=e.match,r=e.getDeveloperInfo,a=n.path;return i.a.createElement(c.Switch,null,i.a.createElement(c.Route,{path:"".concat(a,"/base"),render:function(e){return i.a.createElement(z,A({},e,{developerInfo:t,getDeveloperInfo:r}))}}),i.a.createElement(c.Redirect,{to:"".concat(a,"/base")}))}}]),n}(o.Component))||R,z=function(e){M(n,e);var t=K(n);function n(e){var r;F(this,n),(r=t.call(this,e)).getSubRights=function(){var e=r.props.developerInfo;(void 0===e?{}:e).isSubUser&&Object(l.c)(l.a.getRightsOneself,{},{loading:!0}).then((function(e){for(var t=[],n=[],a=[],o=e.data,i=0;i<o.length;i++){var c=o[i];"productService"==c.menuCode&&(t=c.checkBoxGroupList),"dataObject"==c.menuCode&&(n=c.checkBoxGroupList),"dataDimension"==c.menuCode&&(a=c.checkBoxGroupList)}r.setState({productResource:t,dataObjRightsList:n,dataDimensionRightsList:a})}))};var a=r.props.developerInfo.isSubUser;return r.state={isSubUser:!!a,productResource:[],dataObjRightsList:[],dataDimensionRightsList:[]},r}return B(n,[{key:"componentDidMount",value:function(){this.getSubRights()}},{key:"componentDidUpdate",value:function(e){var t=this.props.developerInfo.isSubUser;e.developerInfo.isSubUser!==t&&(this.getSubRights(),this.setState({isSubUser:!!t}))}},{key:"render",value:function(){var e=this.state,t=e.isSubUser,n=e.productResource,r=e.dataObjRightsList,a=e.dataDimensionRightsList,o=this.props,c=o.developerInfo,s=o.getDeveloperInfo,l=c.id,u=c.email,d=c.createTime,m=c.userRole,h=c.parentAccount,y=c.account;return t?i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{noback:!0,title:"基本资料"}),i.a.createElement(p.a,{title:"基本信息"},i.a.createElement("div",{className:"alone-section-content-default base-info"},i.a.createElement("div",{className:"p-flex"},i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"登录账号："),y),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"所属主帐号："),h),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"账户角色："),m),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"创建时间："),d?D.a.utcToDev(d):"")))),i.a.createElement(P.a,{userCategory:"1",productResource:n,dataObjRightsList:r,dataDimensionRightsList:a})):i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{noback:!0,title:"基本资料"}),i.a.createElement(p.a,{title:"基本信息"},i.a.createElement("div",{className:"alone-section-content-default base-info"},i.a.createElement("div",{className:"p-flex"},i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"开发者ID："),l),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"电子邮箱："),u),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"注册时间："),d?D.a.utcToDev(d):"")))),i.a.createElement(p.a,{title:"联系信息"},i.a.createElement("div",{className:"alone-section-content-default form-wrapper"},i.a.createElement(N,{getDeveloperInfo:s,developerInfo:c}))))}}]),n}(o.Component),J=(n("R/VY"),n("ZzqE")),Y=(n("72Pr"),n("O4+N")),Z=(n("Gcxg"),n("vyZY")),$=(n("7fbo"),n("LCR/")),Q=(n("4MyQ"),n("m/9F")),X=(n("eRDW"),n("n1yf"),n("yq+b")),ee=n.n(X),te=(n("sCcn"),n("P2RN"));function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se(e);if(t){var a=se(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ie(this,n)}}function ie(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?ce(e):t}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var le=Object(s.connect)((function(e){return{}}),(function(e){return{deleteRole:function(t){return e(Object(u.b)(t))}}}))(G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(o,e);var t,n,r,a=oe(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.c)(l.a.getRolePage,e).then((function(e){t.setState({roleList:e.data.list,pager:e.data.pager,loading:!1})}))},t.deleteRole=function(e){var n=t.state.pager,r=n.totalRows,a=n.pageIndex;a=r%(10*(a-1))>1?a:a-1,t.props.deleteRole(e).then((function(e){e&&(Object(te.a)({type:"success",description:"删除用户角色成功！"}),t.setState({loading:!0}),t.getList({pageIndex:a,pageRows:10}))}))},t.searchProduct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e.trim(),t.setState({loading:!0},(function(){t.getList({pageIndex:1,pageRows:10,roleName:e})}))},t.editRole=function(e,t,n,r){t=encodeURI(t),n=encodeURI(n),window.location.hash="#/userCenter/add?roleId=".concat(e,"&roleName=").concat(t,"&remark=").concat(n,"&userCategory=").concat(r)},t.state={versionList:[],loading:!0,roleList:[],pager:{}},t.columns=[{title:"角色名",dataIndex:"roleName",key:"roleName"},{title:"备注",dataIndex:"remark",key:"remark"},{title:"访问方式",key:"userCategory",dataIndex:"userCategory",render:function(e){return i.a.createElement("span",null,i.a.createElement(Q.a,{color:1==e?"blue":"green"},1==e?"控制台访问用户":"接口访问用户"))}},{title:"最新修改时间",dataIndex:"modifyTime",key:"modifyTime",render:function(e){return i.a.createElement("span",null,D.a.utcToDev(e))}},{title:"操作",key:"tags",dataIndex:"tags",render:function(e,n){return i.a.createElement("span",null,i.a.createElement("a",{onClick:t.editRole.bind(ce(t),n.roleId,n.roleName,n.remark,n.userCategory)},"编辑"),i.a.createElement($.a,{type:"vertical"}),i.a.createElement(Z.a,{title:"你确定要删除该角色吗？",onConfirm:t.deleteRole.bind(ce(t),n.roleId),okText:"是",cancelText:"否",placement:"topRight"},i.a.createElement("a",null,"删除")))}}],t.pagerIndex=t.pagerIndex.bind(ce(t)),t.addRole=t.addRole.bind(ce(t)),t}return t=o,(n=[{key:"componentDidMount",value:function(){this.getList({pageIndex:1,pageRows:10})}},{key:"addRole",value:function(){this.props.history.push({pathname:"/userCenter/add"})}},{key:"pagerIndex",value:function(e){var t=this;this.setState({loading:!0},(function(){t.getList({pageIndex:e,pageRows:10})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.roleList,a=t.pager;return i.a.createElement("div",{className:"role-management"},i.a.createElement("header",{className:"page-content-header"},i.a.createElement("h3",{className:"page-name"},"用户角色"),i.a.createElement("div",null,i.a.createElement("div",{className:"searchBox"},i.a.createElement(h.a.Search,{placeholder:"请输入用户角色名查找",maxLength:20,onSearch:function(t){return e.searchProduct(t)},enterButton:!0})),i.a.createElement("div",{className:"butFloatRight"},i.a.createElement(d.a,{type:"primary",onClick:this.addRole},"创建用户角色")))),i.a.createElement(J.a,null,i.a.createElement(Y.a,{rowKey:"roleId",columns:this.columns,dataSource:r,pagination:{defaultCurrent:a.pageIndex,total:a.totalRows,current:a.pageIndex,hideOnSinglePage:!1,onChange:this.pagerIndex},loading:n})))}}])&&re(t.prototype,n),r&&re(t,r),o}(o.Component))||G,ue=(n("2Kt1"),n("gsuU"),n("kvrU"),n("BPQb")),fe=(n("Qotk"),n("PVWe")),pe=n("/KCb"),de=n.n(pe),me=n("CvKH"),he=n.n(me),ye=(n("WWzu"),n("tpKs"),n("1f2v"),n("RXaF"),n("7gXV"),n("tI+s"),n("4LyV"),n("49MP"),n("oRfP"),n("rPzz"),n("T8f6"),n("nMWN"),n("jyy6"),n("riQy"),n("XJEh"),n("UeXb"),n("ClUO"),n("xb74"),n("JySD"),n("DwF0"),n("v7xx")),be=n("8QW8");n("A5vn");function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(){return(ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ee(e){return function(e){if(Array.isArray(e))return Oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t,n){return t&&Se(e.prototype,t),n&&Se(e,n),e}function je(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ce(e);if(t){var a=Ce(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Re(this,n)}}function Re(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?Ie(e):t}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Le=b.a.Option,Ne=[{id:"1",text:"产品服务权限"},{id:"2",text:"数据对象权限"},{id:"3",text:"数据维度权限"},{id:"5",text:"项目权限"}],Pe=[{id:"2",text:"数据对象权限"},{id:"3",text:"数据维度权限"},{id:"4",text:"API调用权限"}],De=[],Te=[],Ae=[],Fe=function(e){je(n,e);var t=xe(n);function n(e){var r;return ke(this,n),(r=t.call(this,e)).onExpand=function(e){1==r.props.terrType?r.props.onExpand(e,!1):r.setState({expandedKey:e})},r.triExpand=function(e){r.setState({expandedKey:Ee(e)})},r.onCheck=function(e,t){r.setState({checkedKeys:e},(function(){r.props.shuttle(e,t)}))},r.onSelect=function(e,t){r.setState({selectedKeys:e})},r.checkShow=function(e,t){var n=!1;return e.map((function(e){0===e.indexOf(t)&&(n=!0)})),n},r.selectList=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e.map((function(e,o){return e.tree_show=!!(r.checkShow(t,e.key)||e.title&&e.title.indexOf(n)>-1),a&&e.tree_show&&(a.tree_show=e.tree_show),e.children&&(e.children=r.selectList(e.children,t,n,e)),e}))},r.renderTreeNodes=function(e){var t=r.props,n=t.searchValue,a=(t.expandedKeys,t.seek_tree_show),o=t.expandedKeys_seek,c=t.terrType,s=he()(e);return a&&1===c&&(s=r.selectList(s,o,n)),s.map((function(e,t){if(e){var a=null,o=null,c=null,s=null;return n?(a=e.title.indexOf(n),o=e.title.substr(0,a),c=e.title.substr(a+n.length),s=a>-1?i.a.createElement("span",null,o,i.a.createElement("span",{style:{color:"#f50"}},n),c):e.tree_show?i.a.createElement("span",null,e.title):""):s=e.title,e.children?i.a.createElement(fe.a.TreeNode,{style:{display:s?"block":"none"},title:s,key:e.key,dataRef:e},r.renderTreeNodes(e.children,e)):(e.title=s,i.a.createElement(fe.a.TreeNode,ve({style:{display:s?"block":"none"},key:e.key},e)))}}))},r.state={checkedKeys:[],selectedKeys:[],expandedKey:[]},r}return we(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,n=t.selectedKeys,r=t.expandedKey,a=this.props,o=a.expandedKeys,c=a.autoExpandParent,s=a.seek_tree_show,l=(a.expandedKeys_seek,a.seek_show_node),u=a.terrType;o=s?he()(l):he()(o);var f=this.props,p=f.checkedKeys;f.type;return i.a.createElement(fe.a,{checkable:!0,autoExpandParent:c,onCheck:this.onCheck,onSelect:this.onSelect,onExpand:function(t,n){n.expanded;var r=n.node;return e.onExpand(t,r)},expandedKeys:1==u?o:r,checkedKeys:p,selectedKeys:n},this.renderTreeNodes(he()(this.props.menuList)))}}]),n}(o.Component);function Ve(e,t){return e&&e.length?e.map((function(e){return e?{key:t+e.key,title:e.title,children:Ve(e.children,t)}:{}})):[]}var Be,Me=function(e){je(n,e);var t=xe(n);function n(e){var r;ke(this,n),(r=t.call(this,e)).rightsList=function(e,t){var n=null;return e.map((function(e,a){n=t?t+"-"+a:"0-"+a;var o=e.boxName||e.groupName;return o&&-1!=o.indexOf("#")&&(o=(o=o.split("#"))[0]),e.title=o,e.key=n,e.subBoxs&&(e.children=r.rightsList(e.subBoxs,e.key)),Ae.push(n),e}))},r.editList=function(e){e.map((function(e,t){return e.checked&&e.subBoxs&&e.subBoxs.length>0?r.editList(e.subBoxs):e.checked&&Te.push(e.key),!1}))},r.edit=function(e){r.editList(e);var t=he()(Te);return Te=[],t},r.getRights=function(){var e=Object(D.j)("roleId"),t={version:1.2,userCategory:r.state.userCategory},n=!1;e&&(t.roleId=e,n=!0),Object(l.c)(l.a.getRights,t,{loading:!0}).then((function(e){if(0==e.code){for(var t=e.data,a=[],o=[],i=[],c=[],s=[],l=[],u=[],f=[],p=[],d=[],m=[],h=0;h<t.length;h++){var y=t[h];if("productService"==y.menuCode)a=he()(r.rightsList(y.checkBoxGroupList)),u=he()(Ae),Ae=[];if("apiInvok"==y.menuCode)o=he()(r.rightsList(y.checkBoxGroupList)),f=he()(Ae),Ae=[];if("dataObject"==y.menuCode)i=he()(r.rightsList(y.checkBoxGroupList)),p=he()(Ae),Ae=[];if("dataDimension"==y.menuCode)c=he()(r.rightsList(y.checkBoxGroupList)),d=he()(Ae),Ae=[];if("projectAuth"==y.menuCode)s=he()(r.rightsList(y.checkBoxGroupList)),m=he()(Ae),Ae=[];"hideData"==y.menuCode&&(l=y.checkBoxGroupList)}if(n){var b=he()(r.edit(a)),g=he()(r.edit(o)),v=he()(r.edit(i)),E=he()(r.edit(c)),O=he()(r.edit(s));r.setState({productResource:a,apiRightsList:o,dataObjRightsList:i,dataDimensionRightsList:c,projectRightsList:s,hideDataList:l,expandedKeys:[],productResource_key_left:b,right_productResource:de()(r.processingData_2(r.processingData_1(r.selectList(a,b,!1,!1,!0)))),dataObjRightsList_key_left:v,right_dataObjRightsList:de()(r.processingData_2(r.processingData_1(r.selectList(i,v,!1,!1,!0)))),dataDimensionRightsList_key_left:E,right_dataDimensionRightsList:de()(r.processingData_2(r.processingData_1(r.selectList(c,E,!1,!1,!0)))),apiRightsList_key_left:g,right_apiRightsList:de()(r.processingData_2(r.processingData_1(r.selectList(o,g,!1,!1,!0)))),projectRightsList_key_left:O,right_projectRightsList:de()(r.processingData_2(r.processingData_1(r.selectList(s,O,!1,!1,!0))))})}else a=r.selectList(a,u),o=r.selectList(o,f),i=r.selectList(i,p),c=r.selectList(c,d),s=r.selectList(s,m),r.setState({productResource:a,productResource_key_left:u,right_productResource:a,apiRightsList:o,apiRightsList_key_left:f,right_apiRightsList:o,dataObjRightsList:i,dataObjRightsList_key_left:p,right_dataObjRightsList:i,dataDimensionRightsList:c,dataDimensionRightsList_key_left:d,right_dataDimensionRightsList:c,projectRightsList:s,projectRightsList_key_left:m,right_projectRightsList:s,hideDataList:l})}}))},r.generateList=function(e){for(var t=0;t<e.length;t++){var n=e[t],a=n.key,o=n.title;De.push({key:a,title:o}),n.children&&r.generateList(n.children)}return De},r.getParentKey=function(e,t){for(var n,a=0;a<t.length;a++){var o=t[a];o.children&&(o.children.some((function(t){return t.key===e}))?n=o.key:r.getParentKey(e,o.children)&&(n=r.getParentKey(e,o.children)))}return n},r.inputOrSelect=function(e,t){switch(e){case 1:r.setState({roleName:t.target.value});break;case 2:r.setState({remark:t.target.value});break;case 3:Te=[],r.setState({expandedKeys:[],productResource_key_left:[],right_productResource:[],apiRightsList_key_left:[],right_apiRightsList:[],dataObjRightsList_key_left:[],right_dataObjRightsList:[],dataDimensionRightsList_key_left:[],right_dataDimensionRightsList:[],projectRightsList_key_left:[],right_projectRightsList:[]},(function(){var e=t.target.value;1==e?r.setState({userCategory:e,permissionAssignment:"1"},(function(){r.getRights()})):r.setState({userCategory:e,permissionAssignment:"2"},(function(){r.getRights()}))}));break;case 4:r.setState({expandedKeys_seek:[],seek_show_node:[],seek_tree_show:!1,searchValue:"",expandedKeys:[]},(function(){r.setState({permissionAssignment:t})}));break;case 5:var n=r.state,a=n.permissionAssignment,o=n.productResource,i=n.apiRightsList,c=n.dataObjRightsList,s=n.dataDimensionRightsList,l=n.projectRightsList,u=[];1==a?u=he()(o):2==a?u=he()(c):3==a?u=he()(s):4==a?u=he()(i):5==a&&(u=he()(l));var f=r.generateList(u).map((function(e){return e.title&&e.title.indexOf(t)>-1?r.getParentKey(e.key,u):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t}));var p=[];f.map((function(e){p=p.concat(function(e){for(var t=e.split("-"),n=[],r=t[0],a=1;a<t.length;a++)r+="-"+t[a],n.push(r);return n}(e))})),p=Array.from(new Set(p)),r.setState({expandedKeys_seek:he()(p),searchValue:t,autoExpandParent:!1,seek_tree_show:!0,seek_show_node:he()(p)})}},r.deleteDate=function(e){return e.map((function(e,t){return delete e.children,e.subBoxs&&r.deleteDate(e.subBoxs),e}))},r.onExpand=function(e,t,n){var a=r.state.seek_tree_show;if(1==e)if(a){var o=he()(t);r.setState({seek_show_node:o,autoExpandParent:n})}else r.setState({expandedKeys:t,autoExpandParent:n});else r.setState({autoExpandParent:n})},r.processingData_2=function(e){return e.map((function(e,t){if(e.checkeds){var n={key:e.key,title:e.title};return e.children&&(n.children=r.processingData_2(e.children)),n}}))},r.processingData_1=function(e,t){return e.map((function(e,n){return e.checkeds&&t&&(t.checkeds=!0,t.checked=!0),e.children&&(e.children=r.processingData_1(e.children,e)),e}))},r.checkShow=function(e,t){var n=!1;return e.map((function(e){0===e.indexOf(t)&&(n=!0)})),n},r.selectList=function(e,t,n,a,o){var i=he()(t);return e.map((function(e,t){return o?e.checkeds=e.checked:(e.checkeds=!!r.checkShow(i,e.key),e.checked=!!r.checkShow(i,e.key)),e.checkeds&&a&&(a.checkeds=!0),e.children&&(e.children=r.selectList(e.children,i,e.key,e,o)),e}))},r.leftShuttle=function(e,t,n){var a=n.node.props.eventKey,o=r.state,i=o.productResource,c=o.apiRightsList,s=o.dataObjRightsList,l=o.dataDimensionRightsList,u=o.projectRightsList;if(1==e){var f=de()(r.processingData_2(r.processingData_1(r.selectList(i,t))));r.setState({productResource_key_left:t,right_productResource:f}),a="productService-"+a}else if(2==e){var p=de()(r.processingData_2(r.processingData_1(r.selectList(s,t))));r.setState({dataObjRightsList_key_left:t,right_dataObjRightsList:p}),a="dataObject-"+a}else if(3==e){var d=de()(r.processingData_2(r.processingData_1(r.selectList(l,t))));r.setState({dataDimensionRightsList_key_left:t,right_dataDimensionRightsList:d}),a="dataDimension-"+a}else if(4==e){var m=de()(r.processingData_2(r.processingData_1(r.selectList(c,t))));r.setState({apiRightsList_key_left:t,right_apiRightsList:m}),a="api-"+a}else if(5==e){var h=de()(r.processingData_2(r.processingData_1(r.selectList(u,t))));r.setState({projectRightsList_key_left:t,right_projectRightsList:h}),a="projectAuth-"+a}for(var y=a.split("-"),b=y[0],g=[b],v=1;v<y.length-1;v++)b+="-"+y[v],g.push(b);r.refTree.triExpand(g)},r.rightShuttle=function(e,t){},r.removeChecked=function(e){return e.map((function(e,t){return e.checked=!1,e.children&&(e.children=r.removeChecked(e.children)),e}))},r.removeAll=function(e){var t=r.state,n=t.productResource,a=t.dataObjRightsList,o=t.dataDimensionRightsList,i=t.apiRightsList,c=t.projectRightsList;r.setState({productResource:r.removeChecked(n),productResource_key_left:[],right_productResource:[],dataObjRightsList:r.removeChecked(a),dataObjRightsList_key_left:[],right_dataObjRightsList:[],dataDimensionRightsList:r.removeChecked(o),dataDimensionRightsList_key_left:[],right_dataDimensionRightsList:[],apiRightsList:r.removeChecked(i),apiRightsList_key_left:[],right_apiRightsList:[],projectRightsList:r.removeChecked(c),projectRightsList_key_left:[],right_projectRightsList:[]})},r.deleteChooseList=function(e,t,n){for(var r=0;r<n.length;r++){for(var a=n[r],o=!1,i="",c=0;c<e.length;c++){if(e[c].split("-")[0]==a){o=!0,i="";break}i=a}if(!o)for(var s=0;s<t.length;s++)t[s].key===i&&t.splice(s,1)}return t};var a=decodeURI(Object(D.j)("roleName"))&&"null"!=decodeURI(Object(D.j)("roleName"))?decodeURI(Object(D.j)("roleName")):"",o=decodeURI(Object(D.j)("remark"))&&"null"!=decodeURI(Object(D.j)("remark"))?decodeURI(Object(D.j)("remark")):"";return r.state={roleName:a||"",remark:o||"",userCategory:Object(D.j)("userCategory")||"1",hideData:[],expandedKeys:[],expandedKeys_seek:[],seek_show_node:[],seek_tree_show:!1,searchValue:"",autoExpandParent:!1,permissionAssignment:2==Object(D.j)("userCategory")?"2":"1",productResource:[],productResource_key_left:[],right_productResource:[],productResource_key_right:[],apiRightsList:[],apiRightsList_key_left:[],right_apiRightsList:[],dataObjRightsList:[],dataObjRightsList_key_left:[],right_dataObjRightsList:[],dataObjRightsList_key_right:[],dataDimensionRightsList:[],dataDimensionRightsList_key_left:[],right_dataDimensionRightsList:[],projectRightsList:[],projectRightsList_key_left:[],right_projectRightsList:[]},r.click_1=r.click_1.bind(Ie(r)),r.click_2=r.click_2.bind(Ie(r)),r}return we(n,[{key:"componentDidMount",value:function(){this.getRights()}},{key:"click_1",value:function(){this.props.history.push({pathname:"/userCenter/role"})}},{key:"click_2",value:function(){var e=this,t=Object(D.j)("roleId")||"",n=this.state,r=n.roleName,a=n.remark,o=n.userCategory,i=n.productResource,c=n.apiRightsList,s=n.dataObjRightsList,u=n.dataDimensionRightsList,f=n.projectRightsList,p=n.hideDataList,d="";if(""==r?d="请填写角色名":""==a&&(d="请填写备注"),d)Object(te.a)({type:"warn",description:d});else{var m=[],h={roleName:r,userCategory:o,version:1.1};t&&(h.roleId=t),a&&(h.remark=a),m=1==o?[].concat(Ee(this.deleteDate(he()(f))),Ee(this.deleteDate(he()(i))),Ee(this.deleteDate(he()(s))),Ee(this.deleteDate(he()(u))),Ee(p)):[].concat(Ee(this.deleteDate(he()(s))),Ee(this.deleteDate(he()(c))),Ee(this.deleteDate(he()(u))),Ee(p)),h.dataJson=JSON.stringify(m),Object(l.d)(l.a.saveRole,h,{loading:!0}).then((function(t){0==t.code&&(Object(te.a)({type:"success",description:"用户角色保存成功！"}),e.props.history.push({pathname:"/userCenter/role"}))}))}}},{key:"render",value:function(){var e=this,t=this.state,n=t.productResource,r=t.apiRightsList,a=t.dataObjRightsList,o=t.dataDimensionRightsList,c=t.projectRightsList,s=t.expandedKeys,l=t.expandedKeys_seek,u=t.seek_show_node,p=t.seek_tree_show,d=t.searchValue,m=t.autoExpandParent,y=t.productResource_key_left,g=t.dataObjRightsList_key_left,v=t.dataDimensionRightsList_key_left,E=t.apiRightsList_key_left,O=t.projectRightsList_key_left,k=t.right_productResource,S=t.right_dataObjRightsList,w=t.right_dataDimensionRightsList,j=t.right_apiRightsList,_=t.right_projectRightsList,x=t.roleName,R=t.remark,I=t.userCategory,C=t.permissionAssignment,L=[{key:"dataObject",title:"数据对象权限",children:Ve(he()(S),"dataObject-")},{key:"dataDimension",title:"数据维度",children:Ve(he()(w),"dataDimension-")}],N=[].concat(Ee(g.map((function(e){return"dataObject-"+e}))),Ee(v.map((function(e){return"dataDimension-"+e}))));1==I?(L.unshift({key:"productService",title:"产品服务权限",children:Ve(he()(k),"productService-")}),N=N.concat(y.map((function(e){return"productService-"+e}))),L.push({key:"projectAuth",title:"项目权限",children:Ve(he()(_),"projectAuth-")}),N=N.concat(O.map((function(e){return"projectAuth-"+e})))):(L.push({key:"api",title:"API调用权限",children:Ve(he()(j),"api-")}),N=N.concat(E.map((function(e){return"api-"+e}))));var P=[],T=[];1==C?(P=he()(n),T=y,he()(k)):2==C?(P=he()(a),T=g,he()(S)):3==C?(P=he()(o),T=v,he()(w)):4==C?(P=he()(r),T=E,he()(j)):5==C&&(P=he()(c),T=O,he()(_));var A=!!Object(D.j)("roleId");return this.deleteChooseList(N,L,["productService","dataObject","dataDimension","api"]),i.a.createElement("div",{className:"role-add"},i.a.createElement(f.a,{backHandle:function(){return e.props.history.goBack()},title:A?"编辑角色":"创建角色"}),i.a.createElement("div",{className:"commonContentBox"},i.a.createElement("div",{className:"title"},"基础信息"),i.a.createElement("div",{className:"centent"},i.a.createElement("div",{className:"common_title_input"},i.a.createElement("span",{className:"common_title mustiinput"},"用户角色名:"),i.a.createElement("div",{className:"common_content"},i.a.createElement(h.a,{className:"input",maxLength:20,value:x,placeholder:"20个字符以内",allowClear:!0,onChange:this.inputOrSelect.bind(this,1)}))),i.a.createElement("div",{className:"common_title_input"},i.a.createElement("span",{className:"common_title mustiinput"},"备注:"),i.a.createElement("div",{className:"common_content"},i.a.createElement(h.a,{className:"input",maxLength:20,value:R,placeholder:"20个字符以内",allowClear:!0,onChange:this.inputOrSelect.bind(this,2)}))),i.a.createElement("div",{className:"common_title_input"},i.a.createElement("span",{className:"common_title"},"访问方式:"),i.a.createElement("div",{className:"common_content"},A?i.a.createElement("span",{style:{lineHeight:"32px"}},1==I?"控制台访问":"接口访问"):i.a.createElement(ue.a.Group,{defaultValue:"1",onChange:this.inputOrSelect.bind(this,3)},i.a.createElement(ue.a,{value:"1"},"控制台权限"),i.a.createElement(ue.a,{value:"2"},"接口访问")))))),i.a.createElement("div",{className:"commonContentBox"},i.a.createElement("div",{className:"title"},"权限配置",A?null:i.a.createElement("span",{className:"postil"},"*注：新建角色进入时，所有权限默认全部选中")),i.a.createElement("div",{className:" jurisdiction-box ratio"},i.a.createElement("div",{className:"common_content"},i.a.createElement(b.a,{value:C,style:{width:150},onChange:this.inputOrSelect.bind(this,4)},1==I?Ne.map((function(e,t){return i.a.createElement(Le,{key:e.id+"consoleList",value:e.id},e.text)})):Pe.map((function(e,t){return i.a.createElement(Le,{key:e.id+"apiList",value:e.id},e.text)}))),"    ",i.a.createElement(h.a.Search,{style:{width:"188px"},placeholder:"请输入关键字查找",maxLength:20,onSearch:this.inputOrSelect.bind(this,5),enterButton:!0}))),i.a.createElement("div",{className:" jurisdiction-box placeholder"}),i.a.createElement("div",{className:"tree-fer"},i.a.createElement("div",{className:"jurisdiction"},P.length>0?i.a.createElement(Fe,{shuttle:this.leftShuttle.bind(this,C),menuList:P,expandedKeys:s,seek_tree_show:p,expandedKeys_seek:l,checkedKeys:T,searchValue:d,autoExpandParent:m,onExpand:this.onExpand.bind(this,1),seek_show_node:u,terrType:1,type:"left"}):i.a.createElement(be.a,null)),i.a.createElement("div",{className:"shuttle"}),i.a.createElement("div",{className:"jurisdiction-select-show"},i.a.createElement("span",{className:"common_title"},"已选权限:"),i.a.createElement("div",{className:"select-show-box"},i.a.createElement(Fe,{shuttle:this.rightShuttle.bind(this,C),menuList:L,checkedKeys:N,onExpand:this.onExpand.bind(this,2),terrType:2,type:"right",ref:function(t){return e.refTree=t}})),i.a.createElement("div",{className:"empty",onClick:this.removeAll.bind(this,C)},"全部清除")))),i.a.createElement(ye.a,{preHandle:this.click_1,preText:"取消",nextHandle:this.click_2,nextText:A?"保存角色":"创建角色"}))}}]),n}(o.Component),Ue=(n("U4At"),n("KiF4")),Ke=(n("+SM3"),n("SE39")),qe=n("FC04"),We=(n("mvry"),n("2L3m")),Ge=(n("bqBU"),n("4OHk")),He=(n("bjE3"),n("wty1")),ze=n("5ixe"),Je=n.n(ze),Ye=n("rwTb"),Ze=n("M7r8");n("ccuU");function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(){return(Qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rt(e);if(t){var a=rt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return nt(this,n)}}function nt(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var at=b.a.Option,ot=[{id:1,text:"自动生成默认密码"},{id:2,text:"手动设置登录密码"}],it=Object(s.connect)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS()}}),null)(Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(o,e);var t,n,r,a=tt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).addUserList=function(){var e=t.state.userNameList;if(e.length>=10)return Object(te.a)({description:"添加用户一次最多添加10个！"}),!1;e.push(""),t.setState({userNameList:e})},t.deleteUserList=function(e){var n=t.state.userNameList;n.splice(e,1),t.setState({userNameList:n})},t.accountSelect=function(e){t.setState({userCategory:e}),t.props.form.resetFields("roleId")},t.roleSelect=function(e){t.setState({roleId:e})},t.resetSelect=function(e){1==e?(t.setState({resetSelectId:e}),setTimeout((function(){t.props.form.setFieldsValue({password:"a123456"})}),100)):(t.setState({resetSelectId:e}),t.props.form.setFieldsValue({password:""}))},t.userName=function(e,n){var r=t.state.userNameList;r[e]=n.target.value,t.setState({userNameList:r})},t.passwordInput=function(e){t.setState({password:e.target.value})},t.ipWhiteSelectFunc=function(e){t.setState({ipWhiteSelect:e})},t.ipWhiteListFunc=function(e){t.setState({ipWhiteList:e.target.value})},t.remark=function(e){t.setState({remark:e.target.value})},t.affirm=function(e){e.preventDefault(),(0,t.props.form.validateFieldsAndScroll)((function(e,n){if(!e){for(var r=t.state,a=r.userNameList,o=r.userCategory,i=r.ipWhiteSelect,c=0;c<a.length;c++){if(a[c]=Je()(a[c]),!a[c])return Object(te.a)({description:"请填写用户名称！"}),!1;if(a[c]=a[c].split("@")[0],!Object(D.d)(a[c]))return Object(te.a)({description:"请正确格式的用户名称！大小写字母+数字6~14位"}),!1}for(var s=0;s<a.length;s++)for(var u=a[s],f=s+1;f<a.length;f++){if(u==a[f])return Object(te.a)({description:"第"+(s+1)+"跟第"+(f+1)+"个用户名重复，请重新输入！"}),!1}for(var p=0;p<a.length;p++)a[p]=a[p]+"@"+t.props.developerInfo.id;var d={userNameList:a,roleId:n.roleId,userCategory:n.userCategory};if(1==o&&n.password&&(d.password=Object(D.i)(n.password)),2==o&&i){var m=n.ipWhiteList;if(m){if(m.split(",").length>10)return Object(te.a)({description:"IP白名单最多添加10条！"}),!1;d.ipWhiteList=m}}n.remark&&(d.remark=n.remark),Object(l.d)(l.a.addMultiChild,d,{needJson:!0}).then((function(e){0==e.code&&(Object(te.a)({type:"success",description:"用户创建成功！"}),t.setState({userNameList:[""],userCategory:1,roleId:null,resetSelectId:"",password:"",ipWhiteSelect:!1,ipWhiteList:"",remark:""},(function(){t.props.form.resetFields(),t.props.onAddClose(),t.props.pagerIndex(1)})))}))}}))},t.passwordCheck=function(e,t,n){/^^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$/.test(t)?n():n("密码格式为大小写字母加数字，长度为6-18")},t.state={userNameList:[""],userCategory:1,roleList_1:[],roleList_2:[],roleId:null,resetSelectId:"",password:"",ipWhiteSelect:!1,ipWhiteList:"",remark:""},t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.onRef(this),Object(l.c)(l.a.getRoleList).then((function(t){if(0==t.code){for(var n=[],r=[],a=0;a<t.data.length;a++){var o=t.data[a];1==o.userCategory?n.push(o):r.push(o)}e.setState({roleList_1:n,roleList_2:r})}}))}},{key:"render",value:function(){var e=this,t=this.props.form,n=t.getFieldDecorator,r=t.getFieldValue,a=this.state,o=a.userCategory,c=(a.roleId,a.resetSelectId),s=(a.ipWhiteSelect,a.ipWhiteList,a.password,a.remark),l=a.userNameList,u=a.roleList_1,f=a.roleList_2;o=r("userCategory"),c=r("resetSelectId");var p=1==o?u:f,y=this.props.developerInfo.id;return i.a.createElement(m.a,Qe({},{labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:19},sm:{span:19}}},{onSubmit:this.affirm,className:"add-user-box"}),i.a.createElement("div",{className:"add-user-box"},i.a.createElement("div",{className:"common_title_input"},i.a.createElement(We.a,{gutter:8},i.a.createElement(He.a,{span:5,className:"label"},i.a.createElement("span",{className:"form-require on-require"},i.a.createElement(Ye.a,{label:"用户名",tip:"控制台访问时的登录名。"}))),i.a.createElement(He.a,{span:19},l.map((function(t,r){return i.a.createElement("div",{className:"uesrName",key:"productName"+r},i.a.createElement(m.a.Item,{label:"",hasFeedback:!0,colon:!1},n("productName_"+r,{rules:[{required:!0,min:6,max:14,message:"请输入6~14位大小写字母＋数字"}]})(i.a.createElement(h.a,{className:"input",style:{width:"300px"},placeholder:"请输入用户名称",suffix:"@"+y,onChange:e.userName.bind(e,r)}))),r>0?i.a.createElement("span",{className:"delete",onClick:e.deleteUserList.bind(e,r)},i.a.createElement(Ge.a,{type:"close-circle"})):null)})))),i.a.createElement("span",{className:"addUesr explainLink-N",onClick:this.addUserList},"添加用户")),i.a.createElement("div",{className:"common_title_input"},i.a.createElement(m.a.Item,{label:"账户类型",hasFeedback:!0},n("userCategory",{rules:[{required:!0,message:"请选择账户类型"}],initialValue:1})(i.a.createElement(b.a,{style:{width:"180px"},onChange:this.accountSelect},i.a.createElement(at,{key:"1账户类型",value:1},"控制台访问用户"),i.a.createElement(at,{key:"2账户类型",value:2},"接口访问用户"))))),i.a.createElement("div",{className:"common_title_input"},i.a.createElement(m.a.Item,{label:"用户角色",hasFeedback:!0},n("roleId",{rules:[{required:!0,message:"请选择用户角色"}]})(i.a.createElement(b.a,{showSearch:!0,style:{width:"180px"},placeholder:"请选择",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},p.map((function(e,t){return i.a.createElement(at,{key:t+"用户角色",value:e.roleId},e.roleName)})))))),1==o?i.a.createElement("div",{className:"common_title_input"},i.a.createElement("div",{className:"reset-select"},i.a.createElement(m.a.Item,{label:"登录密码",hasFeedback:!0},n("resetSelectId",{rules:[{required:!0,message:"请选择密码生成方式"}]})(i.a.createElement(b.a,{style:{width:"180px"},placeholder:"请选择",onChange:this.resetSelect},ot.map((function(e,t){return i.a.createElement(at,{key:t+"登录密码",value:e.id},e.text)}))))),c?i.a.createElement(m.a.Item,{label:" ",colon:!1},n("password",{rules:[{required:!0,validator:this.passwordCheck,message:"密码格式为大小写字母加数字，长度为6-18"}]})(1==c?i.a.createElement(h.a,{style:{width:"240px"},disabled:!0}):i.a.createElement(h.a.Password,{style:{width:"240px"},placeholder:"密码格式为大小写字母加数字，长度为6-18"}))):null)):null,null,i.a.createElement("div",{className:"common_title_input"},i.a.createElement(Ze.a,{label:"备注",formId:"remark",astrictNub:"100",rows:"2",placeholder:"请输入备注",getFieldDecorator:n,initialVal:s,width:"300px",getFieldValue:r}))),i.a.createElement("div",{className:"but"},i.a.createElement(d.a,{type:"primary",htmlType:"submit"},"确定"),i.a.createElement(d.a,{className:"cancel",onClick:this.props.onCancel},"取消")))}}])&&Xe(t.prototype,n),r&&Xe(t,r),o}(o.Component))||Be,ct=m.a.create({name:"addUserInfo"})(it);n("y1Sk");function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mt(e);if(t){var a=mt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return pt(this,n)}}function pt(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?dt(e):t}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(o,e);var t,n,r,a=ft(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.c)(l.a.getChildlist,e).then((function(e){t.setState({userList:e.data.list,pager:e.data.pager,loading:!1})}))},t.addUser=function(){t.setState({addUserVisible:!0})},t.searchProduct=function(e){t.state.pageIndex;t.setState({loading:!0,userName:e},(function(){t.pagerIndex(1)}))},t.examine=function(e,t){window.location.hash="#/userCenter/look?userId=".concat(e,"&userCategory=").concat(t)},t.startOrForbidden=function(e,n,r){1==e?t.setState({forbiddenModalVisible:!0,userName:n,userId:r}):0==e&&t.setState({startModalVisible:!0,userName:n,userId:r})},t.startModal=function(e){if(1==e){var n=t.state,r=n.userId,a=n.pageIndex;a=a||1,Object(l.c)(l.a.unfreezeChild,{userId:r}).then((function(e){0==e.code&&t.setState({loading:!0},(function(){t.getList({pageIndex:a,pageRows:10})}))}))}t.setState({startModalVisible:!1})},t.forbiddenModal=function(e){if(1==e){var n=t.state,r=n.userId,a=n.pageIndex;a=a||1,Object(l.c)(l.a.freezeChild,{userId:r}).then((function(e){0==e.code&&t.setState({loading:!0},(function(){t.getList({pageIndex:a,pageRows:10})}))}))}t.setState({forbiddenModalVisible:!1})},t.delete=function(e){t.setState({deleteModalVisible:!0,userId:e})},t.inputOnChangeHandle=function(e){t.setState({deleteInputValue:e.target.value})},t.deleteModal=function(e){if(1==e){if("delete"!=t.state.deleteInputValue)return Object(te.a)({type:"info",description:"请输入delete确认删除！"}),!1;var n=t.state,r=n.userId,a=n.pageIndex,o=n.pager;a=a||1,Object(l.c)(l.a.deleteChild,{userId:r}).then((function(e){0==e.code&&t.setState({loading:!0,deleteInputValue:""},(function(){a=o.totalRows%(10*(a-1))>1?a:a-1,t.getList({pageIndex:a,pageRows:10})}))}))}t.setState({deleteModalVisible:!1})},t.addUserModal=function(e){1==e?t.addUserRefs.affirm():(t.setState({addUserVisible:!1}),t.addUserRefs.setState({userNameList:[""],userCategory:1,roleId:null,resetSelectId:"",password:"",ipWhiteSelect:!1,ipWhiteList:"",remark:""}),t.addUserRefs.props.form.resetFields())},t.closeAdd=function(){t.setState({addUserVisible:!1})},t.pagerIndex=function(e){t.setState({pageIndex:e,loading:!0},(function(){t.getList({pageIndex:e,pageRows:10,userName:t.state.userName||void 0})}))},t.state={loading:!0,userList:[],pager:{},addUserVisible:!1,userName:"",userId:"",startModalVisible:!1,forbiddenModalVisible:!1,deleteModalVisible:!1,deleteInputValue:"",deleteId:"",pageIndex:""},t.columns=[{title:"用户名",dataIndex:"userName",key:"userName",render:function(e){return i.a.createElement(Ke.a,{placement:"topLeft",title:e},i.a.createElement("a",null,e))}},{title:"用户角色",dataIndex:"roleName",key:"roleName",render:function(e){return i.a.createElement(Ke.a,{placement:"topLeft",title:e}," ",i.a.createElement("span",null,e)," ")}},{title:"账户类型",dataIndex:"userCategory",key:"userCategory",width:"170px",render:function(e){return i.a.createElement("span",null,i.a.createElement(Q.a,{color:1==e?"blue":"green"},1==e?"控制台访问用户":"接口访问用户"))}},{title:"备注",dataIndex:"remark",key:"remark",render:function(e){return i.a.createElement(Ke.a,{placement:"topLeft",title:e}," ",i.a.createElement("span",null,e)," ")}},{title:"用户状态",dataIndex:"status",key:"status",width:"100px",render:function(e,t){return 1==t.status?i.a.createElement("span",{className:"colordot colordotgreen"},"正常"):i.a.createElement("span",{className:"colordot colordotred"},"停用")}},{title:"创建时间",dataIndex:"regTime",key:"regTime",width:"160px",render:function(e){return i.a.createElement("span",null,ee()(e).add(8,"h").format("YYYY-MM-DD HH:mm:ss"))}},{title:"操作",key:"action",width:"140px",render:function(e,n){return i.a.createElement("span",null,i.a.createElement("a",{onClick:t.examine.bind(dt(t),n.userId,n.userCategory)},"查看"),i.a.createElement($.a,{type:"vertical"}),1==n.status?i.a.createElement("a",{onClick:t.startOrForbidden.bind(dt(t),1,n.userName,n.userId),style:{color:"#FF3100"}},"停用"):i.a.createElement("a",{onClick:t.startOrForbidden.bind(dt(t),0,n.userName,n.userId)},"启用"),i.a.createElement($.a,{type:"vertical"}),i.a.createElement("a",{onClick:t.delete.bind(dt(t),n.userId)},"删除"))}}],t}return t=o,(n=[{key:"componentDidMount",value:function(){this.getList({pageIndex:1,pageRows:10})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.userName,a=t.addUserVisible,o=t.startModalVisible,c=t.forbiddenModalVisible,s=t.deleteModalVisible,l=t.deleteInputValue,u=t.userList,f=t.pager;return i.a.createElement("div",{className:"user-visit-box"},i.a.createElement("header",{className:"page-content-header"},i.a.createElement("h3",{className:"page-name"},"访问用户"),i.a.createElement("div",null,i.a.createElement("div",{className:"searchBox"},i.a.createElement(h.a.Search,{placeholder:"请输入用户名查找",enterButton:!0,maxLength:20,onSearch:function(t){return e.searchProduct(t)}})),i.a.createElement("div",{className:"butFloatRight"},i.a.createElement(d.a,{className:"but-add",type:"primary",onClick:this.addUser},"创建用户")))),i.a.createElement("div",{className:"commonContentBox"},i.a.createElement("div",{className:"centent"},i.a.createElement(Y.a,{rowKey:"userId",columns:this.columns,dataSource:u,pagination:{defaultCurrent:f.pageIndex,total:f.totalRows,hideOnSinglePage:!1,onChange:this.pagerIndex,current:f.pageIndex},loading:n}))),i.a.createElement(Ue.a,{title:"创建用户",visible:a,onOk:this.addUserModal.bind(this,1),onCancel:this.addUserModal.bind(this,2),maskClosable:!1,className:"self-modal",footer:null},i.a.createElement(ct,{onAddClose:this.closeAdd,onCancel:this.addUserModal.bind(this,2),pagerIndex:this.pagerIndex,onRef:function(t){return e.addUserRefs=t}})),i.a.createElement(qe.a,{visible:o,modalOKHandle:this.startModal.bind(this,1),modalCancelHandle:this.startModal.bind(this,2),title:"启用用户",tipText:"启用用户后，该用户将恢复访问。",descText:"即将启用用户",targetName:r}),i.a.createElement(qe.a,{visible:c,modalOKHandle:this.forbiddenModal.bind(this,1),modalCancelHandle:this.forbiddenModal.bind(this,2),title:"停用用户",tipText:"停用用户后，该用户将暂时无法访问，您可以重新启用账户。",descText:"即将停用用户",needWarnIcon:!0,targetName:r}),i.a.createElement(qe.a,{visible:s,modalOKHandle:this.deleteModal.bind(this,1),modalCancelHandle:this.deleteModal.bind(this,2),title:"删除用户",tipText:"删除用户将同步删除UUID和用户SecretKey，无法找回，请谨慎操作。",descText:"即将删除用户",needWarnIcon:!0,targetName:r},i.a.createElement(h.a,{className:"modal-content-input",onChange:this.inputOnChangeHandle,placeholder:"请输入“delete”确认删除该用户",maxLength:20,value:l})))}}])&&lt(t.prototype,n),r&&lt(t,r),o}(o.Component),yt=n("S18n");function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kt(e);if(t){var a=kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ot(this,n)}}function Ot(e,t){return!t||"object"!==bt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var St,wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(o,e);var t,n,r,a=Et(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={},t}return t=o,(n=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.userInfo,n=e.secretKey,r=e.secretId,a=function(e){var t=e.title,n=e.label,r=e.type;return i.a.createElement("p",{className:"list-item"},i.a.createElement("span",{className:"title"},t,"："),"visible"===r?i.a.createElement(yt.a,{label:n||"",tip:"点击复制",copy:!0}):i.a.createElement("span",null,n))};return i.a.createElement("div",{className:"basic-information-box"},i.a.createElement(d.a,{className:"but-edit basic-information-edit",type:"primary",onClick:this.props.editUserInfo},"编辑"),i.a.createElement(p.a,{title:"基础信息"},i.a.createElement("div",{className:"device-info"},i.a.createElement(a,{title:"用户名",label:t.userName||"--"}),i.a.createElement(a,{title:"用户ID",label:t.userId||"--"}),i.a.createElement(a,{title:"账户类型",label:1==t.userCategory?"控制台访问用户":2==t.userCategory?"接口访问用户":"--"}),i.a.createElement(a,{title:"用户角色",label:t.roleName||"--"}),2==t.userCategory&&i.a.createElement(a,{title:"用户secretId",label:r,type:"visible"}),2==t.userCategory&&i.a.createElement(a,{title:"用户SecretKey",label:n,type:"visible"}),i.a.createElement(a,{title:"创建时间",label:D.a.utcToDev(t.regTime)}),i.a.createElement(a,{title:"最新修改时间",label:D.a.utcToDev(t.modifyTime)})),i.a.createElement("p",{className:"userlook-mark"},i.a.createElement("span",null,"备注："),t.remark)))}}])&&gt(t.prototype,n),r&&gt(t,r),o}(o.Component),jt=(n("loKF"),n("LEJ2"));n("7TnZ");function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nt(e);if(t){var a=Nt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Lt(this,n)}}function Lt(e,t){return!t||"object"!==_t(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nt(e){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pt=b.a.Option,Dt=[{id:1,text:"自动生成默认密码"},{id:2,text:"手动设置登录密码"}],Tt=Object(s.connect)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS()}}),null)(St=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(o,e);var t,n,r,a=Ct(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).backfill=function(e){t.setState({userName:e.userName||null,remark:e.remark||"",roleId:e.roleId||null,ipWhiteSelect:!!e.ipWhiteList,ipWhiteList:e.ipWhiteList,resetChecked:!1})},t.roleSelect=function(e){t.setState({roleId:e})},t.reset=function(e){t.setState({resetChecked:e})},t.resetSelect=function(e){1==e?(t.setState({resetSelectId:e}),setTimeout((function(){t.props.form.setFieldsValue({password:"a123456"})}),100)):(t.setState({resetSelectId:e}),t.props.form.setFieldsValue({password:""}))},t.passwordInput=function(e){t.setState({password:e.target.value})},t.ipWhiteSelectFunc=function(e){t.setState({ipWhiteSelect:e})},t.ipWhiteListFunc=function(e){t.setState({ipWhiteList:e.target.value})},t.userName=function(e){t.setState({userName:e.target.value})},t.remark=function(e){t.setState({remark:e.target.value})},t.affirm=function(e){e.preventDefault(),(0,t.props.form.validateFieldsAndScroll)((function(e,n){if(!e){var r=t.state,a=r.resetChecked,o=r.ipWhiteSelect,i=t.props.userData,c=i.userId,s=i.userCategory,u=n.roleId,f=(n.userName,n.password),p=n.ipWhiteList,d=n.remark,m={userId:c,roleIds:u};if(1==s&&a&&(m.password=Object(D.i)(f)),2==s&&o){if(p){if(p.split(",").length>10)return Object(te.a)({description:"IP白名单最多添加10条！"}),!1;m.ipWhiteList=p}}else 2!=s||o||(m.ipWhiteList="");d&&(m.remark=d),Object(l.d)(l.a.updateChild,m,{needFormData:!0,loading:!0}).then((function(e){0==e.code&&t.props.handleClose()}))}}))},t.passwordCheck=function(e,t,n){/^^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$/.test(t)?n():n("密码格式为大小写字母加数字，长度为6-18")},t.state={resetChecked:!1,resetSelectId:null,password:null,userName:t.props.userData.userName||null,remark:t.props.userData.remark||"",roleId:t.props.userData.roleId||null,roleList_1:[],roleList_2:[],ipWhiteSelect:!!t.props.userData.ipWhiteList,ipWhiteList:t.props.userData.ipWhiteList},t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.onRef(this),Object(l.c)(l.a.getRoleList).then((function(t){if(0==t.code){for(var n=[],r=[],a=0;a<t.data.length;a++){var o=t.data[a];1==o.userCategory?n.push(o):r.push(o)}e.setState({roleList_1:n,roleList_2:r})}}))}},{key:"render",value:function(){var e=this.state,t=e.resetChecked,n=e.remark,r=e.userName,a=e.roleId,o=e.roleList_1,c=e.roleList_2,s=(e.ipWhiteSelect,e.ipWhiteList,this.props.form),l=s.getFieldDecorator,u=s.getFieldValue,f=t?u("resetSelectId"):null,p=(this.props.developerInfo.id,[]),y=this.props.userData.userCategory;return p=1==y?o:c,i.a.createElement(m.a,xt({},{labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:19},sm:{span:19}}},{onSubmit:this.affirm,className:"edit-basic-information"}),i.a.createElement("div",{className:"common_title_input"},i.a.createElement("span",{className:"common_title"},"用户名:"),i.a.createElement("div",{className:"common_content"},r)),i.a.createElement("div",{className:"common_title_input"},i.a.createElement("span",{className:"common_title"},"账户类型:"),i.a.createElement("div",{className:"common_content"},1==y?"控制台访问用户":2==y?"接口访问用户":"--")),i.a.createElement("div",{className:"common_title_input"},i.a.createElement(m.a.Item,{label:"用户角色",hasFeedback:!0},l("roleId",{rules:[{required:!0,message:"请选择用户角色"}],initialValue:a})(i.a.createElement(b.a,{style:{width:"180px"},placeholder:"请选择"},p.map((function(e,t){return i.a.createElement(Pt,{key:t+"用户角色",value:e.roleId},e.roleName)})))))),1==y?i.a.createElement("div",{className:"common_title_input"},i.a.createElement(m.a.Item,{label:"重置密码："},l("resetChecked")(i.a.createElement(jt.a,{size:"small",checked:t,onClick:this.reset}))),t?i.a.createElement("div",{className:"reset-select"},i.a.createElement(m.a.Item,{label:" ",colon:!1},l("resetSelectId",{rules:[{required:!0,message:"请选择密码生成方式"}]})(i.a.createElement(b.a,{style:{width:"180px"},placeholder:"请选择密码生成方式",onChange:this.resetSelect},Dt.map((function(e,t){return i.a.createElement(Pt,{key:t+"登录密码",value:e.id},e.text)}))))),f?i.a.createElement(m.a.Item,{label:" ",colon:!1},l("password",{rules:[{required:!0,validator:this.passwordCheck,message:"密码格式为大小写字母加数字，长度为6-18"}]})(1==f?i.a.createElement(h.a,{style:{width:"240px"},disabled:!0}):i.a.createElement(h.a.Password,{style:{width:"240px"},placeholder:"密码格式为大小写字母加数字，长度为6-18"}))):null):null):null,null,i.a.createElement("div",{className:"common_title_input"},i.a.createElement(Ze.a,{label:"备注",formId:"remark",astrictNub:"100",rows:"2",placeholder:"请输入备注",getFieldDecorator:l,initialVal:n,width:"300px",getFieldValue:u})),i.a.createElement("div",{className:"but"},i.a.createElement(d.a,{type:"primary",htmlType:"submit"},"确定"),i.a.createElement(d.a,{className:"cancel",onClick:this.props.onCancel},"取消")))}}])&&Rt(t.prototype,n),r&&Rt(t,r),o}(o.Component))||St,At=m.a.create({name:"editBasicInformation"})(Tt);n("kmdx");function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(){return(Vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mt(e,t){return(Mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qt(e);if(t){var a=qt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Kt(this,n)}}function Kt(e,t){return!t||"object"!==Ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qt(e){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wt=fe.a.TreeNode,Gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mt(e,t)}(o,e);var t,n,r,a=Ut(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getChildWithSecret=function(){var e=Object(D.j)("userId"),n=Object(D.j)("userCategory");Object(l.c)(l.a.getChildWithSecret,{userId:e,userCategory:n},{loading:!0}).then((function(e){t.setState({userInfo:e.data,loading:!1,secretKey:e.data.secretKey,secretId:e.data.secretId})}))},t.clickEye=function(e){t.setState({eye:!t.state.eye})},t.renderTreeNodes=function(e){return e.map((function(e){return e.children?i.a.createElement(Wt,{title:e.title,key:e.key,dataRef:e},t.renderTreeNodes(e.children)):i.a.createElement(Wt,Vt({key:e.key},e))}))},t.handleOk=function(){t.editAffirm.affirm()},t.handleOkCancel=function(){t.editAffirm.setState({resetChecked:!1,resetSelectId:null,password:null,userName:"",remark:"",roleId:null,ipWhiteSelect:!1,ipWhiteList:""},(function(){t.getChildWithSecret(),t.getRights()})),t.setState({userEditVisible:!1}),console.log("---close"),t.editAffirm.props.form.resetFields()},t.handleCancel=function(e,n){t.setState({userEditVisible:!1}),console.log("---close"),t.editAffirm.props.form.resetFields(),console.log(t.editAffirm.props.form.getFieldsValue())},t.editUserInfo=function(){t.editAffirm&&t.editAffirm.backfill(t.state.userInfo),t.setState({userEditVisible:!0})},t.state={permissionsTabsKey:"1",userEditVisible:!1,userInfo:{},loading:!0,dataTable:[],secretKey:"",secretId:"",productResource:[],dataObjRightsList:[],dataDimensionRightsList:[],apiInvokList:[],projectAuthList:[],eye:!0},t.columns=[{title:"用户SecretId",dataIndex:"secretId",key:"secretId"},{title:"用户SecretKey",dataIndex:"secret",key:"secret",render:function(e){return i.a.createElement("a",null,t.state.eye?Object(D.r)(e,10):e,t.state.eye?i.a.createElement(Ge.a,{className:"eyeLeft",type:"eye-invisible",onClick:t.clickEye}):i.a.createElement(Ge.a,{className:"eyeLeft",type:"eye",onClick:t.clickEye}))}},{title:"创建时间",dataIndex:"time",key:"time"}],t}return t=o,(n=[{key:"getRights",value:function(){var e=this,t=Object(D.j)("userId"),n=Object(D.j)("userCategory");Object(l.c)(l.a.getRights,{userId:t,userCategory:n},{needVersion:1.2,loading:!0}).then((function(t){for(var n=[],r=[],a=[],o=[],i=[],c=t.data,s=0;s<c.length;s++){var l=c[s];"productService"==l.menuCode&&(n=l.checkBoxGroupList),"dataObject"==l.menuCode&&(r=l.checkBoxGroupList),"dataDimension"==l.menuCode&&(a=l.checkBoxGroupList),"apiInvok"==l.menuCode&&(o=l.checkBoxGroupList),"projectAuth"==l.menuCode&&(i=l.checkBoxGroupList)}e.setState({productResource:n,dataObjRightsList:r,dataDimensionRightsList:a,apiInvokList:o,projectAuthList:i})}))}},{key:"componentDidMount",value:function(){this.getChildWithSecret(),this.getRights()}},{key:"render",value:function(){var e=this,t=this.state,n=t.userInfo,r=t.secretKey,a=t.secretId,o=t.userEditVisible,c=t.productResource,s=t.dataObjRightsList,l=t.dataDimensionRightsList,u=t.apiInvokList,p=t.projectAuthList;return i.a.createElement("div",{className:"user-info-box"},i.a.createElement(f.a,{backHandle:function(){return e.props.history.goBack()},title:"用户详情"}),i.a.createElement(wt,{editUserInfo:this.editUserInfo,userInfo:n,secretKey:r,secretId:a}),i.a.createElement(P.a,{defaultExpandAll:!0,userCategory:n.userCategory,productResource:c,dataObjRightsList:s,dataDimensionRightsList:l,apiInvokList:u,projectAuthList:p}),i.a.createElement(Ue.a,{title:"编辑用户信息",visible:o,onOk:this.handleOk,onCancel:this.handleCancel,maskClosable:!1,className:"self-modal",footer:null},i.a.createElement(At,{userData:n,onCancel:this.handleCancel,onRef:function(t){return e.editAffirm=t},handleClose:this.handleOkCancel})))}}])&&Bt(t.prototype,n),r&&Bt(t,r),o}(o.Component),Ht=(n("97dn"),n("OV+i"));n("hZG8");function zt(e){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){Zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tn(e,t,n){return t&&en(e.prototype,t),n&&en(e,n),e}function nn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rn(e,t)}function rn(e,t){return(rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function an(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cn(e);if(t){var a=cn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return on(this,n)}}function on(e,t){return!t||"object"!==zt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sn=Ht.a.RangePicker,ln=b.a.Option,un=function(e){nn(n,e);var t=an(n);function n(){var e;Xt(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleSubmit=function(t){t.preventDefault();var n=e.props,r=n.form,a=n.searchLog;r.validateFields((function(e,t){if(!e){var n=t.time,r=void 0===n?[]:n,o=t.userName,i=t.type,c=t.theme,s=$t(r,2),l=s[0],u=void 0===l?"":l,f=s[1],p=void 0===f?"":f;u&&(u=1e3*(u.hour(0).minute(0).second(0).millisecond(0).unix()-28800)),p&&(p=1e3*(p.hour(0).minute(0).second(0).millisecond(0).unix()-28800)),a({userName:o,type:i,theme:c,startTime:u,endTime:p})}}))},e.disabledDate=function(e){return e&&(e>ee()().endOf("day")||e<ee()().add(-180,"d").endOf("day"))},e.reset=function(){e.props.form.resetFields()},e}return tn(n,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return i.a.createElement(m.a,{layout:"inline",onSubmit:this.handleSubmit},i.a.createElement("div",{className:"searchCriteria limit-label"},i.a.createElement(m.a.Item,{label:"操作人"},e("userName",{rules:[],initialValue:""})(i.a.createElement(h.a,{style:{width:"220px"},placeholder:"请输入操作人"}))),i.a.createElement(m.a.Item,{label:"操作分类"},e("type",{rules:[],initialValue:""})(i.a.createElement(b.a,{style:{width:"220px"}},i.a.createElement(ln,{value:""},"请选择"),i.a.createElement(ln,{value:"0"},"基本操作"),i.a.createElement(ln,{value:"1"},"产品操作"),i.a.createElement(ln,{value:"2"},"数据订阅"),i.a.createElement(ln,{value:"3"},"应用管理"),i.a.createElement(ln,{value:"4"},"设备管理"),i.a.createElement(ln,{value:"5"},"固件管理"),i.a.createElement(ln,{value:"6"},"调试工具")))),i.a.createElement(m.a.Item,{label:"对象"},e("theme",{rules:[],initialValue:""})(i.a.createElement(h.a,{style:{width:"220px"},placeholder:"请输入操作对象"}))),i.a.createElement(m.a.Item,{label:"时间"},e("time",{rules:[]})(i.a.createElement(sn,{style:{width:"220px"},disabledDate:this.disabledDate,format:"YYYY/MM/DD"})))),i.a.createElement("div",{className:"searchBut"},i.a.createElement(m.a.Item,null,i.a.createElement(d.a,{style:{marginRight:"12px"},htmlType:"submit",type:"primary"},"查询"),i.a.createElement(d.a,{onClick:this.reset,type:"default"},"重置"))))}}]),n}(o.Component),fn=m.a.create({name:"search-form"})(un),pn=function(e){nn(n,e);var t=an(n);function n(e){var r;return Xt(this,n),(r=t.call(this,e)).state={logsList:[],pager:{},pageIndex:1,conditions:{userName:"",type:"",theme:"",startTime:"",endTime:""}},r.searchLog=function(e){r.setState({conditions:e,pageIndex:1},(function(){r.getLogsList()}))},r.changePage=function(e){r.setState({pageIndex:e},(function(){r.getLogsList()}))},r.columns=[{title:"操作人",dataIndex:"userName",width:"250px"},{title:"操作",dataIndex:"content",width:"200px",render:function(e,t){var n=t.content,r=t.description;return i.a.createElement("span",null,r||n||"未识别内容")}},{title:"对象",dataIndex:"theme"},{title:"时间",width:"200px",dataIndex:"createTime",render:function(e,t){var n=t.createTime;return i.a.createElement("span",null,D.a.utcToDev(+n))}}],r}return tn(n,[{key:"componentDidMount",value:function(){this.getLogsList()}},{key:"getLogsList",value:function(){var e=this,t=this.state,n=t.conditions,r=t.pageIndex,a={};Object.keys(n).forEach((function(e){n[e]&&(a[e]=n[e])})),Object(l.c)(l.a.getOperateLogList,Yt(Yt({},a),{},{pageIndex:r,pageRows:20}),{loading:!0,needVersion:1.1}).then((function(t){var n=t.data||{},r=n.list,a=n.pager;e.setState({logsList:Object(D.c)(r),pager:a})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.logsList,r=t.pager,a=t.pageIndex;return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(f.a,{noback:!0,title:"操作日志"})),i.a.createElement(p.a,{title:""},i.a.createElement("div",{className:"search-area lineSearchBox"},i.a.createElement(fn,{searchLog:this.searchLog})),i.a.createElement("div",{style:{marginTop:"24px",padding:"12px 24px"}},i.a.createElement(Y.a,{columns:this.columns,pagination:{total:r.totalRows,current:a,defaultCurrent:1,defaultPageSize:20,onChange:function(t){return e.changePage(t)},showTotal:function(e){return i.a.createElement("span",null,"共 ",i.a.createElement("a",null,e)," 条")},showQuickJumper:!0,hideOnSinglePage:!0},dataSource:n}))))}}]),n}(o.Component),dn=n("w1Zx"),mn=n("7U7l");function hn(e){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gn(e,t){return(gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=On(e);if(t){var a=On(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En(this,n)}}function En(e,t){return!t||"object"!==hn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function On(e){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kn=[{title:"身份验证"},{title:"重置密码"},{title:"完成"}],Sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gn(e,t)}(o,e);var t,n,r,a=vn(o);function o(){return yn(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.developerInfo.email;return i.a.createElement(mn.a,{FlowList:kn,cType:2,emailFromFather:e||"",isNeedVerifyType:!0,title:"重置密码"})}}])&&bn(t.prototype,n),r&&bn(t,r),o}(o.Component);function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xn(e,t){return(xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Cn(e);if(t){var a=Cn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return In(this,n)}}function In(e,t){return!t||"object"!==wn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cn(e){return(Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ln=[{title:"身份验证"},{title:"设置电子邮箱"},{title:"完成"}],Nn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xn(e,t)}(o,e);var t,n,r,a=Rn(o);function o(){return jn(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.developerInfo.email;return i.a.createElement(mn.a,{FlowList:Ln,cType:3,emailFromFather:e,isNeedVerifyType:!0,title:"修改电子邮箱"})}}])&&_n(t.prototype,n),r&&_n(t,r),o}(o.Component);function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(e,t){return(An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bn(e);if(t){var a=Bn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Vn(this,n)}}function Vn(e,t){return!t||"object"!==Pn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bn(e){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mn=[{title:"身份验证"},{title:"提交注销申请"},{title:"审核"}],Un=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(o,e);var t,n,r,a=Fn(o);function o(){return Dn(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.developerInfo.email;return i.a.createElement(mn.a,{FlowList:Mn,cType:5,emailFromFather:e||"",isNeedVerifyType:!0,title:"注销账号"})}}])&&Tn(t.prototype,n),r&&Tn(t,r),o}(o.Component),Kn=n("g5u9"),qn=n("nyxj");function Wn(e){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zn(e,t){return(zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zn(e);if(t){var a=Zn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Yn(this,n)}}function Yn(e,t){return!t||"object"!==Wn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zn(e){return(Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zn(e,t)}(o,e);var t,n,r,a=Jn(o);function o(){return Gn(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.history;return i.a.createElement(Kn.a,{needHeader:!1,isInPage:!0},i.a.createElement("div",{className:"content-area"},i.a.createElement("div",{className:"title"},"重置登录密码"),i.a.createElement("div",{className:"desc default middle-fontsize"},"重置子账户登录密码，需要验证原登录账号"),i.a.createElement(qn.d,{history:e})))}}])&&Hn(t.prototype,n),r&&Hn(t,r),o}(o.Component);n("0Zna");function Qn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function er(){return(er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tr(e){var t=e.developerInfo,n=e.getDeveloperInfo,r=e.match.path,a=!(1===t.isSubUser);return i.a.createElement(c.Switch,null,i.a.createElement(c.Route,{path:"".concat(r,"/setting"),render:function(e){return i.a.createElement(nr,er({},e,{developerInfo:t,getDeveloperInfo:n}))}}),i.a.createElement(dn.a,{component:Sn,path:"".concat(r,"/resetPassword"),redirect:"".concat(r,"/base"),developerInfo:t,isOk:a}),i.a.createElement(dn.a,{component:Nn,path:"".concat(r,"/updateEmail"),redirect:"".concat(r,"/base"),developerInfo:t,isOk:a}),i.a.createElement(dn.a,{component:Un,path:"".concat(r,"/closeAccount"),redirect:"".concat(r,"/base"),developerInfo:t,isOk:a}),i.a.createElement(dn.a,{component:$n,path:"".concat(r,"/subResetPassword"),redirect:"".concat(r,"/base"),isOk:!a}),i.a.createElement(c.Redirect,{to:"".concat(r,"/setting")}))}function nr(e){var t=e.developerInfo,n=e.history,r=e.getDeveloperInfo,a=t.id,c=t.secretId,s=t.secretKey,u=t.createTime,d=t.isSubUser,m=t.email,h=t.cancelStatus,y=!!d,b=Qn(Object(o.useState)(!1),2),g=b[0],v=b[1],E=Qn(Object(o.useState)(!1),2),O=E[0],k=E[1],S=function(e){n.push({pathname:"/userCenter/security/".concat(e)})};return i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{noback:!0,title:"安全设置"}),i.a.createElement(p.a,null,i.a.createElement("div",{className:"safe-setting"},i.a.createElement("div",{className:"setting-item flex-row"},i.a.createElement("div",{className:"left-desc flex1"},i.a.createElement("div",{className:"title"},"API访问秘钥"),i.a.createElement("div",{className:"desc-content"},i.a.createElement("div",{className:"p-flex"},i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"tit"},"开发者ID："),a),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"tit"},"用户secretId："),g?c:Object(D.r)(c,10),i.a.createElement(Ge.a,{type:g?"eye":"eye-invisible",style:{fontSize:"18px",marginLeft:"6px"},theme:"twoTone",twoToneColor:"#2874FF",onClick:function(){v((function(e){return!e}))}})),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"tit"},"用户SecretKey："),O?s:Object(D.r)(s,10),i.a.createElement(Ge.a,{type:O?"eye":"eye-invisible",style:{fontSize:"18px",marginLeft:"6px"},theme:"twoTone",twoToneColor:"#2874FF",onClick:function(){k((function(e){return!e}))}})),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"tit"},"创建时间："),u?D.a.utcToDev(u):"--"))))),i.a.createElement("div",{className:"setting-item flex-row"},i.a.createElement("div",{className:"left-desc flex1"},i.a.createElement("div",{className:"title"},"登录密码"),i.a.createElement("div",{className:"desc-content"},"登录平台需验证密码。以字母开头的6到18位的字母，数字和下划线。建议您定期更换密码。")),i.a.createElement("div",{className:"setting-btn-wrapper"},i.a.createElement("div",{className:"btns"},i.a.createElement("span",{className:"btn-has"},"已设置"),i.a.createElement("span",{onClick:function(){return S(y?"subResetPassword":"resetPassword")},className:"btn-can-control"},"重置")))),!y&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"setting-item flex-row"},i.a.createElement("div",{className:"left-desc flex1"},i.a.createElement("div",{className:"title"},"电子邮箱"),i.a.createElement("div",{className:"desc-content"},"电子邮箱地址可用于登录平台，也可以用于接收服务通知信息。")),i.a.createElement("div",{className:"setting-btn-wrapper"},i.a.createElement("div",{className:"btns"},i.a.createElement("span",{className:m?"btn-has":"btn-not-has"},m?"已设置":"未设置"),i.a.createElement("span",{onClick:function(){return S("updateEmail")},className:"btn-can-control"},"重置")))),i.a.createElement("div",{className:"setting-item flex-row"},i.a.createElement("div",{className:"left-desc flex1"},i.a.createElement("div",{className:"title"},"注销账户"),i.a.createElement("div",{className:"desc-content"},"如果您不再使用此账号，可以将其注销。账号成功注销后，所有的产品数据及隐私信息将会被永久删除且无法恢复。")),i.a.createElement("div",{className:"setting-btn-wrapper"},i.a.createElement("div",{className:"btns"},1==h?i.a.createElement("span",{onClick:function(){Object(l.c)(l.a.withdraw,{},{loading:!0}).then((function(e){r()})).catch((function(e){}))},className:"btn-can-control"},"撤销注销账户申请"):i.a.createElement("span",{onClick:function(){return S("closeAccount")},className:"btn-can-control"},"注销账户"))))))))}n("Eh1p");function rr(e){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ar(){return(ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ir(e,t){return(ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lr(e);if(t){var a=lr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return sr(this,n)}}function sr(e,t){return!t||"object"!==rr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lr(e){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ir(e,t)}(o,e);var t,n,r,a=cr(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).affirm=function(){(0,t.props.form.validateFieldsAndScroll)((function(e,n){e||Object(l.d)(l.a.addCase,n).then((function(e){0==e.code&&(Object(te.a)({type:"success",description:"实例创建成功！"}),t.props.form.resetFields(),t.props.onAddClose(),t.props.pagerIndex(1))}))}))},t.blurr=function(e){var n=t.props.form,r=n.getFieldValue,a=n.setFieldsValue,o=r(e);if(""==o||0==o){var i={};i[e]={namespaceCpu:20,namespaceMemory:10,namespaceStorage:100}[e],a(i)}},t.state={},t}return t=o,(n=[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator,n=e.getFieldValue;return i.a.createElement(m.a,ar({},{labelCol:{span:4},wrapperCol:{span:20}},{onSubmit:this.handleSubmit}),i.a.createElement(m.a.Item,{label:"实例名称"},t("name",{rules:[{required:!0,message:"请输入实例名称"},{max:20,message:"最大输入长度为20"}]})(i.a.createElement(h.a,{placeholder:"请输入实例名称"}))),i.a.createElement(Ze.a,{label:"备注",formId:"desc",astrictNub:"50",rows:"3",isRequired:!0,placeholder:"实例备注",getFieldDecorator:t,getFieldValue:n}),i.a.createElement(m.a.Item,{label:"cpu(核)"},t("namespaceCpu",{rules:[{max:3,required:!0,pattern:/^\d{1,3}$/,message:"请输入不超过3位数的数字"}],initialValue:20})(i.a.createElement(h.a,{placeholder:"请输入申请核数（核）/默认20核",onBlur:this.blurr.bind(this,"namespaceCpu")}))),i.a.createElement(m.a.Item,{label:"内存(G)"},t("namespaceMemory",{rules:[{max:3,required:!0,pattern:/^\d{1,3}$/,message:"请输入不超过3位数的数字"}],initialValue:10})(i.a.createElement(h.a,{placeholder:"请输入申请内存（G）/默认10G",onBlur:this.blurr.bind(this,"namespaceMemory")}))),i.a.createElement(m.a.Item,{label:"存储(G)"},t("namespaceStorage",{rules:[{max:4,required:!0,pattern:/^\d{1,4}$/,message:"请输入不超过4位数的数字"}],initialValue:100})(i.a.createElement(h.a,{placeholder:"请输入申请存储空间（G）/默认100G",onBlur:this.blurr.bind(this,"namespaceStorage")}))))}}])&&or(t.prototype,n),r&&or(t,r),o}(o.Component),fr=m.a.create({name:"caseAdd"})(ur);function pr(e){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dr(){return(dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hr(e,t){return(hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gr(e);if(t){var a=gr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return br(this,n)}}function br(e,t){return!t||"object"!==pr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gr(e){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hr(e,t)}(o,e);var t,n,r,a=yr(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={},t}return t=o,(n=[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator;return e.getFieldValue,i.a.createElement(m.a,dr({},{labelCol:{span:4},wrapperCol:{span:20}},{onSubmit:this.handleSubmit}),i.a.createElement(m.a.Item,{label:"cpu(核)"},t("namespaceCpu",{rules:[{required:!0,message:"请输入cpu"},{max:3,message:"最大输入长度为3"}]})(i.a.createElement(h.a,{placeholder:"输入申请核数(核)"}))),i.a.createElement(m.a.Item,{label:"内存(G)"},t("namespaceMemory",{rules:[{required:!0,message:"请输入内存"},{max:3,message:"最大输入长度为3"}]})(i.a.createElement(h.a,{placeholder:"输入申请内存"}))),i.a.createElement(m.a.Item,{label:"存储(G)"},t("namespaceStorage",{rules:[{required:!0,message:"请输入存储"},{max:4,message:"最大输入长度为4"}]})(i.a.createElement(h.a,{placeholder:"输入申请存储空间"}))))}}])&&mr(t.prototype,n),r&&mr(t,r),o}(o.Component),Er=m.a.create({name:"applyFor"})(vr);function Or(e){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sr(e,t){return(Sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xr(e);if(t){var a=xr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return jr(this,n)}}function jr(e,t){return!t||"object"!==Or(t)&&"function"!=typeof t?_r(e):t}function _r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xr(e){return(xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sr(e,t)}(o,e);var t,n,r,a=wr(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.c)(l.a.getCasePageList,e).then((function(e){t.setState({caseList:e.data.list,pager:e.data.pager,loading:!1})}))},t.addCase=function(){t.setState({addCaseVisible:!0})},t.searchCase=function(e){t.setState({loading:!0,searchName:e},(function(){t.pagerIndex(1)}))},t.startOrForbidden=function(e,n,r){t.setState({updatetype:e,name:n,id:r})},t.startOrForbiddenModal=function(e){if("ok"==e){var n=t.state,r=n.id,a=n.pageIndex,o=n.updatetype;a=a||1,Object(l.d)(l.a.updateCaseStatus,{status:o,id:r}).then((function(e){0==e.code&&t.setState({loading:!0},(function(){t.getList({pageIndex:a,pageRows:10})}))}))}t.setState({updatetype:2})},t.addUserModal=function(e){1==e?t.addUserRefs.affirm():(t.closeAdd(),t.addUserRefs.props.form.resetFields())},t.closeAdd=function(){t.setState({addCaseVisible:!1})},t.pagerIndex=function(e){t.setState({pageIndex:e,loading:!0},(function(){t.getList({pageIndex:e,pageRows:10,name:t.state.searchName||void 0})}))},t.openApplySource=function(e){console.log("--id--",e),-1!=e?t.setState({applyForVisible:!0,id:e}):(t.setState({applyForVisible:!1}),t.applyForRefs.props.form.resetFields())},t.applyOk=function(){var e=t.applyForRefs.props.form,n=t.state.id;(0,e.validateFieldsAndScroll)((function(e,r){var a=r.namespaceCpu,o=r.namespaceMemory,i=r.namespaceStorage;e||Object(l.d)(l.a.applySource,{namespaceCpu:a,namespaceMemory:o,namespaceStorage:i,id:n}).then((function(e){0==e.code&&(Object(te.a)({type:"success",description:"资源申请成功！"}),t.openApplySource(-1),t.pagerIndex(1))}))}))},t.state={loading:!0,caseList:[],pager:{},searchName:"",name:"",id:"",addCaseVisible:!1,updatetype:2,pageIndex:"1",applyForVisible:!1},t.columns=[{title:"实例名称",dataIndex:"name",key:"name",render:function(e){return i.a.createElement(Ke.a,{placement:"topLeft",title:e},i.a.createElement("span",null,e))}},{title:"实例状态",dataIndex:"status",key:"status",width:"100px",render:function(e,t){var n={0:"可用",1:"不可用"}[t.status];return i.a.createElement(Ke.a,{placement:"topLeft",title:n}," ",i.a.createElement("span",null,n)," ")}},{title:"备注",dataIndex:"desc",key:"desc",render:function(e){return i.a.createElement(Ke.a,{placement:"topLeft",title:e}," ",i.a.createElement("span",null,e)," ")}},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:"160px",render:function(e){return i.a.createElement("span",null,ee()(e).add(8,"h").format("YYYY-MM-DD HH:mm:ss"))}},{title:"创建人",dataIndex:"createUser",key:"createUser",render:function(e){return i.a.createElement(Ke.a,{placement:"topLeft",title:e},i.a.createElement("span",null,e))}},{title:"可用资源",dataIndex:"availableRes",key:"availableRes",render:function(e){return i.a.createElement(Ke.a,{placement:"topLeft",title:e},i.a.createElement("span",null,e))}},{title:"操作",key:"action",width:"140px",render:function(e,n){var r=n.id,a=n.name,o=n.status,c=n.type;return i.a.createElement("span",null,i.a.createElement("a",{onClick:t.openApplySource.bind(_r(t),r)},"资源申请"),0!==c&&i.a.createElement(i.a.Fragment,null,i.a.createElement($.a,{type:"vertical"}),0==o?i.a.createElement("a",{onClick:t.startOrForbidden.bind(_r(t),1,a,r),style:{color:"#FF3100"}},"停用"):i.a.createElement("a",{onClick:t.startOrForbidden.bind(_r(t),0,a,r)},"启用")))}}],t}return t=o,(n=[{key:"componentDidMount",value:function(){this.getList({pageIndex:1,pageRows:10})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.name,a=t.addCaseVisible,o=t.updatetype,c=t.caseList,s=t.pager,l=t.applyForVisible,u=2!=o,f="";return u&&(f=0==o?"启用":"停用"),i.a.createElement("div",{className:"user-visit-box"},i.a.createElement("header",{className:"page-content-header"},i.a.createElement("h3",{className:"page-name"},"实例管理"),i.a.createElement("div",null,i.a.createElement("div",{className:"searchBox"},i.a.createElement(h.a.Search,{placeholder:"请输入实例名查找",enterButton:!0,maxLength:20,onSearch:function(t){return e.searchCase(t)}})),i.a.createElement("div",{className:"butFloatRight"},i.a.createElement(d.a,{className:"but-add",type:"primary",onClick:this.addCase},"新增实例")))),i.a.createElement("div",{className:"commonContentBox"},i.a.createElement("div",{className:"centent"},i.a.createElement(Y.a,{rowKey:"id",columns:this.columns,dataSource:c,pagination:{defaultCurrent:s.pageIndex,total:s.totalRows,hideOnSinglePage:!1,onChange:this.pagerIndex,current:s.pageIndex},loading:n}))),i.a.createElement(Ue.a,{title:"新增实例",visible:a,width:800,onOk:this.addUserModal.bind(this,1),onCancel:this.addUserModal.bind(this,2),maskClosable:!1},i.a.createElement(fr,{onRef:function(t){return e.addUserRefs=t},onAddClose:this.closeAdd,pagerIndex:this.pagerIndex})),i.a.createElement(Ue.a,{title:"资源申请",visible:l,width:500,onOk:this.applyOk,onCancel:this.openApplySource.bind(this,-1),maskClosable:!1},i.a.createElement(Er,{onRef:function(t){return e.applyForRefs=t}})),i.a.createElement(qe.a,{visible:u,modalOKHandle:this.startOrForbiddenModal.bind(this,"ok"),modalCancelHandle:this.startOrForbiddenModal.bind(this,"cancel"),title:"".concat(f,"实例"),descText:"即将".concat(f,"实例"),targetName:r,needWarnIcon:1==o}))}}])&&kr(t.prototype,n),r&&kr(t,r),o}(o.Component),Ir=(n("bHfV"),n("hVGm"));n("wA0d");function Cr(e){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(){return(Lr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Nr(e){return function(e){if(Array.isArray(e))return Pr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Pr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tr(e,t){return(Tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ar(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vr(e);if(t){var a=Vr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Fr(this,n)}}function Fr(e,t){return!t||"object"!==Cr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vr(e){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Br=b.a.Option,Mr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tr(e,t)}(o,e);var t,n,r,a=Ar(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).onChangeAuthType=function(e){t.setState({authType:e.target.value})},t.loadData=function(e){var n=e[0];n.loading=!0,Object(l.c)(l.a.getDataAssetsListAuth,{pageRows:999,type:n.value}).then((function(e){n.loading=!1;var r=e.data.list||[];n.children=r.map((function(e){return{label:e.name,value:e.id}})),t.setState({dataAsset:Nr(t.state.dataAsset)})}))},t.cngSearchType=function(e){t.setState({searchType:e})},t.searchInstance=function(e){var n=t.state.searchType;e&&Object(l.c)(l.a.getAuthList,{type:n,param:e,pageRows:999}).then((function(e){if(0==e.code){var n=e.data&&e.data.list||[];t.setState({dataInstanceList:n,searched:!0})}}))},t.getInstanceOptions=function(){return t.state.dataInstanceList.map((function(e){var t=e.instanceVos.map((function(e){return{value:e.id,label:e.name||"--"}}));return{value:"".concat(e.developerId,",").concat(e.account),label:e.account||"--",children:t}}))},t.state={authType:0,searchType:0,productList:[],deviceGroupList:[],dataAsset:[{value:1,label:"mqtt",isLeaf:!1},{value:2,label:"mysql数据库",isLeaf:!1},{value:4,label:"redis",isLeaf:!1},{value:5,label:"rocketMq",isLeaf:!1}],dataInstanceList:[],searched:!1,apiList:[]},t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.onRef(this),Object(l.c)(l.a.getCreateProduct,{pageRows:999}).then((function(t){var n=t.data.list||[];e.setState({productList:n})})),Object(l.c)(l.a.getGroupListAuth,{pageRows:999}).then((function(t){var n=t.data.list||[];e.setState({deviceGroupList:n})})),Object(l.c)(l.a.getAuthorServeList,{pageRows:999,proEnv:2}).then((function(t){var n=(t&&t.data||{list:[]}).list;e.setState({apiList:n})}))}},{key:"render",value:function(){var e=this.state,t=e.authType,n=e.dataAsset,r=e.productList,a=e.deviceGroupList,o=e.apiList,c=e.searched,s=this.props.form.getFieldDecorator,l={0:i.a.createElement(b.a,{showSearch:!0,placeholder:"选择产品",optionFilterProp:"children"},r.map((function(e,t){return i.a.createElement(Br,{key:t,value:e.productId},e.productName)}))),1:i.a.createElement(b.a,{showSearch:!0,placeholder:"选择设备组",optionFilterProp:"children"},a.map((function(e,t){return i.a.createElement(Br,{key:t,value:e.id},e.name)}))),2:i.a.createElement(Ir.a,{options:n,loadData:this.loadData,placeholder:"请选择数据资产源"}),3:i.a.createElement(b.a,{showSearch:!0,placeholder:"选择API",optionFilterProp:"children"},o.map((function(e,t){return i.a.createElement(Br,{key:t,value:e.id},e.name)})))}[t];return i.a.createElement(m.a,Lr({},{labelCol:{span:5},wrapperCol:{span:18}},{onSubmit:this.handleSubmit}),i.a.createElement(m.a.Item,{label:"授权对象类型"},s("authType",{rules:[{required:!0,message:"请选择授权对象类型"}],initialValue:0})(i.a.createElement(ue.a.Group,{onChange:this.onChangeAuthType},i.a.createElement(ue.a,{value:0},"产品"),i.a.createElement(ue.a,{value:1},"设备分组"),i.a.createElement(ue.a,{value:2},"数据资产源"),i.a.createElement(ue.a,{value:3},"API权限调用")))),i.a.createElement(m.a.Item,{label:"授权对象"},s({0:"proid",1:"groupid",2:"toobjid",3:"apiid"}[t],{rules:[{required:!0,message:"请选择授权对象"}]})(l)),i.a.createElement(m.a.Item,{label:"被授权主体"},s("authorizedType",{rules:[{required:!0,message:"请选择被授权主体类型"}],initialValue:0})(i.a.createElement(ue.a.Group,null,i.a.createElement(ue.a,{value:0},"实例")))),i.a.createElement("div",{className:"searchlistbox"},i.a.createElement(h.a.Group,{compact:!0,className:"searchbox"},i.a.createElement(b.a,{style:{width:"25%"},defaultValue:0,onChange:this.cngSearchType},i.a.createElement(Br,{value:0},"账户名"),i.a.createElement(Br,{value:1},"产品名")),i.a.createElement(h.a.Search,{style:{width:"75%"},placeholder:"输入查询关键字",onSearch:this.searchInstance})),i.a.createElement(m.a.Item,{label:""},s("instanceObj",{rules:[{required:!0,message:"请选择被授权实例"}]})(i.a.createElement(Ir.a,{style:{width:"450px"},options:this.getInstanceOptions(),expandTrigger:"hover",placeholder:c?"选择实例":"请先在搜索框输入关键字查询",disabled:!c})))),i.a.createElement(m.a.Item,{label:"授权策略"},s("authPolicy",{rules:[{required:!0,message:"请选择授权策略"}],initialValue:0})(i.a.createElement(ue.a.Group,null,i.a.createElement(ue.a,{value:0},"默认策略")))))}}])&&Dr(t.prototype,n),r&&Dr(t,r),o}(o.Component),Ur=m.a.create({name:"caseAdd"})(Mr),Kr=(n("auFq"),n("g2HK"));n("kCMX");function qr(e){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jr(e);if(t){var a=Jr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return zr(this,n)}}function zr(e,t){return!t||"object"!==qr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jr(e){return(Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gr(e,t)}(o,e);var t,n,r,a=Hr(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).onChange=function(e){t.setState({checkedValues:e})},t.cancelCommit=function(){var e=t.props.cancelData,n=e.id,r=e.instanceIds;if(r.indexOf(",")>-1){var a=t.state.checkedValues;if(0==a.length)return void Object(te.a)({type:"warn",description:"请至少选中一项"});r=a.join(",")}Object(l.d)(l.a.deleAuthorize,{id:n,instanceId:r}).then((function(e){0==e.code&&t.props.cancelSucess()}))},t.getOptions=function(){var e=t.props.cancelData,n=e.instanceIds,r=void 0===n?"":n,a=e.instanceName,o=void 0===a?"":a,i=r.split(",");return o.split(",").map((function(e,t){return{label:e,value:i[t]}}))},t.state={checkedValues:[]},t}return t=o,(n=[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"render",value:function(){var e=this.getOptions();return e.length>1?i.a.createElement(Kr.a.Group,{options:e,onChange:this.onChange}):i.a.createElement("span",null,e[0].label||"确定取消该条授权？")}}])&&Wr(t.prototype,n),r&&Wr(t,r),o}(o.Component);function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qr(e,t){return(Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=na(e);if(t){var a=na(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ea(this,n)}}function ea(e,t){return!t||"object"!==Zr(t)&&"function"!=typeof t?ta(e):t}function ta(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function na(e){return(na=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ra=b.a.Option,aa=["产品","设备分组","数据资产源","API权限调用"],oa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}(o,e);var t,n,r,a=Xr(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).cancelModVisiable=function(e){t.setState({cancelData:e})},t.getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.c)(l.a.getAuthorizeList,e).then((function(e){t.setState({caseList:e.data.list,pager:e.data.pager,loading:!1})}))},t.addCase=function(){t.setState({addCaseVisible:!0})},t.searchCase=function(e){t.setState({loading:!0,searchName:e},(function(){t.pagerIndex(1)}))},t.pagerIndex=function(e){var n=t.state,r=n.searchName,a=n.authType;t.setState({pageIndex:e,loading:!0},(function(){t.getList({pageIndex:e,pageRows:10,authType:a,param:r||void 0})}))},t.deleAuthOk=function(){t.cancelAuthRefs.cancelCommit()},t.cancelSucess=function(){t.cancelModVisiable(!1),t.pagerIndex(t.state.pageIndex)},t.addOk=function(){var e=t.addFormRefs.props.form;t.state.id;(0,e.validateFieldsAndScroll)((function(e,n){var r=n.authType,a=n.authorizedType,o=n.authPolicy,i=n.instanceObj,c=n.proid,s=n.groupid,u=n.toobjid,f=n.apiid,p=i[1],d=i[0].split(","),m=d[1],h=d[0],y=c||s||f||u[1];e||Object(l.d)(l.a.addAuthorize,{productId:y,authType:r,authorizedType:a,authPolicy:o,instanceId:p,receiverEmail:m,receiverId:h}).then((function(e){0==e.code&&(Object(te.a)({type:"success",description:"新增成功！"}),t.addCancel(),t.pagerIndex(1))}))}))},t.addCancel=function(){t.setState({addCaseVisible:!1}),t.addFormRefs.props.form.resetFields(),t.addFormRefs.setState({authType:0})},t.cngSearchType=function(e){t.setState({loading:!0,authType:e},(function(){t.pagerIndex(1)}))},t.state={loading:!0,caseList:[],pager:{},searchName:"",name:"",id:"",addCaseVisible:!1,cancelVisible:!1,pageIndex:"1",cancelData:!1,authType:0},t.columns=[{title:"授权对象名称",dataIndex:"name",key:"name"},{title:"授权对象类型",dataIndex:"authType",key:"authType",render:function(e){return i.a.createElement("span",null,aa[e])}},{title:"被授权人",dataIndex:"receiver",key:"receiver"},{title:"被授权主体",dataIndex:"instanceName",key:"instanceName",render:function(e){var t=e.split(",");return t.map((function(e,n){return i.a.createElement("span",{key:n},e,n<t.length-1?"、":"",i.a.createElement("br",null))}))}},{title:"被授权主体类型",dataIndex:"authorizedType",key:"authorizedType",render:function(e){return i.a.createElement("span",null,{0:"实例"}[e])}},{title:"授权策略",dataIndex:"authPolicy",key:"authPolicy",render:function(e){return i.a.createElement("span",null,{0:"默认策略"}[e])}},{title:"授权时间",dataIndex:"createTime",key:"createTime",width:"160px",render:function(e){return i.a.createElement("span",null,D.a.utcToDev(e))}},{title:"操作",key:"action",width:"160px",render:function(e,n){return i.a.createElement("a",{onClick:t.cancelModVisiable.bind(ta(t),n),style:{color:"#FF3100"}},"取消授权")}}],t}return t=o,(n=[{key:"componentDidMount",value:function(){this.pagerIndex(1)}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=(t.name,t.addCaseVisible),a=(t.cancelVisible,t.caseList),o=t.pager,c=t.cancelData;return i.a.createElement("div",{className:"authorize-page"},i.a.createElement("header",{className:"page-content-header"},i.a.createElement("h3",{className:"page-name"},"授权管理"),i.a.createElement("div",null,i.a.createElement(h.a.Group,{compact:!0,className:"searchgroupbox"},i.a.createElement(b.a,{style:{width:"30%"},defaultValue:0,onChange:this.cngSearchType},aa.map((function(e,t){return i.a.createElement(ra,{key:t,value:t},e)}))),i.a.createElement(h.a.Search,{style:{width:"70%"},placeholder:"请输入授权对象名查找",enterButton:!0,maxLength:20,onSearch:function(t){return e.searchCase(t)}})),i.a.createElement("div",{className:"butFloatRight"},i.a.createElement(d.a,{className:"but-add",type:"primary",onClick:this.addCase},"新增授权")))),i.a.createElement("div",{className:"commonContentBox"},i.a.createElement("div",{className:"centent"},i.a.createElement(Y.a,{rowKey:"id",columns:this.columns,dataSource:a,pagination:{defaultCurrent:o.pageIndex,total:o.totalRows,hideOnSinglePage:!1,onChange:this.pagerIndex,current:o.pageIndex},loading:n}))),i.a.createElement(Ue.a,{title:"新增授权",visible:r,width:650,onOk:this.addOk,onCancel:this.addCancel,maskClosable:!1},i.a.createElement(Ur,{onRef:function(t){return e.addFormRefs=t}})),i.a.createElement(Ue.a,{title:"取消授权",visible:!!c,width:400,onOk:this.deleAuthOk,onCancel:this.cancelModVisiable.bind(this,!1),maskClosable:!1},i.a.createElement(Yr,{onRef:function(t){return e.cancelAuthRefs=t},cancelData:c,cancelSucess:this.cancelSucess})))}}])&&$r(t.prototype,n),r&&$r(t,r),o}(o.Component);n("a5gO");function ia(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ca(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sa=b.a.Option,la={0:"否",1:"是"},ua={string:"字符串",number:"数字"};function fa(e,t){var n=e.list,r=void 0===n?[]:n,a=ia(Object(o.useState)(r),2),c=a[0],s=a[1],l=ia(Object(o.useState)(-1),2),u=l[0],f=l[1];Object(o.useImperativeHandle)(t,(function(){return{sourcelist:c}}),[c]);var p=function(){s((function(e){var t=e.map((function(e){return e}));return t.push({name:"",type:"string",must:"0",defaultVal:"",desc:""}),t}))},d=function(e,t){s((function(n){return n.map((function(n,r){var a=Object.assign({},n);return a[e]=t,r==u?a:n}))}))};return i.a.createElement("div",{className:"paramtable"},c.length>0&&i.a.createElement("table",{className:"labeltable",onMouseLeave:function(){f(-1)}},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{style:{width:"20%"}},"参数名"),i.a.createElement("th",{style:{width:"15%"}},"类型"),i.a.createElement("th",{style:{width:"15%"}},"是否必选"),i.a.createElement("th",{style:{width:"18%"}},"默认值"),i.a.createElement("th",{style:{width:"26%"}},"描述"),i.a.createElement("th",{style:{width:"6%",cursor:"pointer"},title:"添加参数"},i.a.createElement("a",{onClick:p,href:"javascript:"},i.a.createElement(Ge.a,{type:"plus"}))))),i.a.createElement("tbody",null,c.map((function(e,t){var n=e.name,r=e.type,a=e.must,o=e.defaultVal,c=e.desc;if(u==t){var l=[];for(var p in ua)l.push(i.a.createElement(sa,{key:p,value:p},ua[p]));return i.a.createElement("tr",{key:"tr_"+t},i.a.createElement("td",null,i.a.createElement(h.a,{value:n,onChange:function(e){d("name",e.target.value)}})),i.a.createElement("td",null,i.a.createElement(b.a,{value:r,onChange:function(e){d("type",e)}},l)),i.a.createElement("td",null,i.a.createElement(b.a,{value:a,onChange:function(e){d("must",e)}},i.a.createElement(sa,{value:"0"},"否"),i.a.createElement(sa,{value:"1"},"是"))),i.a.createElement("td",null,i.a.createElement(h.a,{value:o,onChange:function(e){d("defaultVal",e.target.value)}})),i.a.createElement("td",null,i.a.createElement(h.a,{value:c,placeholder:"描述",onChange:function(e){d("desc",e.target.value)}})),i.a.createElement("td",null,i.a.createElement("a",{onClick:function(){!function(e){s((function(t){var n=t.map((function(e){return e}));return n.splice(e,1),n}))}(t)},href:"javascript:"}," ",i.a.createElement(Ge.a,{type:"minus"})," ")))}return i.a.createElement("tr",{key:"tr_"+t,onClick:function(){f(t)}},i.a.createElement("td",null,n),i.a.createElement("td",null,ua[r]),i.a.createElement("td",null,la[a]),i.a.createElement("td",null,o),i.a.createElement("td",null,c))}))))||i.a.createElement("div",{className:"tempdatabox"}," 暂无参数，",i.a.createElement("a",{onClick:p,href:"javascript:"},"点击添加")," "))}var pa=Object(o.memo)(Object(o.forwardRef)(fa));function da(e){return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ma(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ha(e,t){return(ha=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ya(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=va(e);if(t){var a=va(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ba(this,n)}}function ba(e,t){return!t||"object"!==da(t)&&"function"!=typeof t?ga(e):t}function ga(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function va(e){return(va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ea=b.a.Option,Oa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ha(e,t)}(o,e);var t,n,r,a=ya(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.c)(l.a.getDataAssetsList,e).then((function(e){t.setState({caseList:e.data.list,pager:e.data.pager,loading:!1})}))},t.cngSearchType=function(e){t.setState({searchType:e})},t.cngSearchName=function(e){t.setState({searchName:e.target.value})},t.searchCase=function(e){t.setState({searchName:e},(function(){t.pagerIndex(1)}))},t.resetList=function(){t.setState({searchName:"",searchType:void 0},(function(){t.getList({pageIndex:1,pageRows:10})}))},t.openDel=function(e,n){t.setState({name:n,id:e})},t.delOkCancel=function(e){if("ok"==e){var n=t.state,r=n.id,a=n.pageIndex;a=a||1,Object(l.c)(l.a.delDataAssets,{id:r}).then((function(e){0==e.code&&t.setState({loading:!0,id:""},(function(){t.getList({pageIndex:a,pageRows:10})}))}))}else t.setState({id:""})},t.pagerIndex=function(e){t.setState({pageIndex:e,loading:!0},(function(){var n=t.state,r=n.searchName,a=n.searchType;t.getList({pageIndex:e,pageRows:10,name:r||void 0,type:a||void 0})}))},t.state={loading:!0,caseList:[],pager:{},searchName:"",searchType:void 0,name:"",id:"",pageIndex:"1",typeList:[{id:1,name:"mqtt"},{id:2,name:"mysql数据库"},{id:3,name:"http服务"},{id:4,name:"redis"},{id:5,name:"rocketMq"}]},t.columns=[{title:"数据资产源名称",dataIndex:"name",key:"name"},{title:"描述",dataIndex:"remark",key:"remark",render:function(e,t){return i.a.createElement(Ke.a,{placement:"topLeft",title:e}," ",i.a.createElement("span",null,e)," ")}},{title:"类型",dataIndex:"type",key:"type",render:function(e){return t.state.typeList[e-1].name||"--"}},{title:"状态",dataIndex:"status",key:"status",render:function(e){return 0==e?"有效":"无效"}},{title:"创建时间",dataIndex:"createTime",key:"createTime",render:function(e){return i.a.createElement("span",null,D.a.utcToDev(e))}},{title:"操作",key:"action",width:"160px",render:function(e,n){var r=n.id,a=n.name;return i.a.createElement("span",null,i.a.createElement(c.Link,{key:"detail",to:"/userCenter/assetdetail/".concat(r,"/1")},"查看"),i.a.createElement($.a,{type:"vertical"}),i.a.createElement(c.Link,{key:"edit",to:"/userCenter/assetdetail/".concat(r,"/0")},"编辑"),i.a.createElement($.a,{type:"vertical"}),i.a.createElement("a",{onClick:t.openDel.bind(ga(t),r,a)},"删除"))}}],t}return t=o,(n=[{key:"componentDidMount",value:function(){this.getList({pageIndex:1,pageRows:10})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.name,a=t.caseList,o=t.pager,c=t.typeList,s=t.searchType,l=t.searchName,u=t.id;return i.a.createElement("div",{className:"user-visit-box"},i.a.createElement("header",{className:"page-content-header butonlyheader"},i.a.createElement("h3",{className:"page-name"},"数据资产知识库管理"),i.a.createElement("div",{className:"butonly"},i.a.createElement(d.a,{className:"but-add",type:"primary",href:"#/userCenter/assetdetail/0/0"},"新增数据资产源"))),i.a.createElement(p.a,{title:"数据资产列表"},i.a.createElement("div",{className:"alone-section-content-default"},i.a.createElement("div",{className:"searchBox"},i.a.createElement("div",{className:"searchCriteria"},i.a.createElement(b.a,{className:"sele",placeholder:"请选择数据资产源类型",onChange:this.cngSearchType,value:s},c.map((function(e){return i.a.createElement(Ea,{key:e.id,value:e.id},e.name)}))),i.a.createElement(h.a.Search,{placeholder:"请输入数据资产源名称",value:l,onChange:this.cngSearchName,enterButton:!0,maxLength:20,onSearch:function(t){return e.searchCase(t)}}),i.a.createElement(d.a,{className:"btn",onClick:this.resetList},"重置"))),i.a.createElement("div",{className:"centent"},i.a.createElement(Y.a,{rowKey:"id",columns:this.columns,dataSource:a,pagination:{defaultCurrent:o.pageIndex,total:o.totalRows,hideOnSinglePage:!1,onChange:this.pagerIndex,current:o.pageIndex},loading:n})))),i.a.createElement(qe.a,{visible:!!u,modalOKHandle:this.delOkCancel.bind(this,"ok"),modalCancelHandle:this.delOkCancel.bind(this,"cancel"),title:"删除",descText:"即将删除数据资产源",targetName:r}))}}])&&ma(t.prototype,n),r&&ma(t,r),o}(o.Component);function ka(e){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sa(){return(Sa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(n),!0).forEach((function(t){_a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ra(e,t){return(Ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ia(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=La(e);if(t){var a=La(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ca(this,n)}}function Ca(e,t){return!t||"object"!==ka(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function La(e){return(La=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Na,Pa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ra(e,t)}(c,e);var t,n,r,a=Ia(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).getTypeList=function(){var e=[{id:1,name:"mqtt"},{id:2,name:"mysql数据库"},{id:4,name:"redis"},{id:5,name:"rocketMq"}];return"het-developer"===t.props.developerInfo.account&&e.push({id:3,name:"http服务"}),e},t.getFormParDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=t.props.form.getFieldDecorator,r=t.state.assetType,a=Object.assign({},t.param[r+""]),o=[],c=function(c){var s=a[c].split("_"),l=s[0],u="".concat(c,"_").concat(e),f=s[1]||s[0],p=i.a.createElement(m.a.Item,{label:l,key:u},n(u,{rules:[{required:t.configIsRequired(r,c),message:"请输入".concat(l)},{max:100,message:"最大输入长度为100"}]})(i.a.createElement(h.a,{placeholder:f,disabled:1==r&&0==e,onChange:function(n){1==r&&1==e&&t.changeMqtt(n.target.value,"".concat(c,"_0"))}})));o.push(p)};for(var s in a)c(s);return o},t.changeMqtt=function(e,n){var r=_a({},n,e);t.props.form.setFieldsValue(r)},t.configIsRequired=function(e,t){return(4!=e||"pwd"!=t)&&(5!=e||"tags"!=t)},t.changeType=function(e){t.setState({assetType:e})},t.handleSubmit=function(e){e.preventDefault(),(0,t.props.form.validateFieldsAndScroll)((function(e,n){if(!e){var r=n.name,a=n.remark,o=n.type,i=n.projectId,c={name:r,remark:a,type:o,dataJson:t.getJsonStr(n),projectId:i&&i.join(",")},s=l.a.addDataAssets,u=t.props.match.params.id;0!=u&&(s=l.a.updateDataAssets,c.id=u),Object(l.d)(s,c).then((function(e){0==e.code&&(window.location.hash="/userCenter/dataasset")}))}}))},t.filterParams=function(e){var t=[];return e.forEach((function(e){e.name&&t.push(e)})),t},t.getJsonStr=function(e,n){var r={},a={},o={},i=Object.assign({},e);if(3==t.state.assetType){var c=t.ref1.current.sourcelist,s=t.filterParams(c);i.param_0=s,i.param_1=s}for(var l in i)l.indexOf("_0")>-1&&(a[l.slice(0,-2)]=i[l]),l.indexOf("_1")>-1&&(o[l.slice(0,-2)]=i[l]);return 0!=n&&(r[1]=o),1!=n&&(r[0]=a),JSON.stringify(r)},t.toFormdata=function(e,t){var n=JSON.parse(e),r={},a=n[0]||{},o=n[1]||{};for(var i in a)r[i+"_0"]=a[i];for(var c in o)r[c+"_1"]=o[c];return console.log("formdata--",r),r},t.testConfig=function(e){var n=t.props.form.getFieldsValue,r=Object.assign({},n()),a=r.name,o=r.remark,i=r.type;if(a)if(o){for(var c in r)if(c.indexOf("_"+e)>-1&&!r[c]&&t.configIsRequired(i,c.slice(0,-2)))return void Object(te.a)({type:"warn",description:"请将".concat(1==e?"测试":"生产","环境配置完整")});Object(l.d)(l.a.testDataAssets,{name:a,remark:o,type:i,dataJson:t.getJsonStr(r,e)}).then((function(e){Object(te.a)({type:"success",description:"通过"})}))}else Object(te.a)({type:"warn",description:"数据资源描述不能为空"});else Object(te.a)({type:"warn",description:"数据资源名称不能为空"})},t.ref1=Object(o.createRef)(),t.param={1:{userName:"用户名",pwd:"密码",topic:"队列名"},2:{addr:"数据源地址",port:"端口号",database:"数据库名",userName:"用户名",pwd:"密码"},3:{addr:"url",type:"POST"},4:{addr:"数据源地址",port:"端口号",database:"数据库",pwd:"密码"},5:{topic:"队列名",tags:"tags_多个标签请用竖线隔开，例如“a|b|c”"}},t.state={typeList:[{id:1,name:"mqtt"},{id:2,name:"mysql数据库"},{id:4,name:"redis"},{id:5,name:"rocketMq"}],assetType:1,projectList:[]},t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;Object(l.c)(l.a.getProjectList).then((function(t){t&&t.data&&e.setState({projectList:t.data})})),t>0&&Object(l.c)(l.a.getInfoDataAssets,{id:t},{loading:!0}).then((function(t){var n=t.data,r=n.dataJson,a=n.name,o=n.remark,i=n.type,c=n.projectId,s=e.toFormdata(r,i),l={assetType:i};3==i&&(l.param1=s.param_1,delete s.param0,delete s.param1),e.setState(l,(function(){e.props.form.setFieldsValue(ja(ja({type:i,name:a,remark:o},s),{},{projectId:c&&c.split(",").map((function(e){return+e}))||[]}))}))}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.assetType,r=t.projectList,a=(t.param0,t.param1),o=this.getTypeList(),c=this.props.form,s=c.getFieldDecorator,l=c.getFieldValue,u=this.props.match.params,p=u.id,y=u.readOnly,g=y?"详情":0==p?"创建数据资产源":"修改数据资产源",v=1==y;return i.a.createElement("div",{className:"asset-detail-page"},i.a.createElement(f.a,{backHandle:function(){return e.props.history.goBack()},title:"数据资产源"}),i.a.createElement("div",{className:"commonContentBox"},i.a.createElement("div",{className:"title"},g),i.a.createElement("div",{className:"centent",style:{position:"relative"}},i.a.createElement(m.a,Sa({},{labelCol:{span:2},wrapperCol:{span:12}},{onSubmit:this.handleSubmit}),i.a.createElement(m.a.Item,{label:"类型"},s("type",{rules:[{required:!0,message:"请选择数据资产源类型"}],initialValue:1})(i.a.createElement(b.a,{placeholder:"选择类型",onChange:this.changeType},o.map((function(e){return i.a.createElement(b.a.Option,{key:e.id,value:e.id},e.name)}))))),i.a.createElement(m.a.Item,{label:"所属项目"},s("projectId",{})(i.a.createElement(b.a,{placeholder:"选择所属项目",allowClear:!0,mode:"multiple",disabled:v},r.map((function(e,t){return i.a.createElement(b.a.Option,{key:t,value:e.projectId},e.name)}))))),i.a.createElement(m.a.Item,{label:"名称"},s("name",{rules:[{required:!0,message:"请输入数据源名称"},{max:20,message:"最大输入长度为30"}]})(i.a.createElement(h.a,{placeholder:"数据源名称"}))),i.a.createElement(Ze.a,{ref:"pramsRef2",label:"描述",formId:"remark",astrictNub:"200",rows:"3",isRequired:!0,placeholder:"数据资产源描述",getFieldDecorator:s,getFieldValue:l}),i.a.createElement(We.a,{gutter:24},i.a.createElement(He.a,{span:12},i.a.createElement(J.a,{title:"测试环境配置：",className:"titleenvironment",bordered:!1},n&&this.getFormParDom(1))),i.a.createElement(He.a,{span:12},i.a.createElement(J.a,{title:"生产环境配置：",className:"titleenvironment",bordered:!1},n&&this.getFormParDom(0)))),3==n&&i.a.createElement(pa,{ref:this.ref1,list:a}),i.a.createElement(We.a,{gutter:48},i.a.createElement(He.a,{span:12},!v&&i.a.createElement("a",{className:"testbtn",onClick:this.testConfig.bind(this,1)},"测试")),i.a.createElement(He.a,{span:12},!v&&i.a.createElement("a",{className:"testbtn",onClick:this.testConfig.bind(this,0)},"测试"))),!v&&i.a.createElement("div",{className:"btnbox"},i.a.createElement(d.a,{className:"btn",onClick:function(){return e.props.history.goBack()}},"取消"),i.a.createElement(d.a,{type:"primary",htmlType:"submit",className:"btn"},"保存"))),v&&i.a.createElement("div",{className:"mask"}))))}}])&&xa(t.prototype,n),r&&xa(t,r),c}(o.Component),Da=m.a.create({name:"dataassetdetail"})(Pa),Ta=n("MUf8"),Aa=n("k+EZ"),Fa=n("UpsA"),Va=n("d8kt");n("J2fM");function Ba(e){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ma(){return(Ma=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ua(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ka(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qa(e,t){return(qa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ha(e);if(t){var a=Ha(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ga(this,n)}}function Ga(e,t){return!t||"object"!==Ba(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ha(e){return(Ha=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var za=Object(s.connect)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS(),newMessageNums:e.getIn(["message","newMessageNums"]).toJS()}}),(function(e){return{getNewMessageNums:function(){return e(Object(Va.a)())},getDeveloperInfo:function(){return e(Object(u.d)())}}}))(Na=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qa(e,t)}(s,e);var t,n,r,o=Wa(s);function s(){return Ua(this,s),o.apply(this,arguments)}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.newMessageNums,n=e.getNewMessageNums,r=e.getDeveloperInfo,o=e.developerInfo;a()(t)&&n(),a()(o)&&r()}},{key:"render",value:function(){var e=this.props,t=e.developerInfo,n=e.newMessageNums,r=e.match,a=e.getDeveloperInfo,o=r.path,s=!(1===t.isSubUser);return i.a.createElement(Ta.a,null,i.a.createElement("div",{className:"page-header-wrapper"},i.a.createElement(Aa.a,{newMessageNums:n,developerInfo:t,noCollapsed:!0})),i.a.createElement("div",{className:"content-wrapper"},i.a.createElement(Fa.a,{developerInfo:t}),i.a.createElement("section",{className:"right-wrapper flex-column"},i.a.createElement("div",{className:"flex1 scroll-y"},i.a.createElement(c.Switch,null,i.a.createElement(c.Route,{path:"".concat(o,"/info"),component:H}),i.a.createElement(c.Route,{path:"".concat(o,"/security"),render:function(e){return i.a.createElement(tr,Ma({},e,{developerInfo:t,getDeveloperInfo:a}))}}),i.a.createElement(dn.a,{component:le,path:"".concat(o,"/role"),redirect:"".concat(o,"/info"),isOk:s}),i.a.createElement(dn.a,{component:ht,path:"".concat(o,"/visit"),redirect:"".concat(o,"/info"),isOk:s}),i.a.createElement(dn.a,{component:Gt,path:"".concat(o,"/look"),redirect:"".concat(o,"/info"),isOk:s}),i.a.createElement(dn.a,{component:Me,path:"".concat(o,"/add"),redirect:"".concat(o,"/info"),isOk:s}),i.a.createElement(dn.a,{component:pn,path:"".concat(o,"/log"),redirect:"".concat(o,"/info"),isOk:s}),i.a.createElement(dn.a,{component:Rr,path:"".concat(o,"/case"),redirect:"".concat(o,"/info"),isOk:s}),i.a.createElement(dn.a,{component:oa,path:"".concat(o,"/authorize"),redirect:"".concat(o,"/info"),isOk:s}),i.a.createElement(dn.a,{component:Oa,path:"".concat(o,"/dataasset"),redirect:"".concat(o,"/info"),isOk:s}),i.a.createElement(dn.a,{component:Da,path:"".concat(o,"/assetdetail/:id/:readOnly"),redirect:"".concat(o,"/info"),isOk:s,developerInfo:t}),i.a.createElement(c.Redirect,{to:"".concat(o,"/info")}))))))}}])&&Ka(t.prototype,n),r&&Ka(t,r),s}(o.Component))||Na},ccuU:function(e,t,n){},hZG8:function(e,t,n){},ivPg:function(e,t,n){e.exports=n.p+"static/images/no-source-tip.681eb7825cf81b5da33967ff8571f3c6.png"},kmdx:function(e,t,n){},sCcn:function(e,t,n){},wA0d:function(e,t,n){},y1Sk:function(e,t,n){}}]);