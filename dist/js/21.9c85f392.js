(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{a971:function(e,t,a){},uTBI:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return D}));a("pNMO"),a("4Brf"),a("07d7"),a("0oug"),a("4mDm"),a("PKPk"),a("3bBZ"),a("+2oP"),a("sMBO"),a("pjDv"),a("mbEz");var n=a("wCAj"),r=(a("K4yd"),a("9yH6")),o=(a("U8R4"),a("+eQT")),l=(a("8QGh"),a("2fM7")),c=(a("FZtP"),a("2B1R"),a("q1tI")),i=a.n(c),u=(a("55Ip"),a("MeRu")),s=a("Nlzp"),m=(a("NsHq"),a("a971"),a("Wgwc")),d=a.n(m),f=a("MT78");function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],l=!0,c=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var h=[{label:"近7天",value:"1"},{label:"近30天",value:"2"}],p=l.a.Option,v=o.a.RangePicker,w=[{label:"新增用户数",count:0},{label:"活跃用户数",count:0},{label:"新增用户次日留存率(昨日)",count:0},{label:"活跃用户次日留存率(昨日)",count:0},{label:"累计用户数",count:0}],E=[{title:"日期",dataIndex:"summaryDate",key:"summaryDate"},{title:"新增用户数",dataIndex:"newNum",key:"newNum"},{title:"活跃用户数",dataIndex:"activeNum",key:"activeNum"},{title:"新增用户次日留存率(昨日)",dataIndex:"newRatio",key:"newRatio"},{title:"活跃用户次日留存率(昨日)",dataIndex:"activeRatio",key:"activeRatio"},{title:"累计用户数",dataIndex:"totalNum",key:"totalNum"}];function D(){Object(c.useEffect)((function(){z()}),[]);var e=b(Object(c.useState)([]),2),t=e[0],a=e[1],o=b(Object(c.useState)(),2),m=o[0],y=o[1],D=b(Object(c.useState)(),2),g=D[0],Y=D[1],x=b(Object(c.useState)("1"),2),N=x[0],O=x[1],S=b(Object(c.useState)(w),2),j=S[0],M=S[1],I=b(Object(c.useState)(0),2),k=I[0],R=I[1],A=b(Object(c.useState)([]),2),C=A[0],T=A[1],L=b(Object(c.useState)([]),2),P=L[0],B=L[1],F=b(Object(c.useState)(""),2),K=F[0],q=F[1],z=function(){Object(s.c)(s.a.getProductPlus,{}).then((function(e){B(e.data)}))};Object(c.useEffect)((function(){G()}),[N,g,K]),Object(c.useEffect)((function(){C.length&&J(C)}),[k]);var G=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};1==N?(t.endDate=d()().subtract(1,"day").format("YYYY-MM-DD"),t.startDate=d()().subtract(8,"day").format("YYYY-MM-DD")):2===N&&(t.endDate=d()().subtract(1,"day").format("YYYY-MM-DD"),t.startDate=d()().subtract(31,"day").format("YYYY-MM-DD")),g&&g.length&&(t.endDate=g[1].format("YYYY-MM-DD"),t.startDate=g[0].format("YYYY-MM-DD")),K&&(t.productId=K),Object(s.c)(s.a.userDataAn,t,{loading:e}).then((function(e){J(e.data.summaryList),H(e.data),T(e.data.summaryList)}))},H=function(e){var t=[{label:"新增用户数",count:e.newNum},{label:"活跃用户数",count:e.activeNum},{label:"新增用户次日留存率(昨日)",count:e.newRatio},{label:"活跃用户次日留存率(昨日)",count:e.activeRatio},{label:"累计用户数",count:e.totalNum}];M(t)},J=function(e){var t,a,n,r=(t=[],a=[],e.forEach((function(e){t.push(e.summaryDate),0==k?a.push(e.newNum):1==k?a.push(e.activeNum):2==k?a.push(e.newRatio):3==k&&a.push(e.activeRatio)})),{xTime:t,xData:a}),o=document.getElementById("echart-show"),l=f.init(o);(n={xAxis:{type:"category",data:r.xTime,axisTick:{show:!1},axisLine:{lineStyle:{color:"#E9E9E9"}},axisLabel:{textStyle:{color:"#000"}}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#000"}},splitLine:{show:!0,lineStyle:{color:"#E9E9E9"}}},grid:{left:"0%",right:"2%",bottom:"0%",top:"4%",containLabel:!0},series:[{data:r.xData,type:"line",lineStyle:{normal:{color:"#1890FF"}},itemStyle:{normal:{color:"#1890FF"}}}]})&&l.setOption(n)};return i.a.createElement("div",{id:"device-analysis"},i.a.createElement(u.a,{title:"用户分析"},i.a.createElement("div",{className:"top-select"},i.a.createElement(l.a,{style:{width:200},allowClear:!0,onChange:function(e){q(e)}},P.map((function(e){return i.a.createElement(p,{value:e.productId,key:e.productId},e.productName)}))))),i.a.createElement("div",{className:"comm-shadowbox filter-wrap"},i.a.createElement(r.a.Group,{options:h,onChange:function(e){Y(null),O(e.target.value)},value:N,optionType:"button"}),i.a.createElement(v,{value:m||g,disabledDate:function(e){if(!t||0===t.length)return!1;var a=t[0]&&e.diff(t[0],"days")>30;return t[1]&&t[1].diff(e,"days")>30||a},onCalendarChange:function(e){return a(e)},onChange:function(e){return function(e){Y(e)}(e)},onOpenChange:function(e){e?(y([]),a([])):y(void 0)},format:"YYYY-MM-DD"})),i.a.createElement("div",{className:"comm-shadowbox main-echart"},i.a.createElement("h3",null,"用户趋势分析"),i.a.createElement("div",{className:"echart-count-tab"},j.map((function(e,t){return i.a.createElement("div",function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({key:t,className:"count-item",onClick:function(){!function(e){4!=e&&R(e)}(t)}},"className",k==t?"current-tab":""),i.a.createElement("div",{className:"item-label"},e.label),i.a.createElement("div",{className:"item-number"},e.count))}))),i.a.createElement("div",{style:{height:"303px"},id:"echart-show"})),i.a.createElement("div",{className:"comm-shadowbox main-echart"},i.a.createElement("h3",null,"统计数据"),i.a.createElement("div",{className:"echart-download"},i.a.createElement("a",null,"下载数据")),i.a.createElement(n.a,{dataSource:C,columns:E,pagination:!1,rowKey:"summaryDate"})))}}}]);