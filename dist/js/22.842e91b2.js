(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"6hB6":function(e,t,r){},TUtz:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return j}));r("pNMO"),r("4Brf"),r("07d7"),r("0oug"),r("4mDm"),r("PKPk"),r("3bBZ"),r("+2oP"),r("sMBO"),r("pjDv"),r("L/Qf");var a=r("2/Rp"),n=(r("AUBz"),r("ZTPi")),l=r("q1tI"),o=r.n(l),c=(r("6hB6"),r("gySj"),r("DFOY")),i=(r("tULf"),r("Vl3Y")),m=(r("1vPl"),r("5rEg")),u=(r("FZtP"),r("rVDo")),s=r("Nlzp");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,l=[],o=!0,c=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(l.push(a.value),!t||l.length!==t);o=!0);}catch(e){c=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(c)throw n}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var p=m.a.TextArea;function b(e,t){var r=d(i.a.useForm(),1)[0];Object(l.useEffect)((function(){b()}),[]);var a=d(Object(l.useState)([]),2),n=a[0],f=a[1],b=function(){Object(s.c)(s.a.getWorkOrderDictionary).then((function(e){var t=[];for(var r in e.data.problemTypeOneLevel){var a={value:r,label:e.data.problemTypeOneLevel[r],children:[]};for(var n in e.data.problemTypeTwoLevel[r])a.children.push({value:n,label:e.data.problemTypeTwoLevel[r][n]});t.push(a)}f(t)}))},y=Object(l.useRef)(null);var v=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r.validateFields().then((function(t){var a,l,o=t.image.reduce((function(e,t){return e+=t.url}),"");n.forEach((function(e){e.value==t.problemType[0]&&(a=e.label,e.children.forEach((function(e){e.value==t.problemType[1]&&(l=e.label)})))}));var c={phone:t.phone,problemDesc:t.problemDesc,image:o,problemTypeOneLevel:t.problemType[0],problemTypeTwoLevel:t.problemType[1],problemTypeOneName:a,problemTypeTwoName:l};Object(s.c)(s.a.subWorkOrder,c,{load:e}).then((function(e){r.resetFields()}))})).catch((function(e){console.log(e)}))};return Object(l.useImperativeHandle)(t,(function(){return{subOrder:v}})),o.a.createElement("div",{id:"order-home-sub"},o.a.createElement(i.a,{name:"basic",form:r,initialValues:{image:[]}},o.a.createElement(i.a.Item,{label:"选择内容分类",name:"problemType",rules:[{required:!0}]},o.a.createElement(c.a,{options:n,onChange:function(e){console.log(e)},style:{width:"612px"},popupClassName:"order-Cascader"})),o.a.createElement(i.a.Item,{label:"问题描述",name:"problemDesc",rules:[{required:!0}]},o.a.createElement(p,{rows:4,style:{width:"612px"}})),o.a.createElement(i.a.Item,{label:"上传问题图片/视频",name:"image"},o.a.createElement(u.b,{style:{width:"612px"},ref:y,maxCount:10,format:".jpg,.png,.gif",maxSize:5})),o.a.createElement(i.a.Item,{label:"联系方式",name:"phone"},o.a.createElement(m.a,{style:{width:"612px"}}))))}b=Object(l.forwardRef)(b);r("Re5i");var y=r("/wGt"),v=(r("qNb/"),r("PArb")),h=(r("mbEz"),r("wCAj"));r("2B1R"),r("rB9j"),r("EnZy");function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,l=[],o=!0,c=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(l.push(a.value),!t||l.length!==t);o=!0);}catch(e){c=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(c)throw n}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}n.a.TabPane;function O(){var e=E(Object(l.useState)(!1),2),t=e[0],r=e[1],a=E(Object(l.useState)([]),2),n=a[0],c=a[1],i=E(Object(l.useState)(!1),2),m=(i[0],i[1],E(Object(l.useState)({}),2)),u=m[0],d=m[1],f=[{title:"订阅号",dataIndex:"workOrderId",key:"workOrderId"},{title:"问题分类",dataIndex:"age",key:"age",render:function(e,t){return o.a.createElement("span",null,t.problemTypeOneName," - ",t.problemTypeTwoName)}},{title:"提交时间",dataIndex:"createTime",key:"createTime"},{title:"工单状态",dataIndex:"status",key:"status",render:function(e,t){return o.a.createElement("span",null,e?"已回复":"未回复")}},{title:"操作",dataIndex:"address",key:"address",render:function(e,t){return o.a.createElement("span",null,o.a.createElement("a",{onClick:function(){var e;e=t.workOrderId,p(e),r(!0)}},"查看"))}}],p=function(e){Object(s.c)(s.a.WorkOrderDetail,{workOrderId:e}).then((function(e){d(e.data)}))};return Object(l.useEffect)((function(){!function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(s.c)(s.a.WorkOrderList,{},{load:e}).then((function(e){c(e.data.list)}))}()}),[]),o.a.createElement("div",{id:"order-home-self"},o.a.createElement(h.a,{dataSource:n,columns:f,rowKey:"workOrderId"}),o.a.createElement(y.a,{title:"工单详情",placement:"right",closable:!1,onClose:function(){r(!1)},visible:t,width:470},o.a.createElement("div",{className:"my-order-detail"},o.a.createElement("div",{className:"order-item"},o.a.createElement("div",{className:"order-item-label"},"问题分类："),o.a.createElement("div",{className:"order-item-text"},u.problemTypeOneName,"-",u.problemTypeTwoName,o.a.createElement("span",{className:"order-item-span",style:{color:u.status?"#15C054":"#2F78FF"}},u.status?"已回复":"待回复"))),o.a.createElement("div",{className:"order-item"},o.a.createElement("div",{className:"order-item-label"},"提交时间："),o.a.createElement("div",{className:"order-item-text"},u.createTime)),o.a.createElement("div",{className:"order-item"},o.a.createElement("div",{className:"order-item-label"},"问题描述："),o.a.createElement("div",{className:"order-item-text"},u.problemDesc)),o.a.createElement("div",{className:"order-item"},o.a.createElement("div",{className:"order-item-label"},"上传问题图片/视频："),o.a.createElement("div",{className:"order-item-text"},u.image&&u.image.split(",").map((function(e,t){return o.a.createElement("img",{key:t})})))),o.a.createElement("div",{className:"order-item"},o.a.createElement("div",{className:"order-item-label"},"联系方式："),o.a.createElement("div",{className:"order-item-text"},u.phone)),1==u.status?o.a.createElement("div",{className:"order-feedback"},o.a.createElement("div",{style:{margin:"0 -24px"}},o.a.createElement(v.a,null)),o.a.createElement("div",{className:"feedback-title"},"回复详情："),o.a.createElement("div",{className:"feedback-dec"},u.replyContent)):null)))}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,l=[],o=!0,c=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(l.push(a.value),!t||l.length!==t);o=!0);}catch(e){c=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(c)throw n}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var N=n.a.TabPane;function j(){var e=w(Object(l.useState)("1"),2),t=e[0],r=e[1],c=Object(l.useRef)(null);return o.a.createElement("div",{id:"order-home"},o.a.createElement("div",{className:"common-tab comm-shadowbox"},o.a.createElement(n.a,{defaultActiveKey:"1",className:"shadow-tab",onChange:function(e){r(e)}},o.a.createElement(N,{key:"1",tab:"提交工单"},o.a.createElement(b,{ref:c})),o.a.createElement(N,{key:"2",tab:"我的工单"},o.a.createElement(O,null)))),"1"==t&&o.a.createElement("div",{className:"order-home-footer"},o.a.createElement(a.a,{type:"primary",onClick:function(){c.current.subOrder()}},"提交")))}}}]);