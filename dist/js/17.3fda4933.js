(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{QOSG:function(e,t,a){"use strict";a.r(t);a("NBAS"),a("SuFq"),a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR"),a("4Brf"),a("0oug"),a("4mDm"),a("PKPk"),a("3bBZ"),a("k3Gp");var n=a("kLXV"),r=(a("YQTV"),a("NUBc")),o=(a("mbEz"),a("wCAj")),c=(a("L/Qf"),a("2/Rp")),l=(a("8QGh"),a("2fM7")),i=(a("1vPl"),a("5rEg")),s=a("BkRI"),u=a.n(s),d=(a("SYor"),a("07d7"),a("5s+n"),a("p532"),a("ma9I"),a("2B1R"),a("q1tI")),p=a.n(d),m=(a("/MKj"),a("mU7p")),f=a("kqA8"),h=a("FC04"),y=a("P2RN"),g=a("MeRu"),b=a("Nlzp"),P=a("Uz1T");a("dP/0");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){N(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=C(e);if(t){var r=C(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return k(this,a)}}function k(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?V(e):t}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=i.a.Search,L=l.a.Option,x=["开发中","已发布","审核中"],M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(v,e);var t,a,s,d=S(v);function v(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=d.call(this,e)).getProductListNew=function(){Object(b.c)(b.a.getProductListNew,w({},t.state.listParams),{loading:!0}).then((function(e){var a={current:e.data.current,size:e.data.size,pages:e.data.pages,total:e.data.total};t.setState({dataSource:e.data.records,pager:a})}))},t.searchProduct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=u()(t.state.listParams);a.productName=e.trim(),a.current=1,t.setState({listParams:a},(function(){t.getProductListNew()}))},t.handleChange=function(e){var a=u()(t.state.listParams);a.mode=e,t.setState({listParams:a},(function(){t.getProductListNew()}))},t.changePage=function(e){var a=w({},t.state.listParams);a.current=e,t.setState({listParams:a},(function(){t.getProductListNew()}))},t.deleteModalOKHandle=function(){var e=t.state,a=e.selectedItem,n=e.deleteInputValue.trim(),r=a.productId;if(!n||"delete"!==n)return Object(y.a)({type:"warn",message:"异常操作",description:'请输入"delete"来确认删除！'});t.setState({deleteLoading:!0},(function(){Object(b.c)(b.a.deleteProductNew,{productId:r}).then((function(e){Object(y.a)({type:"success",description:"删除成功！"}),t.setState({deleteVisible:!1,deleteInputValue:""}),t.getProductListNew()})).finally((function(){return t.setState({deleteLoading:!1})}))}))},t.copyModalOKHandle=function(){var e=t.state,a=e.copyInputValue,n=e.selectedItem,r=a.trim(),o=n.productId;if(!r)return Object(y.a)({type:"warn",message:"异常操作",description:"请输入产品名称！"});t.setState({copyLoading:!0},(function(){Object(b.c)(b.a.copyProductNew,{productId:o,productName:r}).then((function(e){0===e.code&&Object(y.a)({type:"success",description:"复制成功！"}),t.setState({listParams:u()(t.defaultListParams),copyModalVisible:!1,copyInputValue:""},(function(){t.getProductListNew()}))})).finally((function(){t.setState({copyLoading:!1})}))}))},t.createProduct=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({isClicked:!e})},t.toggleOldProVisiable=function(){t.setState({oldProIngVisiable:!t.state.oldProIngVisiable})},t.changeVisible=function(){t.setState({isClicked:!1})},t.defaultListParams={current:1,size:6,productName:"",mode:""},t.state={dataSource:[],pager:{},listParams:u()(t.defaultListParams),selectedItem:null,deleteVisible:!1,deleteLoading:!1,deleteInputValue:"",copyModalVisible:!1,copyLoading:!1,copyInputValue:"",isClicked:!1,oldProIngVisiable:!1},t.columns=[{title:"产品",dataIndex:"productName",key:"productName",render:function(e,t,a){return p.a.createElement("div",{className:"pro-show"},p.a.createElement(f.a,{icon:t.productIcon}),p.a.createElement("div",{className:"pro-show-cont"},p.a.createElement("div",{className:"pro-show-cont-title"},e),p.a.createElement("div",{className:"pro-show-cont-item"},"产品ID：",t.productId),p.a.createElement("div",{className:"pro-show-cont-item"},"型号：",t.productCode)))}},{title:"品类",dataIndex:"deviceType",key:"deviceType"},{title:"智能化方案",dataIndex:"schemeName",key:"schemeName"},{title:"通信协议",dataIndex:"bindTypeStr",key:"bindTypeStr"},{title:"状态",dataIndex:"status",key:"status",render:function(e){return p.a.createElement("span",{className:"status status-".concat(e)},m.d[""+e]||"")}},{title:"操作",key:"",render:function(e,a,n){return p.a.createElement("div",{className:"operation"},p.a.createElement("span",{className:"continue",onClick:t.clickProductInfo.bind(V(t),a)},1===a.status?"开发详情":"继续开发"),2!==a.status&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"copy mar25",onClick:t.operateProduct.bind(V(t),a,"copyModalVisible")},"复制"),p.a.createElement("span",{className:"delete",onClick:t.operateProduct.bind(V(t),a,"deleteVisible")},"删除")))}}],t}return t=v,(a=[{key:"componentDidMount",value:function(){this.getProductListNew()}},{key:"clickProductInfo",value:function(e){if(e.isOldProduct&&1!==e.status)this.toggleOldProVisiable();else{var t="details";1!==e.status?t="edit":e.isOldProduct&&(t="detail"),sessionStorage.setItem("productItem",JSON.stringify(e)),this.props.history.push({pathname:"/open/product/proManage/".concat(t,"/").concat(e.productId)})}}},{key:"operateProduct",value:function(e,t){var a;if(2===e.mode)return!1;this.setState((N(a={},t,!0),N(a,"selectedItem",e),a))}},{key:"modalCancelHandle",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copyModalVisible",a=arguments.length>1?arguments[1]:void 0;this.setState((N(e={},t,!1),N(e,a,""),e))}},{key:"inputOnChangeHandle",value:function(e,t){this.setState(N({},e,t.target.value))}},{key:"render",value:function(){var e=this,t=this.state,a=t.listParams,s=t.selectedItem,u=t.deleteVisible,d=t.deleteLoading,m=t.deleteInputValue,f=t.copyModalVisible,y=t.copyLoading,b=t.copyInputValue,v=t.isClicked,O=t.dataSource,w=t.pager,N=t.oldProIngVisiable;return p.a.createElement("section",{className:"page-wrapper"},p.a.createElement(g.a,{title:"我的智能产品"}),p.a.createElement("div",{className:"page-header comm-shadowbox"},p.a.createElement("div",{className:"page-header-left"},p.a.createElement(j,{placeholder:"产品名称/ID/型号",allowClear:!0,onSearch:function(t){return e.searchProduct(t)},style:{width:465,margin:"0 22px"}}),p.a.createElement(l.a,{allowClear:!0,onChange:this.handleChange,placeholder:"产品状态",style:{width:120}},x.map((function(e,t){return p.a.createElement(L,{value:t,key:e},e)})))),p.a.createElement("div",{className:"page-header-right"},p.a.createElement(c.a,{type:"primary",onClick:this.createProduct.bind(this,!1)},"创建产品"))),p.a.createElement("div",{className:"bg-wrapper flex1 flex-column comm-shadowbox"},p.a.createElement("div",{className:"page-table-wrapper flex-column flex1"},p.a.createElement(o.a,{rowKey:"productId",dataSource:O,columns:this.columns,pagination:!1}),p.a.createElement("footer",{className:"list-pagination"},w&&w.pages>0?p.a.createElement(r.a,{className:"self-pa",total:w.total,current:a.current,defaultCurrent:1,defaultPageSize:a.size,onChange:this.changePage,showTotal:function(e){return p.a.createElement("span",null,"共 ",p.a.createElement("a",null,e)," 条")},showQuickJumper:!0,hideOnSinglePage:!0}):null))),s&&u&&p.a.createElement(h.a,{visible:u,modalOKHandle:this.deleteModalOKHandle,modalCancelHandle:this.modalCancelHandle.bind(this,"deleteVisible","deleteInputValue"),targetName:s.productName,confirmLoading:d,title:"删除产品",needWarnIcon:!0,descText:"即将删除的产品",tipText:"产品的所有信息将完全被删除，无法找回，请谨慎操作"},p.a.createElement(i.a,{className:"modal-content-input",onChange:function(t){e.inputOnChangeHandle("deleteInputValue",t)},onPressEnter:this.deleteModalOKHandle,placeholder:"请输入“delete”确认删除该产品",maxLength:20,value:m})),s&&f&&p.a.createElement(h.a,{visible:f,modalOKHandle:this.copyModalOKHandle,modalCancelHandle:this.modalCancelHandle.bind(this,"copyModalVisible","copyInputValue"),targetName:s.productName,confirmLoading:y,title:"复制产品",descText:"即将复制的产品",tipText:"创建与原产品的功能和服务配置一样的新产品"},p.a.createElement(i.a,{className:"modal-content-input",onChange:function(t){e.inputOnChangeHandle("copyInputValue",t)},onPressEnter:this.copyModalOKHandle,value:b,maxLength:20,placeholder:"新产品名称"})),v&&p.a.createElement(P.a,{visible:v,cancelHandle:this.createProduct.bind(this,!0),getProductListNew:function(){e.getProductListNew()}}),p.a.createElement(n.a,{title:"更新升级",visible:N,onOk:this.toggleOldProVisiable,onCancel:this.toggleOldProVisiable},p.a.createElement("p",null," clife平台全新升级，老版本的开发中状态产品，需要在新平台重新创建")))}}])&&E(t.prototype,a),s&&E(t,s),v}(d.PureComponent);t.default=M},"dP/0":function(e,t,a){},mU7p:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return l}));var n={0:"开发中",1:"已发布",2:"审核中"},r={1:"草稿",2:"审核中",3:"灰度版本",4:"正式版本"},o={1:"SDK开发",2:"在线拖拽"},c={0:"草稿",1:"已发布",2:"删除"},l=[{value:"已入网 ",key:"1 "},{key:"0 ",value:"未入网 "}]}}]);