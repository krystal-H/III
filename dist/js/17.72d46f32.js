(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"15YJ":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return J}));n("NBAS"),n("SuFq"),n("zKZe"),n("pNMO"),n("4Brf"),n("07d7"),n("0oug"),n("4mDm"),n("PKPk"),n("3bBZ");var a=n("E+oP"),r=n.n(a),o=(n("FZtP"),n("tkto"),n("rB9j"),n("UxlC"),n("oVuX"),n("2B1R"),n("Rm1S"),n("q1tI")),c=n.n(o),s=n("55Ip"),i=n("/MKj"),u=n("Nlzp"),l=n("d8kt"),f=n("vS40"),p=n("k+EZ"),d=n("UpsA"),g=n("MeRu"),m=n("MUf8"),y=(n("mbEz"),n("wCAj")),h=(n("L/Qf"),n("2/Rp")),b=(n("K4yd"),n("9yH6")),v=n("cu44"),w=n("DgvE"),R=[{title:"消息标题",dataIndex:"noticeTitle",render:function(e,t){var n=t.noticeTitle,a=t.noticeId,r=t.read;return c.a.createElement(s.Link,{className:r?"gray":"",to:{pathname:"/messageCenter/detail/".concat(a),state:{read:r}}},n)}},{title:"消息类型",dataIndex:"noticeTypeName",width:"300px"},{title:"时间",width:"400px",dataIndex:"sendTime",render:function(e,t){var n=t.sendTime;return c.a.createElement("span",null,w.a.utcToDev(+n))}}];function E(e){var t=e.messageList,n=void 0===t?[]:t,a=e.selectedRowKeys,r=e.noticeType,o=e.changeMessageType,s=e.setReaded,i=e.onSelectChange,u=e.newMessageNums,l=e.pager,f=e.pageIndex,p=e.changePage,d=e.read,g=a.length>0,m=u.totalUnRead,E=u.processUnRead,x=u.serviceUnRead,C=u.publicUnRead,I=!(!0===d);n=Object(w.c)(n);var O={selectedRowKeys:a,onChange:i,getCheckboxProps:function(e){return{disabled:e.read}}};return c.a.createElement(v.a,null,c.a.createElement("div",{className:"message-wrapper"},c.a.createElement(b.a.Group,{value:r+"",onChange:o},c.a.createElement(b.a.Button,{value:""},"全部类型消息 ",I?T(m):""),c.a.createElement(b.a.Button,{value:"2"},"  流程消息 ",I?T(E):""),c.a.createElement(b.a.Button,{value:"3"},"  服务消息 ",I?T(x):""),c.a.createElement(b.a.Button,{value:"1"},"  公告消息 ",I?T(C):"")),c.a.createElement(h.a,{style:{float:"right"},disabled:!g,onClick:function(){return s()},type:"primary"},"标记已读")),c.a.createElement("section",{className:"table-wrapper"},c.a.createElement(y.a,{rowSelection:O,dataSource:n,columns:R,pagination:{total:l.totalRows,current:f,defaultCurrent:1,defaultPageSize:20,onChange:function(e){return p(e)},showTotal:function(e){return c.a.createElement("span",null,"共 ",c.a.createElement("a",null,e)," 条")},showQuickJumper:!0,hideOnSinglePage:!0}})))}function T(e){return e?(e>99&&(e="99+"),"(".concat(e,")")):""}n("ma9I");function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=S(e);if(t){var r=S(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return N(this,n)}}function N(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M,j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(o,e);var t,n,a,r=P(o);function o(){var e;C(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).state={detail:null},e.getMessageDetail=function(){var t=e.props,n=t.match,a=void 0===n?{}:n,r=t.location,o=t.setReaded,c=a.params,s=(void 0===c?{}:c).noticeId,i=r.state,l=(void 0===i?{}:i).read;s&&Object(u.b)(u.a.getNoticeDetail,{noticeId:s},{needVersion:1.1}).then((function(t){!1===l&&o(s),e.setState({detail:t.data})}))},e.goBackList=function(){e.props.history.replace({pathname:"/messageCenter/list"})},e}return t=o,(n=[{key:"componentDidMount",value:function(){this.getMessageDetail()}},{key:"render",value:function(){var e=this.state.detail;return c.a.createElement(v.a,null,e&&c.a.createElement("div",{className:"message-detail-wrapper"},c.a.createElement("h2",{className:"message-title"},e.noticeTitle),c.a.createElement("p",{className:"message-tips"},c.a.createElement("span",null,c.a.createElement("b",null,"发布时间："),w.a.utcToDev(e.sendTime)),c.a.createElement("span",null,c.a.createElement("b",null,"消息类型："),e.noticeTypeName)),c.a.createElement("div",{className:"message-content",dangerouslySetInnerHTML:{__html:e.noticeContent}}),c.a.createElement("a",{className:"left-top",onClick:this.goBackList},"返回消息列表")))}}])&&I(t.prototype,n),a&&I(t,a),o}(c.a.PureComponent);n("yeL8");function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=U(e);if(t){var r=U(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return D(this,n)}}function D(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=Object(i.connect)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS(),newMessageNums:e.getIn(["message","newMessageNums"]).toJS()}}),(function(e){return{getNewMessageNums:function(){return e(Object(l.a)())},getDeveloperInfo:function(){return e(Object(f.c)())}}}))(M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(i,e);var t,n,a,o=K(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).getMessageList=function(e,n){var a=t.state,r=a.noticeType,o=a.read,c=a.pageIndex,s=a.selectedRowKeys,i=a.messageList,l={pageIndex:c,pageRows:20,noticeType:r,read:o},f={};return i.length>0&&s.length===i.length&&l.pageIndex>1&&l.pageIndex--,void 0!==e&&(l[n]=e,"pageIndex"!==n&&(l.pageIndex=1)),Object.keys(l).forEach((function(e){""!==l[e]&&(f[e]=l[e])})),Object(u.b)(u.a.getNoticeList,f,{needVersion:1.1,loading:!0}).then((function(a){var r=a.data,o={messageList:r.list,pager:r.pager,selectedRowKeys:[]};n&&(o[n]=e,"pageIndex"!==n&&(o.pageIndex=1)),t.setState(o)}))},t.changeRead=function(e){var n=t.state.read,a=t.props.history,r=!(window.location.hash.indexOf("/messageCenter/detail/")>-1);n===e&&r||t.getMessageList(e,"read").then((function(){r||a.replace({pathname:"/messageCenter/list"})}))},t.changeMessageType=function(e){var n=e.target.value;t.getMessageList(n,"noticeType")},t.onSelectChange=function(e){t.setState({selectedRowKeys:e})},t.setReaded=function(e){var n=t.state,a=n.selectedRowKeys,r=n.messageList,o=t.props.getNewMessageNums,c="";c=e||a.map((function(e){return r[e].noticeId})).join(","),Object(u.c)(u.a.setRead,{noticeIds:c},{needVersion:1.1,loading:!0}).then((function(e){t.getMessageList(),o()}))},t.chearSelectedRowKeys=function(){t.setState({selectedRowKeys:[]})},t.changePage=function(e){t.getMessageList(e,"pageIndex")},t.state={selectedRowKeys:[],messageList:[],noticeType:"",read:"",pager:{totalPages:0,currPageRows:null},pageIndex:1},t.pageTabClickHandles=[function(){return t.changeRead("")},function(){return t.changeRead(!1)},function(){return t.changeRead(!0)}],t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.newMessageNums,n=e.getNewMessageNums,a=e.getDeveloperInfo,o=e.developerInfo;r()(t)&&n(),r()(o)&&a(),this.getMessageList()}},{key:"render",value:function(){var e=this,t=this.state,n=t.messageList,a=t.selectedRowKeys,r=t.pager,o=t.noticeType,i=t.pageIndex,u=t.read,l=this.props,f=l.match,y=l.newMessageNums,h=void 0===y?{}:y,b=l.developerInfo,v=void 0===b?{}:b,w=f.path,R=h.totalUnRead;return c.a.createElement(m.a,null,c.a.createElement("div",{className:"page-header-wrapper"},c.a.createElement(p.a,{newMessageNums:h,developerInfo:v,noCollapsed:!0})),c.a.createElement("div",{className:"page-content-wrapper message-main"},c.a.createElement(d.a,{Nums:[0,R||0,0],clickHandles:this.pageTabClickHandles}),c.a.createElement("section",{className:"right-wrapper flex-column"},c.a.createElement(g.a,{noback:!0,title:"消息中心"}),c.a.createElement("div",{className:"flex1 scroll-y"},c.a.createElement(s.Switch,null,c.a.createElement(s.Route,{path:"".concat(w,"/list"),render:function(t){return c.a.createElement(E,L({},t,{messageList:n,selectedRowKeys:a,noticeType:o,pager:r,pageIndex:i,changePage:e.changePage,onSelectChange:e.onSelectChange,newMessageNums:h,setReaded:e.setReaded,read:u,changeMessageType:e.changeMessageType}))}}),c.a.createElement(s.Route,{path:"".concat(w,"/detail/:noticeId"),render:function(t){return c.a.createElement(j,L({},t,{setReaded:e.setReaded}))}}),c.a.createElement(s.Redirect,{to:"".concat(w,"/list")}))))))}}])&&_(t.prototype,n),a&&_(t,a),i}(o.Component))||M},QZRf:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={"/userCenter":{title:{titleIcon:"user",titleText:"用户中心"},tabs:[{tabText:"基本资料",tabPath:"/userCenter/info"},{tabText:"安全设置",tabPath:"/userCenter/security"},{tabText:"访问用户",tabPath:["/userCenter/visit","/userCenter/look"]},{tabText:"用户角色",tabPath:["/userCenter/role","/userCenter/add"]},{tabText:"操作日志",tabPath:"/userCenter/log"},{tabText:"实例管理",tabPath:["/userCenter/case"]},{tabText:"授权管理",tabPath:["/userCenter/authorize"]},{tabText:"数据资产",tabPath:["/userCenter/dataasset","userCenter/assetdetail"]}]},"/messageCenter":{title:{titleIcon:"sound",titleText:"消息中心"},notRoute:!0,tabs:[{tabText:"全部消息"},{tabText:"未读消息"},{tabText:"已读消息"}]}}},yeL8:function(e,t,n){}}]);