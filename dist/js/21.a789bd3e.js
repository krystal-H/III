(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{a971:function(t,e,a){},uTBI:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return w}));a("pNMO"),a("4Brf"),a("07d7"),a("0oug"),a("4mDm"),a("PKPk"),a("3bBZ"),a("+2oP"),a("sMBO"),a("pjDv"),a("mbEz");var n=a("wCAj"),r=(a("K4yd"),a("9yH6")),o=(a("U8R4"),a("+eQT")),c=(a("8QGh"),a("2fM7")),l=(a("FZtP"),a("2B1R"),a("q1tI")),u=a.n(l),i=(a("55Ip"),a("MeRu")),s=a("Nlzp"),m=(a("NsHq"),a("a971"),a("Wgwc")),d=a.n(m),f=a("MT78");function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var n,r,o=[],c=!0,l=!1;try{for(a=a.call(t);!(c=(n=a.next()).done)&&(o.push(n.value),!e||o.length!==e);c=!0);}catch(t){l=!0,r=t}finally{try{c||null==a.return||a.return()}finally{if(l)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var h=[{label:"近7天",value:"1"},{label:"近30天",value:"2"}],Y=c.a.Option,D=o.a.RangePicker,p=[{label:"新增用户数",count:0},{label:"活跃用户数",count:0},{label:"新增用户次日留存率(昨日)",count:0},{label:"活跃用户次日留存率(昨日)",count:0},{label:"累计用户数",count:0}],v=[{title:"日期",dataIndex:"summaryDate",key:"summaryDate"},{title:"新增用户数",dataIndex:"newNum",key:"newNum"},{title:"活跃用户数",dataIndex:"activeNum",key:"activeNum"},{title:"新增用户次日留存率(昨日)",dataIndex:"newRatio",key:"newRatio"},{title:"活跃用户次日留存率(昨日)",dataIndex:"activeRatio",key:"activeRatio"},{title:"累计用户数",dataIndex:"totalNum",key:"totalNum"}];function w(){Object(l.useEffect)((function(){z()}),[]);var t=b(Object(l.useState)([]),2),e=t[0],a=t[1],o=b(Object(l.useState)(),2),m=o[0],y=o[1],w=b(Object(l.useState)(),2),E=w[0],M=w[1],g=b(Object(l.useState)("1"),2),x=g[0],N=g[1],O=b(Object(l.useState)(p),2),j=O[0],S=O[1],I=b(Object(l.useState)(0),2),k=I[0],R=I[1],C=b(Object(l.useState)([]),2),A=C[0],T=C[1],L=b(Object(l.useState)([]),2),P=L[0],B=L[1],F=b(Object(l.useState)(""),2),K=F[0],q=F[1],z=function(){Object(s.c)(s.a.getProductPlus,{}).then((function(t){B(t.data)}))};Object(l.useEffect)((function(){G()}),[x,E,K]),Object(l.useEffect)((function(){A.length&&J(A)}),[k]);var G=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e={};1==x?(e.endDate=d()().subtract(1,"day").format("YYYY-MM-DD"),e.startDate=d()().subtract(8,"day").format("YYYY-MM-DD")):2===x&&(e.endDate=d()().subtract(1,"day").format("YYYY-MM-DD"),e.startDate=d()().subtract(31,"day").format("YYYY-MM-DD")),E&&E.length&&(e.endDate=E[1].format("YYYY-MM-DD"),e.startDate=E[0].format("YYYY-MM-DD")),K&&(e.productId=K),Object(s.c)(s.a.userDataAn,e,{loading:t}).then((function(t){J(t.data.summaryList),H(t.data),T(t.data.summaryList)}))},H=function(t){var e=[{label:"新增用户数",count:t.newNum},{label:"活跃用户数",count:t.activeNum},{label:"新增用户次日留存率(昨日)",count:t.newRatio},{label:"活跃用户次日留存率(昨日)",count:t.activeRatio},{label:"累计用户数",count:t.totalNum}];S(e)},J=function(t){var e,a,n,r=(e=[],a=[],t.forEach((function(t){e.push(t.summaryDate),0==k?a.push(t.newNum):1==k?a.push(t.activeNum):2==k?a.push(t.newRatio):3==k&&a.push(t.activeRatio)})),{xTime:e,xData:a}),o=document.getElementById("echart-show"),c=f.init(o);(n={xAxis:{type:"category",data:r.xTime,axisTick:{show:!1},axisLine:{lineStyle:{color:"#E9E9E9"}},axisLabel:{textStyle:{color:"#000"}}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#000"}},splitLine:{show:!0,lineStyle:{color:"#E9E9E9"}}},grid:{left:"0%",right:"2%",bottom:"0%",top:"4%",containLabel:!0},series:[{data:r.xData,type:"line",lineStyle:{normal:{color:"#1890FF"}},itemStyle:{normal:{color:"#1890FF"}}}]})&&c.setOption(n)};return u.a.createElement("div",{id:"device-analysis"},u.a.createElement(i.a,{title:"用户分析"},u.a.createElement("div",{className:"top-select"},u.a.createElement(c.a,{style:{width:200},allowClear:!0,onChange:function(t){q(t)}},P.map((function(t){return u.a.createElement(Y,{value:t.productId,key:t.productId},t.productName)}))))),u.a.createElement("div",{className:"comm-shadowbox filter-wrap"},u.a.createElement(r.a.Group,{options:h,onChange:function(t){M(null),N(t.target.value)},value:x,optionType:"button"}),u.a.createElement(D,{value:m||E,disabledDate:function(t){if(!e||0===e.length)return!1;var a=e[0]&&t.diff(e[0],"days")>30;return e[1]&&e[1].diff(t,"days")>30||a},onCalendarChange:function(t){return a(t)},onChange:function(t){return function(t){M(t)}(t)},onOpenChange:function(t){t?(y([]),a([])):y(void 0)},format:"YYYY-MM-DD"})),u.a.createElement("div",{className:"comm-shadowbox main-echart"},u.a.createElement("h3",null,"用户趋势分析"),u.a.createElement("div",{className:"echart-count-tab"},j.map((function(t,e){return u.a.createElement("div",function(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}({key:e,className:"count-item",onClick:function(){!function(t){4!=t&&R(t)}(e)}},"className",k==e?"current-tab":""),u.a.createElement("div",{className:"item-label"},t.label),u.a.createElement("div",{className:"item-number"},t.count))}))),u.a.createElement("div",{style:{height:"303px"},id:"echart-show"})),u.a.createElement("div",{className:"comm-shadowbox main-echart"},u.a.createElement("h3",null,"统计数据"),u.a.createElement("div",{className:"echart-download"},u.a.createElement("a",{onClick:function(){var t={};1==x?(t.endDate=d()().subtract(1,"day").format("YYYY-MM-DD"),t.startDate=d()().subtract(8,"day").format("YYYY-MM-DD")):2===x&&(t.endDate=d()().subtract(1,"day").format("YYYY-MM-DD"),t.startDate=d()().subtract(31,"day").format("YYYY-MM-DD")),E&&E.length&&(t.endDate=E[1].format("YYYY-MM-DD"),t.startDate=E[0].format("YYYY-MM-DD")),K&&(t.productId=K),Object(s.c)(s.a.userDataDown,t).then((function(t){window.open(t.data.path)}))}},"下载数据")),u.a.createElement(n.a,{dataSource:A,columns:v,pagination:!1,rowKey:"summaryDate"})))}}}]);