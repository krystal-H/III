(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"81qY":function(e,t,a){},OzjJ:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return at}));a("rB9j"),a("Rm1S");var n=a("q1tI"),r=a.n(n),o=a("55Ip"),l=(a("NBAS"),a("SuFq"),a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR"),a("4Brf"),a("07d7"),a("0oug"),a("4mDm"),a("PKPk"),a("3bBZ"),a("YQTV"),a("NUBc")),c=(a("L/Qf"),a("2/Rp")),i=(a("1vPl"),a("5rEg")),s=(a("qePV"),a("2B1R"),a("+2oP"),a("sMBO"),a("pjDv"),a("kqA8")),p=a("36rt"),u=a("FC04");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],l=!0,c=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function f(e){var t=d(Object(n.useState)(!1),2),a=t[0],l=t[1],c=e.Info,i=c.appId,m=c.appIconLow,f=c.appName,h=c.appType,y=c.appDesc;return r.a.createElement("div",{className:"application-item-card flex-row"},r.a.createElement(s.a,{icon:m}),r.a.createElement("div",{className:"application-info flex-column flex1"},r.a.createElement(o.Link,{key:"detail",to:"/open/base/application/details/"+i,target:"_blank"},r.a.createElement("span",{className:"name"},f)),r.a.createElement("div",{className:"application-id"},"APPID：",i),r.a.createElement("span",{className:"type"},"应用类型：",0===Number(h)?"移动应用":"小程序"),r.a.createElement("div",{title:y,className:"application-desc"},y)),r.a.createElement("div",{className:"del-app",onClick:function(){return l(!0)}},r.a.createElement(p.a,{type:"icon-delete",style:{fontSize:18}}),r.a.createElement("span",null,"删除")),a&&r.a.createElement(u.a,{visible:a,modalOKHandle:function(){return function(t){e.deleteApp(t)}(i)},modalCancelHandle:function(){l(!1)},targetName:f,title:"删除应用",descText:"应用删除后将无法继续APPID。即将删除应用",needWarnIcon:!0,tipText:"应用删除操作不可恢复。是否确认删除?"}))}var h=a("8QW8"),y=a("odoF"),b=a("Nlzp"),g=a("yqJg"),v=a("MeRu"),E=a("TL2v"),w=a("P2RN");a("oIco");function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){I(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=x(e);if(t){var r=x(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return D(this,a)}}function D(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=i.a.Search,C={pageRows:4,pageIndex:1},T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(i,e);var t,a,n,o=S(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentDidMount=function(){t._getApplicationList(C)},t.onChange=function(e){t._getApplicationList(P(P({},C),{},{pageIndex:e,appName:t.state.searchValue}))},t.searchApplication=function(e){t.setState((function(){return{searchValue:e}}),(function(){t._getApplicationList(P(P({},C),{},{appName:e}))}))},t._getApplicationList=function(e){Object(b.c)(b.a.getApplicationList,P(P({},e),{},{version:"1.1"}),{loading:!0}).then((function(e){var a=e.code,n=e.data;a===g.a&&t.setState((function(){return{application:n}}))}))},t.deleteApp=function(e){Object(b.d)(b.a.deleteApp,{appId:Number(e)},{loading:!0}).then((function(e){e.code===g.a&&(Object(w.a)({message:"删除成功",description:"应用删除成功",type:"success"}),t._getApplicationList(C))}))},t._getApplicationListHTML=function(){var e=t.state.application;return e.list&&e.list.length>0?e.list.map((function(e,a){return r.a.createElement("div",{className:"list-item",key:e.appId},r.a.createElement(f,{deleteApp:t.deleteApp,Info:e}))})):r.a.createElement(h.a,{style:{margin:"auto"}})},t.addNewApplication=function(){var e=t.state.application,a=void 0===e?{}:e,n=a.appMaxNum,r=void 0===n?0:n,o=a.currentNum;(void 0===o?0:o)>=r?Object(w.a)({description:"最多只能创建".concat(r,"个应用！")}):window.location.hash="/open/base/application/add"},t.state={application:{list:[],pager:{}},searchValue:"",createAppJurisdiction:Object(y.a)("创建应用")},t}return t=i,(a=[{key:"render",value:function(){var e=this,t=this.state,a=t.application,n=t.createAppJurisdiction,o=a.list,i=a.pager,s=o.length<=5?"lists-wrapper flex-row flex1":"lists-wrapper flex-row flex1 six-item",p=r.a.createElement("h6",null,"C-Life平台提供完善的应用开发管理服务。您可以构建自主品牌的APP终端应用或小程序应用，您可以在这里对应用进行统一管理。");return r.a.createElement("section",{className:"application-wrapper flex-column"},r.a.createElement("header",{className:"application-header"},r.a.createElement(v.a,{noback:!0,title:"应用管理"}),r.a.createElement("div",{className:"application-search"},r.a.createElement("div",{className:"application-header-input-wrapper searchBox"},r.a.createElement(k,{placeholder:"请输入应用名称查找",enterButton:!0,maxLength:100,onSearch:function(t){return e.searchApplication(t)}})),r.a.createElement("div",{className:"butFloatRight"},n?r.a.createElement(c.a,{type:"primary",onClick:this.addNewApplication,className:"application-header-add"},"创建应用"):null))),r.a.createElement("div",{className:"application-content-wrapper flex-column flex1"},r.a.createElement("div",{className:"application-content flex-column"},r.a.createElement(E.a,{desc:["温馨提示：",p]}),r.a.createElement("section",{className:s},this._getApplicationListHTML()),r.a.createElement("footer",{className:"application-list-pagination"},i&&i.totalRows&&r.a.createElement(l.a,{className:"self-pa",total:i.totalRows,current:i.pageIndex,defaultCurrent:1,defaultPageSize:i.pageRows,onChange:function(t){return e.onChange(t)},pageSize:i.pageRows,showTotal:function(e){return r.a.createElement("span",null,"共 ",r.a.createElement("a",null,e)," 条")},showQuickJumper:!0,hideOnSinglePage:!0})))))}}])&&N(t.prototype,a),n&&N(t,n),i}(n.PureComponent),V=(a("zKZe"),a("MKzF"),a("kaz8")),R=(a("K4yd"),a("9yH6")),F=(a("Jmwx"),a("BMrR")),L=(a("rO+z"),a("kPKH")),_=(a("8QGh"),a("2fM7")),B=(a("UxlC"),a("WsrF")),M=(a("XlDN"),a("rVDo")),q=a("v7xx"),H=a("M7r8");a("ojkO");function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],l=!0,c=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){$(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function $(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}i.a.TextArea;var Q=_.a.Option,W=Object(n.memo)((function(e){return r.a.createElement("section",{className:"add-application-wrapper flex-column"},r.a.createElement(v.a,{backHandle:function(){return e.history.goBack()},title:"新建应用"}),r.a.createElement("div",{className:"add-application"},r.a.createElement(G,{saveAppBaseInfo:function(t){var a=t.appType;delete t.appType,t=K(K({},t),{},{appMode:1});var n=0===Number(a)?"saveAppBaseInfo":"saveMiniProgramsInfo",r=0===Number(a)?"应用移动创建成功":"小程序应用创建成功";Object(b.d)(b.a[n],K({},t)).then((function(t){t.code===g.a&&(Object(w.a)({message:"创建成功",description:r,type:"success"}),e.history.replace({pathname:"open/base/application/list"}))}))},handleCancel:function(){e.history.goBack()}})))})),G=Object(n.memo)(B.a.create({name:"addApplication"})(Object(n.memo)((function(e){var t=J(Object(n.useState)(!1),2),a=t[0],o=t[1],l=J(Object(n.useState)(!1),2),c=l[0],s=l[1],p=e.form,u=p.getFieldDecorator,d=p.getFieldValue,m=d("appType"),f=Object(n.useRef)(),h=e.handleCancel;return r.a.createElement(B.a,z({},{labelCol:{span:3},wrapperCol:{span:12}},{className:"add-application-form"}),r.a.createElement(B.a.Item,{label:"应用名称",wrapperCol:{span:10},hasFeedback:!0},u("appName",{rules:[{required:!0,message:"请输入应用名称"},{max:20,message:"最多可以输入20个字符"}]})(r.a.createElement(i.a,{placeholder:"最多可以输入20个字符"}))),r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:3,className:"app-icon-low-label"},r.a.createElement("span",{className:"form-require"},"应用图标")),r.a.createElement(L.a,{span:12},r.a.createElement(M.b,{ref:f,format:".png"}))),r.a.createElement(B.a.Item,{label:"应用类型"},u("appType",{initialValue:"0",rules:[{required:!0,message:"请输入应用名称"}]})(r.a.createElement(R.a.Group,null,r.a.createElement(R.a,{value:"0"},"移动应用"),r.a.createElement(R.a,{value:"2"},"小程序应用"))),r.a.createElement("br",null),("0"===m||void 0===m)&&r.a.createElement("span",{className:"app-type-desc"},"Android和iOS共用一个APPID"),"2"===m&&r.a.createElement("span",{className:"app-type-desc"},"微信的小程序应用")),("0"===m||void 0===m)&&r.a.createElement(B.a.Item,{className:"appVersion",label:"应用包"},r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:24},r.a.createElement(V.a,{onChange:function(e){return o(e.target.checked)}},"Android版"))),r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:16},r.a.createElement(B.a.Item,{label:" ",hasFeedback:!0,labelCol:{span:1},wrapperCol:{span:22},className:"android-input",colon:!1},u("androidPkg",{rules:[{required:a,message:"请输入应用包名"},{max:200,message:"最多可以输入200个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入应用包名，例如com.example.mirror",disabled:!a})))),r.a.createElement(L.a,{span:8},r.a.createElement(B.a.Item,{label:" ",hasFeedback:!0,labelCol:{span:0},wrapperCol:{span:20},className:"android-schema-input",colon:!1},u("androidSchema",{rules:[{max:50,message:"最多可以输入50个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入分享Schema",disabled:!a}))))),r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:24},r.a.createElement(V.a,{onChange:function(e){return s(e.target.checked)}},"iOS版")),r.a.createElement(L.a,{span:16},r.a.createElement(B.a.Item,{label:" ",hasFeedback:!0,labelCol:{span:1},wrapperCol:{span:22},className:"ios-input",colon:!1},u("iosBundleId",{rules:[{required:c,message:"请输入应用包名"},{max:200,message:"最多可以输入200个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入应用包名，例如com.example.mirror",disabled:!c})))),r.a.createElement(L.a,{span:8},r.a.createElement(B.a.Item,{label:" ",hasFeedback:!0,labelCol:{span:0},wrapperCol:{span:20},className:"ios-schema-input",colon:!1},u("iosSchema",{rules:[{max:50,message:"最多可以输入50个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入分享Schema",disabled:!c})))))),"2"===m&&r.a.createElement(B.a.Item,{label:"微信应用ID",hasFeedback:!0},u("weChatAppId",{rules:[{required:!0,message:"请输入在微信申请时的APPID"},{max:100,message:"最多可以输入100个字符"},{pattern:/^[a-zA-Z0-9]*$/,message:"APPID仅支持数字或字母"}]})(r.a.createElement(i.a,{placeholder:"请输入在微信申请时的APPID"}))),"2"===m&&r.a.createElement(B.a.Item,{label:"微信应用Secret",hasFeedback:!0},u("secret",{rules:[{required:!0,message:"请输入在微信申请时的APP的Secret"},{max:100,message:"最多可以输入100个字符"},{pattern:/^[a-zA-Z0-9]*$/,message:"APP的Secret仅支持数字或字母"}]})(r.a.createElement(i.a,{placeholder:"请输入在微信申请时的APP的Secret"}))),r.a.createElement(B.a.Item,{label:"应用构建模式",wrapperCol:{span:6}},u("reportFormsType",{initialValue:"开发模式"})(r.a.createElement(_.a,null,r.a.createElement(Q,{value:"开发模式"},"开发模式")))),r.a.createElement(H.a,{label:"应用简介",formId:"appDesc",astrictNub:100,placeholder:"最多可以输入100个字符",getFieldDecorator:u,getFieldValue:d,isRequired:!0}),r.a.createElement(B.a.Item,null,r.a.createElement(q.a,{preHandle:function(t){t.preventDefault();var a=e.form.validateFieldsAndScroll,n=e.saveAppBaseInfo;a((function(e,t){if(!e){console.log("Received values of form: ",t);var a=f.current.getFileListUrl();if(a.length<=0)return void Object(w.a)({description:"请选择文件！",type:"warn"});t.appIconLow=a[0],n(t)}}))},nextHandle:h,preText:"确认",nextText:"取消",nextType:"default",preType:"primary"})))})))),X=(a("mbEz"),a("wCAj")),Y=(a("AUBz"),a("ZTPi")),ee=a("BkRI"),te=a.n(ee),ae=(a("oVuX"),a("3NWV")),ne=a("gs3f"),re=a("DgvE"),oe=(a("k3Gp"),a("kLXV"));a("yq1k"),a("JTJg"),a("pDQq");function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ie(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ue(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=he(e);if(t){var r=he(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return fe(this,a)}}function fe(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ye=i.a.Search,be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(l,e);var t,a,n,o=me(l);function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).getListAllProductAndAccreditInfo=function(e){var a=t.props,n=a.appId,r=a.relationedProductIds,o=a.currentAppType,l=r&&r[1===o?"android":"ios"]||[];Object(b.c)(b.a.getDevProductList,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(Object(a),!0).forEach((function(t){pe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({version:"1.1",appId:n},e),{loading:!0}).then((function(e){var a=e.code,n={list:(e.data||[]).filter((function(e){return!l.includes(e.productId)})),pager:{}};a===g.a&&t.setState((function(){return{listAllProductAndAccreditInfo:n}}))}))},t.handleSubmit=function(e){e.preventDefault();var a=ce(t.state.checkedValues),n=t.props,r=n.relationProductList,o=1===n.currentAppType?r.listAndroid:r.listIos;o&&o.map((function(e){return e.productId}));0!==a.length?t.props.updateRelaProduct(a):Object(w.a)({description:"请选择需要关联的产品",type:"warn"})},t.handleCancel=function(e){(0,t.props.showDialog)(e)},t.onChange=function(e){t.setState((function(){return{checkedValues:e}}))},t.handleSearch=function(e){t.setState((function(){return{searchValue:e,checkedValues:[]}}),(function(){t.getListAllProductAndAccreditInfo({productName:e})}))},t.clickIconHandle=function(e,a){e.stopPropagation();var n=t.state.checkedValues,r=te()(n),o=r.indexOf(a);-1===o?r.push(a):r.splice(o,1),t.setState({checkedValues:r})};var a=t.props,n=a.currentAppType,r=a.relationProductList,c=1===n?r.listAndroid:r.listIos,i=c&&c.map((function(e){return e.productId}));return t.state={checkedValues:i||[],searchValue:"",isFirst:!0,listAllProductAndAccreditInfo:{list:[],pager:{}}},t}return t=l,(a=[{key:"componentDidMount",value:function(){this.getListAllProductAndAccreditInfo()}},{key:"render",value:function(){var e=this,t=this.props.showAddProductRelationDialog,a=this.state,n=a.listAllProductAndAccreditInfo,o=a.checkedValues;return r.a.createElement(oe.a,{width:"63%",visible:t,title:"添加产品关联",className:"add-product-relation-modal",onCancel:function(){return e.handleCancel("showAddProductRelationDialog")},maskClosable:!1,style:{minWidth:900},footer:[r.a.createElement(c.a,{key:"submit",type:"primary",onClick:this.handleSubmit},"确认"),r.a.createElement(c.a,{key:"cancel",onClick:function(){return e.handleCancel("showAddProductRelationDialog")}},"取消")]},r.a.createElement("div",{className:"product-relation flex-column"},r.a.createElement("div",{className:"desc"},"您可以添加由您创建和给予授权的硬件产品"),r.a.createElement("div",{className:"search-wrapper"},r.a.createElement(ye,{placeholder:"请输入产品ID，产品名称搜索产品",maxLength:100,onSearch:function(t){return e.handleSearch(t)},style:{width:"50%"},enterButton:!0})),r.a.createElement("div",{className:"mescroll-refresh flex1",style:{height:"max-content"}},r.a.createElement(V.a.Group,{style:{width:"100%"},value:o,onChange:this.onChange},r.a.createElement("div",{id:"mescroll",className:"mescroll"},r.a.createElement("div",{id:"dataList",className:"data-list flex-row"},n.list.length>0&&n.list.map((function(t,a){var n=t.productId,o=t.productIcon,l=t.productName;return r.a.createElement("div",{key:n,className:"list-item flex-column"},r.a.createElement("i",{className:"product-pic"},r.a.createElement("div",{style:{cursor:"pointer"},onClick:function(t){return e.clickIconHandle(t,n)}},r.a.createElement(s.a,{icon:o})),r.a.createElement("div",{className:"check-box"},r.a.createElement(V.a,{value:n}))),r.a.createElement("p",{className:"product-name flex1 flex-row"},l),r.a.createElement("div",{className:"product-id flex-row flex1"},n))}))))))))}}])&&ue(t.prototype,a),n&&ue(t,n),l}(n.Component),ge=(a("TfFZ"),a("3S7+")),ve=a("Lyp1");a("sDFC");function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(a),!0).forEach((function(t){Pe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ie(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=De(e);if(t){var r=De(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Se(this,a)}}function Se(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}i.a.TextArea;var xe=_.a.Option,ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(l,e);var t,a,n,o=je(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).handleCancel=function(e){(0,t.props.showDialog)(e)},t.handleSubmit=function(e){e.preventDefault();var a=t.props.form,n=a.validateFieldsAndScroll,r=a.getFieldValue,o=t.props,l=o.createAppVersion,c=o.curAppVersionDetail,i=r("appType");n((function(e,a){if(!e){console.log("Received values of form: ",a);var n=c.appVersionId;if(1===i||void 0===i){var r=t.state.url;if(n)r=""===r?c.url:r;else if(!r&&"{}"===JSON.stringify(c))return Object(w.a)({description:"请先上传文件，自动生成升级链接！",type:"warn"}),!1;l(Ae(Ae({},a),{},{url:r,appVersionId:n}))}else l(Ae(Ae({},a),{},{appVersionId:n}))}}))},t.getUrl=function(){var e=t.versionApk.getFileListUrl();t.setState((function(){return{url:e[0]}}))},t.componentDidMount=function(){var e=t.props.curAppVersionDetail;if("{}"!==JSON.stringify(e)){var a=[{uid:"-1",name:e.url,status:"done",url:e.url}];setTimeout((function(){t.versionApk.setState({fileList:a})}))}},t.validateMainVersion=function(e,t,a){t?/^[0-9]*$/.test(t)?t.length>100&&a("最多可以输入100个数值型数据"):a("版本序列标识仅支持数值型"):a("请输入版本序列标识，仅支持数值型"),a()},t.state={url:"",appType:1},t}return t=l,(a=[{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldValue,o=this.props,l=o.showAppVersionDialog,s=o.curAppVersionId,p=o.curAppVersionDetail,u=o.appInfo,d=s?"编辑应用版本":"创建应用版本",m=(u.androidPkg,u.iosBundleId,n("appType")),f=n("status")||1;return r.a.createElement(oe.a,{width:"50%",visible:l,centered:!0,title:d,className:"add-version-modal",onCancel:function(){return e.handleCancel("showAppVersionDialog")},maskClosable:!1,footer:[r.a.createElement(c.a,{key:"submit",type:"primary",onClick:this.handleSubmit},"确认"),r.a.createElement(c.a,{key:"cancel",onClick:function(){return e.handleCancel("showAppVersionDialog")}},"取消")]},r.a.createElement("div",{className:"add-version-from-wrapper"},r.a.createElement(B.a,we({},{labelCol:{span:5},wrapperCol:{span:19}},{className:"add-version-from"}),r.a.createElement(B.a.Item,{label:"版本序列标识",wrapperCol:{span:10}},a("mainVersion",{rules:[{validator:this.validateMainVersion}]})(r.a.createElement(i.a,{placeholder:"请输入版本序列标识",style:{width:"calc(100% )"}}))),r.a.createElement(B.a.Item,{label:"版本号",wrapperCol:{span:10}},a("externalVersion",{rules:[{required:!0,message:"请输入版本号"},{max:100,message:"最多可以输入100个字符"}]})(r.a.createElement(i.a,{placeholder:"推荐使用XYZ的格式，如：V1.1.0"}))),r.a.createElement(B.a.Item,{label:"版本类型",wrapperCol:{span:10}},a("appType",{rules:[{required:!0,message:"请选择版本类型"}]})(r.a.createElement(_.a,{showSearch:!0,placeholder:"请选择版本类型",optionFilterProp:"children"},r.a.createElement(xe,{value:1},"Android版"),r.a.createElement(xe,{value:2},"iOS版")))),(1===m||void 0===m)&&r.a.createElement(B.a.Item,{label:"版本附件"},r.a.createElement(M.a,{onRef:function(t){return e.versionApk=t},format:".apk",maxSize:200,isNotImg:!0,cb:this.getUrl})),(1===m||void 0===m)&&r.a.createElement(B.a.Item,{label:"升级链接"},r.a.createElement("a",{href:"javascript:"},this.state.url||p.url),r.a.createElement("div",{className:"url-desc"},"上传附件链接后自动生成升级链接")),2===m&&r.a.createElement(B.a.Item,{label:"升级链接"},a("url",{rules:[{required:!0,message:"请输入链接"}]})(r.a.createElement(i.a,{placeholder:"请确保链接填写完全正确",style:{width:"calc(53% )"}})),r.a.createElement("div",{className:"url-desc"},"请先将应用包上传到iOS应用市场，然后将获取的链接复制到这里")),r.a.createElement(B.a.Item,{label:"升级方式"},a("status",{initialValue:1,rules:[{required:!0,message:"请选择升级方式"}]})(r.a.createElement(_.a,{showSearch:!0,placeholder:"请选择升级方式",optionFilterProp:"children",style:{width:"calc(53% )",marginRight:"6px"}},r.a.createElement(xe,{value:1},"普通升级"),r.a.createElement(xe,{value:2},"强制升级"))),r.a.createElement(ge.a,{title:1===f?"用户可选择是否升级到新版本，不升级仍然可以继续使用":"用户必须确认升级才可以继续使用",placement:"top"},r.a.createElement(ve.a,null))),r.a.createElement(H.a,{label:"备注",formId:"releaseNote",astrictNub:100,placeholder:"升级内容的提示信息，用户查看升级时可见。最多输入100个字符。",getFieldDecorator:a,isRequired:!0,getFieldValue:n}))))}}])&&Ie(t.prototype,a),n&&Ie(t,n),l}(n.Component),Ce=B.a.create({name:"addAppVersion",mapPropsToFields:function(e){var t=e.curAppVersionDetail,a=e.appInfo.appVersionType,n=null;n=1===a.value?2:1;var r={};if(t)for(var o=0,l=Object.keys(t);o<l.length;o++){var c=l[o];r[c]=B.a.createFormField({value:t[c]})}return r.appType=B.a.createFormField({value:3===a.value?1:n}),r}})(ke);a("hK2Z");function Te(){return(Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],l=!0,c=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Re(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(a),!0).forEach((function(t){_e(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Be=Object(n.memo)(B.a.create({name:"editApplication",mapPropsToFields:function(e){for(var t=e.appInfo,a={},n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];a[o]=B.a.createFormField(Le(Le({},t[o]),{},{value:t[o].value}))}return a}})(Object(n.memo)((function(e){var t=Object(n.useRef)(),a=Ve(Object(n.useState)(!1),2),o=a[0],l=a[1],c=e.form,s=c.getFieldDecorator,p=c.getFieldValue;Object(n.useEffect)((function(){var a=e.appInfo.appIconLow,n=[{uid:"-1",name:a.value,status:"done",url:a.value}];t.current.setFileList(n)}),[e]);var u=e.appInfo,d=u.appType,m=u.appId,f=u.appSecret,h=o?f.value:Object(re.p)(f.value,10),y=o?"eye-invisible":"eye";return r.a.createElement(B.a,Te({},{labelCol:{span:2},wrapperCol:{span:12}},{className:"edit-application-form"}),r.a.createElement(B.a.Item,{label:"应用名称",wrapperCol:{span:10},hasFeedback:!0},s("appName",{rules:[{required:!0,message:"请输入应用名称"},{max:20,message:"最多可以输入20个字符"}]})(r.a.createElement(i.a,{placeholder:"最多可以输入20个字符"}))),r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:2,className:"app-icon-low-label"},r.a.createElement("span",{className:"form-require"},"应用图标")),r.a.createElement(L.a,{span:12},r.a.createElement(M.b,{ref:t,format:".png"}))),r.a.createElement(B.a.Item,{label:"应用类型"},0===d.value?"移动应用":"小程序应用"),(0===d.value||void 0===d.value)&&r.a.createElement(B.a.Item,{className:"appVersion",label:"应用包"},r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:24},"Android版")),r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:16},r.a.createElement(B.a.Item,{label:"",hasFeedback:!0,labelCol:{span:1},wrapperCol:{span:22},className:"android-input",colon:!1},s("androidPkg",{rules:[{max:200,message:"最多可以输入200个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入应用包名，例如com.example.mirror"})))),r.a.createElement(L.a,{span:8},r.a.createElement(B.a.Item,{label:"",hasFeedback:!0,labelCol:{span:0},wrapperCol:{span:20},className:"android-schema-input",colon:!1},s("androidSchema",{rules:[{max:50,message:"最多可以输入50个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入分享Schema"}))))),r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:24},"iOS版"),r.a.createElement(L.a,{span:16},r.a.createElement(B.a.Item,{label:"",hasFeedback:!0,labelCol:{span:1},wrapperCol:{span:22},className:"ios-input",colon:!1},s("iosBundleId",{rules:[{max:200,message:"最多可以输入200个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入应用包名，例如com.example.mirror"})))),r.a.createElement(L.a,{span:8},r.a.createElement(B.a.Item,{label:"",hasFeedback:!0,labelCol:{span:0},wrapperCol:{span:20},className:"ios-schema-input",colon:!1},s("iosSchema",{rules:[{max:50,message:"最多可以输入50个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入分享Schema"})))))),"2"===d&&r.a.createElement(B.a.Item,{label:"微信应用ID",hasFeedback:!0},s("weChatAppId",{rules:[{required:!0,message:"请输入在微信申请时的APPID"},{max:100,message:"最多可以输入100个字符"},{pattern:/^[a-zA-Z0-9]*$/,message:"APPID仅支持数字或字母"}]})(r.a.createElement(i.a,{placeholder:"请输入在微信申请时的APPID"}))),"2"===d&&r.a.createElement(B.a.Item,{label:"微信应用Secret",hasFeedback:!0},s("secret",{rules:[{required:!0,message:"请输入在微信申请时的APP的Secret"},{max:100,message:"最多可以输入100个字符"},{pattern:/^[a-zA-Z0-9]*$/,message:"APP的Secret仅支持数字或字母"}]})(r.a.createElement(i.a,{placeholder:"请输入在微信申请时的APP的Secret"}))),r.a.createElement(B.a.Item,{label:"APPID",className:"app-id"},r.a.createElement("span",null,m.value),r.a.createElement("span",{className:"appId-desc"},"由系统自动分配的APP唯一标识码")),r.a.createElement(B.a.Item,{label:"APPSecret",className:"app-secret"},h,r.a.createElement(ae.a,{type:y,className:"icon-display",style:{marginLeft:"10px",fontSize:"18px"},theme:"twoTone",twoToneColor:"#2874FF",onClick:function(){return l(!o)}}),r.a.createElement("span",{className:"secret-desc"},"由系统自动分配的密码")),r.a.createElement(B.a.Item,{label:"应用构建模式",wrapperCol:{span:6}},r.a.createElement("span",null,"开发模式")),r.a.createElement(H.a,{label:"应用简介",formId:"appDesc",astrictNub:100,placeholder:"最多可以输入100个字符",getFieldDecorator:s,isRequired:!0,getFieldValue:p}),r.a.createElement(B.a.Item,null,r.a.createElement(q.a,{preHandle:function(a){a.preventDefault();var n=e.form.validateFieldsAndScroll,r=e.saveAppBaseInfo;n((function(e,a){if(!e){console.log("Received values of form: ",a);var n=t.current.getFileListUrl();if(n.length<=0)return void Object(w.a)({description:"请选择文件!",type:"warn"});a.appIconLow=n[0],r(a)}}))},nextHandle:function(){e.handleCancel("showEditAppForm")},preText:"确认",nextText:"取消",nextType:"default",preType:"primary"})))}))));a("81qY");function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(){return(qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function He(e){return function(e){if(Array.isArray(e))return ze(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ze(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(a),!0).forEach((function(t){Ze(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Je(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ze(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ke(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ge(e);if(t){var r=Ge(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return We(this,a)}}function We(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xe=Y.a.TabPane,Ye={pageRows:10,pageIndex:1},et=[{title:"删除应用",desc:"应用删除后将无法继续APPID。即将删除应用",tip:"应用删除操作不可恢复。是否确认删除?",targetName:"我的app"},{title:"删除产品关联",desc:"即将删除产品关联",tip:"是否确认删除?",targetName:"宝莱特血压计"},{title:"删除应用版本",desc:"删除后用户将无法再获取到该版本升级，已升级用户不受影响。即将删除应用版本",tip:"是否确认删除?",targetName:"V1.1.3"}],tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(l,e);var t,a,n,o=Qe(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).componentDidMount=function(){var e=t.state.appId;t._getAppInfo(e)},t.handleChange=function(e,a){t.setState((function(){return Ze({},e,a)}))},t.onChange=function(e){t._getVersionList({pageIndex:e,pageRows:5})},t._getVersionList=function(e){var a=t.state.appId;Object(b.c)(b.a.getVersionList,Ue(Ue({appId:a},e),{},{version:"1.1"}),{loading:!0}).then((function(e){var a=e.code,n=e.data;a===g.a&&"{}"!==JSON.stringify(n)&&t.setState((function(){return{versionList:n}}))}))},t.createAppVersion=function(e){var a=t.state.appId;Object(b.d)(b.a.createAppVersion,Ue(Ue({},e),{},{appType:Number(e.appType),status:Number(e.status),appId:Number(a),mainVersion:Number(e.mainVersion)}),{loading:!0}).then((function(e){e.code===g.a&&(Object(w.a)({message:"创建成功",description:"创建应用版本成功",type:"success"}),t.setState((function(e){return{showAppVersionDialog:!e.showAppVersionDialog}}),(function(){t._getVersionList(Ue(Ue({},Ye),{},{pageRows:5}))})))}))},t.saveAppInfo=function(e){var a=t.state,n=a.appId,r=a.appInfo,o=r.appType.value;e=Ue(Ue({},e),{},{appMode:1,appId:n});var l=0===o?"saveAppBaseInfo":"saveMiniProgramsInfo",c=0===o?"移动应用编辑成功":"小程序应用编辑成功";2===o&&(e=Ue(Ue({},e),{},{weChatAppId:r.weChatAppId.value,secret:r.secret.value})),Object(b.d)(b.a[l],Ue({},e),{loading:!0}).then((function(e){e.code===g.a&&(Object(w.a)({description:c,type:"warn"}),t.setState((function(e){return{showEditAppForm:!e.showEditAppForm}}),(function(){var e=t.state.appId;t._getAppInfo(e)})))}))},t._getRelaProducts=function(e){Object(b.c)(b.a.getRelaProducts,{appId:e,version:"1.1",paged:!1},{loading:!0}).then((function(e){var a=e.code,n=e.data;if(a===g.a){var r={listAndroid:[],listIos:[]},o={android:[],ios:[]};n.list&&n.list.length>0&&n.list.forEach((function(e){var t=e.appVersionType,a=e.productId;1===t?(r.listAndroid.push(e),o.android.push(a)):2===t?(r.listIos.push(e),o.ios.push(a)):(r.listAndroid.push(e),r.listIos.push(e),o.ios.push(a),o.android.push(a))})),t.setState((function(){return{relationProductList:r,relationedProductIds:o}}))}}))},t._getAppInfo=function(e){Object(b.c)(b.a.getAppInfo,{appId:e,version:"1.1"},{loading:!0}).then((function(a){var n=a.code,r=a.data;if(n===g.a){var o={},l=te()(r);et[2].targetName=l.appName;for(var c=0,i=Object.keys(l);c<i.length;c++){var s=i[c];o[s]={value:l[s]}}var p=l.androidPkg,u=l.iosBundleId,d=l.appType;t.setState((function(e){return{appInfo:Ue(Ue({},e.appInfo),o),currentAppType:!p&&u?2:1}})),0!==d&&2!==d||(t._getRelaProducts(e),t._getVersionList(Ue(Ue({},Ye),{},{pageRows:5})))}}))},t.updateOkHandle=function(e){var a=t.state,n=a.curProductID,r=a.curAppVersionId;"relationProduct"===e?t.deleteRelationProduct(n):"appVersion"===e?t.deleteAppVersion(r):t.deleteApp()},t.updateCancelHandle=function(e){t.changeState(e)},t.showDialog=function(e,a,n,r,o){"targetName"===r&&(et[0].targetName=o),"versionTargetName"===r&&(et[1].targetName=o),t.setState((function(t){var r;return a||n?(Ze(r={},e,!t[e]),Ze(r,a,n),r):Ze({},e,!t[e])}))},t.deleteRelationProduct=function(e){Object(b.d)(b.a.deleteRelationProduct,{productId:e,appId:Number(t.state.appId),appType:Number(t.state.currentAppType)},{loading:!0}).then((function(e){e.code===g.a&&t.setState((function(e){return{showDeleteDialog:!e.showDeleteDialog}}),(function(){t._getRelaProducts(t.state.appId)}))}))},t.deleteAppVersion=function(e){Object(b.d)(b.a.deleteAppVersion,{appVersionId:e},{loading:!0}).then((function(e){e.code===g.a&&t.setState((function(e){return{showDeleteDialog:!e.showDeleteDialog}}),(function(){t._getVersionList(Ue(Ue({},Ye),{},{pageRows:5}))}))}))},t.updateRelaProduct=function(e){var a=t.state,n=a.appId,r=a.currentAppType,o=a.relationProductList;1===r?o.listAndroid:o.listIos;Object(b.d)(b.a.updateRelaProduct,{productIds:He(e).join(","),appId:Number(n),appVersionType:Number(r)},{loading:!0,needJson:!0,noInstance:!0}).then((function(e){e.code===g.a&&t.setState((function(e){return{showAddProductRelationDialog:!e.showAddProductRelationDialog}}),(function(){Object(w.a)({message:"关联成功",description:"产品关联成功",type:"success"}),t._getRelaProducts(n)}))}))},t.changeState=function(e){t.setState((function(t){return Ze({},e,!t[e])}))},t.getAppVersionDetail=function(e){Object(b.c)(b.a.getAppVersionDetail,{id:e,version:"1.1"},{loading:!0}).then((function(a){var n=a.code,r=a.data;n===g.a&&t.setState((function(){return{curAppVersionDetail:r}}),(function(){t.showDialog("showAppVersionDialog","curAppVersionId",e)}))}))},t._getAppTypeHTML=function(){var e=t.state,a=e.appInfo,n=e.currentAppType,o=(a.androidPkg,a.iosBundleId,""),l="",i="";return 0===a.appType.value?(o=r.a.createElement(c.a,{onClick:function(){return t.handleChange("currentAppType",1)},type:1===n?"primary":"default",ghost:1===n},"Android端"),l=r.a.createElement(c.a,{onClick:function(){return t.handleChange("currentAppType",2)},type:2===n?"primary":"default",ghost:2===n},"iOS端")):i=r.a.createElement(c.a,{type:"primary",ghost:!0},"小程序"),{appTypeAndroidHTML:o,appTypeIosHTML:l,weChatHTML:i}},t.addNewVersion=function(){var e=t.state.versionList,a=e.appVersionMaxNum,n=void 0===a?0:a,r=e.currentNum;(void 0===r?0:r)>=n?Object(w.a)({description:"最多只能创建".concat(n,"个应用版本")}):t.showDialog("showAppVersionDialog","curAppVersionDetail",{})},t.getAntDVersionList=function(){var e=t.state.versionList.list.slice();return e.forEach((function(e,t){e.key=e.appVersionId})),{antDVersionList:e,columns:[{title:"版本号",dataIndex:"externalVersion",key:"externalVersion"},{title:"版本序列标志",dataIndex:"appSign",key:"appSign"},{title:"版本类型",dataIndex:"appType",key:"appType",render:function(e){return r.a.createElement("div",{className:"version-type"},1===Number(e)?"Android":"iOS")}},{title:"升级方式",dataIndex:"status",key:"status",render:function(e){return r.a.createElement("div",{className:"upgrade"},1===Number(e)?"普通升级":"强制升级")}},{title:"创建时间",dataIndex:"releaseTime",key:"releaseTime",render:function(e){return e?re.a.utcToDev(e):"--"}},{title:"操作",dataIndex:"opt",key:"opt",render:function(e,a){return r.a.createElement("div",null,r.a.createElement("a",{href:"javascript:",onClick:function(){return t.getAppVersionDetail(a.appVersionId)}},"编辑"),r.a.createElement("span",null,"  |  "),r.a.createElement("a",{href:"javascript:",onClick:function(){return t.showDialog("showDeleteDialog","curAppVersionId",a.appVersionId,"versionTargetName",a.appName)}},"删除"))}}]}},t.state={appId:t.props.match.params.appId,showDeleteDialog:!1,showAddProductRelationDialog:!1,showAppVersionDialog:!1,showApplicationDialog:!1,curProductID:null,curAppVersionId:null,currentTab:1,currentAppType:1,curAppVersionDetail:{},appInfo:{appId:{value:""},appName:{value:""},appSecret:{value:""},createTime:{value:""},appType:{value:""},appMode:{value:""},iosBundleId:{value:""},appDesc:{value:""},weChatAppId:{value:""},secret:{value:""},androidPkg:{value:""},appIconLow:{value:""},appVersionType:{value:""}},showSecret:!1,relationProductList:{listAndroid:[],listIos:[]},versionList:{list:[],pager:{}},relationProductJurisdiction:Object(y.a)("关联产品"),versionPublishJurisdiction:Object(y.a)("发布版本"),showEditAppForm:!0,relationedProductIds:{}},t}return t=l,(a=[{key:"render",value:function(){var e=this,t=this.state,a=t.showDeleteDialog,n=t.versionPublishJurisdiction,o=t.relationProductJurisdiction,l=t.versionList,i=t.showAppVersionDialog,d=t.showAddProductRelationDialog,m=t.currentAppType,f=t.showSecret,y=t.appInfo,b=t.relationProductList,g=t.showEditAppForm,E=y.appId,w=y.appName,O=y.appSecret,A=y.appType,P=y.iosBundleId,I=y.androidPkg,N=y.appDesc,j=y.androidSchema,S=y.iosSchema,D=y.appIconLow,x=(y.appVersionType,Number(this.state.currentTab)),k=1===x?"relationProduct":"appVersion",C=f?"eye-invisible":"eye",T=f?O.value:Object(re.p)(O.value,10),V=1===m?b.listAndroid:b.listIos,R=l.pager,_=this._getAppTypeHTML(),B=this.getAntDVersionList(),M=B.antDVersionList,q=B.columns;return r.a.createElement("section",{className:"application-detail-wrapper flex-column"},r.a.createElement("header",{className:"application-detail-header"},r.a.createElement(v.a,{noback:!0,title:"应用详情"}),r.a.createElement(ne.a,{className:"clearfix"},r.a.createElement("span",{className:"fl app-name"},"应用名称：",w.value),r.a.createElement("span",{className:"fl app-id"},"APPID：",E.value),r.a.createElement("span",{className:"fl app-secret"},"APPSecret：",T,r.a.createElement(ae.a,{type:C,className:"icon-display",style:{fontSize:"18px"},theme:"twoTone",twoToneColor:"#2874FF",onClick:function(){return e.changeState("showSecret")}})))),r.a.createElement("div",{className:"antd-content flex-column flex1"},r.a.createElement(Y.a,{defaultActiveKey:"0",onChange:function(t){return e.handleChange("currentTab",t)},tabBarStyle:{background:"#fff",padding:"0 24px"}},r.a.createElement(Xe,{tab:"基础信息",key:"0"},g?r.a.createElement("div",{className:"application-detail-content flex1"},r.a.createElement(c.a,{type:"primary",className:"edit-app",onClick:function(){return e.changeState("showEditAppForm")}},"编辑应用"),r.a.createElement(F.a,{gutter:8,className:"detail-line"},r.a.createElement(L.a,{span:2,className:"detail-left"},"应用名称："),r.a.createElement(L.a,{span:10,className:"detail-right"},w.value)),r.a.createElement(F.a,{gutter:8,className:"detail-line app-icon"},r.a.createElement(L.a,{span:2,className:"detail-left"},"应用图标："),r.a.createElement(L.a,{span:21,className:"detail-right"},r.a.createElement(s.a,{icon:D.value}))),r.a.createElement(F.a,{gutter:8,className:"detail-line"},r.a.createElement(L.a,{span:2,className:"detail-left"},"应用类型："),r.a.createElement(L.a,{span:21,className:"detail-right"},0===A.value?"移动应用":"小程序应用")),r.a.createElement(F.a,{gutter:8,className:"detail-line app-package"},r.a.createElement(L.a,{span:2,className:"detail-left"},"应用包："),r.a.createElement(L.a,{span:21,className:"detail-right"},r.a.createElement("div",{className:"android clearfix"},I.value&&r.a.createElement("div",{className:"android-package fl"},I.value," - Android版"),j&&j.value&&r.a.createElement("div",{className:"android-schema fl"},"分享Schema为 ：",j&&j.value)),r.a.createElement("div",{className:"ios clearfix"},P.value&&r.a.createElement("div",{className:"ios-package fl"},P.value," - iOS版"),S&&S.value&&r.a.createElement("div",{className:"ios-schema fl"},"分享Schema为 ：",S&&S.value)))),r.a.createElement(F.a,{gutter:8,className:"detail-line"},r.a.createElement(L.a,{span:2,className:"detail-left"},"APPID："),r.a.createElement(L.a,{span:21,className:"detail-right"},E.value,r.a.createElement("span",{className:"appId-desc"},"由系统自动分配的APP唯一标识码"))),r.a.createElement(F.a,{gutter:8,className:"detail-line"},r.a.createElement(L.a,{span:2,className:"detail-left"},"APPSecret："),r.a.createElement(L.a,{span:21,className:"detail-right"},T,r.a.createElement(ae.a,{type:C,className:"icon-display",style:{fontSize:"18px"},theme:"twoTone",twoToneColor:"#2874FF",onClick:function(){return e.changeState("showSecret")}}),r.a.createElement("span",{className:"secret-desc"},"由系统自动分配的密码"))),r.a.createElement(F.a,{gutter:8,className:"detail-line"},r.a.createElement(L.a,{span:2,className:"detail-left"},"构建模式："),r.a.createElement(L.a,{span:21,className:"detail-right"},"开发模式")),r.a.createElement(F.a,{gutter:8,className:"detail-line"},r.a.createElement(L.a,{span:2,className:"detail-left"},"应用简介："),r.a.createElement(L.a,{span:21,className:"detail-right"},N.value))):r.a.createElement("div",{className:"application-detail-content"},r.a.createElement(Be,{appInfo:y,saveAppBaseInfo:this.saveAppInfo,handleCancel:this.changeState}))),o?r.a.createElement(Xe,{tab:"关联产品",key:"1"},r.a.createElement("div",{className:"application-detail-content flex-column flex1"},r.a.createElement("div",{className:"content flex-column clearfix"},r.a.createElement("div",{className:"content-header"},r.a.createElement("div",{className:"app-type"},_.appTypeAndroidHTML,_.appTypeIosHTML,_.weChatHTML),r.a.createElement(c.a,{type:"primary",className:"add-relation",onClick:function(){return e.showDialog("showAddProductRelationDialog")}},"添加")),r.a.createElement("ul",{className:"product-list flex1"},V&&V.length>0?V.map((function(t,a){var n=t.productId,o=t.productName,l=t.productIcon;return r.a.createElement("li",{key:a,className:"list-item flex-column"},r.a.createElement("i",{className:"product-pic"},r.a.createElement(s.a,{icon:l})),r.a.createElement("div",{className:"product-name single-text flex1 flex-row"},o),r.a.createElement("div",{className:"product-id flex-row flex1"},n),r.a.createElement("a",{href:"javascript:",onClick:function(){return e.showDialog("showDeleteDialog","curProductID",n,"targetName",o)},className:"delete-product-relation"},r.a.createElement(p.a,{style:{fontSize:20},type:"icon-shanchu"})))})):r.a.createElement(h.a,null))))):null,n&&0==A.value?r.a.createElement(Xe,{tab:"版本发布",key:"2"},r.a.createElement("div",{className:"application-detail-content flex-column flex1"},r.a.createElement("div",{className:"add-version-wrapper"},r.a.createElement("h5",null,"版本历史"),r.a.createElement(c.a,{className:"add-version",type:"primary",onClick:this.addNewVersion},"创建应用版本")),r.a.createElement(X.a,{className:"version-content",dataSource:M,columns:q,pagination:{onChange:this.onChange,defaultCurrent:1,current:R.pageIndex,pageSize:R.pageRows,total:R.totalRows,showQuickJumper:!0}}))):null)),a&&r.a.createElement(u.a,{visible:a,modalOKHandle:function(){return e.updateOkHandle(k)},modalCancelHandle:function(){return e.updateCancelHandle("showDeleteDialog")},targetName:et[x].targetName,title:et[x].title,descText:et[x].desc,needWarnIcon:!0,tipText:et[x].tip}),d&&r.a.createElement(be,qe({},this.state,{showDialog:this.showDialog,updateRelaProduct:this.updateRelaProduct})),i&&r.a.createElement(Ce,qe({},this.state,{showDialog:this.showDialog,createAppVersion:this.createAppVersion})))}}])&&Ke(t.prototype,a),n&&Ke(t,n),l}(n.PureComponent);function at(e){var t=e.match.path;return r.a.createElement(o.Switch,null,r.a.createElement(o.Route,{path:"".concat(t,"/list"),component:T}),r.a.createElement(o.Route,{path:"".concat(t,"/add"),component:W}),r.a.createElement(o.Route,{path:"".concat(t,"/details/:appId"),component:tt}),r.a.createElement(o.Redirect,{to:"".concat(t,"/list")}))}},hK2Z:function(e,t,a){},ivPg:function(e,t,a){e.exports=a.p+"static/images/no-source-tip.681eb7825cf81b5da33967ff8571f3c6.png"},oIco:function(e,t,a){},ojkO:function(e,t,a){},sDFC:function(e,t,a){},yqJg:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=0}}]);