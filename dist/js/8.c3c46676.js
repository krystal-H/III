(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"0Zna":function(e,t,n){},"7TnZ":function(e,t,n){},A5vn:function(e,t,n){},IygI:function(e,t,n){},J2fM:function(e,t,n){},bc1A:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Fn}));n("SlgS"),n("lf9m"),n("IHDg"),n("ef1R"),n("hEGT"),n("Ra8s"),n("sfoS"),n("HsXu"),n("bs69"),n("Lm8M"),n("ryEf");var r=n("CvKH"),a=n.n(r),o=n("x+i1"),c=n.n(o),l=(n("I9ul"),n("62KB"),n("T9Mk")),i=n.n(l),s=n("q5+0"),u=n("ivud"),f=n("Nlzp"),p=n("vS40"),d=n("MeRu"),m=n("cu44"),y=(n("P37N"),n("vV4J"),n("av3G"),n("RfWx"),n("a6t6"),n("N1Yw")),h=(n("MNU5"),n("YeX6")),b=(n("odtX"),n("4Hua")),v=(n("6IzV"),n("QFmM")),g=(n("UdMA"),n("ViyK")),E=(n("8ynC"),n("K2PE"));function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var a=R(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P,_={labelCol:{span:4},wrapperCol:{span:20}},D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,n,r,a=x(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).onFinish=function(e){var n=t.props,r=n.developerInfo.userId,a=n.getDeveloperInfo;Object(f.c)(f.a.upDeveloperInfo,k(k({},e),{},{userId:r}),{loading:!0}).then((function(e){E.a.success({message:"更新成功",description:"用户信息更新成功！"}),a()}))},t.formRef=Object(l.createRef)(),t}return t=o,(n=[{key:"componentDidUpdate",value:function(e){null==e.developerInfo.phone&&this.props.developerInfo.phone&&this.formRef.current.resetFields()}},{key:"render",value:function(){var e=this.props.developerInfo,t=e.phone,n=e.nickName;return i.a.createElement(v.a,I({},_,{onFinish:this.onFinish,initialValues:{phone:t,nickName:n},ref:this.formRef}),i.a.createElement(v.a.Item,{label:"联系人",name:"nickName",rules:[{pattern:/^[a-zA-Z0-9\u4e00-\u9fa5]{2,20}$/,message:"请输入2到20长度的汉字、字母和数字"}]},i.a.createElement(g.a,{placeholder:"请输入联系人"})),i.a.createElement(v.a.Item,{label:"联系电话",name:"phone",rules:[{pattern:/^(((\d{3,4}-)?\d{7,8})|(1\d{10}))$/,message:"请输入固话号码或者手机号码"}]},i.a.createElement(g.a,{placeholder:"请输入联系电话"})),i.a.createElement(v.a.Item,null,i.a.createElement(y.a,null,i.a.createElement(b.a,{span:5}," "),i.a.createElement(b.a,{span:19},i.a.createElement(h.a,{type:"primary",htmlType:"submit"},"保存")))))}}])&&S(t.prototype,n),r&&S(t,r),o}(l.Component),T=n("NJiU"),M=(n("IygI"),n("DgvE"));function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return U(this,n)}}function U(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K,W=Object(u.b)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS()}}),(function(e){return{getDeveloperInfo:function(){return e(Object(p.c)())}}}))(P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(o,e);var t,n,r,a=V(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getSubRights=function(){var e=t.props,n=e.isNotSub,r=e.developerInfo.userId;n||Object(f.c)(f.a.getRights,{userId:r},{loading:!0}).then((function(e){t.setState({treeData:e.data||{}})}))},t.state={treeData:{}},t}return t=o,(n=[{key:"componentDidMount",value:function(){this.getSubRights()}},{key:"componentDidUpdate",value:function(e){var t=this.props.developerInfo.isSubUser;e.developerInfo.isSubUser!==t&&this.getSubRights()}},{key:"render",value:function(){var e=this.props,t=e.developerInfo,n=e.getDeveloperInfo,r=e.isNotSub,a=this.state.treeData,o=t.userId,c=t.email,l=t.regTime,s=t.userRole,u=t.parentUserName,f=t.userName;return i.a.createElement("div",{className:"page-userbaseinfo"},i.a.createElement(d.a,{title:"基本资料"}),r?i.a.createElement("div",null,i.a.createElement(m.a,{title:"基本信息",className:"comm-shadowbox"},i.a.createElement("div",{className:"alone-section-content-default base-info"},i.a.createElement("div",{className:"p-flex"},i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"开发者ID："),o),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"电子邮箱："),c),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"注册时间："),l?M.a.utcToDev(l):"")))),i.a.createElement(m.a,{title:"联系信息",className:"comm-shadowbox"},i.a.createElement("div",{className:"alone-section-content-default form-wrapper"},i.a.createElement(D,{getDeveloperInfo:n,developerInfo:t})))):i.a.createElement("div",null,i.a.createElement(m.a,{title:"基本信息",className:"comm-shadowbox"},i.a.createElement("div",{className:"alone-section-content-default base-info"},i.a.createElement("div",{className:"p-flex"},i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"登录账号："),f),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"所属主帐号："),u),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"账户角色："),s),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"创建时间："),l?M.a.utcToDev(l):"")))),i.a.createElement(m.a,{title:"权限信息",className:"comm-shadowbox"},i.a.createElement(T.a,{treeData:a}))))}}])&&L(t.prototype,n),r&&L(t,r),o}(l.Component))||P,J=(n("J2lP"),n("DJj6"),n("QcZr"),n("b+L2")),H=(n("ddWB"),n("bkGP")),z=(n("SmMv"),n("DTgQ")),q=(n("gAA8"),n("0Us0"),n("V9IP"),n("pckg"),n("DndG")),Z=n("P2RN");function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te(e);if(t){var a=te(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Q(this,n)}}function Q(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=Object(u.b)(null,(function(e){return{deleteRole:function(t){return e(Object(p.b)(t))}}}))(K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(o,e);var t,n,r,a=Y(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(f.c)(f.a.getRolePage,e).then((function(e){t.setState({roleList:e.data.list,pager:e.data.pager})})).finally((function(){t.setState({loading:!1})}))},t.deleteRole=function(e){var n=t.state.pager,r=n.totalRows,a=n.pageIndex;a=r%(10*(a-1))>1?a:a-1,t.props.deleteRole(e).then((function(e){e&&(Object(Z.a)({type:"success",description:"删除用户角色成功！"}),t.pagerIndex(a))}))},t.searchProduct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e.trim(),t.setState({loading:!0},(function(){t.getList({pageIndex:1,pageRows:10,roleName:e})}))},t.state={versionList:[],loading:!0,roleList:[],pager:{}},t.columns=[{title:"角色名",dataIndex:"roleName",key:"roleName"},{title:"备注",dataIndex:"remark",key:"remark"},{title:"最新修改时间",dataIndex:"updateTime",key:"updateTime",render:function(e){return i.a.createElement("span",null,e&&M.a.utcToDev(e)||"--")}},{title:"操作",key:"tags",dataIndex:"tags",render:function(e,n){var r=n.roleId,a=n.roleName,o=n.remark;return i.a.createElement("span",null,i.a.createElement(q.b,{to:{pathname:"/userCenter/role/edit",search:"?roleId=".concat(r,"&roleName=").concat(encodeURI(a),"&remark=").concat(encodeURI(o))}},"编辑"),i.a.createElement(z.a,{type:"vertical"}),i.a.createElement(H.a,{title:"你确定要删除该角色吗？",onConfirm:t.deleteRole.bind(ee(t),r),okText:"是",cancelText:"否",placement:"topRight"},i.a.createElement("a",null,"删除")))}}],t.pagerIndex=t.pagerIndex.bind(ee(t)),t}return t=o,(n=[{key:"componentDidMount",value:function(){this.getList({pageIndex:1,pageRows:10})}},{key:"pagerIndex",value:function(e){var t=this;this.setState({loading:!0},(function(){t.getList({pageIndex:e,pageRows:10})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.roleList,a=t.pager;return i.a.createElement("div",{className:"role-management"},i.a.createElement(d.a,{title:"用户角色"},i.a.createElement("div",{className:"user-page-content-header"},i.a.createElement("div",{className:"comm-searchBox"},i.a.createElement(g.a.Search,{placeholder:"请输入用户角色名查找",maxLength:20,onSearch:function(t){return e.searchProduct(t)},enterButton:!0})),i.a.createElement("div",{className:"butFloatRight"},i.a.createElement(q.b,{to:"/userCenter/role/edit"},i.a.createElement(h.a,{type:"primary"},"创建用户角色"))))),i.a.createElement("div",{className:"comm-shadowbox"},i.a.createElement(J.a,{rowKey:"roleId",columns:this.columns,dataSource:r,pagination:{defaultCurrent:a.pageIndex,total:a.totalRows,current:a.pageIndex,hideOnSinglePage:!1,onChange:this.pagerIndex},loading:n})))}}])&&G(t.prototype,n),r&&G(t,r),o}(l.Component))||K,re=(n("qgAm"),n("59iL"),n("f6Fh")),ae=(n("RVQw"),n("CXlI")),oe=(n("Ck9u"),n("NW2O"),n("vkMd"),n("Mj9Q"),n("eTeG"),n("xgdu"),n("86yO"),n("SxTo"),n("+k2h"),n("yp8k"),n("tdUe"),n("2KR+"),n("zpVn"),n("PS9g"),n("GlKX"),n("waT4"),n("UHuz"),n("bzw4"),n("B1aJ"),n("vERT"),n("OXkf"),n("9b3Y"),n("v7xx")),ce=n("8QW8");n("A5vn");function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=be(e);if(t){var a=be(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return he(this,n)}}function he(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(c,e);var t,n,r,o=ye(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).getRights=function(){Object(f.c)(f.a.getRights,{roleId:t.roleId},{loading:!0}).then((function(e){var n=e.data,r=n.checkBoxGroupMenuList,a=void 0===r?[]:r,o=n.menu,c=void 0===o?"[]":o,l=t.addFrontIdMenu(JSON.parse(c)),i=t.addFrontId(a[0].checkBoxGroupList),s=t.getMenuTreeData(l),u=t.getOneTreeData(i,"treeDataObjectCheckeys");t.setState({dataMenu:l,dataObject:i,treeDataMenu:s,treeDataObject:u,treeMenuCheckeys:t.treeMenuCheckeys,treeDataObjectCheckeys:t.treeDataObjectCheckeys})}))},t.addFrontId=function(e){for(var t=a()(e),n=0;n<t.length;n++){var r=t[n];if(t[n].frontId=n+"",r.subBoxs&&r.subBoxs.length>0)for(var o=0;o<r.subBoxs.length;o++){var c=r.subBoxs[o];if(t[n].subBoxs[o].frontId=n+"_"+o,c.subBoxs&&c.subBoxs.length>0)for(var l=0;l<c.subBoxs.length;l++){var i=c.subBoxs[l];if(t[n].subBoxs[o].subBoxs[l].frontId=n+"_"+o+"_"+l,i.subBoxs&&i.subBoxs.length>0)for(var s=0;s<i.subBoxs.length;s++){var u=i.subBoxs[s];if(t[n].subBoxs[o].subBoxs[l].subBoxs[s].frontId=n+"_"+o+"_"+l+"_"+s,u.subBoxs&&u.subBoxs.length>0)for(var f=0;f<u.subBoxs.length;f++){u.subBoxs[f];t[n].subBoxs[o].subBoxs[l].subBoxs[s].subBoxs[f].frontId=n+"_"+o+"_"+l+"_"+s+"_"+f}}}}}return t},t.addFrontIdMenu=function(e){for(var t=a()(e),n=0;n<t.length;n++){var r=t[n];if(t[n].frontId=n+"",r.childmenus&&r.childmenus.length>0)for(var o=0;o<r.childmenus.length;o++)t[n].childmenus[o].frontId=n+"_"+o}return t},t.getOneTreeData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return e.map((function(e,r){var a=e.checked,o=e.groupName,c=void 0===o?"":o,l=e.boxName,i=void 0===l?"":l,s=e.subBoxs,u=void 0===s?[]:s,f=e.frontId,p=c||i;return u.length>0?{title:p,key:f,children:t.getOneTreeData(u,n)}:(a&&t[n].push(f),{title:p,key:f})}))},t.getMenuTreeData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var n=e.checked,r=e.childmenus,a=void 0===r?[]:r,o=e.menuname,c=void 0===o?"":o,l=(e.item,e.frontId),i=c;return a.length>0?{title:i,key:l,children:t.getMenuTreeData(a)}:(n&&t.treeMenuCheckeys.push(l),{title:i,key:l})}))},t.addCheckedFatherId=function(e){for(var t=[],n=function(n){var r=e[n],a=[];r.replace(/_/g,(function(e,t){a.push(r.substring(0,t))})),t=[].concat(fe(t),a)},r=0;r<e.length;r++)n(r);return Array.from(new Set([].concat(fe(e),fe(t))))},t.getOneComitData=function(e){var n=t.state,r=n.dataMenu,a=n.dataObject,o=t.getAllCheckedIds(),c=o.menuCheckedIds,l=o.dataObjectCheckedIds;return{comitDataMenu:t.changChecked(r,c),comitDataObject:t.changChecked(a,l)}},t.changChecked=function(e,n){return e.map((function(e){var r=e.frontId,a=e.subBoxs,o=void 0===a?[]:a,c=e.childmenus,l=void 0===c?[]:c,i=e.menuname,s=n.includes(r),u=se(se({},e),{},{checked:s});return i?u.childmenus=l.length>0&&t.changChecked(l,n)||[]:u.subBoxs=o.length>0&&t.changChecked(o,n)||[],delete u.frontId,u}))},t.saveOkHandle=function(){t.formRef.current.submit()},t.onFinish=function(e){var n=t.getOneComitData(),r=n.comitDataMenu,a=n.comitDataObject,o=JSON.stringify(r),c=fe(a),l=se(se({},e),{},{res:[{resource:o,type:"menu"}],dataJson:JSON.stringify(c),roleId:t.roleId});Object(f.c)(f.a.saveRole,l,{loading:!0}).then((function(e){Object(Z.a)({type:"success",description:"用户角色保存成功！"}),t.props.history.push({pathname:"/userCenter/role/list"})}))},t.onCheckNode=function(e,n){t.setState(ue({},n,e),(function(){}))},t.getAllCheckedIds=function(){var e=t.state,n=e.treeMenuCheckeys,r=e.treeDataObjectCheckeys;return{menuCheckedIds:t.addCheckedFatherId(n),dataObjectCheckedIds:t.addCheckedFatherId(r)}},t.getCheckedTree=function(){var e=t.state,n=e.treeDataMenu,r=e.treeDataObject,a=t.getAllCheckedIds(),o=a.menuCheckedIds,c=a.dataObjectCheckedIds,l=[];return o.length>0&&l.push({title:"功能菜单",key:"menu",children:t.fitherChecked(n,o)}),c.length>0&&l.push({title:"数据对象",key:"objec",children:t.fitherChecked(r,c)}),l},t.fitherChecked=function(e,n){for(var r=[],a=0;a<e.length;a++){var o=e[a],c=o.title,l=o.key,i=o.children,s=void 0===i?[]:i;n.includes(l)&&r.push({title:c,key:l+"_new"+c+"_"+a,children:t.fitherChecked(s,n)})}return r},t.onExpand=function(e){t.setState({expandedKeys:e,autoExpandParent:!1})},t.generateList=function(e,n){for(var r=0;r<e.length;r++){var a=e[r],o=a.key;t.keylist[n].push({key:o,title:o}),a.children&&generateList(a.children,n)}},t.onSearch=function(e){var n=e.target.value,r=t.keylist[curTab].map((function(e){return e.title.indexOf(n)>-1?e.key.substring(0,e.key.lastIndexOf("_")):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t}));t.setState({expandedKeys:r,searchValue:n,autoExpandParent:!0})},t.changeTab=function(e){t.setState({curTab:e})},t.roleId=Object(M.h)("roleId")&&decodeURI(Object(M.h)("roleId"))||void 0,t.state={roleName:Object(M.h)("roleName")&&decodeURI(Object(M.h)("roleName"))||"",remark:Object(M.h)("remark")&&decodeURI(Object(M.h)("remark"))||"",dataMenu:[],dataObject:[],treeDataMenu:[],treeDataObject:[],treeMenuCheckeys:[],treeDataObjectCheckeys:[],menuCheckedIds:[],dataObjectCheckedIds:[],expandedKeys:[],searchValue:"",autoExpandParent:!0,curTab:0},t.formRef=Object(l.createRef)(),t.treeMenuCheckeys=[],t.treeDataObjectCheckeys=[],t.keylist=[[],[],[]],t}return t=c,(n=[{key:"componentDidMount",value:function(){this.getRights()}},{key:"render",value:function(){var e=this,t=this.state,n=t.roleName,r=t.remark,a=t.treeDataMenu,o=t.treeDataObject,c=t.treeMenuCheckeys,l=t.treeDataObjectCheckeys,s=(t.searchValue,t.expandedKeys,t.autoExpandParent,this.getCheckedTree()),u=[{name:"功能菜单",treeDataNam:a,checkKeysNam:c,type:"treeMenuCheckeys"},{name:"数据对象",treeDataNam:o,checkKeysNam:l,type:"treeDataObjectCheckeys"}];return i.a.createElement("div",{className:"page-role-edit"},i.a.createElement(d.a,{title:this.roleId?"编辑角色":"创建角色",titleBack:!0}),i.a.createElement("div",{className:"pagebody comm-shadowbox"},i.a.createElement("div",{className:"mod"},i.a.createElement("div",{className:"tit"},"基础信息"),i.a.createElement(v.a,{onFinish:this.onFinish,initialValues:{roleName:n,remark:r},ref:this.formRef},i.a.createElement(v.a.Item,{label:"角色名",name:"roleName",rules:[{required:!0,message:"请输入角色名"},{max:20,message:"最大输入长度为20字符"}]},i.a.createElement(g.a,{placeholder:"请输入角色名"})),i.a.createElement(v.a.Item,{label:"备注",name:"remark",rules:[{required:!0,message:"请输入备注"},{max:20,message:"最大输入长度为20字符"}]},i.a.createElement(g.a,{placeholder:"请输入备注"})))),i.a.createElement("div",{className:"mod"},i.a.createElement("div",{className:"tit"},"权限配置"),i.a.createElement("div",{className:"treemod"},i.a.createElement("div",{className:"borderbox"},i.a.createElement(re.a,{onChange:this.changeTab},u.map((function(t,n){var r=t.name,a=t.treeDataNam,o=t.checkKeysNam,c=t.type;return i.a.createElement(re.a.TabPane,{tab:r,key:n},a.length>0&&i.a.createElement(ae.a,{checkable:!0,onCheck:function(t){e.onCheckNode(t,c)},checkedKeys:o,autoExpandParent:!0,treeData:a})||i.a.createElement(ce.a,null))})))),i.a.createElement("div",{className:"borderbox"},s.length>0&&i.a.createElement(ae.a,{showLine:!0,autoExpandParent:!0,treeData:s,defaultExpandAll:!0})||i.a.createElement(ce.a,null)))),i.a.createElement(oe.a,{preBtn:!1,nextHandle:this.saveOkHandle,nextText:this.roleId?"保存":"创建"})))}}])&&de(t.prototype,n),r&&de(t,r),c}(l.Component),ge=(n("UTJx"),n("dVdO")),Ee=(n("kt2P"),n("enwP")),Oe=n("FC04"),Ie=(n("xzjF"),n("PeP6")),we=n("5ixe"),ke=n.n(we),Ne=(n("hjnz"),n("U2X+")),Se=n("R2s5"),je=(n("hz08"),n("rwTb")),xe=n("M7r8");n("ccuU");function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(){return(Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Me(e);if(t){var a=Me(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Te(this,n)}}function Te(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Be=Ie.a.Option,Le=[{id:1,text:"自动生成默认密码"},{id:2,text:"手动设置登录密码"}],Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(o,e);var t,n,r,a=De(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),console.log(777,e),(t=a.call(this,e)).addUserList=function(){var e=t.state.userNameList;if(e.length>=10)return Object(Z.a)({description:"添加用户一次最多添加10个！"}),!1;e.push(""),t.setState({userNameList:e})},t.deleteUserList=function(e){var n=t.state.userNameList;n.splice(e,1),t.setState({userNameList:n})},t.roleSelect=function(e){t.setState({roleId:e})},t.resetSelect=function(e){1==e?(t.setState({resetSelectId:e}),setTimeout((function(){t.props.form.setFieldsValue({password:"a123456"})}),100)):(t.setState({resetSelectId:e}),t.props.form.setFieldsValue({password:""}))},t.userName=function(e,n){var r=t.state.userNameList;r[e]=n.target.value,t.setState({userNameList:r})},t.passwordInput=function(e){t.setState({password:e.target.value})},t.remark=function(e){t.setState({remark:e.target.value})},t.affirm=function(e){e.preventDefault(),(0,t.props.form.validateFieldsAndScroll)((function(e,n){if(!e){for(var r=t.state.userNameList,a=0;a<r.length;a++){if(r[a]=ke()(r[a]),!r[a])return Object(Z.a)({description:"请填写用户名称！"}),!1;if(r[a]=r[a].split("@")[0],!Object(M.c)(r[a]))return Object(Z.a)({description:"请正确格式的用户名称！大小写字母+数字6~14位"}),!1}for(var o=0;o<r.length;o++)for(var c=r[o],l=o+1;l<r.length;l++){if(c==r[l])return Object(Z.a)({description:"第"+(o+1)+"跟第"+(l+1)+"个用户名重复，请重新输入！"}),!1}for(var i=0;i<r.length;i++)r[i]=r[i]+"@"+t.props.developerInfo.userId;var s={userNameList:r,roleId:n.roleId};s.password=Object(M.g)(n.password),n.remark&&(s.remark=n.remark),Object(f.c)(f.a.addMultiChild,s,{needJson:!0}).then((function(e){0==e.code&&(Object(Z.a)({type:"success",description:"用户创建成功！"}),t.setState({userNameList:[""],roleId:null,resetSelectId:"",password:"",remark:""},(function(){t.props.form.resetFields(),t.props.onAddClose(),t.props.pagerIndex(1)})))}))}}))},t.passwordCheck=function(e,t,n){/^^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$/.test(t)?n():n("密码格式为大小写字母加数字，长度为6-18")},t.state={userNameList:[""],roleList:[],roleId:null,resetSelectId:"",password:"",remark:""},t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.onRef(this),Object(f.c)(f.a.getRolePage,{pageIndex:1,pageRows:9999}).then((function(t){e.setState({roleList:t.data.list})}))}},{key:"render",value:function(){var e=this,t=this.props.form,n=t.getFieldDecorator,r=t.getFieldValue,a=this.state,o=a.resetSelectId,c=a.remark,l=a.userNameList,s=a.roleList;o=r("resetSelectId");var u=this.props.developerInfo.userId;return i.a.createElement(Se.a,Re({},{labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:19},sm:{span:19}}},{onSubmit:this.affirm,className:"add-user-box"}),i.a.createElement("div",{className:"add-user-box"},i.a.createElement("div",{className:"common_title_input"},i.a.createElement(y.a,{gutter:8},i.a.createElement(b.a,{span:5,className:"label"},i.a.createElement("span",{className:"form-require on-require"},i.a.createElement(je.a,{label:"用户名",tip:"控制台访问时的登录名。"}))),i.a.createElement(b.a,{span:19},l.map((function(t,r){return i.a.createElement("div",{className:"uesrName",key:"productName"+r},i.a.createElement(Se.a.Item,{label:"",hasFeedback:!0,colon:!1},n("productName_"+r,{rules:[{required:!0,min:6,max:14,message:"请输入6~14位大小写字母＋数字"}]})(i.a.createElement(g.a,{className:"input",style:{width:"300px"},placeholder:"请输入用户名称",suffix:"@"+u,onChange:e.userName.bind(e,r)}))),r>0?i.a.createElement("span",{className:"delete",onClick:e.deleteUserList.bind(e,r)},i.a.createElement(Ne.a,null)):null)})))),i.a.createElement("span",{className:"addUesr explainLink-N",onClick:this.addUserList},"添加用户")),i.a.createElement("div",{className:"common_title_input"},i.a.createElement(Se.a.Item,{label:"用户角色",hasFeedback:!0},n("roleId",{rules:[{required:!0,message:"请选择用户角色"}]})(i.a.createElement(Ie.a,{showSearch:!0,style:{width:"180px"},placeholder:"请选择",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},s.map((function(e,t){return i.a.createElement(Be,{key:t+"用户角色",value:e.roleId},e.roleName)})))))),i.a.createElement("div",{className:"common_title_input"},i.a.createElement("div",{className:"reset-select"},i.a.createElement(Se.a.Item,{label:"登录密码",hasFeedback:!0},n("resetSelectId",{rules:[{required:!0,message:"请选择密码生成方式"}]})(i.a.createElement(Ie.a,{style:{width:"180px"},placeholder:"请选择",onChange:this.resetSelect},Le.map((function(e,t){return i.a.createElement(Be,{key:t+"登录密码",value:e.id},e.text)}))))),o?i.a.createElement(Se.a.Item,{label:" ",colon:!1},n("password",{rules:[{required:!0,validator:this.passwordCheck,message:"密码格式为大小写字母加数字，长度为6-18"}]})(1==o?i.a.createElement(g.a,{style:{width:"240px"},disabled:!0}):i.a.createElement(g.a.Password,{style:{width:"240px"},placeholder:"密码格式为大小写字母加数字，长度为6-18"}))):null)),i.a.createElement("div",{className:"common_title_input"},i.a.createElement(xe.a,{label:"备注",formId:"remark",astrictNub:"100",rows:"2",placeholder:"请输入备注",getFieldDecorator:n,initialVal:c,width:"300px",getFieldValue:r}))),i.a.createElement("div",{className:"but"},i.a.createElement(h.a,{type:"primary",htmlType:"submit"},"确定"),i.a.createElement(h.a,{className:"cancel",onClick:this.props.onCancel},"取消")))}}])&&Pe(t.prototype,n),r&&Pe(t,r),o}(l.Component),Ve=Se.a.create({name:"addUserInfo"})(Fe),Ue=(n("y1Sk"),n("yq+b")),Ae=n.n(Ue);function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze(e);if(t){var a=Ze(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ze(this,n)}}function ze(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?qe(e):t}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(o,e);var t,n,r,a=He(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(f.c)(f.a.getChildlist,e).then((function(e){t.setState({userList:e.data.list,pager:e.data.pager,loading:!1})}))},t.addUser=function(){t.setState({addUserVisible:!0})},t.searchProduct=function(e){t.state.pageIndex;t.setState({loading:!0,userName:e},(function(){t.pagerIndex(1)}))},t.startOrForbidden=function(e,n,r){1==e?t.setState({forbiddenModalVisible:!0,userName:n,userId:r}):0==e&&t.setState({startModalVisible:!0,userName:n,userId:r})},t.startModal=function(e){if(1==e){var n=t.state,r=n.userId,a=n.pageIndex;a=a||1,Object(f.c)(f.a.unfreezeChild,{userId:r}).then((function(e){0==e.code&&t.setState({loading:!0},(function(){t.getList({pageIndex:a,pageRows:10})}))}))}t.setState({startModalVisible:!1})},t.forbiddenModal=function(e){if(1==e){var n=t.state,r=n.userId,a=n.pageIndex;a=a||1,Object(f.c)(f.a.freezeChild,{userId:r}).then((function(e){0==e.code&&t.setState({loading:!0},(function(){t.getList({pageIndex:a,pageRows:10})}))}))}t.setState({forbiddenModalVisible:!1})},t.delete=function(e){t.setState({deleteModalVisible:!0,userId:e})},t.inputOnChangeHandle=function(e){t.setState({deleteInputValue:e.target.value})},t.deleteModal=function(e){if(1==e){if("delete"!=t.state.deleteInputValue)return Object(Z.a)({type:"info",description:"请输入delete确认删除！"}),!1;var n=t.state,r=n.userId,a=n.pageIndex,o=n.pager;a=a||1,Object(f.c)(f.a.deleteChild,{userId:r}).then((function(e){0==e.code&&t.setState({loading:!0,deleteInputValue:""},(function(){a=o.totalRows%(10*(a-1))>1?a:a-1,t.getList({pageIndex:a,pageRows:10})}))}))}t.setState({deleteModalVisible:!1})},t.keyDownEnter=function(e){13===e.keyCode&&t.deleteModal(1)},t.addUserModal=function(e){1==e?t.addUserRefs.affirm():(t.setState({addUserVisible:!1}),t.addUserRefs.setState({userNameList:[""],userCategory:1,roleId:null,resetSelectId:"",password:"",ipWhiteSelect:!1,ipWhiteList:"",remark:""}),t.addUserRefs.props.form.resetFields())},t.closeAdd=function(){t.setState({addUserVisible:!1})},t.pagerIndex=function(e){t.setState({pageIndex:e,loading:!0},(function(){t.getList({pageIndex:e,pageRows:10,userName:t.state.userName||void 0})}))},t.state={loading:!0,userList:[],pager:{},addUserVisible:!1,userName:"",userId:"",startModalVisible:!1,forbiddenModalVisible:!1,deleteModalVisible:!1,deleteInputValue:"",deleteId:"",pageIndex:""},t.columns=[{title:"用户名",dataIndex:"userName",key:"userName",render:function(e){return i.a.createElement(Ee.a,{placement:"topLeft",title:e},i.a.createElement("a",null,e))}},{title:"用户角色",dataIndex:"userRole",key:"userRole",render:function(e){return i.a.createElement(Ee.a,{placement:"topLeft",title:e}," ",i.a.createElement("span",null,e)," ")}},{title:"备注",dataIndex:"remark",key:"remark",render:function(e){return i.a.createElement(Ee.a,{placement:"topLeft",title:e}," ",i.a.createElement("span",null,e)," ")}},{title:"用户状态",dataIndex:"status",key:"status",width:"100px",render:function(e,t){return 1==t.status?i.a.createElement("span",{className:"colordot colordotgreen"},"正常"):i.a.createElement("span",{className:"colordot colordotred"},"停用")}},{title:"创建时间",dataIndex:"regTime",key:"regTime",width:"160px",render:function(e){return i.a.createElement("span",null,Ae()(e).add(8,"h").format("YYYY-MM-DD HH:mm:ss"))}},{title:"操作",key:"action",width:"140px",render:function(e,n){var r=n.userId,a=n.status,o=n.userName;return i.a.createElement("span",null,i.a.createElement(q.b,{to:{pathname:"/userCenter/visitUser/detail",search:"?userId=".concat(r)}},"查看"),i.a.createElement(z.a,{type:"vertical"}),1==a?i.a.createElement("a",{onClick:t.startOrForbidden.bind(qe(t),1,o,r),style:{color:"#FF3100"}},"停用"):i.a.createElement("a",{onClick:t.startOrForbidden.bind(qe(t),0,o,r)},"启用"),i.a.createElement(z.a,{type:"vertical"}),i.a.createElement("a",{onClick:t.delete.bind(qe(t),r)},"删除"))}}],t}return t=o,(n=[{key:"componentDidMount",value:function(){this.getList({pageIndex:1,pageRows:10})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.userName,a=t.addUserVisible,o=t.startModalVisible,c=t.forbiddenModalVisible,l=t.deleteModalVisible,s=t.deleteInputValue,u=t.userList,f=t.pager;return i.a.createElement("div",{className:"user-visit-box"},i.a.createElement(d.a,{title:"访问用户"},i.a.createElement("div",{className:"user-page-content-header"},i.a.createElement("div",{className:"comm-searchBox"},i.a.createElement(g.a.Search,{placeholder:"请输入用户名查找",enterButton:!0,maxLength:20,onSearch:function(t){return e.searchProduct(t)}})),i.a.createElement("div",{className:"butFloatRight"},i.a.createElement(h.a,{className:"but-add",type:"primary",onClick:this.addUser},"创建用户")))),i.a.createElement("div",{className:"comm-shadowbox"},i.a.createElement(J.a,{rowKey:"userId",columns:this.columns,dataSource:u,pagination:{defaultCurrent:f.pageIndex,total:f.totalRows,hideOnSinglePage:!1,onChange:this.pagerIndex,current:f.pageIndex},loading:n})),i.a.createElement(ge.a,{title:"创建用户",visible:a,onOk:this.addUserModal.bind(this,1),onCancel:this.addUserModal.bind(this,2),maskClosable:!1,className:"self-modal",footer:null},i.a.createElement(Ve,{developerInfo:this.props.developerInfo,onAddClose:this.closeAdd,onCancel:this.addUserModal.bind(this,2),pagerIndex:this.pagerIndex,onRef:function(t){return e.addUserRefs=t}})),i.a.createElement(Oe.a,{visible:o,modalOKHandle:this.startModal.bind(this,1),modalCancelHandle:this.startModal.bind(this,2),title:"启用用户",tipText:"启用用户后，该用户将恢复访问。",descText:"即将启用用户",targetName:r}),i.a.createElement(Oe.a,{visible:c,modalOKHandle:this.forbiddenModal.bind(this,1),modalCancelHandle:this.forbiddenModal.bind(this,2),title:"停用用户",tipText:"停用用户后，该用户将暂时无法访问，您可以重新启用账户。",descText:"即将停用用户",needWarnIcon:!0,targetName:r}),i.a.createElement(Oe.a,{visible:l,modalOKHandle:this.deleteModal.bind(this,1),modalCancelHandle:this.deleteModal.bind(this,2),title:"删除用户",tipText:"删除用户将同步删除UUID和用户SecretKey，无法找回，请谨慎操作。",descText:"即将删除用户",needWarnIcon:!0,targetName:r},i.a.createElement(g.a,{className:"modal-content-input",onChange:this.inputOnChangeHandle,placeholder:"请输入“delete”确认删除该用户",maxLength:20,value:s,onKeyDown:function(t){e.keyDownEnter(t)}})))}}])&&We(t.prototype,n),r&&We(t,r),o}(l.Component),Ge=n("S18n");function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nt(e);if(t){var a=nt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return tt(this,n)}}function tt(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rt,at=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(o,e);var t,n,r,a=et(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={},t}return t=o,(n=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.userInfo,n=(e.secretKey,e.secretId,function(e){var t=e.title,n=e.label,r=e.type;return i.a.createElement("p",{className:"list-item"},i.a.createElement("span",{className:"title"},t,"："),"visible"===r?i.a.createElement(Ge.a,{label:n||"",tip:"点击复制",copy:!0}):i.a.createElement("span",null,n))});return i.a.createElement("div",{className:"basic-information-box"},i.a.createElement(h.a,{className:"but-edit basic-information-edit",type:"primary",onClick:this.props.editUserInfo},"编辑"),i.a.createElement(m.a,{title:"基础信息",className:"comm-shadowbox"},i.a.createElement("div",{className:"device-info"},i.a.createElement(n,{title:"用户名",label:t.userName||"--"}),i.a.createElement(n,{title:"用户ID",label:t.userId||"--"}),i.a.createElement(n,{title:"用户角色",label:t.userRole||"--"}),i.a.createElement(n,{title:"创建时间",label:M.a.utcToDev(t.regTime)}),i.a.createElement(n,{title:"最新修改时间",label:M.a.utcToDev(t.modifyTime)})),i.a.createElement("p",{className:"userlook-mark"},i.a.createElement("span",null,"备注："),t.remark)))}}])&&Ye(t.prototype,n),r&&Ye(t,r),o}(l.Component),ot=(n("Nsg4"),n("AsDy"));n("7TnZ");function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(){return(lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pt(e);if(t){var a=pt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ft(this,n)}}function ft(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dt=Ie.a.Option,mt=[{id:1,text:"自动生成默认密码"},{id:2,text:"手动设置登录密码"}],yt={labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:19},sm:{span:19}}},ht=Object(u.b)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS()}}),null)(rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(o,e);var t,n,r,a=ut(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).roleSelect=function(e){t.setState({roleId:e})},t.reset=function(e){t.setState({resetChecked:e})},t.resetSelect=function(e){1==e?(t.setState({resetSelectId:e}),setTimeout((function(){t.props.form.setFieldsValue({password:"a123456"})}),100)):(t.setState({resetSelectId:e}),t.props.form.setFieldsValue({password:""}))},t.passwordInput=function(e){t.setState({password:e.target.value})},t.userName=function(e){t.setState({userName:e.target.value})},t.backfill=function(e){t.setState({userName:e.userName||null,remark:e.remark||"",roleId:e.roleId||null,ipWhiteSelect:!!e.ipWhiteList,ipWhiteList:e.ipWhiteList,resetChecked:!1})},t.remark=function(e){t.setState({remark:e.target.value})},t.affirm=function(e){e.preventDefault(),(0,t.props.form.validateFieldsAndScroll)((function(e,n){if(!e){var r=t.state.resetChecked,a=t.props.userData.userId,o=n.roleId,c=(n.userName,n.password),l=n.remark,i={userId:a,roleId:o};r&&(i.password=Object(M.g)(c)),l&&(i.remark=l),Object(f.c)(f.a.updateChild,i,{loading:!0}).then((function(e){t.props.handleClose()}))}}))},t.passwordCheck=function(e,t,n){/^^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$/.test(t)?n():n("密码格式为大小写字母加数字，长度为6-18")},t.state={resetChecked:!1,resetSelectId:null,password:null,userName:t.props.userData.userName||null,remark:t.props.userData.remark||"",roleId:t.props.userData.roleId||null,roleList:[],ipWhiteSelect:!!t.props.userData.ipWhiteList,ipWhiteList:t.props.userData.ipWhiteList},t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.onRef(this),Object(f.c)(f.a.getRolePage,{pageIndex:1,pageRows:9999}).then((function(t){e.setState({roleList:t.data.list})}))}},{key:"render",value:function(){var e=this.state,t=e.resetChecked,n=e.remark,r=e.userName,a=e.roleId,o=e.roleList,c=this.props.form,l=c.getFieldDecorator,s=c.getFieldValue,u=t?s("resetSelectId"):null;return i.a.createElement(Se.a,lt({},yt,{onSubmit:this.affirm,className:"edit-basic-information"}),i.a.createElement("div",{className:"common_title_input"},i.a.createElement("span",{className:"common_title"},"用户名:"),i.a.createElement("div",{className:"common_content"},r)),i.a.createElement("div",{className:"common_title_input"},i.a.createElement(Se.a.Item,{label:"用户角色",hasFeedback:!0},l("roleId",{rules:[{required:!0,message:"请选择用户角色"}],initialValue:a})(i.a.createElement(Ie.a,{style:{width:"180px"},placeholder:"请选择"},o.map((function(e,t){return i.a.createElement(dt,{key:t+"用户角色",value:e.roleId},e.roleName)})))))),i.a.createElement("div",{className:"common_title_input"},i.a.createElement(Se.a.Item,{label:"重置密码："},l("resetChecked")(i.a.createElement(ot.a,{size:"small",checked:t,onClick:this.reset}))),t?i.a.createElement("div",{className:"reset-select"},i.a.createElement(Se.a.Item,{label:" ",colon:!1},l("resetSelectId",{rules:[{required:!0,message:"请选择密码生成方式"}]})(i.a.createElement(Ie.a,{style:{width:"180px"},placeholder:"请选择密码生成方式",onChange:this.resetSelect},mt.map((function(e,t){return i.a.createElement(dt,{key:t+"登录密码",value:e.id},e.text)}))))),u?i.a.createElement(Se.a.Item,{label:" ",colon:!1},l("password",{rules:[{required:!0,validator:this.passwordCheck,message:"密码格式为大小写字母加数字，长度为6-18"}]})(1==u?i.a.createElement(g.a,{style:{width:"240px"},disabled:!0}):i.a.createElement(g.a.Password,{style:{width:"240px"},placeholder:"密码格式为大小写字母加数字，长度为6-18"}))):null):null),i.a.createElement("div",{className:"common_title_input"},i.a.createElement(xe.a,{label:"备注",formId:"remark",astrictNub:"100",rows:"2",placeholder:"请输入备注",getFieldDecorator:l,initialVal:n,width:"300px",getFieldValue:s})),i.a.createElement("div",{className:"but"},i.a.createElement(h.a,{type:"primary",htmlType:"submit"},"确定"),i.a.createElement(h.a,{className:"cancel",onClick:this.props.onCancel},"取消")))}}])&&it(t.prototype,n),r&&it(t,r),o}(l.Component))||rt,bt=Se.a.create({name:"editBasicInformation"})(ht),vt=n("uEBy"),gt=n("OFK6");n("kmdx");function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(){return(Ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=St(e);if(t){var a=St(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Nt(this,n)}}function Nt(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jt=ae.a.TreeNode,xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(o,e);var t,n,r,a=kt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getChildWithSecret=function(){var e=Object(M.h)("userId");Object(f.c)(f.a.getChildWithSecret,{userId:e},{loading:!0}).then((function(e){t.setState({userInfo:e.data,loading:!1,secretKey:e.data.secretKey,secretId:e.data.secretId})}))},t.clickEye=function(e){t.setState({eye:!t.state.eye})},t.renderTreeNodes=function(e){return e.map((function(e){return e.children?i.a.createElement(jt,{title:e.title,key:e.key,dataRef:e},t.renderTreeNodes(e.children)):i.a.createElement(jt,Ot({key:e.key},e))}))},t.handleOk=function(){t.editAffirm.affirm()},t.handleOkCancel=function(){t.editAffirm.setState({resetChecked:!1,resetSelectId:null,password:null,userName:"",remark:"",roleId:null,ipWhiteSelect:!1,ipWhiteList:""},(function(){t.getChildWithSecret()})),t.setState({userEditVisible:!1}),console.log("---close"),t.editAffirm.props.form.resetFields()},t.handleCancel=function(e,n){t.setState({userEditVisible:!1}),console.log("---close"),t.editAffirm.props.form.resetFields(),console.log(t.editAffirm.props.form.getFieldsValue())},t.editUserInfo=function(){t.editAffirm&&t.editAffirm.backfill(t.state.userInfo),t.setState({userEditVisible:!0})},t.state={permissionsTabsKey:"1",userEditVisible:!1,userInfo:{},loading:!0,dataTable:[],secretKey:"",secretId:"",eye:!0,treeData:{}},t.columns=[{title:"用户SecretId",dataIndex:"secretId",key:"secretId"},{title:"用户SecretKey",dataIndex:"secret",key:"secret",render:function(e){return i.a.createElement("a",null,t.state.eye?Object(M.m)(e,10):e,t.state.eye?i.a.createElement(vt.a,{className:"eyeLeft",onClick:t.clickEye}):i.a.createElement(gt.a,{className:"eyeLeft",onClick:t.clickEye}))}},{title:"创建时间",dataIndex:"time",key:"time"}],t}return t=o,(n=[{key:"getRights",value:function(){var e=this,t=Object(M.h)("userId");Object(f.c)(f.a.getRights,{userId:t},{loading:!0}).then((function(t){e.setState({treeData:t.data||{}})}))}},{key:"componentDidMount",value:function(){this.getChildWithSecret(),this.getRights()}},{key:"render",value:function(){var e=this,t=this.state,n=t.userInfo,r=t.secretKey,a=t.secretId,o=t.userEditVisible,c=t.treeData;return i.a.createElement("div",{className:"user-info-box"},i.a.createElement(d.a,{title:"用户详情",titleBack:!0}),i.a.createElement(at,{editUserInfo:this.editUserInfo,userInfo:n,secretKey:r,secretId:a}),i.a.createElement(m.a,{title:"权限信息",className:"comm-shadowbox"},i.a.createElement(T.a,{treeData:c})),i.a.createElement(ge.a,{title:"编辑用户信息",visible:o,onOk:this.handleOk,onCancel:this.handleCancel,maskClosable:!1,className:"self-modal",footer:null},i.a.createElement(bt,{userData:n,onCancel:this.handleCancel,onRef:function(t){return e.editAffirm=t},handleClose:this.handleOkCancel})))}}])&&It(t.prototype,n),r&&It(t,r),o}(l.Component);function Ct(){return(Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Rt=n("7U7l");function Pt(e){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lt(e);if(t){var a=Lt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Bt(this,n)}}function Bt(e,t){return!t||"object"!==Pt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lt(e){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ft=[{title:"身份验证"},{title:"重置密码"},{title:"完成"}],Vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(o,e);var t,n,r,a=Mt(o);function o(){return _t(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.developerInfo.email;return i.a.createElement(Rt.a,{FlowList:Ft,cType:2,emailFromFather:e||"",isNeedVerifyType:!0,title:"重置密码"})}}])&&Dt(t.prototype,n),r&&Dt(t,r),o}(l.Component);function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wt(e,t){return(Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zt(e);if(t){var a=zt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ht(this,n)}}function Ht(e,t){return!t||"object"!==Ut(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qt=[{title:"身份验证"},{title:"设置电子邮箱"},{title:"完成"}],Zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(o,e);var t,n,r,a=Jt(o);function o(){return At(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.developerInfo.email;return i.a.createElement(Rt.a,{FlowList:qt,cType:3,emailFromFather:e,isNeedVerifyType:!0,title:"修改电子邮箱"})}}])&&Kt(t.prototype,n),r&&Kt(t,r),o}(l.Component);function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tn(e);if(t){var a=tn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return en(this,n)}}function en(e,t){return!t||"object"!==$t(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nn=[{title:"身份验证"},{title:"提交注销申请"},{title:"审核"}],rn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}(o,e);var t,n,r,a=Qt(o);function o(){return Gt(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.developerInfo,t=e.email,n=e.userId;return i.a.createElement(Rt.a,{FlowList:nn,cType:5,emailFromFather:t||"",isNeedVerifyType:!0,userId:n,title:"注销账号"})}}])&&Xt(t.prototype,n),r&&Xt(t,r),o}(l.Component),an=n("g5u9"),on=n("nyxj");function cn(e){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function un(e,t){return(un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dn(e);if(t){var a=dn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return pn(this,n)}}function pn(e,t){return!t||"object"!==cn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dn(e){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&un(e,t)}(o,e);var t,n,r,a=fn(o);function o(){return ln(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.history;return i.a.createElement(an.a,{needHeader:!1,isInPage:!0},i.a.createElement("div",{className:"content-area"},i.a.createElement("div",{className:"title"},"重置登录密码"),i.a.createElement("div",{className:"desc default middle-fontsize"},"重置子账户登录密码，需要验证原登录账号"),i.a.createElement(on.d,{history:e})))}}])&&sn(t.prototype,n),r&&sn(t,r),o}(l.Component),yn=n("InJP");function hn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],c=!0,l=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vn(e){var t=e.developerInfo,n=e.history,r=e.getDeveloperInfo,a=e.isNotSub,o=t.userId,c=t.secretId,s=t.secretKey,u=t.regTime,p=t.email,m=t.status,y=hn(Object(l.useState)(!1),2),h=y[0],b=y[1],v=hn(Object(l.useState)(!1),2),g=v[0],E=v[1],O=function(e){n.push({pathname:"/userCenter/security/".concat(e)})};return i.a.createElement("div",{className:"page-usersafe-set"},i.a.createElement(d.a,{title:"安全设置"}),i.a.createElement("div",{className:"safe-setting comm-shadowbox"},i.a.createElement("div",{className:"setting-item flex-row"},i.a.createElement("div",{className:"left-desc flex1"},i.a.createElement("div",{className:"title"},"API访问秘钥"),i.a.createElement("div",{className:"desc-content"},i.a.createElement("div",{className:"p-flex"},i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"tit"},"开发者ID："),o),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"tit"},"用户secretId："),h?c:Object(M.m)(c,10),i.a.createElement(yn.a,{visiable:h,clickBack:function(){b((function(e){return!e}))}})),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"tit"},"用户SecretKey："),g?s:Object(M.m)(s,10),i.a.createElement(yn.a,{visiable:g,clickBack:function(){E((function(e){return!e}))}})),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"tit"},"创建时间："),u?M.a.utcToDev(u):"--"))))),i.a.createElement("div",{className:"setting-item flex-row"},i.a.createElement("div",{className:"left-desc flex1"},i.a.createElement("div",{className:"title"},"登录密码"),i.a.createElement("div",{className:"desc-content"},"登录平台需验证密码。以字母开头的6到18位的字母，数字和下划线。建议您定期更换密码。")),i.a.createElement("div",{className:"setting-btn-wrapper"},i.a.createElement("div",{className:"btns"},i.a.createElement("span",{className:"btn-has"},"已设置"),i.a.createElement("span",{onClick:function(){return O(a?"resetPassword":"subResetPassword")},className:"btn-can-control"},"重置")))),a&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"setting-item flex-row"},i.a.createElement("div",{className:"left-desc flex1"},i.a.createElement("div",{className:"title"},"电子邮箱"),i.a.createElement("div",{className:"desc-content"},"电子邮箱地址可用于登录平台，也可以用于接收服务通知信息。")),i.a.createElement("div",{className:"setting-btn-wrapper"},i.a.createElement("div",{className:"btns"},i.a.createElement("span",{className:p?"btn-has":"btn-not-has"},p?"已设置":"未设置"),i.a.createElement("span",{onClick:function(){return O("updateEmail")},className:"btn-can-control"},"重置")))),i.a.createElement("div",{className:"setting-item flex-row"},i.a.createElement("div",{className:"left-desc flex1"},i.a.createElement("div",{className:"title"},"注销账户"),i.a.createElement("div",{className:"desc-content"},"如果您不再使用此账号，可以将其注销。账号成功注销后，所有的产品数据及隐私信息将会被永久删除且无法恢复。")),i.a.createElement("div",{className:"setting-btn-wrapper"},i.a.createElement("div",{className:"btns"},4==m?i.a.createElement("span",{onClick:function(){post(f.a.withdraw,{},{loading:!0,userId:o}).then((function(e){r()})).catch((function(e){}))},className:"btn-can-control"},"撤销注销账户申请"):i.a.createElement("span",{onClick:function(){return O("closeAccount")},className:"btn-can-control"},"注销账户")))))))}n("0Zna");function gn(){return(gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var En=n("MUf8"),On=n("k+EZ"),In=n("ZmMk"),wn=n("d8kt"),kn=n("w1Zx");n("J2fM");function Nn(e){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Sn,jn=["menuname","path"];function xn(){return(xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Cn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mn(e);if(t){var a=Mn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Tn(this,n)}}function Tn(e,t){return!t||"object"!==Nn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mn(e){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bn=a()(kn.d),Ln={"基本资料":W,"安全设置":function(e){var t=e.developerInfo,n=e.getDeveloperInfo,r=e.isNotSub,a=e.match.path;return i.a.createElement(s.d,null,i.a.createElement(s.b,{path:"".concat(a,"/setting"),render:function(e){return i.a.createElement(vn,gn({},e,{developerInfo:t,getDeveloperInfo:n,isNotSub:r}))}}),r?i.a.createElement(s.b,{path:"".concat(a,"/resetPassword"),render:function(e){return i.a.createElement(Vt,gn({},e,{developerInfo:t}))}}):i.a.createElement(s.b,{path:"".concat(a,"/subResetPassword"),render:function(e){return i.a.createElement(mn,gn({},e,{developerInfo:t}))}}),r&&i.a.createElement(s.b,{path:"".concat(a,"/updateEmail"),render:function(e){return i.a.createElement(Zt,gn({},e,{developerInfo:t}))}}),r&&i.a.createElement(s.b,{path:"".concat(a,"/closeAccount"),render:function(e){return i.a.createElement(rn,gn({},e,{developerInfo:t}))}}),i.a.createElement(s.a,{to:"".concat(a,"/setting")}))},"访问用户":function(e){var t=e.match.path;return i.a.createElement(s.d,null,i.a.createElement(s.b,{path:"".concat(t,"/list"),render:function(t){return i.a.createElement($e,Ct({},t,e))}}),i.a.createElement(s.b,{path:"".concat(t,"/detail"),render:function(t){return i.a.createElement(xt,Ct({},t,e))}}),i.a.createElement(s.a,{to:"".concat(t,"/list")}))},"用户角色":function(e){var t=e.match.path;return i.a.createElement(s.d,null,i.a.createElement(s.b,{path:"".concat(t,"/list"),component:ne}),i.a.createElement(s.b,{path:"".concat(t,"/edit"),component:ve}),i.a.createElement(s.a,{to:"".concat(t,"/list")}))}},Fn=Object(u.b)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS(),newMessageNums:e.getIn(["message","newMessageNums"]).toJS()}}),(function(e){return{getNewMessageNums:function(){return e(Object(wn.b)())},getDeveloperInfo:function(){return e(Object(p.c)())}}}))(Sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(o,e);var t,n,r,a=Dn(o);function o(){return Rn(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.newMessageNums,n=e.getNewMessageNums,r=e.getDeveloperInfo,a=e.developerInfo;c()(t)&&n(),c()(a)&&r()}},{key:"render",value:function(){var e=this.props,t=e.developerInfo,n=e.newMessageNums,r=e.getDeveloperInfo;console.log(1234567,t);var a=!(1===t.isSubUser);a||Bn[0].childmenus.splice(2,2);var o=Bn[0].childmenus;return console.log(777,Bn),i.a.createElement(En.a,null,i.a.createElement("div",{className:"page-header-wrapper"},i.a.createElement(On.a,{developerInfo:t,newMessageNums:n})),i.a.createElement("div",{className:"page-content-wrapper"},i.a.createElement("div",{className:"left-menus"},t.userName&&i.a.createElement(In.a,{menulist:Bn})),i.a.createElement("section",{className:"right-wrapper"},i.a.createElement("div",{className:"right-wrapper-contentbox"},i.a.createElement(s.d,null,o.map((function(e,n){var o=e.menuname,c=e.path,l=Cn(e,jn),u=Ln[o];if(u)return i.a.createElement(s.b,{key:n,path:c,render:function(e){return i.a.createElement(u,xn({developerInfo:t,getDeveloperInfo:r,isNotSub:a},e,l))}})})),o[0]&&i.a.createElement(s.a,{to:o[0].path}))))))}}])&&Pn(t.prototype,n),r&&Pn(t,r),o}(l.Component))||Sn},ccuU:function(e,t,n){},ivPg:function(e,t,n){e.exports=n.p+"static/images/no-source-tip.681eb7825cf81b5da33967ff8571f3c6.png"},kmdx:function(e,t,n){},y1Sk:function(e,t,n){}}]);