(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{a971:function(t,e,a){},uTBI:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return w}));a("ef1R"),a("Ra8s"),a("sfoS"),a("HsXu"),a("bs69"),a("Lm8M"),a("ryEf"),a("qgAm"),a("Ck9u"),a("59iL");var n=a("f6Fh"),r=(a("QcZr"),a("b+L2")),o=(a("oENA"),a("uTCA")),u=(a("W0kV"),a("caRq")),l=(a("xzjF"),a("PeP6")),i=(a("av3G"),a("9b3Y"),a("62KB"),a("JiFE"),a("T9Mk")),c=a.n(i),m=a("MeRu"),d=a("Nlzp"),s=(a("a971"),a("6Tta")),f=a.n(s),y=a("bmQt");function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var n,r,o=[],u=!0,l=!1;try{for(a=a.call(t);!(u=(n=a.next()).done)&&(o.push(n.value),!e||o.length!==e);u=!0);}catch(t){l=!0,r=t}finally{try{u||null==a.return||a.return()}finally{if(l)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var h=[{label:"近7天",value:"1"},{label:"近30天",value:"2"}],D=(l.a.Option,u.a.RangePicker),Y=[{label:"新增用户数",count:0},{label:"活跃用户数",count:0},{label:"新增用户次日留存率(昨日)",count:0},{label:"活跃用户次日留存率(昨日)",count:0},{label:"累计用户数",count:0}],p=[{title:"日期",dataIndex:"summaryDate",key:"summaryDate"},{title:"新增用户数",dataIndex:"newNum",key:"newNum"},{title:"活跃用户数",dataIndex:"activeNum",key:"activeNum"},{title:"新增用户次日留存率(昨日)",dataIndex:"newRatio",key:"newRatio"},{title:"活跃用户次日留存率(昨日)",dataIndex:"activeRatio",key:"activeRatio"},{title:"累计用户数",dataIndex:"totalNum",key:"totalNum"}];function w(){var t=b(Object(i.useState)([]),2),e=t[0],a=t[1],n=b(Object(i.useState)(),2),u=n[0],l=n[1],s=b(Object(i.useState)(),2),v=s[0],w=s[1],N=b(Object(i.useState)("1"),2),E=N[0],g=N[1],k=b(Object(i.useState)(Y),2),M=k[0],I=k[1],S=b(Object(i.useState)(0),2),O=S[0],j=S[1],R=b(Object(i.useState)([]),2),A=R[0],L=R[1],T=b(Object(i.useState)(""),2),C=T[0],F=T[1];Object(i.useEffect)((function(){J()}),[E,v,C]);var P=b(Object(i.useState)(!1),2),K=P[0],B=P[1];Object(i.useEffect)((function(){A.length&&(2==O?B(!0):(B(!1),z(A)))}),[O]);var J=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e={};1==E?(e.endDate=f()().subtract(1,"day").format("YYYY-MM-DD"),e.startDate=f()().subtract(8,"day").format("YYYY-MM-DD")):2==E&&(e.endDate=f()().subtract(1,"day").format("YYYY-MM-DD"),e.startDate=f()().subtract(31,"day").format("YYYY-MM-DD")),v&&v.length&&(e.endDate=v[1].format("YYYY-MM-DD"),e.startDate=v[0].format("YYYY-MM-DD")),C&&(e.productId=C),Object(d.c)(d.a.userDataAn,e,{loading:t}).then((function(t){z(t.data.summaryList),q(t.data),L(t.data.summaryList)}))},q=function(t){var e=[{label:"新增用户数",count:t.newNum},{label:"活跃用户数",count:t.activeNum},{label:"新增用户次日留存率(昨日)",count:t.newRatio},{label:"活跃用户次日留存率(昨日)",count:t.activeRatio},{label:"累计用户数",count:t.totalNum}];I(e)},z=function(t){var e,a,n,r=(e=[],a=[],t.forEach((function(t){e.push(t.summaryDate),0==O?a.push(t.newNum):1==O?a.push(t.activeNum):2==O?a.push(t.newRatio):3==O&&a.push(t.activeRatio)})),e=e.reverse(),a=a.reverse(),{xTime:e,xData:a}),o=document.getElementById("echart-show"),u=y.init(o);(n={xAxis:{type:"category",data:r.xTime,axisTick:{show:!1},axisLine:{lineStyle:{color:"#E9E9E9"}},axisLabel:{textStyle:{color:"#000"}}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#000"}},splitLine:{show:!0,lineStyle:{color:"#E9E9E9"}}},grid:{left:"0%",right:"2%",bottom:"0%",top:"4%",containLabel:!0},tooltip:{trigger:"axis",formatter:function(t){for(var e=t[0].name+"<br>",a=0;a<t.length;a++)e+='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+t[a].color+';"></span>',e+=M[O].label+":"+t[a].value+"<br>";return e}},series:[{data:r.xData,type:"line",lineStyle:{normal:{color:"#1890FF"}},itemStyle:{normal:{color:"#1890FF"}}}]})&&u.setOption(n)};return c.a.createElement("div",{id:"device-analysis"},c.a.createElement(m.a,{title:"用户分析",selectOnchange:function(t){return F(t)},isRelProductData:!0}),c.a.createElement("div",{className:"comm-shadowbox filter-wrap"},c.a.createElement(o.a.Group,{options:h,onChange:function(t){w(null),g(t.target.value)},value:E,optionType:"button"}),c.a.createElement(D,{value:u||v,disabledDate:function(t){if(!e||0===e.length)return!1;var a=e[0]&&t.diff(e[0],"days")>30,n=e[1]&&e[1].diff(t,"days")>30;return t>f()().subtract(1,"day")||e[0]>f()().subtract(1,"day")||e[1]>f()().subtract(1,"day")||n||a},onCalendarChange:function(t){return a(t)},onChange:function(t){return function(t){w(t)}(t)},onOpenChange:function(t){t?(l([]),a([])):l(void 0)},format:"YYYY-MM-DD"})),c.a.createElement("div",{className:"comm-shadowbox main-echart"},c.a.createElement("h3",null,"用户趋势分析"),c.a.createElement("div",{className:"echart-count-tab"},M.map((function(t,e){return c.a.createElement("div",function(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}({key:e,className:"count-item",onClick:function(){!function(t){4!=t&&j(t)}(e)}},"className",[O===e?"current-tab":"",4==e?"last-wrap":""].join(" ")),c.a.createElement("div",{className:"item-label"},t.label),c.a.createElement("div",{className:"item-number"},t.count))}))),K?c.a.createElement(x,{tableData:A}):null,c.a.createElement("div",{style:{height:K?0:"303px",overflow:"hidden"},id:"echart-show"})),c.a.createElement("div",{className:"comm-shadowbox main-echart"},c.a.createElement("h3",null,"统计数据"),c.a.createElement("div",{className:"echart-download"},c.a.createElement("a",{onClick:function(){var t={};1==E?(t.endDate=f()().subtract(1,"day").format("YYYY-MM-DD"),t.startDate=f()().subtract(8,"day").format("YYYY-MM-DD")):2==E&&(t.endDate=f()().subtract(1,"day").format("YYYY-MM-DD"),t.startDate=f()().subtract(31,"day").format("YYYY-MM-DD")),v&&v.length&&(t.endDate=v[1].format("YYYY-MM-DD"),t.startDate=v[0].format("YYYY-MM-DD")),C&&(t.productId=C),Object(d.c)(d.a.userDataDown,t).then((function(t){window.open(t.data.path)}))}},"下载数据")),c.a.createElement(r.a,{dataSource:A,columns:p,pagination:!1,rowKey:"summaryDate"})))}function x(t){var e=t.tableData,a=n.a.TabPane,o=[{title:"首次使用时间",dataIndex:"summaryDate",key:"summaryDate"},{title:"新用户",dataIndex:"newNum",key:"newNum",render:function(t,e){return 0}},{title:"1天后",dataIndex:"activeNum",key:"activeNum",render:function(t,e){return 0}},{title:"2天后",dataIndex:"newRatio",key:"newRatio",render:function(t,e){return 0}},{title:"3天后",dataIndex:"activeRatio",key:"activeRatio",render:function(t,e){return 0}},{title:"4天后",dataIndex:"totalNum",key:"totalNum",render:function(t,e){return 0}},{title:"5天后",dataIndex:"totalNum1",key:"totalNum1",render:function(t,e){return 0}},{title:"6天后",dataIndex:"totalNum2",key:"totalNum2",render:function(t,e){return 0}},{title:"7天后",dataIndex:"totalNum3",key:"totalNum3",render:function(t,e){return 0}},{title:"14天后",dataIndex:"totalNum4",key:"totalNum4",render:function(t,e){return 0}},{title:"30天后",dataIndex:"totalNum5",key:"totalNum5",render:function(t,e){return 0}}];return c.a.createElement(n.a,{defaultActiveKey:"1"},c.a.createElement(a,{tab:"留存率",key:"1"},c.a.createElement(r.a,{dataSource:e,columns:o,pagination:!1,rowKey:"summaryDate"})),c.a.createElement(a,{tab:"留存数",key:"2"},c.a.createElement(r.a,{dataSource:e,columns:o,pagination:!1,rowKey:"summaryDate"})))}}}]);