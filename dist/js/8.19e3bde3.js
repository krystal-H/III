(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"65m2":function(e,t,n){},"6MFL":function(e,t,n){},NAHi:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Se}));n("vxpS"),n("ThRY"),n("h4PX"),n("6wma"),n("8OWE"),n("L4wC"),n("KzFV"),n("2Kt1"),n("gsuU"),n("tpKs");var a=n("q+fq"),r=n.n(a),i=(n("Y5Ue"),n("xc0u")),l=(n("M+R0"),n("L60R")),o=(n("kyDF"),r.a.memo((function(e){var t=e.dataAnalysisName,n=void 0===t?"未命名":t,a=e.analysisiType,o=e.testEnv,c=function(){l.b.next("save")};return r.a.createElement("header",{className:"data-analysis-header"},r.a.createElement("span",{className:"d-a-name"},n),r.a.createElement("div",{className:"tools-wrapper"},3===a?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{type:"primary",size:"small",onClick:function(){l.c.next("text")},icon:"bug"},"调试"),r.a.createElement(i.a,{type:"primary",size:"small",onClick:c,disabled:![0,1,3].includes(o),icon:"save"},"保存"),r.a.createElement(i.a,{type:"primary",size:"small",onClick:function(){l.a.next("publish")},disabled:![1,3].includes(o),icon:"cloud-upload"},"发布")):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{type:"primary",size:"small",onClick:c,icon:"save"},"保存"))))}))),c=n("Cr9J"),u=(n("rsdX"),n("oCJ0"),n("L8Gl"),n("eVIo"),n("EO5n"),n("rJH4"),n("nKmx")),s=(n("sbOf"),n("spxj")),d=(n("wlSd"),n("RWNY"),n("SnyF"),n("SoGA"),n("mtIt"),n("HzvR"),n("2n5t")),m=(n("Qotk"),n("PVWe")),p=(n("n1yf"),n("wJTb"),n("Nlzp"));function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}u.a.Search,m.a.TreeNode;var b=d.a.Option;function E(e){var t=e.setSelectedData,n=e.setPropsProductId,i=e.productId,l=y(Object(a.useState)([]),2),o=l[0],c=l[1],u=y(Object(a.useState)(0),2),s=(u[0],u[1],y(Object(a.useState)([]),2)),f=s[0],v=s[1],E=y(Object(a.useState)({properties:[],events:[]}),2),h=E[0],g=E[1],O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.properties,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.events,n=e.map((function(e){var t=e.name,n=e.dataType.type;return{key:"设备属性表.".concat(t),title:"".concat(t," (").concat(n,")")}})),a=t.map((function(e){var t=e.identifier,n=e.name,a=e.outputData,r={title:n,key:"_events_|"+t,disabled:!0};return a&&a.length>0&&(r.children=a.map((function(e){var t=e.name,n=e.dataType.type;return{key:"设备事件表.".concat(t),title:"".concat(t," (").concat(n,")")}}))),r}));return[{title:"设备属性表",key:"设备属性表",children:n},{title:"设备事件表",key:"设备事件表",children:a}]};Object(a.useEffect)((function(){Object(p.c)(p.a.getProductList,{pageRows:9999,instanceId:2},{needVersion:1.2}).then((function(e){var t=e.data&&e.data.list||[];c(t)}))}),[]),Object(a.useEffect)((function(){}),[]),Object(a.useEffect)((function(){i&&function(e){Object(p.c)(p.a.getTsl,{productId:e}).then((function(e){var t=e.data,n=JSON.parse(t),a=n.properties,r=void 0===a?[]:a,i=n.events,l=void 0===i?[]:i;g({properties:r,events:l}),v(O(r,l))}))}(i)}),[i]);return r.a.createElement("div",{className:"sql"},r.a.createElement("div",{className:"tree-content"},r.a.createElement(d.a,{className:"proselect",placeholder:"请先选择产品",value:i,onChange:function(e){n(e),v([])},showSearch:!0,optionFilterProp:"children"},o.map((function(e){var t=e.productId,n=e.productName;return r.a.createElement(b,{key:t,value:t},n)}))),r.a.createElement(m.a,{autoExpandParent:!0,defaultExpandAll:!0,treeData:f,onSelect:function(e){console.log(e),t(e)}})))}function h(e){var t,n=e.setSelectedData,i=e.proLogicData,l=(t="",function e(n){var a=[];for(var r in n){var i=n[r],l={title:r,key:t&&"".concat(t,".").concat(r)||r};i&&"object"===f(i)?(t=t&&"".concat(t,".").concat(r)||r,l.children=e(i)):l.title="".concat(r," (").concat(i,")"),a.push(l)}return t="",a}(i));Object(a.useEffect)((function(){}),[]);return r.a.createElement("div",{className:"sql"},r.a.createElement("div",{className:"tree-content"},r.a.createElement(m.a,{autoExpandParent:!0,defaultExpandAll:!0,treeData:l,onSelect:function(e){console.log(e),n(e)}})))}n("bqBU");var g=n("4OHk"),O=(n("U4At"),n("KiF4")),I=(n("72Pr"),n("O4+N")),j=(n("auFq"),n("g2HK")),S=(n("6rnn"),n("d6B9")),w=(n("CAwR"),n("rhD2")),k=n("CvKH"),A=n.n(k),T=n("P2RN"),C=n("DgvE");function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return i}(e,t)||P(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=w.a.Panel;S.a.create({name:"sql-config"})((function(e){var t=e.visible,n=e.cancelHandle,a=e.form,i=e.requestList,l=void 0===i?[]:i,o=e.responseList,c=void 0===o?[]:o,s=e.invokeUrl,d=e.setConfigModalData,m=e.saveData,p=e.apiName,f=e.onPage,y=a.getFieldDecorator,v=(a.setFieldsValue,function(e,t,n,a){d((function(r){var i=L({},r);return i[a][t][n]=e,i}))}),b=[{title:"属性名称",dataIndex:"key",key:"key",width:"200px"},{title:"数据类型",dataIndex:"type",key:"type",render:function(e,t,n){var a=t.type;return r.a.createElement("select",{value:a,onChange:function(e){return v(e.target.value,n,"type","requestList")}},r.a.createElement("option",{value:""},"请选择"),r.a.createElement("option",{value:"VARCHAR"},"VARCHAR"),r.a.createElement("option",{value:"INTEGER"},"INTEGER"),r.a.createElement("option",{value:"TIMESTAMP"},"TIMESTAMP"),r.a.createElement("option",{value:"DOUBLE"},"DOUBLE"),r.a.createElement("option",{value:"DATE"},"DATE"))}},{title:"是否必填",dataIndex:"ro",key:"ro",render:function(e,t,n){var a=t.ro;return r.a.createElement(j.a,{checked:a,onChange:function(e){return v(e.target.checked,n,"ro","requestList")}})}}],E=[{title:"属性名称",dataIndex:"key",key:"key",width:"200px"},{title:"数据类型",dataIndex:"type",key:"type",render:function(e,t,n){var a=t.type;return r.a.createElement("select",{value:a,onChange:function(e){return v(e.target.value,n,"type","responseList")}},r.a.createElement("option",{value:""},"请选择"),r.a.createElement("option",{value:"VARCHAR"},"VARCHAR"),r.a.createElement("option",{value:"INTEGER"},"INTEGER"),r.a.createElement("option",{value:"TIMESTAMP"},"TIMESTAMP"),r.a.createElement("option",{value:"DOUBLE"},"DOUBLE"),r.a.createElement("option",{value:"DATE"},"DATE"))}}];return r.a.createElement(O.a,{className:"sql-modal-self-class",visible:t,width:600,title:"生成API",closable:!0,centered:!0,okText:"提交",onOk:function(){a.validateFields((function(e,t){if(!e){var n=!1;if([].concat(x(l),x(c)).forEach((function(e){""===e.type&&(n=!0)})),n)return void Object(T.a)({message:"请为所有参数选择数据类型！"});m(L({},t))}}))},onCancel:n,destroyOnClose:!0,maskClosable:!1},r.a.createElement("div",{className:"sql-config-wrapper"},r.a.createElement(w.a,{defaultActiveKey:["1","2","3","4"]},r.a.createElement(R,{header:"基本信息",key:"1"},r.a.createElement(S.a.Item,{label:"API名称"},y("apiName",{rules:[{required:!0,message:"请输入API名称！"}],initialValue:p})(r.a.createElement(u.a,{placeholder:"请输入API名称！"}))),r.a.createElement(S.a.Item,{label:"ApiSrn"},y("apiSrn",{initialValue:s,rules:[{required:!0,message:"请输入ApiSrn！"}]})(r.a.createElement(u.a,null)))),r.a.createElement(R,{header:"请求参数",key:"2"},r.a.createElement(I.a,{rowKey:"key",columns:b,dataSource:l,pagination:!1})),r.a.createElement(R,{header:"返回参数",key:"3"},r.a.createElement(I.a,{rowKey:"key",columns:E,dataSource:c,pagination:!1})),r.a.createElement(R,{header:"高级设置",key:"4"},r.a.createElement(S.a.Item,null,y("onPage",{valuePropName:"checked",initialValue:f})(r.a.createElement(j.a,null,"开启返回结果分页")))))))}));function H(e){var t=e.visible,n=e.cancelHandle,l=e.params,o=e.sqlTest;console.log("---params--",l);var c=N(Object(a.useState)(new Array(l.length)),2),s=c[0],d=c[1];return r.a.createElement(O.a,{className:"modal-sql-paramsconfig",visible:t,title:"参数配置",closable:!0,centered:!0,footer:null,onCancel:n,destroyOnClose:!0,maskClosable:!1},r.a.createElement("div",{className:"test-config-wrapper"},l.map((function(e,t){return r.a.createElement("div",{key:t,className:"param"},r.a.createElement("span",{className:"key"},e," :"),r.a.createElement(u.a,{className:"input",placeholder:"输入参数值",onChange:function(e){!function(e,t){var n=e.target.value,a=A()(s);a[t]=n,d(a)}(e,t)}}))})),r.a.createElement(i.a,{className:"testbtn",type:"primary",onClick:function(){o(s)}},"开始调试")))}function V(e){var t=e.visible,n=e.cancelHandle,a=e.downHistoryLi,l=e.getDownTslHistory,o=e.downHistoryLoading,c=e.addTslHistory,u=[{title:"导出时间",dataIndex:"createTime",width:150,render:function(e){return r.a.createElement("span",null,C.a.pekingToStr(e))}},{title:"路径地址",dataIndex:"filePath"},{title:"状态",dataIndex:"status",width:90,render:function(e){return r.a.createElement("span",null,{0:"处理中",1:"成功",2:"失败"}[e]||"--")}}];return r.a.createElement(O.a,{className:"modal-downHistoryLi",visible:t,title:"导出列表",closable:!0,centered:!0,footer:null,onCancel:n,destroyOnClose:!0,maskClosable:!1,width:800},r.a.createElement("div",{className:"topbtnbox"},r.a.createElement(i.a,{className:"addbtn",type:"link",onClick:c},"新增导出"),r.a.createElement(g.a,{type:"sync",title:"刷新列表",spin:o,className:"refresh",onClick:l})),r.a.createElement(I.a,{rowKey:"createTime",columns:u,dataSource:a,scroll:{y:600},pagination:!1}))}function M(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function F(e){var t=e.fieldList,n=t.map((function(e,t){var n=A()(e);return n.id=t+1,n})),a=Object.keys(t[0]).map((function(e){return{title:e,dataIndex:e}}));return r.a.createElement("div",{className:"table-filed-content"},r.a.createElement(I.a,{rowKey:"id",columns:[{title:"序号",dataIndex:"id"}].concat(M(a)),dataSource:n,scroll:{y:400},pagination:!1}))}var U=n("54Vy");n("boRK");function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Z=s.a.TabPane,Y=u.a.TextArea,Q=function(e){return e.match(/(?<={).*?(?=})/g)||[]};function W(e){var t=e.service,n=e.getServeStatu,o=$(Object(a.useState)(void 0),2),c=o[0],d=o[1],m=t.serviceId,f=t.projectId,y=t.name,v=$(Object(a.useState)(),2),b=v[0],g=v[1],O=$(Object(a.useState)([]),2),I=O[0],j=O[1],S=$(Object(a.useState)("select "),2),w=S[0],k=S[1],A=$(Object(a.useState)(!1),2),C=A[0],N=A[1],x=$(Object(a.useState)([]),2),P=x[0],q=x[1],D=$(Object(a.useState)("TSL"),2),L=D[0],B=D[1],R=$(Object(a.useState)({}),2),M=R[0],K=R[1],J=$(Object(a.useState)(!1),2),G=J[0],_=J[1],W=$(Object(a.useState)(),2),X=W[0],ee=W[1],te=$(Object(a.useState)([]),2),ne=te[0],ae=te[1],re=$(Object(a.useState)(!1),2),ie=re[0],le=re[1],oe=$(Object(a.useState)(!1),2),ce=oe[0],ue=oe[1],se=function(e){var t=e[0];t&&k(w+" "+t)},de=function(){for(var e={},t=Q(w),n=0;n<t.length;n++){var a=t[n],r="{{1@".concat(a,"}}");e[a]=r}return e},me=function(){le(!0),Object(p.c)(p.a.downTslHistory,{flowId:X}).then((function(e){var t=e.data;ae(void 0===t?[]:t)})).finally((function(){le(!1)}))},pe=function(){var e={};if(P.length>0)for(var t=Q(w),n=0;n<t.length;n++){var a=t[n],r=paramsVal[n];e[a]=r}return e},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];q(e);var t=pe(e),n=p.a.sqlTestProductData,a={sql:w,paramsMap:encodeURI(JSON.stringify(t))};"TSL"==L&&(n=p.a.sqlTestTslData,a.projectId=f,a.productId=c),Object(p.c)(n,a).then((function(e){e.code;var t=e.data,n=void 0===t?[]:t;N(!1),n.length>100&&(n=n.slice(0,100)),j(n)}))};return Object(a.useEffect)((function(){var e=l.b.asObservable().subscribe((function(e){var t=b||(new Date).getTime();Object(p.d)(p.a.saveFlowData,{projectId:f,serviceId:m,lines:"",action:t,nodes:[{nodeType:101,id:1,nodeName:"数据查询起始",location:"",input:JSON.stringify({action:t,authCheck:1,input:Q(w).map((function(e,t){return{param_name:e,param_typ:0,param_required:0,param_default:P[t],param_desc:""}}))}),output:""},{nodeType:3101,id:2,pid:1,nodeName:"数据查询",location:"",input:JSON.stringify({productId:c,projectId:f,logicSql:w,logicName:L,superInstanceId:localStorage.getItem("superInstanceId"),params:JSON.stringify(de())}),output:""},{nodeType:701,id:3,pid:2,nodeName:"数据查询结束",location:"",input:JSON.stringify({source:1,sourceType:0,value:2}),output:""}]},{needJson:!0,noInstance:!0}).then((function(e){Object(T.a)({type:"success",message:"保存成功"}),n()}))})),t=l.a.asObservable().subscribe((function(e){ue(!0)})),a=l.c.asObservable().subscribe((function(e){Q(w).length>0?N(!0):fe()}));return function(){e.unsubscribe(),t.unsubscribe(),a.unsubscribe()}}),[n,m,c,w,L,b]),Object(a.useEffect)((function(){m&&Object(p.c)(p.a.getFlowData,{serviceId:m},{noInstance:!0}).then((function(e){if(e.data){var t=e.data,n=t.flowNodeList,a=void 0===n?[]:n,r=t.flowId,i=t.action;if(ee(r),g(i),a&&a.length>1){var l=a[1].input;if(l){var o=JSON.parse(l),c=o.productId,u=o.logicSql,s=o.logicName;k(u),B(s),d(c)}}}}))}),[m]),Object(a.useEffect)((function(){Object(p.c)(p.a.getProLogicTreeData,{},{noInstance:!0}).then((function(e){K(e.data||{})}))}),[]),r.a.createElement("div",{className:"sql-analysis-wrapper"},r.a.createElement("div",{className:"left-wrapper"},r.a.createElement("div",{className:"table-tree-wrapper"},r.a.createElement(s.a,{activeKey:L,className:"tabpane",onChange:function(e){B(e)}},r.a.createElement(Z,{tab:"物模型",key:"TSL"},r.a.createElement(E,{setSelectedData:se,setPropsProductId:d,productId:c})),r.a.createElement(Z,{tab:"逻辑模型",key:"product"},r.a.createElement(h,{setSelectedData:se,proLogicData:M}))))),r.a.createElement("div",{className:"sql-code-edit-wrapper"},r.a.createElement("div",{className:"topbtn"},r.a.createElement(i.a,{type:"primary",size:"small",onClick:function(){_(!0),me()},disabled:"product"==L}," 导出")),r.a.createElement("div",{className:"configitem"},r.a.createElement("span",{className:"itemname"},"SQL语句"),r.a.createElement(Y,{rows:8,value:w,onChange:function(e){var t;t=e.target.value,k(t)}})),r.a.createElement("div",{className:"configitem"},r.a.createElement("span",{className:"itemname"},"发布路径"),r.a.createElement(u.a,{value:b,placeholder:"选填",onChange:function(e){!function(e){var t=e.target.value;g(t)}(e)}})),r.a.createElement("div",{className:"configitem"},r.a.createElement("span",{className:"itemname"},"调试结果"),I.length>0&&r.a.createElement(F,{fieldList:I}))),C&&r.a.createElement(H,{visible:!0,params:Q(w),cancelHandle:function(){N(!1)},sqlTest:fe}),r.a.createElement(V,{visible:G,cancelHandle:function(){_(!1)},downHistoryLi:ne,getDownTslHistory:me,downHistoryLoading:ie,addTslHistory:function(){Object(p.c)(p.a.addTslHistory,{sql:w,projectId:f,productId:c,paramsMap:encodeURI(JSON.stringify(pe())),createTime:(new Date).getTime(),flowId:X}).then((function(e){me()}))}}),r.a.createElement(U.d,{visible:ce,envdata:{id:m,actionType:1,name:y},onOk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(p.d)(p.a.servePublish,z({serviceId:m,envType:1,operate:1},e),{timeout:3e5}).then((function(e){Object(T.a)({type:"success",message:"发布成功"}),n()}))},onCancel:function(){return ue(!1)}}))}var X=n("Ig/K"),ee=n.n(X);n("65m2"),n("iydO"),n("BpGR");function te(e){var t=e.sqlText,n=e.setSqlText;return r.a.createElement(ee.a,{mode:"sql",theme:"github",height:"100%",width:"100%",value:t,onChange:function(e){n(e)},showGutter:!0,showPrintMargin:!1,enableBasicAutocompletion:!0,name:"sql-edit",editorProps:{$blockScrolling:!0}})}n("kvrU");var ne=n("BPQb"),ae=(n("N4lb"),n("KZSM"));n("gtRY");function re(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return i}(e,t)||ue(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var de=d.a.Option,me=[{code:"eventTime",name:"事件时间",type:"varchar",intBit:"",doubleBit:""},{code:"windowEventTime",name:"窗口事件时间",type:"timestamp",intBit:"",doubleBit:""},{code:"deviceId",name:"设备id",type:"varchar",intBit:"",doubleBit:""},{code:"proceTime",name:"当前系统时间",type:"timestamp",intBit:"",doubleBit:""}],pe=S.a.create({name:"sql-link-input-config"})((function(e){var t=e.visible,n=e.cancelHandle,i=e.form,l=e.productList,o=void 0===l?[]:l,c=e.setInputData,s=e.inputData,m=ce(Object(a.useState)(s.deviceList||[]),2),p=m[0],f=m[1],y=ce(Object(a.useState)([]),2),v=y[0],b=y[1],E=ce(Object(a.useState)(0),2),h=E[0],g=E[1],j=ce(Object(a.useState)(s.propsOrEventList||[]),2),w=j[0],k=j[1],A=ce(Object(a.useState)(s.fields||[].concat(me)),2),C=A[0],N=A[1],x=i.getFieldDecorator,P=i.setFieldsValue,q=i.getFieldValue,D=s.code,L=void 0===D?"":D,B=s.productId,R=void 0===B?"":B,H=s.deviceIds,V=void 0===H?[]:H,M=s.propEvent,K=void 0===M?"0":M,F=s.fieldsCodes,U=void 0===F?[]:F,J=s.eventOffset,z=void 0===J?"":J,G=function(e,t,n){return Object(ae.d)({property:t,productId:e,eventIdentifier:n}).then((function(e){return e&&e.data||[]}))},$=function(e){var t=q("productId");g(e),t?0==e?G(t,e).then((function(e){k(e),P({fieldsCodes:[]})})):function(e){return Object(ae.f)({productId:e}).then((function(e){return e&&e.data||[]}))}(t).then((function(e){b(e),P({fieldsCodes:[]})})):Object(T.a)({description:"请先选择一个产品"})},_=function(e,t,n){N((function(a){var r=re(a);return r[n][e]=t,r}))},Z=[{title:"字段名称",dataIndex:"name",key:"name",width:"100px"},{title:"字段编码",dataIndex:"code",key:"code",width:"100px"},{title:"字段类型",dataIndex:"type",key:"type",width:"100px"},{title:"整数位",dataIndex:"intBit",key:"intBit",width:"100px",render:function(e,t,n){var a=t.intBit;return r.a.createElement("input",{style:{width:"100px"},type:"number",value:a,onChange:function(e){return _("intBit",e.target.value,n)}})}},{title:"小数位",dataIndex:"doubleBit",key:"doubleBit",width:"100px",render:function(e,t,n){var a=t.doubleBit;return r.a.createElement("input",{style:{width:"100px"},type:"number",value:a,onChange:function(e){return _("doubleBit",e.target.value,n)}})}}];return r.a.createElement(O.a,{className:"sql-modal-self-class",visible:t,width:600,title:"输入表",closable:!0,centered:!0,okText:"保存",onOk:function(){i.validateFields((function(e,t){e||(c([le(le({},t),{},{fields:C,deviceList:p,propsOrEventList:w})]),n())}))},onCancel:n,destroyOnClose:!0,maskClosable:!1},r.a.createElement("div",{className:"sql-link-input-config-wrapper"},r.a.createElement(S.a,null,r.a.createElement(S.a.Item,{label:"表名称（只允许字母,数字,下划线，必须以字母开头）"},x("code",{rules:[{required:!0,message:"请输入表名称！"},{pattern:/^[a-zA-Z]+[a-zA-Z0-9_]{0,50}$/,message:"格式错误"}],initialValue:L})(r.a.createElement(u.a,{placeholder:"请输入表名称！"}))),r.a.createElement(S.a.Item,{label:"选择产品"},x("productId",{rules:[{required:!0,message:"请选择产品！"}],initialValue:R})(r.a.createElement(d.a,{onChange:function(e){Object(ae.a)({productId:e,pageRows:9999}).then((function(e){P({deviceIds:[]}),f(e.data&&e.data.list||[])})),0==q("propEvent")&&G(e,"0").then((function(e){k(e),P({fieldsCodes:[]})}))}},o.map((function(e){var t=e.productId,n=e.productName;return r.a.createElement(de,{key:t,value:t},n)}))))),r.a.createElement(S.a.Item,{label:"选择设备"},x("deviceIds",{rules:[{required:!0,message:"请选择设备！"}],initialValue:V})(r.a.createElement(d.a,{mode:"multiple"},p.map((function(e){var t=e.deviceId;return r.a.createElement(de,{key:t,value:t},t)}))))),r.a.createElement(S.a.Item,{label:"输入参数"},x("propEvent",{rules:[{required:!0,message:"请选择输入参数！"}],initialValue:K})(r.a.createElement(ne.a.Group,{onChange:function(e){return $(e.target.value)}},r.a.createElement(ne.a,{value:"0"},"属性"),r.a.createElement(ne.a,{value:"1"},"事件")))),"1"==h&&r.a.createElement(S.a.Item,null,x("eventIdentifier",{rules:[{required:!0,message:"请选择事件！"}]})(r.a.createElement(d.a,{onChange:function(e){var t=q("productId");G(t,1,e).then((function(e){k(e),P({fieldsCodes:[]})}))},placeholder:"请选择事件！"},v.map((function(e){var t=e.identifier,n=e.name;return r.a.createElement(de,{key:t,value:t},n)}))))),r.a.createElement(S.a.Item,null,x("fieldsCodes",{rules:[{required:!0,message:"请选择".concat("0"===h?"属性":"事件","字段！")}],initialValue:U})(r.a.createElement(d.a,{mode:"multiple",onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=C.filter((function(t){return e.includes(t.code)})),n=t.map((function(e){return e.code})),a=[];e.forEach((function(e){n.includes(e)||a.push(e)})),w.forEach((function(e){var n=e.srcCode,r=e.srcName,i=e.srcType;a.includes(n)&&t.push({code:n,name:r,type:i,intBit:"",doubleBit:""})})),N([].concat(me,re(t)))}},w.map((function(e){var t=e.srcName,n=e.srcCode;return r.a.createElement(de,{key:n,value:n},"".concat(t,"( ").concat(n," )"))}))))),r.a.createElement(S.a.Item,{label:"窗口起始时间偏移（毫秒）"},x("eventOffset",{rules:[{required:!0,message:"请输入窗口起始时间偏移！"}],initialValue:z})(r.a.createElement(u.a,{placeholder:"请输入窗口起始时间偏移！",type:"number"}))),r.a.createElement(S.a.Item,null,r.a.createElement(I.a,{rowKey:"code",columns:Z,dataSource:C,pagination:!1})))))})),fe=S.a.create({name:"sql-link-output-config"})((function(e){var t=e.visible,n=e.cancelHandle,l=e.form,o=e.changeOutput,c=e.inputData,s=ce(Object(a.useState)(c.dataSourceList||[]),2),m=s[0],p=s[1],f=ce(Object(a.useState)(c.tableList||[]),2),y=f[0],v=f[1],b=ce(Object(a.useState)(c.fieldsList||[]),2),E=b[0],h=b[1],g=ce(Object(a.useState)(c.selectedRowKeys||[]),2),j=g[0],w=g[1],k=l.getFieldDecorator,A=l.setFieldsValue,C=l.getFieldValue,N=c.code,x=c.dsType,P=c.dsId,q=c.tableCode,D=function(e,t,n){h((function(a){var r=re(a);return r[n][e]=t,r}))},L=[{title:"字段编码",dataIndex:"code",key:"index",width:"100px",render:function(e,t,n){var a=t.code;return"5"==C("dsType")?r.a.createElement("input",{style:{width:"100px"},type:"text",value:a,onChange:function(e){return D("code",e.target.value,n)}}):r.a.createElement("span",null,a)}},{title:"字段类型",dataIndex:"type",key:"type",width:"100px",render:function(e,t,n){var a=t.type;return r.a.createElement("select",{value:a,onChange:function(e){return D("type",e.target.value,n)}},r.a.createElement("option",{value:"varchar"},"varchar"),r.a.createElement("option",{value:"double"},"double"),r.a.createElement("option",{value:"integer"},"integer"),r.a.createElement("option",{value:"time"},"time"),r.a.createElement("option",{value:"date"},"date"),r.a.createElement("option",{value:"timestamp(3)"},"timestamp(3)"),r.a.createElement("option",{value:"varbinary"},"varbinary"),r.a.createElement("option",{value:"decimal"},"decimal"),r.a.createElement("option",{value:"float"},"float"),r.a.createElement("option",{value:"bigint"},"bigint"),r.a.createElement("option",{value:"boolean"},"boolean"),r.a.createElement("option",{value:"tinyint"},"tinyint"),r.a.createElement("option",{value:"smallint"},"smallint"))}},{title:"整数位",dataIndex:"intBit",key:"intBit",width:"100px",render:function(e,t,n){var a=t.intBit;return r.a.createElement("input",{style:{width:"100px"},type:"number",value:a,onChange:function(e){return D("intBit",e.target.value,n)}})}},{title:"小数位",dataIndex:"doubleBit",key:"doubleBit",width:"100px",render:function(e,t,n){var a=t.doubleBit;return r.a.createElement("input",{style:{width:"100px"},type:"number",value:a,onChange:function(e){return D("doubleBit",e.target.value,n)}})}},{title:"操作",dataIndex:"code",key:"code",width:"100px",render:function(e,t,n){return r.a.createElement("a",{style:{marginLeft:"8px"},onClick:function(e){return function(e){h((function(t){return[].concat(re(t.slice(0,e)),re(t.slice(e+1)))}))}(n)}},"删除")}}],B={onChange:function(e,t){w(e)},selectedRowKeys:j};return r.a.createElement(O.a,{className:"sql-modal-self-class",visible:t,width:600,title:"输出表",closable:!0,centered:!0,okText:"保存",onOk:function(){l.validateFields((function(e,t){if(!e){var a=[],r=!1;"5"!=C("dsType")?a=E.filter((function(e){return j.includes(e.code)})):(a=re(E)).forEach((function(e){e.code||(r=!0)})),r&&Object(T.a)({description:"有参数未填完！"}),o(le(le({},t),{},{fields:a,fieldsList:E,tableList:y,dataSourceList:m,selectedRowKeys:j})),n()}}))},onCancel:n,destroyOnClose:!0,maskClosable:!1},r.a.createElement("div",{className:"sql-link-input-config-wrapper"},r.a.createElement(S.a,null,r.a.createElement(S.a.Item,{label:"表名称（只允许字母,数字,下划线，必须以字母开头）"},k("code",{rules:[{required:!0,message:"请输入表名称！"},{pattern:/^[a-zA-Z]+[a-zA-Z0-9_]{0,50}$/,message:"格式错误"}],initialValue:N})(r.a.createElement(u.a,{placeholder:"请输入表名称！"}))),r.a.createElement(S.a.Item,{label:"数据源类型"},k("dsType",{rules:[{required:!0,message:"请选择数据源类型！"}],initialValue:x})(r.a.createElement(d.a,{onChange:function(e){Object(ae.b)({type:e}).then((function(e){e&&e.data&&(p(re(e.data)),A({dsId:"",tableCode:""}),v([]),h([]),w([]))}))}},[{key:2,name:"mysql"},{key:5,name:"rocketMq"}].map((function(e){var t=e.name,n=e.key;return r.a.createElement(de,{key:n,value:n},t)}))))),r.a.createElement(S.a.Item,{label:"数据库"},k("dsId",{rules:[{required:!0,message:"请选择数据库！"}],initialValue:P})(r.a.createElement(d.a,{onChange:function(e){"5"!=C("dsType")&&Object(ae.e)({datasourceId:e}).then((function(e){e&&e.data&&(v(e.data),A({tableCode:""}),h([]),w([]))}))}},m.map((function(e){var t=e.name,n=e.id;return r.a.createElement(de,{key:n,value:n},t)}))))),"5"!=C("dsType")?r.a.createElement(S.a.Item,{label:"数据表"},k("tableCode",{rules:[{required:!0,message:"请选择数据表！"}],initialValue:q})(r.a.createElement(d.a,{onChange:function(e){Object(ae.c)({datasourceId:C("dsId"),tableCode:e}).then((function(e){e&&e.data&&(h(e.data.map((function(e){return{code:e.srcCode,type:"varchar",name:e.srcName,intBit:"",doubleBit:""}}))),w([]))}))}},y.map((function(e){var t=e.code;return r.a.createElement(de,{key:t,value:t},t)}))))):r.a.createElement(S.a.Item,null,r.a.createElement(i.a,{type:"primary",size:"small",onClick:function(){h((function(e){return[].concat(re(e),[{code:"",type:"varchar",name:"",intBit:"",doubleBit:"",index:1e4*Math.random()}])}))}},"新增一行")),r.a.createElement(S.a.Item,{label:"输出"},r.a.createElement(I.a,{rowKey:"5"!=C("dsType")?"code":"index",rowSelection:"5"!=C("dsType")?B:void 0,columns:"5"!=C("dsType")?L.slice(0,-1):L,dataSource:E,scroll:{y:240},pagination:!1})))))}));n("m/U6");function ye(e){return function(e){if(Array.isArray(e))return Ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||be(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return i}(e,t)||be(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){if(e){if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var he=w.a.Panel;function ge(e){var t=e.service,n=ve(Object(a.useState)(""),2),i=n[0],o=n[1],c=ve(Object(a.useState)([]),2),u=c[0],s=c[1],d=ve(Object(a.useState)([]),2),m=d[0],p=d[1],f=ve(Object(a.useState)([]),2),y=f[0],v=f[1],b=ve(Object(a.useState)(!1),2),E=b[0],h=b[1],g=ve(Object(a.useState)(!1),2),O=g[0],I=g[1],j=ve(Object(a.useState)(-1),2),S=j[0],k=j[1];Object(a.useEffect)((function(){var e=t.projectId,n=t.serviceId;e&&Object(ae.h)({projectId:e,pageRows:9999}).then((function(e){e&&e.data&&e.data.list&&p(ye(e.data.list))})),n&&Object(ae.g)({serviceId:n}).then((function(e){if(e.data){var t=e.data.flowNodeList,n=void 0===t?[]:t;if(n&&n.length>0){var a=(n[0]||{}).input;if(a){var r=JSON.parse(a)||{},i=r.inputTable,l=r.outputTable,c=r.sql;s(i||[]),v(l||[]),o(c||"")}}}}))}),[t]),Object(a.useEffect)((function(){var e=l.b.asObservable().subscribe((function(e){var n=t.projectId,a=t.serviceId;Object(ae.i)({projectId:n,serviceId:a,lines:"",nodes:[{id:1,pid:null,nodeName:"flinkSql",nodeType:2501,location:"",input:JSON.stringify({nodeType:2501,inputTable:u,outputTable:y,sql:i}),output:""}]}).then((function(){Object(T.a)({type:"success",message:"保存成功"})}))}));return function(){e.unsubscribe()}}),[t,i,u,y]);var A=Object(a.useMemo)((function(){return-1===S?{code:"",dsType:"",dsId:"",tableCode:"",fieldsList:[],tableList:[],dataSourceList:[],fields:[],selectedRowKeys:[]}:y[S]}),[S,y]),C=function(e,t){"input"===e?h(!0):(k(t),I(!0))},N=function(e,t){"input"===e?s([]):v((function(e){return[].concat(ye(e.slice(0,t)),ye(e.slice(t+1)))}))};return r.a.createElement("section",{className:"sql-link-wrapper"},r.a.createElement("div",{className:"left-wrapper"},r.a.createElement("div",{className:"input-wrapper"},r.a.createElement("div",{className:"input-title"},"输入表管理",r.a.createElement("span",{className:u.length>0?"disabled":"",onClick:u.length>0?null:function(){return h(!0)}},"添加输入")),r.a.createElement("div",{className:"table-content"},r.a.createElement(w.a,{defaultActiveKey:[]},u.map((function(e,t){var n=e.code,a=e.fields;return n?r.a.createElement(he,{header:r.a.createElement("div",null,r.a.createElement("span",null,n),r.a.createElement("div",{style:{float:"right",marginRight:"12px"},onClick:function(e){return e.stopPropagation()}},r.a.createElement("span",{onClick:function(){return C("input")}},"编辑")," | ",r.a.createElement("span",{onClick:function(){return N("input")}},"删除"))),key:n+t},r.a.createElement("div",null,a.map((function(e,n){var a=e.code,i=e.type;return r.a.createElement("div",{className:"field-p",key:t+a},r.a.createElement("span",null,a),r.a.createElement("span",null,i))})))):null}))))),r.a.createElement("div",{className:"output-wrapper"},r.a.createElement("div",{className:"input-title"},"输出表与维表管理",r.a.createElement("span",{onClick:function(){return I(!0)}},"添加输出或维表")),r.a.createElement("div",{className:"table-content"},r.a.createElement(w.a,{defaultActiveKey:["1"]},y.map((function(e,t){var n=e.code,a=e.fields;return n?r.a.createElement(he,{header:r.a.createElement("div",null,r.a.createElement("span",null,n),r.a.createElement("div",{style:{float:"right",marginRight:"12px"},onClick:function(e){return e.stopPropagation()}},r.a.createElement("span",{onClick:function(){return C("output",t)}},"编辑")," | ",r.a.createElement("span",{onClick:function(){return N("output",t)}},"删除"))),key:n+t},r.a.createElement("div",null,a.map((function(e,n){var a=e.code,i=e.type;return r.a.createElement("div",{className:"field-p",key:t+a},r.a.createElement("span",null,a),r.a.createElement("span",null,i))})))):null})))))),r.a.createElement("div",{className:"right-wrapper"},r.a.createElement(te,{sqlText:i,setSqlText:o})),E&&r.a.createElement(pe,{inputData:u[0]||{},visible:E,productList:m,setInputData:s,cancelHandle:function(){return h(!1)}}),O&&r.a.createElement(fe,{inputData:A,visible:O,changeOutput:function(e){var t=ye(y);S>-1?t[S]=e:t.push(e),v(t)},cancelHandle:function(){I(!1),k(-1)}}))}var Oe=n("DndG");n("6MFL");function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Se(){var e=Object(Oe.useParams)(),t=e.projectId,n=e.serviceId,i=decodeURI(Object(C.j)("name")),l=decodeURI(Object(C.j)("desc")),u=+decodeURI(Object(C.j)("analysisiType")||1),s=Ie(Object(a.useState)(0),2),d=s[0],m=s[1],f=Object(a.useCallback)((function(){Object(p.c)(p.a.getServeStatu,{serveId:n}).then((function(e){e&&e.data&&m(e.data.testEnv)}))}),[n]);return r.a.createElement("section",{className:"data-analysis-wrapper flex-column"},r.a.createElement(o,{dataAnalysisName:i,analysisiType:u,testEnv:+d}),r.a.createElement("section",{className:"flex1"},3===u?r.a.createElement(W,{service:{name:i,desc:l,serviceId:n,projectId:t},getServeStatu:f}):4===u?r.a.createElement(ge,{service:{name:i,desc:l,serviceId:n,projectId:t}}):r.a.createElement(c.a,{service:{name:i,desc:l,serviceId:n,projectId:t}})))}},boRK:function(e,t,n){},kyDF:function(e,t,n){},"m/U6":function(e,t,n){},wJTb:function(e,t,n){}}]);