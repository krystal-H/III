(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{QOSG:function(e,t,a){"use strict";a.r(t);a("SlgS"),a("lf9m"),a("IHDg"),a("ef1R"),a("P37N"),a("vV4J"),a("av3G"),a("RfWx"),a("Ra8s"),a("HsXu"),a("bs69"),a("Lm8M"),a("ryEf"),a("UTJx");var n=a("dVdO"),r=(a("QcZr"),a("b+L2")),o=(a("MNU5"),a("YeX6")),c=(a("xzjF"),a("PeP6")),i=(a("UdMA"),a("ViyK")),l=a("CvKH"),s=a.n(l),u=(a("V9IP"),a("sfoS"),a("gAA8"),a("0Us0"),a("pckg"),a("62KB"),a("T9Mk")),d=a.n(u),p=(a("ivud"),a("mU7p")),m=a("kqA8"),f=a("FC04"),h=a("P2RN"),y=a("MeRu"),g=a("Nlzp"),b=a("Uz1T");a("dP/0");function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k(e);if(t){var r=k(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S(this,a)}}function S(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?V(e):t}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=i.a.Search,j=c.a.Option,L=["开发中","已发布","审核中"],x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(P,e);var t,a,l,u=E(P);function P(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,P),(t=u.call(this,e)).getProductListNew=function(){Object(g.c)(g.a.getProductListNew,O({},t.state.listParams),{loading:!0}).then((function(e){var a={current:e.data.current,size:e.data.size,pages:e.data.pages,total:e.data.total};t.setState({dataSource:e.data.records,pager:a})}))},t.searchProduct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=s()(t.state.listParams);a.productName=e.trim(),a.current=1,t.setState({listParams:a},(function(){t.getProductListNew()}))},t.handleChange=function(e){var a=s()(t.state.listParams);a.mode=e,t.setState({listParams:a},(function(){t.getProductListNew()}))},t.changePage=function(e,a){console.log(e,a,"hahahahah");var n=O({},t.state.listParams);n.current=e,t.setState({listParams:n},(function(){t.getProductListNew()}))},t.deleteModalOKHandle=function(){var e=t.state,a=e.selectedItem,n=e.deleteInputValue.trim(),r=a.productId;if(!n||"delete"!==n)return Object(h.a)({type:"warn",message:"异常操作",description:'请输入"delete"来确认删除！'});t.setState({deleteLoading:!0},(function(){Object(g.c)(g.a.deleteProductNew,{productId:r}).then((function(e){Object(h.a)({type:"success",description:"删除成功！"}),t.setState({deleteVisible:!1,deleteInputValue:""}),t.getProductListNew()})).finally((function(){return t.setState({deleteLoading:!1})}))}))},t.copyModalOKHandle=function(){var e=t.state,a=e.copyInputValue,n=e.selectedItem,r=a.trim(),o=n.productId;if(!r)return Object(h.a)({type:"warn",message:"异常操作",description:"请输入产品名称！"});t.setState({copyLoading:!0},(function(){Object(g.c)(g.a.copyProductNew,{productId:o,productName:r}).then((function(e){0===e.code&&Object(h.a)({type:"success",description:"复制成功！"}),t.setState({listParams:s()(t.defaultListParams),copyModalVisible:!1,copyInputValue:""},(function(){t.getProductListNew()}))})).finally((function(){t.setState({copyLoading:!1})}))}))},t.createProduct=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({isClicked:!e})},t.toggleOldProVisiable=function(){t.setState({oldProIngVisiable:!t.state.oldProIngVisiable})},t.changeVisible=function(){t.setState({isClicked:!1})},t.defaultListParams={current:1,size:6,productName:"",mode:""},t.state={dataSource:[],pager:{},listParams:s()(t.defaultListParams),selectedItem:null,deleteVisible:!1,deleteLoading:!1,deleteInputValue:"",copyModalVisible:!1,copyLoading:!1,copyInputValue:"",isClicked:!1,oldProIngVisiable:!1},t.columns=[{title:"产品",dataIndex:"productName",key:"productName",render:function(e,t,a){return d.a.createElement("div",{className:"pro-show"},d.a.createElement(m.a,{icon:t.productIcon}),d.a.createElement("div",{className:"pro-show-cont"},d.a.createElement("div",{className:"pro-show-cont-title"},e),d.a.createElement("div",{className:"pro-show-cont-item"},"产品ID：",t.productId),d.a.createElement("div",{className:"pro-show-cont-item"},"型号：",t.productCode)))}},{title:"品类",dataIndex:"deviceType",key:"deviceType"},{title:"智能化方案",dataIndex:"schemeName",key:"schemeName"},{title:"通信协议",dataIndex:"bindTypeStr",key:"bindTypeStr"},{title:"状态",dataIndex:"status",key:"status",render:function(e){return d.a.createElement("span",{className:"status status-".concat(e)},p.d[""+e]||"")}},{title:"操作",key:"",render:function(e,a,n){return d.a.createElement("div",{className:"operation"},d.a.createElement("span",{className:"continue",onClick:t.clickProductInfo.bind(V(t),a)},1===a.status?"开发详情":"继续开发"),2!==a.status&&d.a.createElement(d.a.Fragment,null,0===a.isOldProduct&&d.a.createElement("span",{className:"copy mar25",onClick:t.operateProduct.bind(V(t),a,"copyModalVisible")},"复制"),d.a.createElement("span",{className:"delete mar25",onClick:t.operateProduct.bind(V(t),a,"deleteVisible")},"删除")))}}],t}return t=P,(a=[{key:"componentDidMount",value:function(){this.getProductListNew()}},{key:"clickProductInfo",value:function(e){if(e.isOldProduct&&1!==e.status)this.toggleOldProVisiable();else{var t="details";1!==e.status?t="edit":e.isOldProduct&&(t="detail"),sessionStorage.setItem("productItem",JSON.stringify(e)),this.props.history.push({pathname:"/open/product/proManage/".concat(t,"/").concat(e.productId)})}}},{key:"operateProduct",value:function(e,t){var a;if(2===e.mode)return!1;this.setState((w(a={},t,!0),w(a,"selectedItem",e),a))}},{key:"modalCancelHandle",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copyModalVisible",a=arguments.length>1?arguments[1]:void 0;this.setState((w(e={},t,!1),w(e,a,""),e))}},{key:"inputOnChangeHandle",value:function(e,t){this.setState(w({},e,t.target.value))}},{key:"render",value:function(){var e=this,t=this.state,a=t.listParams,l=t.selectedItem,s=t.deleteVisible,u=t.deleteLoading,p=t.deleteInputValue,m=t.copyModalVisible,h=t.copyLoading,g=t.copyInputValue,P=t.isClicked,v=t.dataSource,O=t.pager,w=t.oldProIngVisiable;return d.a.createElement("section",{className:"page-wrapper"},d.a.createElement(y.a,{title:"我的智能产品"}),d.a.createElement("div",{className:"page-header comm-shadowbox"},d.a.createElement("div",{className:"page-header-left"},d.a.createElement(C,{placeholder:"产品名称/ID/型号",allowClear:!0,onSearch:function(t){return e.searchProduct(t)},style:{width:465,margin:"0 22px"}}),d.a.createElement(c.a,{allowClear:!0,onChange:this.handleChange,placeholder:"产品状态",style:{width:120}},L.map((function(e,t){return d.a.createElement(j,{value:t,key:e},e)})))),d.a.createElement("div",{className:"page-header-right"},d.a.createElement(o.a,{type:"primary",onClick:this.createProduct.bind(this,!1)},"创建产品"))),d.a.createElement("div",{className:"bg-wrapper flex1 flex-column comm-shadowbox"},d.a.createElement("div",{className:"page-table-wrapper flex-column flex1"},d.a.createElement(r.a,{rowKey:"productId",dataSource:v,columns:this.columns,pagination:{defaultCurrent:1,current:a.current,onChange:this.changePage,pageSize:6,total:O.total,showSizeChanger:!1,showQuickJumper:O.pages>5,showTotal:function(e){return d.a.createElement("span",null,"共 ",d.a.createElement("a",null,e)," 条")}}}))),l&&s&&d.a.createElement(f.a,{visible:s,modalOKHandle:this.deleteModalOKHandle,modalCancelHandle:this.modalCancelHandle.bind(this,"deleteVisible","deleteInputValue"),targetName:l.productName,confirmLoading:u,title:"删除产品",needWarnIcon:!0,descText:"即将删除的产品",tipText:"产品的所有信息将完全被删除，无法找回，请谨慎操作"},d.a.createElement(i.a,{className:"modal-content-input",onChange:function(t){e.inputOnChangeHandle("deleteInputValue",t)},onPressEnter:this.deleteModalOKHandle,placeholder:"请输入“delete”确认删除该产品",maxLength:20,value:p})),l&&m&&d.a.createElement(f.a,{visible:m,modalOKHandle:this.copyModalOKHandle,modalCancelHandle:this.modalCancelHandle.bind(this,"copyModalVisible","copyInputValue"),targetName:l.productName,confirmLoading:h,title:"复制产品",descText:"即将复制的产品",tipText:"创建与原产品的功能和服务配置一样的新产品"},d.a.createElement(i.a,{className:"modal-content-input",onChange:function(t){e.inputOnChangeHandle("copyInputValue",t)},onPressEnter:this.copyModalOKHandle,value:g,maxLength:20,placeholder:"新产品名称"})),P&&d.a.createElement(b.a,{visible:P,cancelHandle:this.createProduct.bind(this,!0),getProductListNew:function(){e.getProductListNew()}}),d.a.createElement(n.a,{title:"更新升级",visible:w,onOk:this.toggleOldProVisiable,onCancel:this.toggleOldProVisiable},d.a.createElement("p",null," clife平台全新升级，老版本的开发中状态产品，需要在新平台重新创建")))}}])&&N(t.prototype,a),l&&N(t,l),P}(u.PureComponent);t.default=x},"dP/0":function(e,t,a){},mU7p:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return i}));var n={0:"开发中",1:"已发布",2:"审核中"},r={1:"草稿",2:"审核中",3:"灰度版本",4:"正式版本"},o={1:"SDK开发",2:"在线拖拽"},c={0:"草稿",1:"已发布",2:"删除"},i=[{value:"全部状态 ",key:"-1"},{value:"已入网 ",key:"1 "},{key:"0 ",value:"未入网 "}]}}]);