(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+a4r":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Ne}));a("NBAS"),a("SuFq"),a("pNMO"),a("4Brf"),a("0oug"),a("4mDm"),a("PKPk"),a("3bBZ"),a("YQTV");var n=a("NUBc"),r=(a("qNb/"),a("PArb")),l=(a("bipt"),a("lrIw")),i=(a("AUBz"),a("ZTPi")),c=(a("rB9j"),a("Rm1S"),a("07d7"),a("5s+n"),a("p532"),a("FZtP"),a("2B1R"),a("ma9I"),a("q1tI")),o=a.n(c),s=a("/MKj"),u=a("+IdD"),d=a("dL2e"),m=a("Nlzp"),p=a("P2RN"),f=a("DgvE"),v=a("MeRu"),y=a("odoF"),b=a("FC04"),g=a("cu44"),h=a("S18n"),E=a("rwTb"),k=a("r7tM"),w=a("75Mp"),I=(a("tkto"),a("TeQF"),a("5DmW"),a("27RR"),a("L/Qf"),a("2/Rp")),O=(a("2DKY"),a("+KLJ")),L=(a("mbEz"),a("wCAj")),S=(a("JvnM"),a("KrTs")),x=(a("TfFZ"),a("3S7+")),j=a("zsHu"),N=a("Lyp1"),D=(a("UxlC"),"/v5/web/open"),C=function(e){return Object(m.d)(D+"/deviceShadow/getDeviceShadowData",{deviceId:e})},P=function(e){return Object(m.d)(D+"/deviceShadow/getHistoricalData",e)},T=function(e){var t="?";return Object.keys(e).forEach((function(a){t+=a+"="+e[a]+"&"})),function(e,t){var a=window.location.origin+D+e+t;try{window.open(a)}catch(e){Object(p.a)({description:"下载失败",type:"error"})}}("/deviceShadow/exportHistoricalData",t.replace(/&$/,""))},R=a("FNo8"),M=a("/Zbm"),A=(a("k3Gp"),a("kLXV")),F=(a("8QGh"),a("2fM7")),V=(a("OrB1"),a("gFTJ")),B=(a("sMBO"),a("+2oP"),a("4KAj")),J=a("H4M8"),_=a("lwO8"),K=a("wd/R"),U=a.n(K);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=W(e);if(t){var r=W(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return G(this,a)}}function G(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y,X=[{name:"最近5分钟",val:5},{name:"最近15分钟",val:15},{name:"最近30分钟",val:30},{name:"最近1小时",val:60},{name:"最近6小时",val:360},{name:"最近24小时",val:1440}],$=U()().utcOffset()/60,ee=["#1890FF","#2fc25b"],te="<span style='display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:"+ee[0]+";'></span>",ae=function(e,t){if(!e||0===e.length)return null;var a=function(e){return e.map((function(e){var t=e.dataTimeStamp,a=e.count;return{name:U()(t).add($,"h").format("YYYY-MM-DD HH:mm:ss"),count:a}}))}(e),n=a.map((function(e){return e.name})),r=a.map((function(e){return e.count}));return{tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:function(e){var t=e[0],a=t.name,n=t.seriesName,r=t.value;return a+" <br />"+te+n+"："+(null==r?"暂无":r)}},color:ee,grid:{top:20,bottom:20,right:50,left:50},toolbox:{show:!1},xAxis:[{type:"category",boundaryGap:!0,axisTick:{alignWithLabel:!0},data:n,axisLabel:{formatter:function(e){return e.slice(-8)}}}],yAxis:{type:"value",scale:!0,min:0,axisTick:{show:!1},axisLine:{lineStyle:{opacity:0}},splitLine:{lineStyle:{type:"dotted"}}},series:[{type:"line",step:"end",name:t,data:r}]}},ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(l,e);var t,a,n,r=Z(l);function l(){var e;H(this,l);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=r.call.apply(r,[this].concat(a))).export=function(t){t.stopPropagation(),e.props.download()},e.download=o.a.createElement(I.a,{type:"link",className:"lcp-remark-export",onClick:e.export},o.a.createElement(B.a,null),"导出"),e.getChart=function(){var t=e.props,a=t.showData,n=t.isLoadingForModal,r=t.isErrorForModal,l=t.listForModal,i=t.tryAgain;if(r)return o.a.createElement(R.a,{tryAgain:i});if(!n&&l&&0===l.length)return o.a.createElement(J.a,null);var c=ae(l,(a||{}).propertyName);return o.a.createElement(_.a,{className:"lcp-chart",option:c})},e.onChangeTime=function(t){e.props.tryAgain(t)},e}return t=l,(a=[{key:"render",value:function(){var e=this,t=this.props,a=t.showModal,n=t.showData,r=t.isLoadingForModal,l=t.isErrorForModal,i=t.listForModal,c=t.closeModal,s=n||{},u=s.propertyName,d=s.property,m=s.propertyValueDesc,p=s.gap,f=s.mulriple,v=s.remark,y=o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"lcp-w1"},u),d),b=!r&&!l&&i&&i.length>0;return o.a.createElement(A.a,{visible:a,className:"self-modal",width:720,title:"数据查看",footer:null,onCancel:c,centered:!0,closable:!0,destroyOnClose:!0},o.a.createElement(V.b,{title:y},o.a.createElement(V.b.Item,{label:"范围"},m),o.a.createElement(V.b.Item,{label:"数据间隔"},p),o.a.createElement(V.b.Item,{label:"数据倍数"},f),o.a.createElement(V.b.Item,{label:"",span:3},v)),o.a.createElement("div",{className:"lcp-remark"},o.a.createElement(F.a,{className:"time-select",defaultValue:5,onChange:function(t){e.onChangeTime(t)}},X.map((function(e){var t=e.name,a=e.val;return o.a.createElement(F.a.Option,{key:"_"+a,value:a},t)}))),b?this.download:null),this.getChart())}}])&&Q(t.prototype,a),n&&Q(t,n),l}(c.Component);a("Z5Qr"),a("p77/");function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(Object(a),!0).forEach((function(t){ce(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=pe(e);if(t){var r=pe(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return me(this,a)}}function me(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fe,ve=0,ye=["表单模式","Json模式"],be={2:"controlList",3:"runList",4:"errorList",5:"configList"},ge=function(e,t){var a=t?"已":"未";return 0===e?o.a.createElement("div",{className:"lcp-c"},"公共状态，仅对WIFI设备有意义。",o.a.createElement("br",null),"设备当前",a,"连接WIFI网络"):o.a.createElement("div",{className:"lcp-c"},"公共状态，设备",t?"已经":"没有","上报故障数据。",o.a.createElement("br",null),"设备",a,"发生故障")},he=o.a.createElement(j.a,{spin:!0,title:"加载中"}),Ee=function(){return U()().format("YYYY-MM-DD HH:mm:ss")},ke=Object(s.connect)((function(e){return{}}),(function(e){return{}}))(Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(l,e);var t,a,n,r=de(l);function l(){var e;oe(this,l);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=r.call.apply(r,[this].concat(a))).state={tab:0,time:null,isLoading:!1,isError:!1,result:{},controlList:[],runList:[],errorList:[],configList:[],online:!1,onerror:!1,showModal:!1,showData:null,isLoadingForModal:!1,isErrorForModal:!1,listForModal:[]},e.alertMsg=o.a.createElement(o.a.Fragment,null,"设备影子是设备最新状态在平台的缓存信息，您可以在平台实时查询设备的运行和状态信息，也可以通过API获取设备状态信息。详细说明可参考",o.a.createElement(x.a,{title:"暂无文档，敬请期待~",placement:"top"},o.a.createElement("a",{href:"javascript:void(0)"},"文档"))),e.columns=[{title:"数据名称",dataIndex:"propertyName",key:"propertyName",className:"width1"},{title:"数据标识",dataIndex:"property",key:"property",className:"width2"},{title:"数据类型",dataIndex:"javaType",key:"javaType",className:"width3"},{title:"单位",dataIndex:"unit",key:"unit",className:"width4"},{title:"数据属性",dataIndex:"propertyValueDesc",key:"propertyValueDesc",className:"width5"},{title:"最新数据",dataIndex:"deviceData",key:"deviceData",className:"width6"},{title:"操作",dataIndex:"property",key:"done",className:"width7",render:function(t,a){return o.a.createElement("a",{onClick:function(){return e.showHistory(a)}},"数据查看")}}],e.getData=function(){var t=e.props.deviceId;e.setState({isLoading:!0,isError:!1});var a=function(){e.setState({time:Ee(),isLoading:!1,isError:!0})};C(t).then((function(t){var n=t.data,r=n.deviceData,l=n.state;if(0===t.code){var i={result:t,time:Ee(),isLoading:!1,isError:!1,online:!!l.online,onerror:!!l.error};r.forEach((function(e){var t=e.dataType,a=e.list;i[be[t]]=a.map((function(e){return ie(ie({},e),{},{lcpId:++ve,dataType:t})}))})),e.setState(i)}else a()})).catch((function(e){a()}))},e.toggleTab=function(t){e.setState({tab:t})},e.getHistory=function(t){var a=e.props.deviceId,n=t.property,r=t.dataType;if(n&&r){e.setState({isLoadingForModal:!0,isErrorForModal:!1,showModal:!0,showData:t,listForModal:[]});var l={deviceId:a,property:n,dataType:r};e.sendHistoryData=l,e.getHistoryNext(5)}else Object(p.a)({description:"数据标识或数据类型丢失，无法查询",type:"warn"})},e.getHistoryNext=function(t){e.sendHistoryData.startTime=e.getHistoryTime(t);var a=e.sendHistoryData,n=function(){e.setState({isLoadingForModal:!1,isErrorForModal:!0})},r=a.property;P(a).then((function(t){var a=t.data;if(0===t.code){var l={isLoadingForModal:!1,isErrorForModal:!1,listForModal:(a||[]).map((function(e){return ie(ie({},e),{},{count:e[r]})}))};e.setState(l)}else n()})).catch((function(e){n()}))},e.getHistoryTime=function(e){return U.a.utc().valueOf()-60*e*1e3},e.tryAgain=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;e.setState({isLoadingForModal:!0,isErrorForModal:!1,listForModal:[]}),e.getHistoryNext(t)},e.showHistory=function(t){e.getHistory(t)},e.closeModal=function(){e.setState({showModal:!1})},e.download=function(){T(e.sendHistoryData)},e.getJsonView=function(){var t=e.state.result,a=void 0===t?{}:t,n=JSON.stringify(a);return o.a.createElement(M.a,{code:n})},e.getFormListView=function(){var t=e.state,a=t.isLoading,n=t.controlList,r=t.runList,l=t.errorList,i=t.configList,c=t.online,s=t.onerror,u=[{nam:"控制数据",source:n},{nam:"运行数据",source:r},{nam:"故障数据",source:l},{nam:"配置数据",source:i}];return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"lcp-status"},o.a.createElement("div",{className:"lcp-status-item lcp-status-item-active"},"在线状态：",o.a.createElement(x.a,{title:ge(0,c),placement:"top"},o.a.createElement(N.a,null))),o.a.createElement("div",{className:"lcp-status-item"},a?he:c?o.a.createElement(S.a,{status:"success",text:"在线"}):o.a.createElement(S.a,{status:"error",text:"离线"})),o.a.createElement("div",{className:"lcp-status-item lcp-status-item-active"},"故障状态：",o.a.createElement(x.a,{title:ge(1,s),placement:"top"},o.a.createElement(N.a,null))),o.a.createElement("div",{className:"lcp-status-item"},a?he:s?o.a.createElement(S.a,{status:"error",text:"已发生故障"}):o.a.createElement(S.a,{status:"success",text:"未发生故障"}))),u.map((function(t){var n=t.nam,r=t.source;return o.a.createElement("div",{key:n},o.a.createElement("div",{className:"lcp-title marg-top20"},n),o.a.createElement(L.a,{className:"lcp-table-small",loading:a,rowKey:"lcpId",pagination:!1,columns:e.columns,dataSource:r}))})))},e}return t=l,(a=[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.tab,n=t.time,r=t.isLoading,l=t.isError,i={showModal:t.showModal,showData:t.showData,isLoadingForModal:t.isLoadingForModal,isErrorForModal:t.isErrorForModal,listForModal:t.listForModal,tryAgain:this.tryAgain,closeModal:this.closeModal,download:this.download};return o.a.createElement("div",{className:"device-shadow-page"},o.a.createElement(O.a,{className:"page-visualization-alert",message:this.alertMsg,type:"info",showIcon:!0}),o.a.createElement("div",{className:"btn-changemod"},o.a.createElement(I.a.Group,null,ye.map((function(t,n){return o.a.createElement(I.a,{type:n===a?"primary":void 0,onClick:function(){return e.toggleTab(n)},key:n+t},t)}))),o.a.createElement("span",{className:"fresh-time"},"最新更新时间：",n,o.a.createElement(j.a,{spin:r,title:"刷新",className:"lcp-refresh",onClick:r?null:this.getData}))),l?o.a.createElement(R.a,{tryAgain:this.getData}):0===a?this.getFormListView():this.getJsonView(),o.a.createElement(ne,i))}}])&&se(t.prototype,a),n&&se(t,n),l}(c.Component))||Y;function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=xe(e);if(t){var r=xe(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Se(this,a)}}function Se(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var je=i.a.TabPane,Ne=Object(s.connect)((function(e){return{deviceLabelList:e.getIn(["device","deviceLabel"]).toJS(),LabelBaseList:e.getIn(["device","deviceLabelBase"]).toJS(),defaultLabel:e.getIn(["device","defaultLabel"]).toJS(),protocolLists:e.getIn(["product","productProtocolLists"]).toJS()}}),(function(e){return{getDeviceLabelList:function(t){return e(Object(u.b)(t))},getLabelBaseList:function(t){return e(Object(u.e)(t))},getDefaultLabel:function(t){return e(Object(u.a)(t))},getProtocolLists:function(t){return e(Object(d.f)(t))}}}))(fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(u,e);var t,a,c,s=Le(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=s.call(this,e)).toggleShow=function(e){var a={},n=!t.state[e];a[e]=n,t.setState(a)},t.tabChangeHandle=function(e,a){var n=t.props.getProtocolLists;"3"===e&&n(a)},t.state={pageIndex:1,infodata:{productName:"--",productId:"--",productType:"--",productClass:"--",productCode:"--",deviceKey:"--",deviceUniqueId:"--",deviceSecret:"--",deviceMac:"--",activeTime:"",moduleVersion:"--",pcbVersion:"--",gateWay:"--",deviceSite:"--",deviceName:"--",bindUser:"--",macAddress:"无数据",deviceIdentifier:"--",simNumber:"--",online:"--"},showdeviceKey:!1,showdeviceKeyagin:!1,showdeviceSecret:!1,editid:-1,editkey:"",editval:"",addkey:"",addval:"",infoJurisdiction:Object(y.a)("基本信息"),tagJurisdiction:Object(y.a)("设备标签"),delLabelId:"",deleteLoading:!1,dellabelKey:"",dellabelValue:""},t}return t=u,(a=[{key:"componentDidMount",value:function(){this.getDeviceDetailt(),this.getDeviceLabelList(),this.getLabelBaseList(),this.getDefaultLabel()}},{key:"getDeviceDetailt",value:function(){var e=this,t=this.props.match.params.deviceid;Object(m.c)(m.a.getDeviceInfo,{deviceId:t}).then((function(t){0==t.code&&e.setState({infodata:t.data})}))}},{key:"getDeviceLabelList",value:function(){var e=this.state.pageIndex,t=this.props.match.params.deviceid;this.props.getDeviceLabelList({deviceId:t,pageIndex:e,pageRows:10})}},{key:"getDefaultLabel",value:function(){var e=this.props.match.params.deviceid;this.props.getDefaultLabel({deviceId:e,defaultLabel:1})}},{key:"getLabelBaseList",value:function(){this.props.getLabelBaseList({pageIndex:1,pageRows:9999})}},{key:"deleteOkHandle",value:function(){var e=this,t=this.state.delLabelId;this.setState({deleteLoading:!0},(function(){Object(m.d)(m.a.deleteDeviceLabel,{labelId:t}).then((function(t){e.setState({delLabelId:""}),0==t.code&&e.getDeviceLabelList()})).finally((function(){e.setState({deleteLoading:!1})}))}))}},{key:"openDelMod",value:function(e,t,a){this.setState({delLabelId:e,dellabelKey:t,dellabelValue:a})}},{key:"closeDelLabelMod",value:function(){this.setState({delLabelId:""})}},{key:"addConfirm",value:function(){var e=this,t=this.state,a=t.addkey,n=t.addval;if(""==a||""==n)return Object(p.a)({description:"请将添加输入框补充完整",type:"warn"}),!1;var r=this.props.match.params.deviceid;Object(m.d)(m.a.addDeviceLabel,{deviceId:r,labelKey:a,labelValue:n}).then((function(t){0==t.code&&(e.setState({addkey:"",addval:""}),e.getDeviceLabelList(),e.getLabelBaseList())}))}},{key:"editLabel",value:function(e,t,a){this.setState({editid:e,editkey:t,editval:a})}},{key:"onChangeInput",value:function(e,t){if(t&&t.length>50)return!1;var a={};a[e]=t,this.setState(a)}},{key:"editConfirm",value:function(e,t){var a=this,n=this.state,r=n.editid,l=n.editkey,i=n.editval;""==l&&""==i&&Object(p.a)({description:"请将编辑输入框补充完整",type:"warn"}),Object(m.d)(m.a.updateDeviceLabel,{labelId:r,labelKey:l||e,labelValue:i||t}).then((function(e){0==e.code&&(a.setState({editid:-1,editkey:"",editval:""}),a.getDeviceLabelList(),a.getLabelBaseList())}))}},{key:"getDataSource",value:function(e){var t=this.props.LabelBaseList,a=[],n=[];return t.forEach((function(t){a.push(t.labelTypeName||"无法识别的Key"),e&&e==t.labelTypeName&&t.labelDatas.forEach((function(e){n.push(e.labelName||"无法识别的Value")}))})),null==e?a:n}},{key:"getListHtml",value:function(){var e=this,t=this.props.deviceLabelList.list||[],a=this.state,n=a.editid,i=a.editkey,c=a.editval;return t.map((function(t,a){var s=t.id,u=t.labelKey,d=t.labelValue,m=t.labelCategory;return s==n?o.a.createElement("tr",{key:"tr_"+a},o.a.createElement("td",null,o.a.createElement(l.a,{value:i,dataSource:e.getDataSource(),style:{width:"80%"},onChange:e.onChangeInput.bind(e,"editkey"),placeholder:"Key",filterOption:!0})),o.a.createElement("td",null,o.a.createElement(l.a,{value:c,dataSource:e.getDataSource(i),style:{width:"80%"},onChange:e.onChangeInput.bind(e,"editval"),placeholder:"Value",filterOption:!0})),o.a.createElement("td",null,o.a.createElement("a",{href:"javascript:",onClick:e.editConfirm.bind(e,u,d)},"确认"),o.a.createElement(r.a,{type:"vertical"}),o.a.createElement("a",{href:"javascript:",onClick:e.editLabel.bind(e,-1,"","")},"取消"))):o.a.createElement("tr",{key:"tr_"+a},o.a.createElement("td",null,u),o.a.createElement("td",null,d),o.a.createElement("td",null,1==m?null:o.a.createElement(o.a.Fragment,null,o.a.createElement("a",{href:"javascript:",onClick:e.editLabel.bind(e,s,u,d)},"编辑"),o.a.createElement(r.a,{type:"vertical"}),o.a.createElement("a",{href:"javascript:",onClick:function(){return e.openDelMod(s,u,d)}},"删除"))))}))}},{key:"changePage",value:function(e){this.setState({pageIndex:e},this.getDeviceLabelList)}},{key:"copyText",value:function(){document.getElementById("copy").select(),document.execCommand("Copy")}},{key:"render",value:function(){var e=this,t=this.state,a=t.infodata,r=t.addkey,c=t.addval,s=t.pageIndex,u=t.infoJurisdiction,d=t.tagJurisdiction,m=t.delLabelId,p=t.deleteLoading,y=t.dellabelKey,I=t.dellabelValue,O=this.props.deviceLabelList.pager,L=a.deviceUniqueId,S=a.deviceMac,x=a.productName,j=a.productType,N=a.productCode,D=a.deviceKey,C=a.deviceSecret,P=a.productId,T=a.productClass,R=a.activeTime,M=a.moduleVersion,A=a.pcbVersion,F=a.gateWay,V=a.deviceName,B=a.deviceSite,J=a.bindUser,_=a.macAddress,K=a.deviceIdentifier,U=a.simNumber,q=a.online,H=this.props,Q=H.defaultLabel,z=H.match.params.deviceid,Z=H.protocolLists,G=this.getListHtml(),W=function(e){var t=e.title,a=e.label,n=e.type;return o.a.createElement("p",null,o.a.createElement("span",{className:"title"},t,"："),"visible"===n?o.a.createElement(h.a,{label:a||"",tip:"点击复制",copy:!0}):o.a.createElement("span",null,a))};return o.a.createElement("section",{className:"page-main-wrapper devicepage flex-column"},o.a.createElement(v.a,{title:"设备详情"}),o.a.createElement("div",{className:"headerbox"},o.a.createElement("p",{className:"maintext"},o.a.createElement("span",{className:"keyvalue"},o.a.createElement("span",{className:"key"},"设备ID："),L),o.a.createElement("span",{className:"keyvalue"},o.a.createElement("span",{className:"key"},"物理地址："),S),o.a.createElement("span",{className:"keyvalue"},o.a.createElement("span",{className:"key"},"产品名称："),x),o.a.createElement("span",{className:"keyvalue"},o.a.createElement("span",{className:"key"},"所属分类："),j),o.a.createElement("span",{className:"keyvalue"},o.a.createElement("span",{className:"key"},"在线状态："),q?"在线":"离线"))),o.a.createElement("div",null,o.a.createElement(i.a,{defaultActiveKey:"1",tabBarStyle:{background:"#fff",padding:"0 24px"},onChange:function(t){return e.tabChangeHandle(t,P)}},u?o.a.createElement(je,{tab:"基本信息",key:"1"},o.a.createElement(g.a,{title:"设备信息"},o.a.createElement("div",{className:"device-info"},o.a.createElement(W,{title:"设备ID",label:L}),o.a.createElement(W,{title:"设备秘钥",label:C,type:"visible"}),o.a.createElement(W,{title:"物理地址",label:S}),o.a.createElement(W,{title:"入网时间",label:R&&f.a.utcToDev(R)}),o.a.createElement(W,{title:"模组固件版本",label:M}),o.a.createElement(W,{title:"MCU固件版本",label:A}),o.a.createElement(W,{title:"绑定网关",label:F}),o.a.createElement(W,{title:"设备昵称",label:V}),o.a.createElement(W,{title:"设备位置",label:B}),o.a.createElement(W,{title:"绑定C端账户",label:J}),o.a.createElement(W,{title:"SIM卡号",label:U}),o.a.createElement(W,{title:"IMEI",label:K}))),o.a.createElement(g.a,{title:"产品信息"},o.a.createElement("div",{className:"device-info"},o.a.createElement(W,{title:"产品名称",label:x}),o.a.createElement(W,{title:"产品ID",label:P}),o.a.createElement(W,{title:"所属分类",label:j}),o.a.createElement(W,{title:"产品类型",label:{0:"普通设备",1:"网关设备"}[T]||"--"}),o.a.createElement(W,{title:"产品编码",label:N}),o.a.createElement(W,{title:"产品秘钥",label:D,type:"visible"})))):null,o.a.createElement(je,{tab:"topic列表",key:"9"},o.a.createElement(w.a,{productIdHex:N||"${YourProductKey}",type:1})),o.a.createElement(je,{tab:"设备影子",key:"2"},o.a.createElement(ke,{deviceId:z})),d?o.a.createElement(je,{tab:"设备标签",key:"4"},o.a.createElement(g.a,{title:o.a.createElement(E.a,{label:"默认设备标签",tipPlacement:"right",tip:"设备标签是您给产品设备自定义的标识，标签的结构为：Key：value，您可以使用标签功能实现设备的分类统一管理。"})},o.a.createElement("div",{className:"section-bg tabdevice"},o.a.createElement("table",{className:"labeltable"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:{width:"38%"}},"标签Key"),o.a.createElement("th",{style:{width:"62%"}},"标签Value"),o.a.createElement("th",{style:{width:"24%"}}))),o.a.createElement("tbody",null,Q.length?Q.map((function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",null,e.labelKey),o.a.createElement("td",null,e.labelValue))})):null)))),o.a.createElement(g.a,{title:o.a.createElement(E.a,{label:"自定义设备标签",tipPlacement:"right",tip:"设备标签是您给产品设备自定义的标识，标签的结构为：Key：value，您可以使用标签功能实现设备的分类统一管理。"})},o.a.createElement("div",{className:"section-bg tabdevice"},o.a.createElement("table",{className:"labeltable"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:{width:"38%"}},"标签Key"),o.a.createElement("th",{style:{width:"38%"}},"标签Value"),o.a.createElement("th",{style:{width:"24%"}},"管理"))),o.a.createElement("tbody",null,G,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(l.a,{value:r,dataSource:this.getDataSource(),style:{width:"80%"},onChange:this.onChangeInput.bind(this,"addkey"),placeholder:"Key",maxLength:"100",filterOption:!0})),o.a.createElement("td",null,o.a.createElement(l.a,{value:c,dataSource:this.getDataSource(r),style:{width:"80%"},onChange:this.onChangeInput.bind(this,"addval"),placeholder:"Value",maxLength:"100",filterOption:!0})),o.a.createElement("td",null,o.a.createElement("a",{href:"javascript:",onClick:this.addConfirm.bind(this)},"确认"))))),o.a.createElement("footer",{className:"list-pagination"},O&&O.totalRows>0?o.a.createElement(n.a,{className:"self-pa",total:O.totalRows,current:s,defaultCurrent:1,defaultPageSize:10,onChange:function(t){return e.changePage(t)},showTotal:function(e){return o.a.createElement("span",null,"共 ",o.a.createElement("a",null,e)," 条")},showQuickJumper:!0,hideOnSinglePage:!0}):null)))):null,o.a.createElement(je,{tab:"远程配置",key:"3"},o.a.createElement(k.a,{remoteType:"device",productId:P,deviceId:this.props.match.params.deviceid,deviceUniqueId:L,macAddress:_,protocolLists:Z})))),o.a.createElement(b.a,{visible:!!m,modalOKHandle:this.deleteOkHandle.bind(this),modalCancelHandle:this.closeDelLabelMod.bind(this),targetName:"key: ".concat(y,", value: ").concat(I),confirmLoading:p,title:"删除标签",needWarnIcon:!0,descText:"即将删除的标签"}))}}])&&Ie(t.prototype,a),c&&Ie(t,c),u}(c.PureComponent))||fe},"1Ngb":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAQCAYAAABk1z2tAAACPUlEQVRIS82VT2jTYBiH3/dLUoWtFWQoCLvpabCLPXgYQpqWgraLgnzQPw48efK+3Qq7yDztuOO2roiHtUE2GdnIQUZl21kUFGVYNlemuFnN0jafdCyrDU2TeLG55vckD1/y/l6EPr9Q0zS+Wq0SSqnhx/WFpg3WazUhk0h898MVXmpDPJgXaFKqeOGwoLwaJSTANwxyEGhW9yilTS/gYmn9KSALcQgbJ0F+5ZEo6l64pZK6CwBXGeJsEC5Oy/LYcS8Ol4prN62AyVhjIMR/uS9J3xCR9QIXFXXu/D7CEYe4nEpIb9y4fEltPxdxnwBMpsalBSeuQ9B6IcfIL2PA3J2Ix2tOkh2CZyEE/Gxi8/nEePyTE9ch2Oa2gMMnmaS0Zee6ClohAoHDG8PBSjgcrtvBboLnHLKyoGOR0tgPO9dNsJU5PUEG84LATdG74r7F9RRshQghJscbe2+3tw9yuZxpgb0ET1/I4MQEWBm+xG+IotiwOCfB9u+CxwTYNH/92iwdGTFcBS1QIMJPKkfeexX86+Q+PJRjzzwLtk1fZ+9Fb3sWxCbU0g/i7/wKIuDHrByd8SuICJsZOTbmKtjXn/jfh4SUBd30PSQMYCHAc5OuQ9K3NdMqak6oV1KJxKFb4dqLGkxSzMqRshtnL2pEnEonI/OORV1Q1kcJQd+rLq+oMwxg0PeqU9QKMBjyvOrmdnaE1oQ97lLGvVZdfnU1BHAZsnduHXnZwVZmeW3ziq7/xrQc/eqFQy+h/5n5A/v0OCDUiLvVAAAAAElFTkSuQmCC"},"75Mp":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("mbEz");var n=a("wCAj"),r=a("q1tI"),l=a.n(r),i=a("cu44"),c=[{title:"Topic",dataIndex:"topic",key:"topic"},{title:"描述",dataIndex:"desc",key:"desc"}];function o(e){var t=e.productIdHex,a=void 0===t?"":t,r=(e.type,[{fn:"属性",topic:"/sys/".concat(a,"/thing/event/property/post"),desc:"设备属性上报"},{fn:"事件info",topic:"/sys/".concat(a,"/device/thing/event/info/post"),desc:"设备信息通知"},{fn:"事件error",topic:"/sys/".concat(a,"/device/thing/event/error/post"),desc:"设备故障上报"},{fn:"事件alert",topic:"/sys/".concat(a,"/device/thing/event/alert/post"),desc:"设备告警"}]);return l.a.createElement(i.a,{title:"topic列表"},l.a.createElement("div",{style:{padding:"12px"}},l.a.createElement(n.a,{columns:c,dataSource:r,key:"topic",pagination:!1})))}},AXa2:function(e,t,a){},Z5Qr:function(e,t,a){},r7tM:function(e,t,a){"use strict";a.d(t,"a",(function(){return Y}));a("pNMO"),a("4Brf"),a("0oug"),a("+2oP"),a("sMBO"),a("pjDv"),a("tkto"),a("5DmW"),a("27RR"),a("mbEz");var n=a("wCAj"),r=(a("TfFZ"),a("3S7+")),l=(a("L/Qf"),a("2/Rp")),i=(a("qNb/"),a("PArb")),c=a("BkRI"),o=a.n(c),s=(a("pDQq"),a("TeQF"),a("2B1R"),a("rB9j"),a("EnZy"),a("FZtP"),a("4mDm"),a("07d7"),a("5s+n"),a("PKPk"),a("3bBZ"),a("p532"),a("q1tI")),u=a.n(s),d=a("xvlK"),m=a("Nlzp"),p=a("DgvE"),f=a("cu44"),v=a("TL2v"),y=a("2kug"),b=(a("k3Gp"),a("kLXV")),g=(a("QCje"),a("fyUT")),h=(a("8QGh"),a("2fM7")),E=(a("1vPl"),a("5rEg")),k=(a("ma9I"),a("yq1k"),a("SYor"),a("JTJg"),a("i6QF"),a("qePV"),a("z7Xi")),w=a("P2RN");function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){L(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return l}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return N(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var D=E.a.TextArea,C=E.a.Search,P=h.a.Option,T=[{title:"填写任务说明"},{title:"添加配置数据"},{title:"选择配置更新的设备"}],R=["待执行","执行中","成功","失败"];function M(e){var t=e.visible,a=e.productId,r=e.onCancel,i=e.configProtoclList,c=e.isDeviceRomote,d=e.getRemoteList,f=e._deviceList,v=e.editData,I=e.protocolFormat,L=x(Object(s.useState)(0),2),j=L[0],N=L[1],R=x(Object(s.useState)(v?{taskExplain:v.taskExplain}:{taskExplain:""}),2),M=R[0],A=R[1],F=x(Object(s.useState)(v?v.protocolSendData||[]:i.map((function(e){return e.defaultPropertyValue||""}))),2),V=F[0],B=F[1],_=x(Object(s.useState)(v&&v.protocolSelection||[]),2),K=_[0],U=_[1],q=x(Object(s.useState)([]),2),H=q[0],Q=q[1],z=x(Object(s.useState)(1),2),Z=z[0],G=z[1],W=x(Object(s.useState)([]),2),Y=W[0],X=W[1],$=x(Object(s.useState)({curDeviceInfoList:[],allDeviceInfoList:[],allDeviceInfoPager:{pageIndex:1,currPageRows:7}}),2),ee=$[0],te=$[1],ae=x(Object(s.useState)([]),2),ne=ae[0],re=ae[1],le=x(Object(s.useState)(!1),2),ie=le[0],ce=le[1],oe=x(Object(s.useState)({allList:[],successList:[],errorList:[],errorVisible:!1}),2),se=oe[0],ue=oe[1],de=x(Object(s.useState)(""),2),me=de[0],pe=de[1],fe=x(Object(s.useState)(!1),2),ve=fe[0],ye=fe[1],be=x(Object(s.useState)({rightAllList:v?v.deviceList:[],rightTempList:v?v.deviceList:[]}),2),ge=be[0],he=be[1],Ee=x(Object(s.useState)([]),2),ke=Ee[0],we=Ee[1],Ie=Object(s.useRef)(null),Oe=M.taskExplain,Le=ee.curDeviceInfoList,Se=ee.allDeviceInfoList,xe=ee.allDeviceInfoPager,je=se.allList,Ne=se.successList,De=se.errorList,Ce=se.errorVisible,Pe=ge.rightAllList,Te=ge.rightTempList,Re=c?1:2,Me=o()(T);c&&Me.splice(2,1);var Ae=function(e){Object(m.c)(m.a.getAllDeviceInfo,{productId:a,pageRows:8,pageIndex:e||xe.pageIndex}).then((function(e){if(e.data){var t=e.data,a=t.list,n=void 0===a?[]:a,r=t.pager,l=void 0===r?{}:r,i=[].concat(S(Se),S(n));n.forEach((function(e){e.key=e.deviceUniqueId})),te({curDeviceInfoList:n,allDeviceInfoPager:l,allDeviceInfoList:i})}}))};Object(s.useEffect)((function(){c||Ae()}),[a,c]);var Fe=function(e){var t=m.a.saveRomoteConfig,n={taskExplain:Oe,productId:a,protocolJson:JSON.stringify(1!==I?K.map((function(e){var t=i[e];return delete t._type,delete t._params,delete t._index,delete t.key,O(O({},t),{},{sendData:V[e]})})):V.map((function(e,t){var a=i[t];return delete a._type,delete a._params,delete a._index,delete a.key,O(O({},a),{},{sendData:e})})))};if(c)t=m.a.saveRomoteConfigForDevice,n.deviceList=f;else{if(Pe.length<1)return void Object(w.a)({description:"请至少选择一个设备"});n.deviceList=Pe.map((function(e){return{deviceId:e.deviceId,deviceUniqueId:e.deviceUniqueId,macAddress:e.macAddress}})),v&&(n.taskId=v.taskId)}Object(m.d)(t,n,{needJson:!0,loading:!0,noInstance:!0}).then((function(t){if(e){var n=t.data;Object(m.c)(m.a.submitRomoteConfig,{taskId:n,productId:a},{loading:!0}).then((function(e){d(1),r()}))}else d(1),r()}))},Ve=function(e){A(O(O({},M),{},{taskExplain:e.target.value.trim()}))},Be=function(e,t){var a=S(V),n=H.filter((function(e){return e!==t}));a[t]=e,B(a),Q(n)},Je=function(e){G(+e),X([]),re([])},_e=function(e){e?(ce(!0),Object(m.c)(m.a.getDeviceInfoByIdOrMacAddress,{productId:a,query:e}).then((function(e){var t=e.data;t.key=t.deviceUniqueId,e.data&&re([t])})).finally((function(){ce(!1)}))):Object(w.a)({description:"请输入查询条件"})},Ke=function(e){var t=S(Pe);if(e&&e.trim()){var a=e.trim();t=Pe.filter((function(e){var t=e.deviceUniqueId,n=e.macAddress;return t.indexOf(a)>-1||n.indexOf(a)>-1}))}he(O(O({},ge),{},{rightTempList:t}))},Ue=function(){window.open(m.a.downloadRemoteDeviceTemplateExcel)},qe=function(e){console.log(1);var t=e.target;if(t.files&&t.files.length>0){var n=Object(p.e)(t.files,["xls","xlsx"],1e4),r=n.isOk;n.type,n.size;if(!r)return void Object(w.a)({description:"文件类型或者大小不符合要求"});var l=t.files[0];Object(m.d)(m.a.importRemoteDeviceExcel,{uploadExcel:l,productId:a},{needFormData:!0,loading:!0}).then((function(e){if(e.data){var t=e.data,a=[],n=[];t.forEach((function(e,t){var r=e.errorType,l=e.deviceUniqueId;e.key=l,r?n.push({deviceUniqueId:l,errorType:r,key:l}):a.push(O({},e))})),ue(O(O({},se),{},{allList:t,successList:a,errorList:n})),a.length>0&&(he({rightAllList:[].concat(a),rightTempList:[].concat(a)}),we([])),pe(l.name),ye(!0)}}))}},He=function(){var e=(1==Z?Se:ne).filter((function(e){return Y.includes(e.deviceUniqueId)})),t=Object(p.q)([].concat(S(Pe),S(e)),"deviceUniqueId");Ie&&(Ie.current.input.input.value=""),he({rightAllList:t,rightTempList:t})},Qe=function(){if(0!==ke.length){var e=Pe.filter((function(e){var t=e.key;return!ke.includes(t)})),t=Te.filter((function(e){var t=e.key;return!ke.includes(t)}));he(O(O({},ge),{},{rightAllList:e,rightTempList:t})),we([])}},ze=[{title:"数据名称",dataIndex:"propertyName",key:"propertyName",width:160},{title:"数据标识",dataIndex:"property",width:240,key:"property"},{title:"数据类型",dataIndex:"_type",key:"_type",width:140},{title:"数据属性",dataIndex:"propertyValueDesc",key:"propertyValueDesc"},{title:"下发数据",dataIndex:"execTime",key:"execTime",width:180,render:function(e,t){var a=t._type,n=t._params,r=t._index,l=t.key,i=null,c=1!==I&&!K.includes(l);switch(a){case"数值型":i=u.a.createElement(g.a,{value:V[r],min:n.min,max:n.max,disabled:c,onChange:function(e){return Be(e,r)},placeholder:"请输入参数"});break;case"字符型":i=u.a.createElement(E.a,{value:V[r],maxLength:30,disabled:c,onChange:function(e){return Be(e.target.value.trim(),r)},placeholder:"请输入参数"});break;default:i=u.a.createElement(h.a,{disabled:c,onChange:function(e){return Be(e,r)},value:V[r]||""},u.a.createElement(P,{key:-1,value:""},"请选择参数"),n&&n.map((function(e,t){return u.a.createElement(P,{key:t+a,value:e.value},e.name)})))}return u.a.createElement("span",{className:"config-send-data ".concat(H.includes(r)?"warn":"")},i)}}],Ze=[{title:"设备ID",dataIndex:"deviceUniqueId",key:"deviceUniqueId",width:140},{title:"物理地址",dataIndex:"macAddress",width:140,key:"macAddress"}],Ge={selectedRowKeys:K,onChange:function(e){U(e)}},We={selectedRowKeys:Y,onChange:function(e){X(e)}},Ye={selectedRowKeys:ke,onChange:function(e){we(e)}},Xe=1===Z?Le:2===Z?ne:[];return u.a.createElement(b.a,{visible:t,width:1e3,className:"romote-modal",title:"远程配置任务",centered:!0,closable:!1,onOk:null,destroyOnClose:!0,maskClosable:!1,footer:null},u.a.createElement("div",{className:"romote-add-content flex-column"},u.a.createElement(y.a,{type:2,flowLists:Me,style:{padding:"12px 0"},activeItem:j}),u.a.createElement("div",{className:"content-wrapper flex1"},function(){switch(j){case 0:return u.a.createElement("div",{className:"step-0-wrapper flex-row"},u.a.createElement("div",{className:"step-0-lable"},u.a.createElement("span",{className:"pre-requst-start"},"任务说明")),u.a.createElement("div",{className:"textarea-wrapper flex1"},u.a.createElement(D,{value:Oe,maxLength:100,onChange:Ve,autoSize:{minRows:4,maxRows:6}})),u.a.createElement("div",{className:"count-wrapper"},u.a.createElement("span",null,"".concat(Oe.length,"/100"))));case 1:return u.a.createElement("div",{className:"step-1-wrapper"},u.a.createElement("p",null,1!==I?"请选中需要下发的配置数据，并配置下发数据的值":"该产品使用了CLink标准数据格式（十六进制），需全量下发配置更新数据"),u.a.createElement("div",{className:"table-wrapper"},u.a.createElement(n.a,{columns:ze,rowSelection:1!==I?Ge:null,dataSource:i,scroll:{y:300},pagination:!1})));case 2:return u.a.createElement("div",{className:"step-2-wrapper"},u.a.createElement("div",{className:"device-select-wrapper flex-row"},u.a.createElement("div",{className:"left flex1"},u.a.createElement("p",null,"选择配置更新的设备"),u.a.createElement(h.a,{value:Z,onChange:Je},u.a.createElement(P,{value:1,key:1},"全部设备"),u.a.createElement(P,{value:2,key:2},"通过设备ID/物理地址查找"),u.a.createElement(P,{value:3,key:3},"导入设备列表（本地文件）")),2===Z&&u.a.createElement(C,{enterButton:"查 找",loading:ie,onSearch:_e,maxLength:50,placeholder:"请输入设备ID/物理地址查找"}),3===Z?u.a.createElement("section",{className:"file-upload-area"},u.a.createElement("p",null,"选择本地的设备数据文件上传 ",u.a.createElement("a",{onClick:Ue},"设备数据模板")),u.a.createElement("p",null,"每次添加最多支持20,000个设备"),ve?u.a.createElement("div",null,u.a.createElement("div",{className:"result-area"},u.a.createElement("h3",null,me||"--"),u.a.createElement("p",null,"共".concat(je.length,"条数据")),u.a.createElement("p",null,"".concat(Ne.length,"台设备成功匹配")),u.a.createElement("p",null,"".concat(De.length,"条数据匹配失败"))),u.a.createElement("div",{className:"tools"},u.a.createElement("a",{onClick:function(){return ye(!1)}},"重新上传"),u.a.createElement("a",{onClick:function(){return ue(O(O({},se),{},{errorVisible:!0}))}},"错误日志"))):u.a.createElement("div",null,u.a.createElement("div",{className:"file-input-wrapper"},u.a.createElement(l.a,{type:"primary"},u.a.createElement(k.a,null)," 选择本地设备数据文件"),u.a.createElement("input",{type:"file",onInput:qe,accept:".xls,.xlsx"})),u.a.createElement("p",null,"支持xls，xlsx格式，文件大小不超过10MB"))):2===Z?u.a.createElement(n.a,{columns:Ze,dataSource:Xe,rowSelection:We,pagination:!1}):u.a.createElement(n.a,{columns:Ze,dataSource:Xe,rowSelection:We,pagination:{total:xe.totalRows,defaultCurrent:1,defaultPageSize:xe.currPageRows,showQuickJumper:!1,hideOnSinglePage:!0,size:"small",onChange:function(e){return Ae(e)},showTotal:function(e){return u.a.createElement("span",null,"共 ",u.a.createElement("a",null,e)," 条")}}})),u.a.createElement("div",{className:"center"},u.a.createElement(l.a,{type:"primary",disabled:0===Y.length,onClick:He},"选择设备")),u.a.createElement("div",{className:"right flex1"},u.a.createElement("p",null,"已选中配置更新的设备"),u.a.createElement(C,{enterButton:"查 找",ref:Ie,onSearch:Ke,maxLength:50,placeholder:"请输入设备ID/物理地址查找"}),u.a.createElement("div",{className:"tools-wrapper"},u.a.createElement("a",{className:ke.length>0?"":"disable",onClick:Qe},"取消选中")),u.a.createElement(n.a,{columns:Ze,rowSelection:Ye,dataSource:Te,pagination:{total:Te.length,defaultCurrent:1,defaultPageSize:7,showQuickJumper:!1,hideOnSinglePage:!0,size:"small",showTotal:function(e){return u.a.createElement("span",null,"共 ",u.a.createElement("a",null,e)," 条")}}}))))}}()),u.a.createElement("div",{className:"r-footer"},u.a.createElement("span",null,j>0&&u.a.createElement(l.a,{onClick:function(){return N(j-1)},type:"primary"},"上一步"),u.a.createElement(l.a,{onClick:function(){if(0===j){if(!Oe)return void Object(w.a)({description:"请输入远程配置的备注信息"})}else if(1===j){var e=[];if(1!==I){if(K.length<1)return void Object(w.a)({description:"请至少选择一条配置协议"});K.forEach((function(t){[""," ",null,void 0].includes(V[t])&&e.push(t)}))}else V.forEach((function(t,a){[""," ",null,void 0].includes(t)&&e.push(a)}));if(e.length>0)return Object(w.a)({description:"请为配置协议添加参数"}),void Q(e)}else if(2===j&&Pe.length<1)return void Object(w.a)({description:"请至少选择一个设备"});j===Re?Fe(!c):N(j+1)},type:"primary"},j===Re?"提交执行":"下一步"),u.a.createElement(l.a,{onClick:function(){2===j?Fe():r()},type:2===j?"primary":"default"},2===j?"保存":"取消"))),Ce&&u.a.createElement(J,{visible:Ce,errorList:De,onCancel:function(){return ue(O(O({},se),{},{errorVisible:!1}))}})))}function A(e){var t=e.visible,a=e.record,r=e.statusText,c=e.onCancel,o=e.searchDeviceResult,d=e.isDeviceRomote,f=x(Object(s.useState)({selectType:1,keyWords:"",filterStatus:0}),2),v=f[0],y=f[1],g=x(Object(s.useState)({errorLogVisible:!1,errorLogRecord:{}}),2),k=g[0],w=g[1],I=a.taskId,S=a.taskExplain,j=a.status,N=a.execTime,D=a.protocolConfig,C=a.total,T=a.success,M=a.inExec,A=a.fail,F=a.list,B=void 0===F?[]:F,J=a.pager,_=void 0===J?{}:J,K=v.selectType,U=v.keyWords,q=v.filterStatus,H=k.errorLogVisible,Q=k.errorLogRecord,z=[{title:"设备ID",dataIndex:"deviceUniqueId",key:"deviceUniqueId",width:200},{title:"物理地址",dataIndex:"macAddress",width:200,key:"macAddress"},{title:"配置结果",dataIndex:"status",key:"status",width:160,render:function(e,t){var a=t.status;return u.a.createElement("span",{className:"verify-statu-".concat(a)},R[a-1])}},{title:"操作",key:"action",width:200,render:function(e,t){var a=t.status,n=t.remoteId;t.receiveMsg,t.errorType;return u.a.createElement("span",null,""+a=="4"?u.a.createElement(u.a.Fragment,null,u.a.createElement("a",{onClick:function(){return function(e){Object(m.c)(m.a.retryByTaskId,{remoteId:e}).then((function(e){G(_.pageIndex)}))}(n)}},"重试"),u.a.createElement(i.a,{type:"vertical"}),u.a.createElement("a",{onClick:function(){return function(e){var t=e.remoteId,a=e.errorType;2==a?Object(m.c)(m.a.getReceiveMsg,{remoteId:t},{loading:!0}).then((function(e){w({errorLogVisible:!0,errorLogRecord:{errorType:a,receiveMsg:e.data&&e.data.receiveMsg}})})):w({errorLogVisible:!0,errorLogRecord:{errorType:a,receiveMsg:null}})}(t)}},"日志")):null)}}],Z=function(e,t){y(O(O({},v),{},L({},t,e)))},G=function(e){var t={};e&&(t.pageIndex=e),U&&(t[1===K?"deviceUniqueId":"macAddress"]=U),q&&(t.status=q),t.taskId=I,o(t)};return u.a.createElement(b.a,{visible:t,width:1e3,className:"romote-modal",title:"远程配置任务",centered:!0,closable:!0,onOk:null,onCancel:c,destroyOnClose:!0,maskClosable:!1,footer:null},u.a.createElement("div",{className:"romote-detail-content height-premit"},u.a.createElement("h3",null,"基础信息"),u.a.createElement("div",{className:"base-info"},u.a.createElement("p",null,u.a.createElement("span",null,"任务ID"),u.a.createElement("span",null,I||"--")),u.a.createElement("p",null,u.a.createElement("span",null,"任务说明"),u.a.createElement("span",null,S||"--")),u.a.createElement("p",null,u.a.createElement("span",null,"任务状态"),u.a.createElement("span",null,r[j]||"--")),u.a.createElement("p",null,u.a.createElement("span",null,"执行时间"),u.a.createElement("span",null,p.a.utcToDev(N)||"--"))),u.a.createElement("h3",null,"配置数据"),u.a.createElement(n.a,{columns:[{title:"数据名称",dataIndex:"propertyName",key:"propertyName",width:200},{title:"数据标识",dataIndex:"property",width:240,key:"property"},{title:"数据类型",dataIndex:"_type",key:"_type",width:120},{title:"数据属性",dataIndex:"propertyValueDesc",key:"propertyValueDesc"},{title:"下发数据",dataIndex:"sendData",key:"sendData",width:140}],dataSource:D||[],pagination:!1}),!d&&u.a.createElement(u.a.Fragment,null,u.a.createElement("h3",null,"配置设备"),u.a.createElement("div",{className:"device-wrapper"},u.a.createElement("div",null,u.a.createElement("h4",null,"配置设备数"),u.a.createElement("p",null,Number.isInteger(C)?C:"--")),u.a.createElement("div",null,u.a.createElement("h4",null,"配置成功"),u.a.createElement("p",null,Number.isInteger(T)?T:"--")),u.a.createElement("div",null,u.a.createElement("h4",null,"执行中"),u.a.createElement("p",null,Number.isInteger(M)?M:"--")),u.a.createElement("div",null,u.a.createElement("h4",null,"配置失败"),u.a.createElement("p",null,Number.isInteger(A)?A:"--")),u.a.createElement("div",null,u.a.createElement("span",{className:0==+A?"disable":"",onClick:+A>0?function(){Object(m.c)(m.a.batchRetry,{taskId:I}).then((function(e){G()}))}:null},"批量重试"))),u.a.createElement("div",{className:"filter-wrapper"},u.a.createElement(h.a,{value:K,onChange:function(e){return Z(e,"selectType")}},u.a.createElement(P,{key:"1",value:1},"设备ID"),u.a.createElement(P,{key:"2",value:2},"物理地址")),u.a.createElement(E.a,{placeholder:"支持精确查询",value:U,maxLength:50,onChange:function(e){return Z(e.target.value,"keyWords")}}),u.a.createElement("span",null,"配置结果"),u.a.createElement(h.a,{value:q,onChange:function(e){return Z(e,"filterStatus")}},u.a.createElement(P,{key:"0",value:0},"全部"),u.a.createElement(P,{key:"1",value:1},"待执行"),u.a.createElement(P,{key:"2",value:2},"执行中"),u.a.createElement(P,{key:"3",value:3},"执行成功"),u.a.createElement(P,{key:"4",value:4},"执行失败")),u.a.createElement(l.a,{type:"primary",onClick:function(){return G()}},"查找"),u.a.createElement(l.a,{type:"primary",onClick:function(){Object(m.c)(m.a.exportTaskResult,{taskId:I}).then((function(e){window.open(m.a.exportTaskResult+"?taskId=".concat(I))}))}},"导出数据")),u.a.createElement(n.a,{columns:z,dataSource:B||[],pagination:{total:_.totalRows,current:_.pageIndex,defaultCurrent:1,defaultPageSize:_.defaultPageRows,showQuickJumper:!1,hideOnSinglePage:!0,size:"small",onChange:function(e){return G(e)},showTotal:function(e){return u.a.createElement("span",null,"共 ",u.a.createElement("a",null,e)," 条")}}}),H&&u.a.createElement(V,{visible:H,onCancel:function(){return w({errorLogVisible:!1,errorLogRecord:{}})},record:Q}))))}var F=["没问题","下发配置数据失败","上报的配置数据不一致","上报的配置数据在超时时间内未获取到","存在相同的设备在执行远程配置任务","后台数据异常"];function V(e){var t=e.visible,a=e.record,n=e.onCancel,r=a.errorType,l=a.receiveMsg;return u.a.createElement(b.a,{visible:t,width:600,className:"romote-modal",title:"日志",centered:!0,closable:!0,onOk:null,onCancel:n,destroyOnClose:!0,maskClosable:!1,footer:null},u.a.createElement("div",{className:"remote-error-wrapper"},u.a.createElement("div",null,u.a.createElement("label",null,"失败原因：")," ",u.a.createElement("span",null,F[r])),u.a.createElement("div",null,u.a.createElement("label",null,"报文信息："),u.a.createElement("div",{className:"msg-wrap"},function(e){if(!e)return u.a.createElement("h4",null,"无报文信息");var t=JSON.parse(e),a=Object.keys(t);return u.a.createElement(u.a.Fragment,null,u.a.createElement("h4",null,"报文解析列表"),a.map((function(e){return u.a.createElement("div",{className:"log-row"},u.a.createElement("span",{className:"log-left-key"},e),u.a.createElement("span",{className:"log-right-content"},t[e]))})))}(l)))))}var B=["设备ID的长度超过限制","物理地址的长度超限制","设备ID发生重复","物理地址发生重复","设备ID不存在或未联网","物理地址不存在或未联网"];function J(e){var t=e.visible,a=e.errorList,r=e.onCancel,l=[{title:"设备ID",dataIndex:"deviceUniqueId",key:"deviceUniqueId",width:200},{title:"错误原因",dataIndex:"errorType",width:200,key:"errorType",render:function(e,t){var a=t.errorType;return u.a.createElement("span",null,B[a-1])}}];return u.a.createElement(b.a,{visible:t,width:600,className:"romote-modal",title:"设备导入错误日志",centered:!0,closable:!0,onOk:null,onCancel:r,destroyOnClose:!0,maskClosable:!1,footer:null},u.a.createElement("div",null,u.a.createElement(n.a,{columns:l,dataSource:a||[],pagination:{total:a.length,defaultCurrent:1,defaultPageSize:10,showQuickJumper:!1,hideOnSinglePage:!0,size:"small",showTotal:function(e){return u.a.createElement("span",null,"共 ",u.a.createElement("a",null,e)," 条")}}})))}a("AXa2");var _=a("FC04");function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(Object(a),!0).forEach((function(t){q(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var z=["平台支持远程更新设备的配置数据，您可以提交远程配置任务，实时对设备的系统参数等数据进行远程更新，并且获取设备配置的更新状态；详细说明可参考文档"],Z=[{title:"创建远程配置任务"},{title:"添加配置数据"},{title:"选择设备"},{title:"执行任务"}],G=["草稿","待执行","执行中","已执行"],W=["","执行中","执行成功","执行失败"];function Y(e){var t=e.productId,a=e.protocolLists,c=void 0===a?[]:a,b=e.remoteType,g=void 0===b?"product":b,h=e.deviceId,E=e.deviceUniqueId,k=e.macAddress,w=H(Object(s.useState)(!1),2),I=w[0],O=w[1],L=H(Object(s.useState)({detailVisible:!1,selectRecord:{}}),2),S=L[0],x=L[1],j=H(Object(s.useState)([]),2),N=j[0],D=j[1],C=H(Object(s.useState)({pageIndex:1}),2),P=C[0],T=C[1],R=H(Object(s.useState)({deletevisible:!1,deleteItem:null,deleteLoading:!1}),2),F=R[0],B=R[1],J=H(Object(s.useState)([]),2),K=J[0],q=J[1],Q=H(Object(s.useState)(0),2),Y=Q[0],X=Q[1],$=H(Object(s.useState)(null),2),ee=$[0],te=$[1],ae=H(Object(s.useState)({errorLogVisible:!1,errorLogRecord:{}}),2),ne=ae[0],re=ae[1],le=ne.errorLogVisible,ie=ne.errorLogRecord,ce=P.totalRows,oe=P.pageIndex,se=P.pageRows,ue=F.deletevisible,de=F.deleteItem,me=F.deleteLoading,pe=S.detailVisible,fe=S.selectRecord,ve="device"===g,ye=o()(Z);ve&&ye.splice(2,1);var be=ve?W:G,ge=[{title:"任务ID",dataIndex:"taskId",key:"taskId",width:200},{title:"任务说明",dataIndex:"taskExplain",key:"taskExplain"},{title:"更新设备数量",dataIndex:"deviceTotal",key:"deviceTotal",width:180},{title:"任务状态",dataIndex:"status",key:"status",width:180,render:function(e,t){var a=t.status;return u.a.createElement("span",{className:"h5-statu-".concat(a+1)},be[a])}},{title:"执行时间",dataIndex:"execTime",key:"execTime",width:180,render:function(e,t){var a=t.execTime;return u.a.createElement("span",null,a?p.a.utcToDev(a):"--")}},{title:"操作",key:"action",width:200,render:function(e,t){var a=t.status,n=t.taskId;return ve?u.a.createElement("span",null,u.a.createElement("a",{onClick:function(){return ke(t)}},"查看"),""+a=="3"?u.a.createElement(u.a.Fragment,null,u.a.createElement(i.a,{type:"vertical"}),u.a.createElement("a",{onClick:function(){return Le(n)}},"重试"),u.a.createElement(i.a,{type:"vertical"}),u.a.createElement("a",{onClick:function(){return Se(t)}},"日志")):null):u.a.createElement("span",null,""+a=="1"?u.a.createElement(u.a.Fragment,null,u.a.createElement("a",{onClick:function(){return Ee(t)}},"编辑"),u.a.createElement(i.a,{type:"vertical"}),u.a.createElement("a",{onClick:function(){return B({deletevisible:!0,deleteItem:t})}},"删除")):u.a.createElement("a",{onClick:function(){return ke(t)}},"查看"))}}];ve&&ge.splice(2,1);var he=function(e){var a=m.a.getRomoteConfigListByProduct,n={pageIndex:e||oe,pageRows:10};ve?(a=m.a.getRomoteConfigListForDevice,n.deviceId=h):n.productId=t,Object(m.c)(a,n).then((function(e){var t=e.data,a=t.pager,n=void 0===a?{}:a,r=t.list,l=void 0===r?[]:r;D(Object(p.c)(l)),T(n)}))};Object(s.useEffect)((function(){he()}),[t,oe,ve,h]),Object(s.useEffect)((function(){var e=c.filter((function(e){return 5==e.dataType})),t=e[0]&&e[0].list||[],a=e[0]&&e[0].protocolFormat||0;t=(t=t.filter((function(e){return"Base_Null_Reserved_Null"!==e.property}))).map((function(e,t){var a=e.propertyValueDesc,n=null;if(a&&a.indexOf("|")>-1&&(n=a.split("|").map((function(e){var t=e.split("-");return t.length>1?{name:t[1],value:t[0]}:{}}))),a&&a.indexOf("~")>-1){var r=H(a.split("~"),2);n={min:+r[0],max:+r[1]}}return U(U({},e),{},{_type:Object(p.o)(e),_params:n,_index:t,key:t})})),q(t),X(a)}),[c]);var Ee=function(e){if(e){var t=e.taskId;we(t,1).then((function(e){var t=e.data,a=t.taskExplain,n=t.taskId,r=t.protocolJson,l=t.deviceList,i=JSON.parse(r),c=i.map((function(e){return e.property})),o=K.map((function(e){return e.defaultPropertyValue||""})),s=[];K.forEach((function(e,t){var a=e.property,n=c.indexOf(a);n>-1&&(o[t]=i[n].sendData,s.push(t))})),l.forEach((function(e){return e.key=e.deviceUniqueId})),te({taskId:n,taskExplain:a,deviceList:l,protocolSendData:o,protocolSelection:s}),O(!I)}))}else K.length>0&&O(!I)},ke=function(e){var t=e.taskId;ve?Object(m.c)(m.a.getRemoteDetailForDevice,{taskId:t},{loading:!0}).then((function(t){var a=t.data.protocolJson;x({detailVisible:!pe,selectRecord:U(U({},e),{},{protocolConfig:JSON.parse(a)})})})):Promise.all([we(t,2),Ie(t),Oe({taskId:t})]).then((function(t){var a=H(t,3),n=a[0],r=a[1],l=a[2],i=n.data.protocolJson,c=void 0===i?"[]":i,o=r.data,s=l.data,u=s.list,d=s.pager;x({detailVisible:!pe,selectRecord:U(U(U({},e),{},{protocolConfig:JSON.parse(c)},o),{},{list:u,pager:d})})}))},we=function(e,t){return Object(m.c)(m.a.getRemoteDetail,{taskId:e,type:t},{loading:!0})},Ie=function(e){return Object(m.c)(m.a.getResultTotal,{taskId:e},{loading:!0})},Oe=function(e){return Object(m.c)(m.a.getDeviceResultList,U({},e),{loading:!0})},Le=function(e){Object(m.c)(m.a.retryByTaskIdForDevice,{taskId:e},{loading:!0}).then((function(e){he(oe)}))},Se=function(e){var t=e.taskId,a=e.errorType;2==a?Object(m.c)(m.a.getReceiveMsgForDevice,{taskId:t},{loading:!0}).then((function(e){re({errorLogVisible:!0,errorLogRecord:{errorType:a,receiveMsg:e.data&&e.data.receiveMsg}})})):re({errorLogVisible:!0,errorLogRecord:{errorType:a,receiveMsg:null}})};return u.a.createElement("div",{className:"remote-config-wrapper"},u.a.createElement(f.a,{style:{margin:"0 0 24px",padding:"24px"}},u.a.createElement(v.a,{desc:z}),u.a.createElement("div",{style:{padding:"24px 0 0"},className:"use-service-flow-wrapper"},u.a.createElement(y.a,{type:3,flowLists:ye}),u.a.createElement("div",{className:"extra-descs"},u.a.createElement("div",{className:"descs-item"},u.a.createElement("p",null,"创建远程配置任务，填写任务的目的或备注信息")),u.a.createElement("div",{className:"descs-item"},u.a.createElement("p",null,"添加要更新的产品配置数据字段和更新的数值")),!ve&&u.a.createElement("div",{className:"descs-item"},u.a.createElement("p",null,"可通过设备ID/物理地址，设备标签，本地导入确定要配置的设备")),u.a.createElement("div",{className:"descs-item"},u.a.createElement("p",null,"提交执行远程配置任务，设备更新结果实时可见"))))),u.a.createElement("section",{className:"remote-config-manage-wrapper section-bg"},u.a.createElement("h3",null,"远程配置任务",K.length?u.a.createElement(l.a,{style:{float:"right"},type:"primary",onClick:function(){return Ee()}},u.a.createElement(d.a,null),"创建任务"):u.a.createElement(r.a,{title:"无配置协议时不支持创建"},u.a.createElement(l.a,{style:{float:"right"},type:"primary",disabled:!0},u.a.createElement(d.a,null),"创建任务"))),u.a.createElement("div",{className:"table-wrapper"},u.a.createElement(n.a,{columns:ge,className:"ant-table-fixed",dataSource:N,pagination:{total:ce,current:oe,defaultCurrent:1,defaultPageSize:10,onChange:function(e){return function(e){he(e)}(e)},showQuickJumper:!0,hideOnSinglePage:!0,showTotal:function(e){return u.a.createElement("span",null,"共 ",u.a.createElement("a",null,e)," 条")}}})),I&&u.a.createElement(M,{visible:I,productId:t,protocolFormat:Y,onCancel:function(){O(!1),te(null)},editData:ee,configProtoclList:K,getRemoteList:he,isDeviceRomote:ve,_deviceList:[{deviceId:h,deviceUniqueId:E,macAddress:k}]}),pe&&u.a.createElement(A,{visible:pe,record:fe,statusText:be,isDeviceRomote:ve,searchDeviceResult:function(e){Oe(e).then((function(e){var t=e.data,a=t.list,n=t.pager;x({detailVisible:pe,selectRecord:U(U({},fe),{},{list:a,pager:n})})}))},onCancel:function(){return x({detailVisible:!1,selectRecord:{}})}})),ue&&u.a.createElement(_.a,{visible:ue,modalOKHandle:function(){var e=de.taskId;B(U(U({},F),{},{deleteLoading:!0})),Object(m.c)(m.a.deleteRomoteConfig,{taskId:e}).then((function(e){he(se>1?oe:oe-1>0?oe-1:1)})).finally((function(){B({deletevisible:!1,deleteItem:null,deleteLoading:!1})}))},modalCancelHandle:function(){return B({deletevisible:!1,deleteItem:null,deleteLoading:!1})},targetName:de.taskId,confirmLoading:me,title:"删除任务",needWarnIcon:!0,descText:"即将删除的任务",tipText:"任务的所有信息将完全被删除，无法找回，请谨慎操作"}),le&&u.a.createElement(V,{visible:le,onCancel:function(){return re({errorLogVisible:!1,errorLogRecord:{}})},record:ie}))}}}]);