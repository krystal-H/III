(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"0eIn":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAOCAYAAAAmL5yKAAACB0lEQVQ4T32ST2sTQRjGn9nZTTEKBeOtbv1T7zUHi8vmZMCw/QCBYsGT+DH88wEUeoseVTx4USyJFWpVYldaEJQEFROxCVqbi1Q0oWZnXpmZ3XRz0IXd2d2Z9/c+7/s+7HmzFzBChUi4RACZBwgYX6X6p/bQJViXS2fcmjrCXjS+d6QkdywoDdBAA44BitwtzZ2Y1oC1d9uUZDVJyagAYDGrcC4/9Up/AHi6ueVLIepqNzh7kmnAs7ffVISWTFI/RxDObb+Yn1pPA4QCEGHem0kAXzskyTWZk7pjFUlP0srUIYbuvHfKlLD6ZjsgiAqRdEe1GpIGDiWwvjOJ97uHMIhsHJ6IkJsYLu9QtvygzAZaxr8u7wYdsA5i1bbgZSzAYYATrxmOcJhB8b+Awm26agNXksCFWeBRA9Awc19jK5tfAoBVSKoS4mbGXrj1aRq/hw4cbrI/vAhcuLuvwrHQZisbWx1Vf9pAyfvSxxlwMCzmgYXT+4U+bgC1plbyhz15/Vm3jBMvnPeOjWZeDVv+nZZb74uMzq5k31sELt03CjKqHxxtVg3b2jWcc780d3w08+rLD/7Gj1y9uXtk1LzyLLDcMOUooK16UAvb2srGpuPzjyTDWu8ofkbZ8QmY4HBPoMiqYSsgQRWpfBAbJu0HQQytXzn09iYhyEaWiz5jfKkfWddvltngL3uXRG6qfr/OAAAAAElFTkSuQmCC"},"5CxI":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return D}));n("ef1R"),n("Ra8s"),n("sfoS"),n("HsXu"),n("bs69"),n("Lm8M"),n("ryEf"),n("qgAm"),n("9b3Y"),n("Ck9u"),n("IHDg"),n("P37N"),n("vV4J"),n("av3G"),n("RfWx"),n("QcZr");var a=n("b+L2"),r=(n("MNU5"),n("YeX6")),c=(n("UdMA"),n("ViyK")),l=(n("6IzV"),n("QFmM")),o=(n("2ek4"),n("oWtQ")),i=(n("xzjF"),n("PeP6")),u=(n("hEGT"),n("V9IP"),n("62KB"),n("T9Mk")),s=n.n(u),d=n("MeRu"),m=n("0eIn"),p=n.n(m),f=n("NsHq"),b=n("Nlzp"),y=n("mU7p"),g=n("DgvE"),v=n("P2RN"),E=(n("Q5Nt"),n("UTJx"),n("dVdO")),O=n("rVDo"),A=n("rwTb");function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(c.push(a.value),!t||c.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function h(e){var t=e.isModalVisible,n=e.colseMoadl,a=e.cancelModel,r=e.optionArr,c=w(l.a.useForm(),1)[0],o=Object(u.useRef)(null),d=w(Object(u.useState)(""),2),m=d[0],p=d[1],f=Object(u.useMemo)((function(){if(m){var e=0;return r.forEach((function(t){t.productId===m&&(e=t.authorityType)})),0===e?s.a.createElement("span",null,"一型一密",s.a.createElement(A.a,{tip:"设备通信时，仅校验烧录的产品密钥，设备安全性较低。"})):1===e?s.a.createElement("span",null,"一型一密plus",s.a.createElement(A.a,{tip:"设备通信时，需校验烧录的产品密钥以及Clife平台设备注册的设备ID，较为安全。"})):2===e?s.a.createElement("span",null,"一机一密",s.a.createElement(A.a,{tip:"设备通信时，需校验烧录的设备密钥和设备ID，安全性最高。"})):void 0}}),[m]);return s.a.createElement(E.a,{title:"注册设备",visible:t,onOk:function(){c.validateFields().then((function(e){var t={productId:e.productId,data:e.upload[0].url};Object(b.c)(b.a.proReledExport,t).then((function(e){n()}))})).catch((function(e){}))},onCancel:a,width:"555px",wrapClassName:"add-protocols-wrap"},s.a.createElement("div",{className:"device-regist"},s.a.createElement(l.a,{form:c,labelAlign:"right"},s.a.createElement(l.a.Item,{name:"productId",label:"产品名称",rules:[{required:!0}]},s.a.createElement(i.a,{onChange:function(e){p(e)}},r.map((function(e){return s.a.createElement(i.a.Option,{value:e.productId,key:e.productId},e.productName)})))),s.a.createElement(l.a.Item,{label:"验证方式："},s.a.createElement("span",null,f)),s.a.createElement(l.a.Item,{label:"导入设备物理地址"},s.a.createElement(l.a.Item,{name:"upload",noStyle:!0,rules:[{required:!0,message:"请上传文件"}]},s.a.createElement(O.b,{ref:o,maxCount:1,format:".xls,.xlsx",isNotImg:!0,maxSize:10})),s.a.createElement("a",{className:"down-model",onClick:function(){window.open("http://skintest.hetyj.com/31438/6b0b20891e06ac31d0eed37a5083cca9.xlsx")}},"下载模板")))))}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(c.push(a.value),!t||c.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var N=i.a.Option,R=o.a.Step;function D(){var e=k(l.a.useForm(),1)[0],t=k(Object(u.useState)([]),2),n=(t[0],t[1],k(Object(u.useState)({}),2)),m=(n[0],n[1],k(Object(u.useState)([]),2)),E=m[0],O=m[1],A=k(Object(u.useState)([]),2),w=A[0],I=A[1],j=k(Object(u.useState)(""),2),x=j[0],C=j[1],D=k(Object(u.useState)([{label:"设备总数量",count:0},{label:"已入网设备",count:0},{label:"未入网设备",count:0}]),2),T=D[0],J=D[1];Object(u.useEffect)((function(){z(),V()}),[]);var V=function(e){var t={};e&&(t.productId=e),Object(b.c)(b.a.proReledCount,t).then((function(e){J([{label:"设备总数量",count:e.data.total},{label:"已入网设备",count:e.data.activate},{label:"未入网设备",count:e.data.unactivate}])}))},z=function(){Object(b.c)(b.a.getProductPlus,{}).then((function(e){I(e.data)}))},M=k(Object(u.useState)({pageIndex:1,totalRows:0,pageRows:10}),2),Q=M[0],P=M[1];Object(u.useEffect)((function(){U()}),[Q.pageIndex,Q.pageRows,x]);var U=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=S(S({},e.getFieldsValue()),Q);x&&(n.productId=x),n.id&&n.id.trim()||delete n.id,Object(b.c)(b.a.proReledRegist,n,{loading:t}).then((function(e){O(e.data.list),P((function(t){var n=JSON.parse(JSON.stringify(t));return Object.assign(n,{totalRows:e.data.pager.totalRows})}))}))},Y=k(Object(u.useState)(!1),2),Z=Y[0],B=Y[1],X=[{title:"设备ID",dataIndex:"did",key:"did"},{title:"物理地址",dataIndex:"physicalAddr",key:"physicalAddr"},{title:"通信验证方式",dataIndex:"authorityType",key:"authorityType",render:function(e){return 0===(t=e)?"一型一密":1===t?"一型一密plus":2===t?"一机一密":void 0;var t}},{title:"设备秘钥",dataIndex:"deviceSecret",key:"deviceSecret"},{title:"入网状态",dataIndex:"status",key:"status",render:function(e){return s.a.createElement("span",null,e?"已入网":"未入网")}},{title:"入网时间",dataIndex:"activeTime",key:"activeTime",render:function(e){return g.a.utcToDev(e)}}];return s.a.createElement("div",{id:"device-regist"},s.a.createElement(d.a,{title:"设备注册"},s.a.createElement("div",{className:"top-select"},s.a.createElement(i.a,{style:{width:200},allowClear:!0,onChange:function(e){P((function(e){var t=JSON.parse(JSON.stringify(e));return Object.assign(t,{pageIndex:1})})),V(e),C(e)}},w.map((function(e){return s.a.createElement(N,{value:e.productId,key:e.productId},e.productName)}))))),s.a.createElement("div",{className:"comm-shadowbox comm-setp-ttip"},s.a.createElement("div",{className:"step-title"},s.a.createElement("img",{src:p.a,alt:""}),s.a.createElement("span",null,"注册设备步骤")),s.a.createElement(o.a,{current:-1,initial:0},s.a.createElement(R,{title:"选择不同校验机制",description:"注册设备，产品发布前，需在配置服务步骤，确定安全通信安全机制。"}),s.a.createElement(R,{title:"注册设备物理地址",description:"Clife平台提供产品密钥验证、产品密钥&设备ID验证、设备ID&设备密钥验证多种安全通信机制。"}),s.a.createElement(R,{title:"查看入网设备",description:s.a.createElement(s.a.Fragment,null,s.a.createElement("span",null,"Clife平台提供产品密钥验证、产品密钥&设备ID验证、设备ID&设备密钥验证多种安全通信机制。"),s.a.createElement("a",{onClick:function(){alert(10)}},"下载密钥烧录工具"))}))),s.a.createElement(f.a,{data:T}),s.a.createElement("div",{className:"comm-shadowbox device-content"},s.a.createElement("div",{className:"content-top"},s.a.createElement("div",{className:"content-top-left"},s.a.createElement(l.a,{className:"device-filter-form",form:e,layout:"inline"},s.a.createElement(l.a.Item,{name:"status",label:"入网状态"},s.a.createElement(i.a,{allowClear:!0,style:{width:"200px"}},y.c.map((function(e){return s.a.createElement(N,{value:e.key,key:e.key},e.value)})))),s.a.createElement(l.a.Item,{label:"请输入设备ID"},s.a.createElement(l.a.Item,{name:"id",noStyle:!0},s.a.createElement(c.a,{style:{width:"465px"},placeholder:"请输入设备ID"})),s.a.createElement(r.a,{type:"primary",onClick:function(){1===Q.pageIndex?U():P((function(e){var t=JSON.parse(JSON.stringify(e));return Object.assign(t,{pageIndex:1})}))}},"查询")))),s.a.createElement(r.a,{type:"primary",onClick:function(){B(!0)}},"注册设备")),s.a.createElement(a.a,{rowKey:"did",dataSource:E,columns:X,pagination:{defaultCurrent:1,current:Q.pageIndex,onChange:function(e,t){t==Q.pageRows?P((function(n){var a=JSON.parse(JSON.stringify(n));return Object.assign(a,{pageIndex:e,pageRows:t})})):P((function(e){var n=JSON.parse(JSON.stringify(e));return Object.assign(n,{pageIndex:1,pageRows:t})}))},pageSize:Q.pageRows,total:Q.totalRows,showQuickJumper:!0,pageSizeOptions:[10],showTotal:function(){return s.a.createElement("span",null,"共 ",s.a.createElement("a",null,Q.totalRows)," 条")}}})),Z&&s.a.createElement(h,{isModalVisible:Z,cancelModel:function(){B(!1)},colseMoadl:function(){Object(v.a)({type:"success",description:"注册成功！"}),B(!1)},optionArr:w}))}},Q5Nt:function(e,t,n){},mU7p:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return o}));var a={0:"开发中",1:"已发布",2:"审核中"},r={1:"草稿",2:"审核中",3:"灰度版本",4:"正式版本"},c={1:"SDK开发",2:"在线拖拽"},l={0:"草稿",1:"已发布",2:"删除"},o=[{value:"已入网 ",key:"1 "},{key:"0 ",value:"未入网 "}]}}]);