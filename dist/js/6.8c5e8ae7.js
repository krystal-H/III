(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"0Zna":function(e,t,n){},"7TnZ":function(e,t,n){},A5vn:function(e,t,n){},IygI:function(e,t,n){},J2fM:function(e,t,n){},bc1A:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Or}));n("NBAS"),n("SuFq"),n("tkto"),n("pNMO"),n("zKZe"),n("4Brf"),n("07d7"),n("0oug"),n("4mDm"),n("PKPk"),n("3bBZ");var r=n("E+oP"),a=n.n(r),o=(n("+2oP"),n("2B1R"),n("q1tI")),i=n.n(o),c=n("55Ip"),s=n("/MKj"),l=(n("rB9j"),n("Rm1S"),n("Nlzp")),u=n("vS40"),f=n("MeRu"),p=n("cu44"),d=(n("TeQF"),n("5DmW"),n("FZtP"),n("27RR"),n("L/Qf"),n("2/Rp")),m=(n("1vPl"),n("5rEg")),h=(n("O+I2"),n("TeRw")),y=(n("8QGh"),n("2fM7")),b=n("WsrF");n("XlDN");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var a=j(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L,x=y.a.Option,I={labelCol:{span:4},wrapperCol:{span:20}},N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,e);var t,n,r,a=w(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getCityList=function(e){Object(l.b)(l.a.getCityByProvinceId,{provinceId:e}).then((function(n){t.setState((function(t){return{cityListObj:Object.assign({},t.cityListObj,k({},e,n.data))}}))}))},t.handleSubmit=function(e){e.preventDefault();var n=t.state,r=n.province,a=n.city;t.props.form.validateFields((function(e,n){if(!e){var o=O(O({},n),{},{province:r,city:a,countryId:0});Object(l.c)(l.a.upDeveloperInfo,O({},o),{loading:!0}).then((function(e){h.a.success({message:"更新成功",description:"用户信息更新成功！"}),t.props.getDeveloperInfo()}))}}))},t.getOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"province",n=t.state,r=n.provinceList,a=n.province,o=n.cityListObj,c=i.a.createElement(x,{key:-999,value:""},"请选择"),s=[],l=o[a]||[];return(s="province"===e?r.map((function(e){var t=e.provinceId,n=e.provinceName;return-1===t?null:i.a.createElement(x,{key:t,value:t},n)})):l.map((function(e){var t=e.cityId,n=e.cityName;return i.a.createElement(x,{key:t,value:""+t},n)}))).unshift(c),s},t.changeHandle=function(e,n){if("province"===e){var r=n;r&&t.getCityList(r),t.setState({city:""})}t.setState(k({},e,n))};var n=t.props.developerInfo,r=void 0===n?{}:n,c=r.province,s=r.city;return t.state={provinceList:[],cityListObj:{},province:c||"",city:s||""},t}return t=o,(n=[{key:"componentDidMount",value:function(){this.getProvinceList()}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=JSON.stringify(e.developerInfo),a=JSON.stringify(this.props.developerInfo);if("{}"===r&&r!==a){var o=this.props.developerInfo,i=o.province,c=o.city;this.setState({province:i||"",city:c||""},(function(){n.getProvinceList()}))}}},{key:"getProvinceList",value:function(){var e=this,t=this.state,n=t.province;0===t.provinceList.length&&Object(l.b)(l.a.getProvince).then((function(t){e.setState({provinceList:t.data})})),n&&this.getCityList(n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.form,r=t.loading,a=t.developerInfo,o=this.state,c=o.province,s=o.city,l=a.mobilePhone,u=a.contactPerson,f=a.contactAddr,p=n.getFieldDecorator;return-1==+c&&(c=""),i.a.createElement(b.a,v({},I,{onSubmit:this.handleSubmit}),i.a.createElement(b.a.Item,{label:"国家"},i.a.createElement(m.a,{value:"中国",disabled:!0,placeholder:"请选择国家"})),i.a.createElement(b.a.Item,{label:"所在地区",style:{marginBottom:0}},i.a.createElement(b.a.Item,{style:{display:"inline-block",width:"30%"}},i.a.createElement(y.a,{style:{width:"90%"},value:c,onChange:function(t){return e.changeHandle("province",t)}},this.getOptions("province"))),i.a.createElement(b.a.Item,{style:{display:"inline-block",width:"30%"}},i.a.createElement(y.a,{style:{width:"90%"},value:s,onChange:function(t){return e.changeHandle("city",t)}},this.getOptions("city",s)))),i.a.createElement(b.a.Item,{label:"联系地址"},p("contactAddr",{rules:[{max:100,message:"最大输入长度为100"}],initialValue:f})(i.a.createElement(m.a,{placeholder:"请输入联系地址"}))),i.a.createElement(b.a.Item,{label:"联系人"},p("contactPerson",{rules:[{pattern:/^[a-zA-Z0-9\u4e00-\u9fa5]{2,20}$/,message:"请输入2到20长度的汉字、字母和数字"}],initialValue:u})(i.a.createElement(m.a,{placeholder:"请输入联系人"}))),i.a.createElement(b.a.Item,{label:"联系电话"},p("mobilePhone",{rules:[{pattern:/^(((\d{3,4}-)?\d{7,8})|(1\d{10}))$/,message:"请输入固话号码或者手机号码"}],initialValue:l})(i.a.createElement(m.a,{placeholder:"请输入联系电话"}))),i.a.createElement(b.a.Item,{wrapperCol:{span:24}},i.a.createElement("div",{className:"ant-col ant-col-4 ant-form-item-label"}),i.a.createElement("div",null,i.a.createElement(d.a,{type:"primary",htmlType:"submit",loading:r},"保存"))))}}])&&_(t.prototype,n),r&&_(t,r),o}(o.Component),C=b.a.create({name:"contact-information"})(N),P=n("NJiU"),D=(n("IygI"),n("DgvE"));function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){return t&&M(e.prototype,t),n&&M(e,n),e}function V(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var a=J(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return W(this,n)}}function W(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H,Z=Object(s.connect)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS()}}),(function(e){return{getDeveloperInfo:function(){return e(Object(u.c)())}}}))(L=function(e){V(n,e);var t=U(n);function n(){return A(this,n),t.apply(this,arguments)}return F(n,[{key:"render",value:function(){var e=this.props,t=e.developerInfo,n=e.match,r=e.getDeveloperInfo,a=n.path;return i.a.createElement(c.Switch,null,i.a.createElement(c.Route,{path:"".concat(a,"/base"),render:function(e){return i.a.createElement(G,B({},e,{developerInfo:t,getDeveloperInfo:r}))}}),i.a.createElement(c.Redirect,{to:"".concat(a,"/base")}))}}]),n}(o.Component))||L,G=function(e){V(n,e);var t=U(n);function n(e){var r;A(this,n),(r=t.call(this,e)).getSubRights=function(){var e=r.props.developerInfo;(void 0===e?{}:e).isSubUser&&Object(l.b)(l.a.getRightsOneself,{},{loading:!0}).then((function(e){for(var t=[],n=[],a=[],o=e.data,i=0;i<o.length;i++){var c=o[i];"productService"==c.menuCode&&(t=c.checkBoxGroupList),"dataObject"==c.menuCode&&(n=c.checkBoxGroupList),"dataDimension"==c.menuCode&&(a=c.checkBoxGroupList)}r.setState({productResource:t,dataObjRightsList:n,dataDimensionRightsList:a})}))};var a=r.props.developerInfo.isSubUser;return r.state={isSubUser:!!a,productResource:[],dataObjRightsList:[],dataDimensionRightsList:[]},r}return F(n,[{key:"componentDidMount",value:function(){this.getSubRights()}},{key:"componentDidUpdate",value:function(e){var t=this.props.developerInfo.isSubUser;e.developerInfo.isSubUser!==t&&(this.getSubRights(),this.setState({isSubUser:!!t}))}},{key:"render",value:function(){var e=this.state,t=e.isSubUser,n=e.productResource,r=e.dataObjRightsList,a=e.dataDimensionRightsList,o=this.props,c=o.developerInfo,s=o.getDeveloperInfo,l=c.userId,u=c.email,d=c.createTime,m=c.userRole,h=c.parentAccount,y=c.account;return i.a.createElement("div",{className:"page-userbaseinfo"},i.a.createElement(f.a,{title:"基本资料"}),t?i.a.createElement("div",null,i.a.createElement(p.a,{title:"基本信息",className:"comm-shadowbox"},i.a.createElement("div",{className:"alone-section-content-default base-info"},i.a.createElement("div",{className:"p-flex"},i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"登录账号："),y),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"所属主帐号："),h),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"账户角色："),m),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"创建时间："),d?D.a.utcToDev(d):"")))),i.a.createElement(P.a,{userCategory:"1",productResource:n,dataObjRightsList:r,dataDimensionRightsList:a})):i.a.createElement("div",null,i.a.createElement(p.a,{title:"基本信息",className:"comm-shadowbox"},i.a.createElement("div",{className:"alone-section-content-default base-info"},i.a.createElement("div",{className:"p-flex"},i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"开发者ID："),l),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"电子邮箱："),u),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"title"},"注册时间："),d?D.a.utcToDev(d):"")))),i.a.createElement(p.a,{title:"联系信息",className:"comm-shadowbox"},i.a.createElement("div",{className:"alone-section-content-default form-wrapper"},i.a.createElement(C,{getDeveloperInfo:s,developerInfo:c})))))}}]),n}(o.Component),q=(n("EpIQ"),n("bx4M")),z=(n("mbEz"),n("wCAj")),Y=(n("k994"),n("NJEC")),$=(n("qNb/"),n("PArb")),Q=(n("0lcf"),n("mr32")),X=(n("SYor"),n("ma9I"),n("sCcn"),n("P2RN"));function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ie(e);if(t){var a=ie(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ae(this,n)}}function ae(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?oe(e):t}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ce=Object(s.connect)((function(e){return{}}),(function(e){return{deleteRole:function(t){return e(Object(u.b)(t))}}}))(H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(o,e);var t,n,r,a=re(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.b)(l.a.getRolePage,e).then((function(e){t.setState({roleList:e.data.list,pager:e.data.pager,loading:!1})}))},t.deleteRole=function(e){var n=t.state.pager,r=n.totalRows,a=n.pageIndex;a=r%(10*(a-1))>1?a:a-1,t.props.deleteRole(e).then((function(e){e&&(Object(X.a)({type:"success",description:"删除用户角色成功！"}),t.setState({loading:!0}),t.getList({pageIndex:a,pageRows:10}))}))},t.searchProduct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e.trim(),t.setState({loading:!0},(function(){t.getList({pageIndex:1,pageRows:10,roleName:e})}))},t.state={versionList:[],loading:!0,roleList:[],pager:{}},t.columns=[{title:"角色名",dataIndex:"roleName",key:"roleName"},{title:"备注",dataIndex:"remark",key:"remark"},{title:"访问方式",key:"userCategory",dataIndex:"userCategory",render:function(e){return i.a.createElement("span",null,i.a.createElement(Q.a,{color:1==e?"blue":"green"},1==e?"控制台访问用户":"接口访问用户"))}},{title:"最新修改时间",dataIndex:"modifyTime",key:"modifyTime",render:function(e){return i.a.createElement("span",null,D.a.utcToDev(e))}},{title:"操作",key:"tags",dataIndex:"tags",render:function(e,n){var r=n.roleId,a=n.roleName,o=n.remark,s=n.userCategory;return i.a.createElement("span",null,i.a.createElement(c.Link,{to:{pathname:"/userCenter/role/add",search:"?roleId=".concat(r,"&roleName=").concat(encodeURI(a),"&remark=").concat(encodeURI(o),"&userCategory=").concat(s)}},"编辑"),i.a.createElement($.a,{type:"vertical"}),i.a.createElement(Y.a,{title:"你确定要删除该角色吗？",onConfirm:t.deleteRole.bind(oe(t),record.roleId),okText:"是",cancelText:"否",placement:"topRight"},i.a.createElement("a",null,"删除")))}}],t.pagerIndex=t.pagerIndex.bind(oe(t)),t}return t=o,(n=[{key:"componentDidMount",value:function(){this.getList({pageIndex:1,pageRows:10})}},{key:"pagerIndex",value:function(e){var t=this;this.setState({loading:!0},(function(){t.getList({pageIndex:e,pageRows:10})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.roleList,a=t.pager;return i.a.createElement("div",{className:"role-management"},i.a.createElement(f.a,{title:"用户角色"},i.a.createElement("div",{className:"user-page-content-header"},i.a.createElement("div",{className:"searchBox"},i.a.createElement(m.a.Search,{placeholder:"请输入用户角色名查找",maxLength:20,onSearch:function(t){return e.searchProduct(t)},enterButton:!0})),i.a.createElement("div",{className:"butFloatRight"},i.a.createElement(c.Link,{to:{pathname:"/userCenter/role/add"}},i.a.createElement(d.a,{type:"primary"},"创建用户角色"))))),i.a.createElement(q.a,null,i.a.createElement(z.a,{rowKey:"roleId",columns:this.columns,dataSource:r,pagination:{defaultCurrent:a.pageIndex,total:a.totalRows,current:a.pageIndex,hideOnSinglePage:!1,onChange:this.pagerIndex},loading:n})))}}])&&te(t.prototype,n),r&&te(t,r),o}(o.Component))||H,se=(n("sMBO"),n("K4yd"),n("9yH6")),le=(n("dlhN"),n("MJZm")),ue=n("wig9"),fe=n.n(ue),pe=n("BkRI"),de=n.n(pe),me=(n("EnZy"),n("pjDv"),n("YGK4"),n("49+q"),n("AVoK"),n("hcok"),n("dNT4"),n("3uUd"),n("tijO"),n("ZY7T"),n("C1JJ"),n("lmH4"),n("Co1j"),n("5JV0"),n("ctDJ"),n("JwUS"),n("qaHo"),n("Si40"),n("BGb9"),n("pDQq"),n("v7xx")),he=n("8QW8");n("A5vn");function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ge(e){return function(e){if(Array.isArray(e))return ve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ve(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t,n){return t&&Oe(e.prototype,t),n&&Oe(e,n),e}function _e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Le(e);if(t){var a=Le(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Re(this,n)}}function Re(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?je(e):t}function je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xe=y.a.Option,Ie=[{id:"1",text:"产品服务权限"},{id:"2",text:"数据对象权限"},{id:"3",text:"数据维度权限"},{id:"5",text:"项目权限"}],Ne=[{id:"2",text:"数据对象权限"},{id:"3",text:"数据维度权限"},{id:"4",text:"API调用权限"}],Ce=[],Pe=[],De=[],Te=function(e){_e(n,e);var t=we(n);function n(e){var r;return Ee(this,n),(r=t.call(this,e)).onExpand=function(e){1==r.props.terrType?r.props.onExpand(e,!1):r.setState({expandedKey:e})},r.triExpand=function(e){r.setState({expandedKey:ge(e)})},r.onCheck=function(e,t){r.setState({checkedKeys:e},(function(){r.props.shuttle(e,t)}))},r.onSelect=function(e,t){r.setState({selectedKeys:e})},r.checkShow=function(e,t){var n=!1;return e.map((function(e){0===e.indexOf(t)&&(n=!0)})),n},r.selectList=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e.map((function(e,o){return e.tree_show=!!(r.checkShow(t,e.key)||e.title&&e.title.indexOf(n)>-1),a&&e.tree_show&&(a.tree_show=e.tree_show),e.children&&(e.children=r.selectList(e.children,t,n,e)),e}))},r.renderTreeNodes=function(e){var t=r.props,n=t.searchValue,a=(t.expandedKeys,t.seek_tree_show),o=t.expandedKeys_seek,c=t.terrType,s=de()(e);return a&&1===c&&(s=r.selectList(s,o,n)),s.map((function(e,t){if(e){var a=null,o=null,c=null,s=null;return n?(a=e.title.indexOf(n),o=e.title.substr(0,a),c=e.title.substr(a+n.length),s=a>-1?i.a.createElement("span",null,o,i.a.createElement("span",{style:{color:"#f50"}},n),c):e.tree_show?i.a.createElement("span",null,e.title):""):s=e.title,e.children?i.a.createElement(le.a.TreeNode,{style:{display:s?"block":"none"},title:s,key:e.key,dataRef:e},r.renderTreeNodes(e.children,e)):(e.title=s,i.a.createElement(le.a.TreeNode,be({style:{display:s?"block":"none"},key:e.key},e)))}}))},r.state={checkedKeys:[],selectedKeys:[],expandedKey:[]},r}return ke(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,n=t.selectedKeys,r=t.expandedKey,a=this.props,o=a.expandedKeys,c=a.autoExpandParent,s=a.seek_tree_show,l=(a.expandedKeys_seek,a.seek_show_node),u=a.terrType;o=s?de()(l):de()(o);var f=this.props,p=f.checkedKeys;f.type;return i.a.createElement(le.a,{checkable:!0,autoExpandParent:c,onCheck:this.onCheck,onSelect:this.onSelect,onExpand:function(t,n){n.expanded;var r=n.node;return e.onExpand(t,r)},expandedKeys:1==u?o:r,checkedKeys:p,selectedKeys:n},this.renderTreeNodes(de()(this.props.menuList)))}}]),n}(o.Component);function Be(e,t){return e&&e.length?e.map((function(e){return e?{key:t+e.key,title:e.title,children:Be(e.children,t)}:{}})):[]}var Ae,Me=function(e){_e(n,e);var t=we(n);function n(e){var r;Ee(this,n),(r=t.call(this,e)).rightsList=function(e,t){var n=null;return e.map((function(e,a){n=t?t+"-"+a:"0-"+a;var o=e.boxName||e.groupName;return o&&-1!=o.indexOf("#")&&(o=(o=o.split("#"))[0]),e.title=o,e.key=n,e.subBoxs&&(e.children=r.rightsList(e.subBoxs,e.key)),De.push(n),e}))},r.editList=function(e){e.map((function(e,t){return e.checked&&e.subBoxs&&e.subBoxs.length>0?r.editList(e.subBoxs):e.checked&&Pe.push(e.key),!1}))},r.edit=function(e){r.editList(e);var t=de()(Pe);return Pe=[],t},r.getRights=function(){var e=Object(D.h)("roleId"),t={version:1.2,userCategory:r.state.userCategory},n=!1;e&&(t.roleId=e,n=!0),Object(l.b)(l.a.getRights,t,{loading:!0}).then((function(e){if(0==e.code){for(var t=e.data,a=[],o=[],i=[],c=[],s=[],l=[],u=[],f=[],p=[],d=[],m=[],h=0;h<t.length;h++){var y=t[h];if("productService"==y.menuCode)a=de()(r.rightsList(y.checkBoxGroupList)),u=de()(De),De=[];if("apiInvok"==y.menuCode)o=de()(r.rightsList(y.checkBoxGroupList)),f=de()(De),De=[];if("dataObject"==y.menuCode)i=de()(r.rightsList(y.checkBoxGroupList)),p=de()(De),De=[];if("dataDimension"==y.menuCode)c=de()(r.rightsList(y.checkBoxGroupList)),d=de()(De),De=[];if("projectAuth"==y.menuCode)s=de()(r.rightsList(y.checkBoxGroupList)),m=de()(De),De=[];"hideData"==y.menuCode&&(l=y.checkBoxGroupList)}if(n){var b=de()(r.edit(a)),g=de()(r.edit(o)),v=de()(r.edit(i)),E=de()(r.edit(c)),O=de()(r.edit(s));r.setState({productResource:a,apiRightsList:o,dataObjRightsList:i,dataDimensionRightsList:c,projectRightsList:s,hideDataList:l,expandedKeys:[],productResource_key_left:b,right_productResource:fe()(r.processingData_2(r.processingData_1(r.selectList(a,b,!1,!1,!0)))),dataObjRightsList_key_left:v,right_dataObjRightsList:fe()(r.processingData_2(r.processingData_1(r.selectList(i,v,!1,!1,!0)))),dataDimensionRightsList_key_left:E,right_dataDimensionRightsList:fe()(r.processingData_2(r.processingData_1(r.selectList(c,E,!1,!1,!0)))),apiRightsList_key_left:g,right_apiRightsList:fe()(r.processingData_2(r.processingData_1(r.selectList(o,g,!1,!1,!0)))),projectRightsList_key_left:O,right_projectRightsList:fe()(r.processingData_2(r.processingData_1(r.selectList(s,O,!1,!1,!0))))})}else a=r.selectList(a,u),o=r.selectList(o,f),i=r.selectList(i,p),c=r.selectList(c,d),s=r.selectList(s,m),r.setState({productResource:a,productResource_key_left:u,right_productResource:a,apiRightsList:o,apiRightsList_key_left:f,right_apiRightsList:o,dataObjRightsList:i,dataObjRightsList_key_left:p,right_dataObjRightsList:i,dataDimensionRightsList:c,dataDimensionRightsList_key_left:d,right_dataDimensionRightsList:c,projectRightsList:s,projectRightsList_key_left:m,right_projectRightsList:s,hideDataList:l})}}))},r.generateList=function(e){for(var t=0;t<e.length;t++){var n=e[t],a=n.key,o=n.title;Ce.push({key:a,title:o}),n.children&&r.generateList(n.children)}return Ce},r.getParentKey=function(e,t){for(var n,a=0;a<t.length;a++){var o=t[a];o.children&&(o.children.some((function(t){return t.key===e}))?n=o.key:r.getParentKey(e,o.children)&&(n=r.getParentKey(e,o.children)))}return n},r.inputOrSelect=function(e,t){switch(e){case 1:r.setState({roleName:t.target.value});break;case 2:r.setState({remark:t.target.value});break;case 3:Pe=[],r.setState({expandedKeys:[],productResource_key_left:[],right_productResource:[],apiRightsList_key_left:[],right_apiRightsList:[],dataObjRightsList_key_left:[],right_dataObjRightsList:[],dataDimensionRightsList_key_left:[],right_dataDimensionRightsList:[],projectRightsList_key_left:[],right_projectRightsList:[]},(function(){var e=t.target.value;1==e?r.setState({userCategory:e,permissionAssignment:"1"},(function(){r.getRights()})):r.setState({userCategory:e,permissionAssignment:"2"},(function(){r.getRights()}))}));break;case 4:r.setState({expandedKeys_seek:[],seek_show_node:[],seek_tree_show:!1,searchValue:"",expandedKeys:[]},(function(){r.setState({permissionAssignment:t})}));break;case 5:var n=r.state,a=n.permissionAssignment,o=n.productResource,i=n.apiRightsList,c=n.dataObjRightsList,s=n.dataDimensionRightsList,l=n.projectRightsList,u=[];1==a?u=de()(o):2==a?u=de()(c):3==a?u=de()(s):4==a?u=de()(i):5==a&&(u=de()(l));var f=r.generateList(u).map((function(e){return e.title&&e.title.indexOf(t)>-1?r.getParentKey(e.key,u):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t}));var p=[];f.map((function(e){p=p.concat(function(e){for(var t=e.split("-"),n=[],r=t[0],a=1;a<t.length;a++)r+="-"+t[a],n.push(r);return n}(e))})),p=Array.from(new Set(p)),r.setState({expandedKeys_seek:de()(p),searchValue:t,autoExpandParent:!1,seek_tree_show:!0,seek_show_node:de()(p)})}},r.deleteDate=function(e){return e.map((function(e,t){return delete e.children,e.subBoxs&&r.deleteDate(e.subBoxs),e}))},r.onExpand=function(e,t,n){var a=r.state.seek_tree_show;if(1==e)if(a){var o=de()(t);r.setState({seek_show_node:o,autoExpandParent:n})}else r.setState({expandedKeys:t,autoExpandParent:n});else r.setState({autoExpandParent:n})},r.processingData_2=function(e){return e.map((function(e,t){if(e.checkeds){var n={key:e.key,title:e.title};return e.children&&(n.children=r.processingData_2(e.children)),n}}))},r.processingData_1=function(e,t){return e.map((function(e,n){return e.checkeds&&t&&(t.checkeds=!0,t.checked=!0),e.children&&(e.children=r.processingData_1(e.children,e)),e}))},r.checkShow=function(e,t){var n=!1;return e.map((function(e){0===e.indexOf(t)&&(n=!0)})),n},r.selectList=function(e,t,n,a,o){var i=de()(t);return e.map((function(e,t){return o?e.checkeds=e.checked:(e.checkeds=!!r.checkShow(i,e.key),e.checked=!!r.checkShow(i,e.key)),e.checkeds&&a&&(a.checkeds=!0),e.children&&(e.children=r.selectList(e.children,i,e.key,e,o)),e}))},r.leftShuttle=function(e,t,n){var a=n.node.props.eventKey,o=r.state,i=o.productResource,c=o.apiRightsList,s=o.dataObjRightsList,l=o.dataDimensionRightsList,u=o.projectRightsList;if(1==e){var f=fe()(r.processingData_2(r.processingData_1(r.selectList(i,t))));r.setState({productResource_key_left:t,right_productResource:f}),a="productService-"+a}else if(2==e){var p=fe()(r.processingData_2(r.processingData_1(r.selectList(s,t))));r.setState({dataObjRightsList_key_left:t,right_dataObjRightsList:p}),a="dataObject-"+a}else if(3==e){var d=fe()(r.processingData_2(r.processingData_1(r.selectList(l,t))));r.setState({dataDimensionRightsList_key_left:t,right_dataDimensionRightsList:d}),a="dataDimension-"+a}else if(4==e){var m=fe()(r.processingData_2(r.processingData_1(r.selectList(c,t))));r.setState({apiRightsList_key_left:t,right_apiRightsList:m}),a="api-"+a}else if(5==e){var h=fe()(r.processingData_2(r.processingData_1(r.selectList(u,t))));r.setState({projectRightsList_key_left:t,right_projectRightsList:h}),a="projectAuth-"+a}for(var y=a.split("-"),b=y[0],g=[b],v=1;v<y.length-1;v++)b+="-"+y[v],g.push(b);r.refTree.triExpand(g)},r.rightShuttle=function(e,t){},r.removeChecked=function(e){return e.map((function(e,t){return e.checked=!1,e.children&&(e.children=r.removeChecked(e.children)),e}))},r.removeAll=function(e){var t=r.state,n=t.productResource,a=t.dataObjRightsList,o=t.dataDimensionRightsList,i=t.apiRightsList,c=t.projectRightsList;r.setState({productResource:r.removeChecked(n),productResource_key_left:[],right_productResource:[],dataObjRightsList:r.removeChecked(a),dataObjRightsList_key_left:[],right_dataObjRightsList:[],dataDimensionRightsList:r.removeChecked(o),dataDimensionRightsList_key_left:[],right_dataDimensionRightsList:[],apiRightsList:r.removeChecked(i),apiRightsList_key_left:[],right_apiRightsList:[],projectRightsList:r.removeChecked(c),projectRightsList_key_left:[],right_projectRightsList:[]})},r.deleteChooseList=function(e,t,n){for(var r=0;r<n.length;r++){for(var a=n[r],o=!1,i="",c=0;c<e.length;c++){if(e[c].split("-")[0]==a){o=!0,i="";break}i=a}if(!o)for(var s=0;s<t.length;s++)t[s].key===i&&t.splice(s,1)}return t};var a=decodeURI(Object(D.h)("roleName"))&&"null"!=decodeURI(Object(D.h)("roleName"))?decodeURI(Object(D.h)("roleName")):"",o=decodeURI(Object(D.h)("remark"))&&"null"!=decodeURI(Object(D.h)("remark"))?decodeURI(Object(D.h)("remark")):"";return r.state={roleName:a||"",remark:o||"",userCategory:Object(D.h)("userCategory")||"1",hideData:[],expandedKeys:[],expandedKeys_seek:[],seek_show_node:[],seek_tree_show:!1,searchValue:"",autoExpandParent:!1,permissionAssignment:2==Object(D.h)("userCategory")?"2":"1",productResource:[],productResource_key_left:[],right_productResource:[],productResource_key_right:[],apiRightsList:[],apiRightsList_key_left:[],right_apiRightsList:[],dataObjRightsList:[],dataObjRightsList_key_left:[],right_dataObjRightsList:[],dataObjRightsList_key_right:[],dataDimensionRightsList:[],dataDimensionRightsList_key_left:[],right_dataDimensionRightsList:[],projectRightsList:[],projectRightsList_key_left:[],right_projectRightsList:[]},r.click_1=r.click_1.bind(je(r)),r.click_2=r.click_2.bind(je(r)),r}return ke(n,[{key:"componentDidMount",value:function(){this.getRights()}},{key:"click_1",value:function(){this.props.history.push({pathname:"/userCenter/role"})}},{key:"click_2",value:function(){var e=this,t=Object(D.h)("roleId")||"",n=this.state,r=n.roleName,a=n.remark,o=n.userCategory,i=n.productResource,c=n.apiRightsList,s=n.dataObjRightsList,u=n.dataDimensionRightsList,f=n.projectRightsList,p=n.hideDataList,d="";if(""==r?d="请填写角色名":""==a&&(d="请填写备注"),d)Object(X.a)({type:"warn",description:d});else{var m=[],h={roleName:r,userCategory:o,version:1.1};t&&(h.roleId=t),a&&(h.remark=a),m=1==o?[].concat(ge(this.deleteDate(de()(f))),ge(this.deleteDate(de()(i))),ge(this.deleteDate(de()(s))),ge(this.deleteDate(de()(u))),ge(p)):[].concat(ge(this.deleteDate(de()(s))),ge(this.deleteDate(de()(c))),ge(this.deleteDate(de()(u))),ge(p)),h.dataJson=JSON.stringify(m),Object(l.c)(l.a.saveRole,h,{loading:!0}).then((function(t){0==t.code&&(Object(X.a)({type:"success",description:"用户角色保存成功！"}),e.props.history.push({pathname:"/userCenter/role"}))}))}}},{key:"render",value:function(){var e=this,t=this.state,n=t.productResource,r=t.apiRightsList,a=t.dataObjRightsList,o=t.dataDimensionRightsList,c=t.projectRightsList,s=t.expandedKeys,l=t.expandedKeys_seek,u=t.seek_show_node,p=t.seek_tree_show,d=t.searchValue,h=t.autoExpandParent,b=t.productResource_key_left,g=t.dataObjRightsList_key_left,v=t.dataDimensionRightsList_key_left,E=t.apiRightsList_key_left,O=t.projectRightsList_key_left,k=t.right_productResource,_=t.right_dataObjRightsList,S=t.right_dataDimensionRightsList,w=t.right_apiRightsList,R=t.right_projectRightsList,j=t.roleName,L=t.remark,x=t.userCategory,I=t.permissionAssignment,N=[{key:"dataObject",title:"数据对象权限",children:Be(de()(_),"dataObject-")},{key:"dataDimension",title:"数据维度",children:Be(de()(S),"dataDimension-")}],C=[].concat(ge(g.map((function(e){return"dataObject-"+e}))),ge(v.map((function(e){return"dataDimension-"+e}))));1==x?(N.unshift({key:"productService",title:"产品服务权限",children:Be(de()(k),"productService-")}),C=C.concat(b.map((function(e){return"productService-"+e}))),N.push({key:"projectAuth",title:"项目权限",children:Be(de()(R),"projectAuth-")}),C=C.concat(O.map((function(e){return"projectAuth-"+e})))):(N.push({key:"api",title:"API调用权限",children:Be(de()(w),"api-")}),C=C.concat(E.map((function(e){return"api-"+e}))));var P=[],T=[];1==I?(P=de()(n),T=b,de()(k)):2==I?(P=de()(a),T=g,de()(_)):3==I?(P=de()(o),T=v,de()(S)):4==I?(P=de()(r),T=E,de()(w)):5==I&&(P=de()(c),T=O,de()(R));var B=!!Object(D.h)("roleId");return this.deleteChooseList(C,N,["productService","dataObject","dataDimension","api"]),i.a.createElement("div",{className:"role-add"},i.a.createElement(f.a,{backHandle:function(){return e.props.history.goBack()},title:B?"编辑角色":"创建角色"}),i.a.createElement("div",{className:"commonContentBox"},i.a.createElement("div",{className:"title"},"基础信息"),i.a.createElement("div",{className:"centent"},i.a.createElement("div",{className:"common_title_input"},i.a.createElement("span",{className:"common_title mustiinput"},"用户角色名:"),i.a.createElement("div",{className:"common_content"},i.a.createElement(m.a,{className:"input",maxLength:20,value:j,placeholder:"20个字符以内",allowClear:!0,onChange:this.inputOrSelect.bind(this,1)}))),i.a.createElement("div",{className:"common_title_input"},i.a.createElement("span",{className:"common_title mustiinput"},"备注:"),i.a.createElement("div",{className:"common_content"},i.a.createElement(m.a,{className:"input",maxLength:20,value:L,placeholder:"20个字符以内",allowClear:!0,onChange:this.inputOrSelect.bind(this,2)}))),i.a.createElement("div",{className:"common_title_input"},i.a.createElement("span",{className:"common_title"},"访问方式:"),i.a.createElement("div",{className:"common_content"},B?i.a.createElement("span",{style:{lineHeight:"32px"}},1==x?"控制台访问":"接口访问"):i.a.createElement(se.a.Group,{defaultValue:"1",onChange:this.inputOrSelect.bind(this,3)},i.a.createElement(se.a,{value:"1"},"控制台权限"),i.a.createElement(se.a,{value:"2"},"接口访问")))))),i.a.createElement("div",{className:"commonContentBox"},i.a.createElement("div",{className:"title"},"权限配置",B?null:i.a.createElement("span",{className:"postil"},"*注：新建角色进入时，所有权限默认全部选中")),i.a.createElement("div",{className:" jurisdiction-box ratio"},i.a.createElement("div",{className:"common_content"},i.a.createElement(y.a,{value:I,style:{width:150},onChange:this.inputOrSelect.bind(this,4)},1==x?Ie.map((function(e,t){return i.a.createElement(xe,{key:e.id+"consoleList",value:e.id},e.text)})):Ne.map((function(e,t){return i.a.createElement(xe,{key:e.id+"apiList",value:e.id},e.text)}))),"    ",i.a.createElement(m.a.Search,{style:{width:"188px"},placeholder:"请输入关键字查找",maxLength:20,onSearch:this.inputOrSelect.bind(this,5),enterButton:!0}))),i.a.createElement("div",{className:" jurisdiction-box placeholder"}),i.a.createElement("div",{className:"tree-fer"},i.a.createElement("div",{className:"jurisdiction"},P.length>0?i.a.createElement(Te,{shuttle:this.leftShuttle.bind(this,I),menuList:P,expandedKeys:s,seek_tree_show:p,expandedKeys_seek:l,checkedKeys:T,searchValue:d,autoExpandParent:h,onExpand:this.onExpand.bind(this,1),seek_show_node:u,terrType:1,type:"left"}):i.a.createElement(he.a,null)),i.a.createElement("div",{className:"shuttle"}),i.a.createElement("div",{className:"jurisdiction-select-show"},i.a.createElement("span",{className:"common_title"},"已选权限:"),i.a.createElement("div",{className:"select-show-box"},i.a.createElement(Te,{shuttle:this.rightShuttle.bind(this,I),menuList:N,checkedKeys:C,onExpand:this.onExpand.bind(this,2),terrType:2,type:"right",ref:function(t){return e.refTree=t}})),i.a.createElement("div",{className:"empty",onClick:this.removeAll.bind(this,I)},"全部清除")))),i.a.createElement(me.a,{preHandle:this.click_1,preText:"取消",nextHandle:this.click_2,nextText:B?"保存角色":"创建角色"}))}}]),n}(o.Component),Fe=(n("k3Gp"),n("kLXV")),Ve=(n("TfFZ"),n("3S7+")),Ke=n("FC04"),Ue=(n("Jmwx"),n("BMrR")),We=(n("rO+z"),n("kPKH")),Je=n("Zsd2"),He=n.n(Je),Ze=n("2BaD"),Ge=n("rwTb"),qe=n("M7r8");n("ccuU");function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tt(e);if(t){var a=tt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return et(this,n)}}function et(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nt=y.a.Option,rt=[{id:1,text:"自动生成默认密码"},{id:2,text:"手动设置登录密码"}],at=Object(s.connect)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS()}}),null)(Ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(o,e);var t,n,r,a=Xe(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).addUserList=function(){var e=t.state.userNameList;if(e.length>=10)return Object(X.a)({description:"添加用户一次最多添加10个！"}),!1;e.push(""),t.setState({userNameList:e})},t.deleteUserList=function(e){var n=t.state.userNameList;n.splice(e,1),t.setState({userNameList:n})},t.accountSelect=function(e){t.setState({userCategory:e}),t.props.form.resetFields("roleId")},t.roleSelect=function(e){t.setState({roleId:e})},t.resetSelect=function(e){1==e?(t.setState({resetSelectId:e}),setTimeout((function(){t.props.form.setFieldsValue({password:"a123456"})}),100)):(t.setState({resetSelectId:e}),t.props.form.setFieldsValue({password:""}))},t.userName=function(e,n){var r=t.state.userNameList;r[e]=n.target.value,t.setState({userNameList:r})},t.passwordInput=function(e){t.setState({password:e.target.value})},t.ipWhiteSelectFunc=function(e){t.setState({ipWhiteSelect:e})},t.ipWhiteListFunc=function(e){t.setState({ipWhiteList:e.target.value})},t.remark=function(e){t.setState({remark:e.target.value})},t.affirm=function(e){e.preventDefault(),(0,t.props.form.validateFieldsAndScroll)((function(e,n){if(!e){for(var r=t.state,a=r.userNameList,o=r.userCategory,i=r.ipWhiteSelect,c=0;c<a.length;c++){if(a[c]=He()(a[c]),!a[c])return Object(X.a)({description:"请填写用户名称！"}),!1;if(a[c]=a[c].split("@")[0],!Object(D.d)(a[c]))return Object(X.a)({description:"请正确格式的用户名称！大小写字母+数字6~14位"}),!1}for(var s=0;s<a.length;s++)for(var u=a[s],f=s+1;f<a.length;f++){if(u==a[f])return Object(X.a)({description:"第"+(s+1)+"跟第"+(f+1)+"个用户名重复，请重新输入！"}),!1}for(var p=0;p<a.length;p++)a[p]=a[p]+"@"+t.props.developerInfo.id;var d={userNameList:a,roleId:n.roleId,userCategory:n.userCategory};if(1==o&&n.password&&(d.password=Object(D.g)(n.password)),2==o&&i){var m=n.ipWhiteList;if(m){if(m.split(",").length>10)return Object(X.a)({description:"IP白名单最多添加10条！"}),!1;d.ipWhiteList=m}}n.remark&&(d.remark=n.remark),Object(l.c)(l.a.addMultiChild,d,{needJson:!0}).then((function(e){0==e.code&&(Object(X.a)({type:"success",description:"用户创建成功！"}),t.setState({userNameList:[""],userCategory:1,roleId:null,resetSelectId:"",password:"",ipWhiteSelect:!1,ipWhiteList:"",remark:""},(function(){t.props.form.resetFields(),t.props.onAddClose(),t.props.pagerIndex(1)})))}))}}))},t.passwordCheck=function(e,t,n){/^^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$/.test(t)?n():n("密码格式为大小写字母加数字，长度为6-18")},t.state={userNameList:[""],userCategory:1,roleList_1:[],roleList_2:[],roleId:null,resetSelectId:"",password:"",ipWhiteSelect:!1,ipWhiteList:"",remark:""},t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.onRef(this),Object(l.b)(l.a.getRoleList).then((function(t){if(0==t.code){for(var n=[],r=[],a=0;a<t.data.length;a++){var o=t.data[a];1==o.userCategory?n.push(o):r.push(o)}e.setState({roleList_1:n,roleList_2:r})}}))}},{key:"render",value:function(){var e=this,t=this.props.form,n=t.getFieldDecorator,r=t.getFieldValue,a=this.state,o=a.userCategory,c=(a.roleId,a.resetSelectId),s=(a.ipWhiteSelect,a.ipWhiteList,a.password,a.remark),l=a.userNameList,u=a.roleList_1,f=a.roleList_2;o=r("userCategory"),c=r("resetSelectId");var p=1==o?u:f,h=this.props.developerInfo.id;return i.a.createElement(b.a,Ye({},{labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:19},sm:{span:19}}},{onSubmit:this.affirm,className:"add-user-box"}),i.a.createElement("div",{className:"add-user-box"},i.a.createElement("div",{className:"common_title_input"},i.a.createElement(Ue.a,{gutter:8},i.a.createElement(We.a,{span:5,className:"label"},i.a.createElement("span",{className:"form-require on-require"},i.a.createElement(Ge.a,{label:"用户名",tip:"控制台访问时的登录名。"}))),i.a.createElement(We.a,{span:19},l.map((function(t,r){return i.a.createElement("div",{className:"uesrName",key:"productName"+r},i.a.createElement(b.a.Item,{label:"",hasFeedback:!0,colon:!1},n("productName_"+r,{rules:[{required:!0,min:6,max:14,message:"请输入6~14位大小写字母＋数字"}]})(i.a.createElement(m.a,{className:"input",style:{width:"300px"},placeholder:"请输入用户名称",suffix:"@"+h,onChange:e.userName.bind(e,r)}))),r>0?i.a.createElement("span",{className:"delete",onClick:e.deleteUserList.bind(e,r)},i.a.createElement(Ze.a,null)):null)})))),i.a.createElement("span",{className:"addUesr explainLink-N",onClick:this.addUserList},"添加用户")),i.a.createElement("div",{className:"common_title_input"},i.a.createElement(b.a.Item,{label:"账户类型",hasFeedback:!0},n("userCategory",{rules:[{required:!0,message:"请选择账户类型"}],initialValue:1})(i.a.createElement(y.a,{style:{width:"180px"},onChange:this.accountSelect},i.a.createElement(nt,{key:"1账户类型",value:1},"控制台访问用户"),i.a.createElement(nt,{key:"2账户类型",value:2},"接口访问用户"))))),i.a.createElement("div",{className:"common_title_input"},i.a.createElement(b.a.Item,{label:"用户角色",hasFeedback:!0},n("roleId",{rules:[{required:!0,message:"请选择用户角色"}]})(i.a.createElement(y.a,{showSearch:!0,style:{width:"180px"},placeholder:"请选择",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},p.map((function(e,t){return i.a.createElement(nt,{key:t+"用户角色",value:e.roleId},e.roleName)})))))),1==o?i.a.createElement("div",{className:"common_title_input"},i.a.createElement("div",{className:"reset-select"},i.a.createElement(b.a.Item,{label:"登录密码",hasFeedback:!0},n("resetSelectId",{rules:[{required:!0,message:"请选择密码生成方式"}]})(i.a.createElement(y.a,{style:{width:"180px"},placeholder:"请选择",onChange:this.resetSelect},rt.map((function(e,t){return i.a.createElement(nt,{key:t+"登录密码",value:e.id},e.text)}))))),c?i.a.createElement(b.a.Item,{label:" ",colon:!1},n("password",{rules:[{required:!0,validator:this.passwordCheck,message:"密码格式为大小写字母加数字，长度为6-18"}]})(1==c?i.a.createElement(m.a,{style:{width:"240px"},disabled:!0}):i.a.createElement(m.a.Password,{style:{width:"240px"},placeholder:"密码格式为大小写字母加数字，长度为6-18"}))):null)):null,null,i.a.createElement("div",{className:"common_title_input"},i.a.createElement(qe.a,{label:"备注",formId:"remark",astrictNub:"100",rows:"2",placeholder:"请输入备注",getFieldDecorator:n,initialVal:s,width:"300px",getFieldValue:r}))),i.a.createElement("div",{className:"but"},i.a.createElement(d.a,{type:"primary",htmlType:"submit"},"确定"),i.a.createElement(d.a,{className:"cancel",onClick:this.props.onCancel},"取消")))}}])&&$e(t.prototype,n),r&&$e(t,r),o}(o.Component))||Ae,ot=b.a.create({name:"addUserInfo"})(at),it=(n("y1Sk"),n("wd/R")),ct=n.n(it);function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mt(e);if(t){var a=mt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return pt(this,n)}}function pt(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?dt(e):t}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(o,e);var t,n,r,a=ft(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.b)(l.a.getChildlist,e).then((function(e){t.setState({userList:e.data.list,pager:e.data.pager,loading:!1})}))},t.addUser=function(){t.setState({addUserVisible:!0})},t.searchProduct=function(e){t.state.pageIndex;t.setState({loading:!0,userName:e},(function(){t.pagerIndex(1)}))},t.startOrForbidden=function(e,n,r){1==e?t.setState({forbiddenModalVisible:!0,userName:n,userId:r}):0==e&&t.setState({startModalVisible:!0,userName:n,userId:r})},t.startModal=function(e){if(1==e){var n=t.state,r=n.userId,a=n.pageIndex;a=a||1,Object(l.b)(l.a.unfreezeChild,{userId:r}).then((function(e){0==e.code&&t.setState({loading:!0},(function(){t.getList({pageIndex:a,pageRows:10})}))}))}t.setState({startModalVisible:!1})},t.forbiddenModal=function(e){if(1==e){var n=t.state,r=n.userId,a=n.pageIndex;a=a||1,Object(l.b)(l.a.freezeChild,{userId:r}).then((function(e){0==e.code&&t.setState({loading:!0},(function(){t.getList({pageIndex:a,pageRows:10})}))}))}t.setState({forbiddenModalVisible:!1})},t.delete=function(e){t.setState({deleteModalVisible:!0,userId:e})},t.inputOnChangeHandle=function(e){t.setState({deleteInputValue:e.target.value})},t.deleteModal=function(e){if(1==e){if("delete"!=t.state.deleteInputValue)return Object(X.a)({type:"info",description:"请输入delete确认删除！"}),!1;var n=t.state,r=n.userId,a=n.pageIndex,o=n.pager;a=a||1,Object(l.b)(l.a.deleteChild,{userId:r}).then((function(e){0==e.code&&t.setState({loading:!0,deleteInputValue:""},(function(){a=o.totalRows%(10*(a-1))>1?a:a-1,t.getList({pageIndex:a,pageRows:10})}))}))}t.setState({deleteModalVisible:!1})},t.addUserModal=function(e){1==e?t.addUserRefs.affirm():(t.setState({addUserVisible:!1}),t.addUserRefs.setState({userNameList:[""],userCategory:1,roleId:null,resetSelectId:"",password:"",ipWhiteSelect:!1,ipWhiteList:"",remark:""}),t.addUserRefs.props.form.resetFields())},t.closeAdd=function(){t.setState({addUserVisible:!1})},t.pagerIndex=function(e){t.setState({pageIndex:e,loading:!0},(function(){t.getList({pageIndex:e,pageRows:10,userName:t.state.userName||void 0})}))},t.state={loading:!0,userList:[],pager:{},addUserVisible:!1,userName:"",userId:"",startModalVisible:!1,forbiddenModalVisible:!1,deleteModalVisible:!1,deleteInputValue:"",deleteId:"",pageIndex:""},t.columns=[{title:"用户名",dataIndex:"userName",key:"userName",render:function(e){return i.a.createElement(Ve.a,{placement:"topLeft",title:e},i.a.createElement("a",null,e))}},{title:"用户角色",dataIndex:"roleName",key:"roleName",render:function(e){return i.a.createElement(Ve.a,{placement:"topLeft",title:e}," ",i.a.createElement("span",null,e)," ")}},{title:"账户类型",dataIndex:"userCategory",key:"userCategory",width:"170px",render:function(e){return i.a.createElement("span",null,i.a.createElement(Q.a,{color:1==e?"blue":"green"},1==e?"控制台访问用户":"接口访问用户"))}},{title:"备注",dataIndex:"remark",key:"remark",render:function(e){return i.a.createElement(Ve.a,{placement:"topLeft",title:e}," ",i.a.createElement("span",null,e)," ")}},{title:"用户状态",dataIndex:"status",key:"status",width:"100px",render:function(e,t){return 1==t.status?i.a.createElement("span",{className:"colordot colordotgreen"},"正常"):i.a.createElement("span",{className:"colordot colordotred"},"停用")}},{title:"创建时间",dataIndex:"regTime",key:"regTime",width:"160px",render:function(e){return i.a.createElement("span",null,ct()(e).add(8,"h").format("YYYY-MM-DD HH:mm:ss"))}},{title:"操作",key:"action",width:"140px",render:function(e,n){var r=n.userId,a=n.userCategory,o=n.status,s=n.userName;return i.a.createElement("span",null,i.a.createElement(c.Link,{to:{pathname:"/userCenter/visitUser/detail",search:"?userId=".concat(r,"&userCategory=").concat(a)}},"查看"),i.a.createElement($.a,{type:"vertical"}),1==o?i.a.createElement("a",{onClick:t.startOrForbidden.bind(dt(t),1,s,r),style:{color:"#FF3100"}},"停用"):i.a.createElement("a",{onClick:t.startOrForbidden.bind(dt(t),0,s,r)},"启用"),i.a.createElement($.a,{type:"vertical"}),i.a.createElement("a",{onClick:t.delete.bind(dt(t),r)},"删除"))}}],t}return t=o,(n=[{key:"componentDidMount",value:function(){this.getList({pageIndex:1,pageRows:10})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.userName,a=t.addUserVisible,o=t.startModalVisible,c=t.forbiddenModalVisible,s=t.deleteModalVisible,l=t.deleteInputValue,u=t.userList,p=t.pager;return i.a.createElement("div",{className:"user-visit-box"},i.a.createElement(f.a,{title:"访问用户"},i.a.createElement("div",{className:"user-page-content-header"},i.a.createElement("div",{className:"searchBox"},i.a.createElement(m.a.Search,{placeholder:"请输入用户名查找",enterButton:!0,maxLength:20,onSearch:function(t){return e.searchProduct(t)}})),i.a.createElement("div",{className:"butFloatRight"},i.a.createElement(d.a,{className:"but-add",type:"primary",onClick:this.addUser},"创建用户")))),i.a.createElement("div",{className:"comm-shadowbox"},i.a.createElement(z.a,{rowKey:"userId",columns:this.columns,dataSource:u,pagination:{defaultCurrent:p.pageIndex,total:p.totalRows,hideOnSinglePage:!1,onChange:this.pagerIndex,current:p.pageIndex},loading:n})),i.a.createElement(Fe.a,{title:"创建用户",visible:a,onOk:this.addUserModal.bind(this,1),onCancel:this.addUserModal.bind(this,2),maskClosable:!1,className:"self-modal",footer:null},i.a.createElement(ot,{onAddClose:this.closeAdd,onCancel:this.addUserModal.bind(this,2),pagerIndex:this.pagerIndex,onRef:function(t){return e.addUserRefs=t}})),i.a.createElement(Ke.a,{visible:o,modalOKHandle:this.startModal.bind(this,1),modalCancelHandle:this.startModal.bind(this,2),title:"启用用户",tipText:"启用用户后，该用户将恢复访问。",descText:"即将启用用户",targetName:r}),i.a.createElement(Ke.a,{visible:c,modalOKHandle:this.forbiddenModal.bind(this,1),modalCancelHandle:this.forbiddenModal.bind(this,2),title:"停用用户",tipText:"停用用户后，该用户将暂时无法访问，您可以重新启用账户。",descText:"即将停用用户",needWarnIcon:!0,targetName:r}),i.a.createElement(Ke.a,{visible:s,modalOKHandle:this.deleteModal.bind(this,1),modalCancelHandle:this.deleteModal.bind(this,2),title:"删除用户",tipText:"删除用户将同步删除UUID和用户SecretKey，无法找回，请谨慎操作。",descText:"即将删除用户",needWarnIcon:!0,targetName:r},i.a.createElement(m.a,{className:"modal-content-input",onChange:this.inputOnChangeHandle,placeholder:"请输入“delete”确认删除该用户",maxLength:20,value:l})))}}])&&lt(t.prototype,n),r&&lt(t,r),o}(o.Component),yt=n("S18n");function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kt(e);if(t){var a=kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ot(this,n)}}function Ot(e,t){return!t||"object"!==bt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _t,St=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(o,e);var t,n,r,a=Et(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={},t}return t=o,(n=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.userInfo,n=e.secretKey,r=e.secretId,a=function(e){var t=e.title,n=e.label,r=e.type;return i.a.createElement("p",{className:"list-item"},i.a.createElement("span",{className:"title"},t,"："),"visible"===r?i.a.createElement(yt.a,{label:n||"",tip:"点击复制",copy:!0}):i.a.createElement("span",null,n))};return i.a.createElement("div",{className:"basic-information-box"},i.a.createElement(d.a,{className:"but-edit basic-information-edit",type:"primary",onClick:this.props.editUserInfo},"编辑"),i.a.createElement(p.a,{title:"基础信息"},i.a.createElement("div",{className:"device-info"},i.a.createElement(a,{title:"用户名",label:t.userName||"--"}),i.a.createElement(a,{title:"用户ID",label:t.userId||"--"}),i.a.createElement(a,{title:"账户类型",label:1==t.userCategory?"控制台访问用户":2==t.userCategory?"接口访问用户":"--"}),i.a.createElement(a,{title:"用户角色",label:t.roleName||"--"}),2==t.userCategory&&i.a.createElement(a,{title:"用户secretId",label:r,type:"visible"}),2==t.userCategory&&i.a.createElement(a,{title:"用户SecretKey",label:n,type:"visible"}),i.a.createElement(a,{title:"创建时间",label:D.a.utcToDev(t.regTime)}),i.a.createElement(a,{title:"最新修改时间",label:D.a.utcToDev(t.modifyTime)})),i.a.createElement("p",{className:"userlook-mark"},i.a.createElement("span",null,"备注："),t.remark)))}}])&&gt(t.prototype,n),r&&gt(t,r),o}(o.Component),wt=(n("+vQn"),n("Sdc0"));n("7TnZ");function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(){return(jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function It(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ct(e);if(t){var a=Ct(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Nt(this,n)}}function Nt(e,t){return!t||"object"!==Rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pt=y.a.Option,Dt=[{id:1,text:"自动生成默认密码"},{id:2,text:"手动设置登录密码"}],Tt=Object(s.connect)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS()}}),null)(_t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}(o,e);var t,n,r,a=It(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).backfill=function(e){t.setState({userName:e.userName||null,remark:e.remark||"",roleId:e.roleId||null,ipWhiteSelect:!!e.ipWhiteList,ipWhiteList:e.ipWhiteList,resetChecked:!1})},t.roleSelect=function(e){t.setState({roleId:e})},t.reset=function(e){t.setState({resetChecked:e})},t.resetSelect=function(e){1==e?(t.setState({resetSelectId:e}),setTimeout((function(){t.props.form.setFieldsValue({password:"a123456"})}),100)):(t.setState({resetSelectId:e}),t.props.form.setFieldsValue({password:""}))},t.passwordInput=function(e){t.setState({password:e.target.value})},t.ipWhiteSelectFunc=function(e){t.setState({ipWhiteSelect:e})},t.ipWhiteListFunc=function(e){t.setState({ipWhiteList:e.target.value})},t.userName=function(e){t.setState({userName:e.target.value})},t.remark=function(e){t.setState({remark:e.target.value})},t.affirm=function(e){e.preventDefault(),(0,t.props.form.validateFieldsAndScroll)((function(e,n){if(!e){var r=t.state,a=r.resetChecked,o=r.ipWhiteSelect,i=t.props.userData,c=i.userId,s=i.userCategory,u=n.roleId,f=(n.userName,n.password),p=n.ipWhiteList,d=n.remark,m={userId:c,roleIds:u};if(1==s&&a&&(m.password=Object(D.g)(f)),2==s&&o){if(p){if(p.split(",").length>10)return Object(X.a)({description:"IP白名单最多添加10条！"}),!1;m.ipWhiteList=p}}else 2!=s||o||(m.ipWhiteList="");d&&(m.remark=d),Object(l.c)(l.a.updateChild,m,{needFormData:!0,loading:!0}).then((function(e){0==e.code&&t.props.handleClose()}))}}))},t.passwordCheck=function(e,t,n){/^^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$/.test(t)?n():n("密码格式为大小写字母加数字，长度为6-18")},t.state={resetChecked:!1,resetSelectId:null,password:null,userName:t.props.userData.userName||null,remark:t.props.userData.remark||"",roleId:t.props.userData.roleId||null,roleList_1:[],roleList_2:[],ipWhiteSelect:!!t.props.userData.ipWhiteList,ipWhiteList:t.props.userData.ipWhiteList},t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.onRef(this),Object(l.b)(l.a.getRoleList).then((function(t){if(0==t.code){for(var n=[],r=[],a=0;a<t.data.length;a++){var o=t.data[a];1==o.userCategory?n.push(o):r.push(o)}e.setState({roleList_1:n,roleList_2:r})}}))}},{key:"render",value:function(){var e=this.state,t=e.resetChecked,n=e.remark,r=e.userName,a=e.roleId,o=e.roleList_1,c=e.roleList_2,s=(e.ipWhiteSelect,e.ipWhiteList,this.props.form),l=s.getFieldDecorator,u=s.getFieldValue,f=t?u("resetSelectId"):null,p=(this.props.developerInfo.id,[]),h=this.props.userData.userCategory;return p=1==h?o:c,i.a.createElement(b.a,jt({},{labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:19},sm:{span:19}}},{onSubmit:this.affirm,className:"edit-basic-information"}),i.a.createElement("div",{className:"common_title_input"},i.a.createElement("span",{className:"common_title"},"用户名:"),i.a.createElement("div",{className:"common_content"},r)),i.a.createElement("div",{className:"common_title_input"},i.a.createElement("span",{className:"common_title"},"账户类型:"),i.a.createElement("div",{className:"common_content"},1==h?"控制台访问用户":2==h?"接口访问用户":"--")),i.a.createElement("div",{className:"common_title_input"},i.a.createElement(b.a.Item,{label:"用户角色",hasFeedback:!0},l("roleId",{rules:[{required:!0,message:"请选择用户角色"}],initialValue:a})(i.a.createElement(y.a,{style:{width:"180px"},placeholder:"请选择"},p.map((function(e,t){return i.a.createElement(Pt,{key:t+"用户角色",value:e.roleId},e.roleName)})))))),1==h?i.a.createElement("div",{className:"common_title_input"},i.a.createElement(b.a.Item,{label:"重置密码："},l("resetChecked")(i.a.createElement(wt.a,{size:"small",checked:t,onClick:this.reset}))),t?i.a.createElement("div",{className:"reset-select"},i.a.createElement(b.a.Item,{label:" ",colon:!1},l("resetSelectId",{rules:[{required:!0,message:"请选择密码生成方式"}]})(i.a.createElement(y.a,{style:{width:"180px"},placeholder:"请选择密码生成方式",onChange:this.resetSelect},Dt.map((function(e,t){return i.a.createElement(Pt,{key:t+"登录密码",value:e.id},e.text)}))))),f?i.a.createElement(b.a.Item,{label:" ",colon:!1},l("password",{rules:[{required:!0,validator:this.passwordCheck,message:"密码格式为大小写字母加数字，长度为6-18"}]})(1==f?i.a.createElement(m.a,{style:{width:"240px"},disabled:!0}):i.a.createElement(m.a.Password,{style:{width:"240px"},placeholder:"密码格式为大小写字母加数字，长度为6-18"}))):null):null):null,null,i.a.createElement("div",{className:"common_title_input"},i.a.createElement(qe.a,{label:"备注",formId:"remark",astrictNub:"100",rows:"2",placeholder:"请输入备注",getFieldDecorator:l,initialVal:n,width:"300px",getFieldValue:u})),i.a.createElement("div",{className:"but"},i.a.createElement(d.a,{type:"primary",htmlType:"submit"},"确定"),i.a.createElement(d.a,{className:"cancel",onClick:this.props.onCancel},"取消")))}}])&&Lt(t.prototype,n),r&&Lt(t,r),o}(o.Component))||_t,Bt=b.a.create({name:"editBasicInformation"})(Tt),At=n("fHMl"),Mt=n("9BLJ");n("kmdx");function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(){return(Vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ht(e);if(t){var a=Ht(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Jt(this,n)}}function Jt(e,t){return!t||"object"!==Ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ht(e){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zt=le.a.TreeNode,Gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(o,e);var t,n,r,a=Wt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getChildWithSecret=function(){var e=Object(D.h)("userId"),n=Object(D.h)("userCategory");Object(l.b)(l.a.getChildWithSecret,{userId:e,userCategory:n},{loading:!0}).then((function(e){t.setState({userInfo:e.data,loading:!1,secretKey:e.data.secretKey,secretId:e.data.secretId})}))},t.clickEye=function(e){t.setState({eye:!t.state.eye})},t.renderTreeNodes=function(e){return e.map((function(e){return e.children?i.a.createElement(Zt,{title:e.title,key:e.key,dataRef:e},t.renderTreeNodes(e.children)):i.a.createElement(Zt,Vt({key:e.key},e))}))},t.handleOk=function(){t.editAffirm.affirm()},t.handleOkCancel=function(){t.editAffirm.setState({resetChecked:!1,resetSelectId:null,password:null,userName:"",remark:"",roleId:null,ipWhiteSelect:!1,ipWhiteList:""},(function(){t.getChildWithSecret(),t.getRights()})),t.setState({userEditVisible:!1}),console.log("---close"),t.editAffirm.props.form.resetFields()},t.handleCancel=function(e,n){t.setState({userEditVisible:!1}),console.log("---close"),t.editAffirm.props.form.resetFields(),console.log(t.editAffirm.props.form.getFieldsValue())},t.editUserInfo=function(){t.editAffirm&&t.editAffirm.backfill(t.state.userInfo),t.setState({userEditVisible:!0})},t.state={permissionsTabsKey:"1",userEditVisible:!1,userInfo:{},loading:!0,dataTable:[],secretKey:"",secretId:"",productResource:[],dataObjRightsList:[],dataDimensionRightsList:[],apiInvokList:[],projectAuthList:[],eye:!0},t.columns=[{title:"用户SecretId",dataIndex:"secretId",key:"secretId"},{title:"用户SecretKey",dataIndex:"secret",key:"secret",render:function(e){return i.a.createElement("a",null,t.state.eye?Object(D.m)(e,10):e,t.state.eye?i.a.createElement(At.a,{className:"eyeLeft",onClick:t.clickEye}):i.a.createElement(Mt.a,{className:"eyeLeft",onClick:t.clickEye}))}},{title:"创建时间",dataIndex:"time",key:"time"}],t}return t=o,(n=[{key:"getRights",value:function(){var e=this,t=Object(D.h)("userId"),n=Object(D.h)("userCategory");Object(l.b)(l.a.getRights,{userId:t,userCategory:n},{needVersion:1.2,loading:!0}).then((function(t){for(var n=[],r=[],a=[],o=[],i=[],c=t.data,s=0;s<c.length;s++){var l=c[s];"productService"==l.menuCode&&(n=l.checkBoxGroupList),"dataObject"==l.menuCode&&(r=l.checkBoxGroupList),"dataDimension"==l.menuCode&&(a=l.checkBoxGroupList),"apiInvok"==l.menuCode&&(o=l.checkBoxGroupList),"projectAuth"==l.menuCode&&(i=l.checkBoxGroupList)}e.setState({productResource:n,dataObjRightsList:r,dataDimensionRightsList:a,apiInvokList:o,projectAuthList:i})}))}},{key:"componentDidMount",value:function(){this.getChildWithSecret(),this.getRights()}},{key:"render",value:function(){var e=this,t=this.state,n=t.userInfo,r=t.secretKey,a=t.secretId,o=t.userEditVisible,c=t.productResource,s=t.dataObjRightsList,l=t.dataDimensionRightsList,u=t.apiInvokList,p=t.projectAuthList;return i.a.createElement("div",{className:"user-info-box"},i.a.createElement(f.a,{backHandle:function(){return e.props.history.goBack()},title:"用户详情"}),i.a.createElement(St,{editUserInfo:this.editUserInfo,userInfo:n,secretKey:r,secretId:a}),i.a.createElement(P.a,{defaultExpandAll:!0,userCategory:n.userCategory,productResource:c,dataObjRightsList:s,dataDimensionRightsList:l,apiInvokList:u,projectAuthList:p}),i.a.createElement(Fe.a,{title:"编辑用户信息",visible:o,onOk:this.handleOk,onCancel:this.handleCancel,maskClosable:!1,className:"self-modal",footer:null},i.a.createElement(Bt,{userData:n,onCancel:this.handleCancel,onRef:function(t){return e.editAffirm=t},handleClose:this.handleOkCancel})))}}])&&Kt(t.prototype,n),r&&Kt(t,r),o}(o.Component),qt=(n("U8R4"),n("+eQT"));n("hZG8");function zt(e){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){Qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rn(e,t,n){return t&&nn(e.prototype,t),n&&nn(e,n),e}function an(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}function on(e,t){return(on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ln(e);if(t){var a=ln(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return sn(this,n)}}function sn(e,t){return!t||"object"!==zt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ln(e){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var un=qt.a.RangePicker,fn=y.a.Option,pn=function(e){an(n,e);var t=cn(n);function n(){var e;tn(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleSubmit=function(t){t.preventDefault();var n=e.props,r=n.form,a=n.searchLog;r.validateFields((function(e,t){if(!e){var n=t.time,r=void 0===n?[]:n,o=t.userName,i=t.type,c=t.theme,s=Xt(r,2),l=s[0],u=void 0===l?"":l,f=s[1],p=void 0===f?"":f;u&&(u=1e3*(u.hour(0).minute(0).second(0).millisecond(0).unix()-28800)),p&&(p=1e3*(p.hour(0).minute(0).second(0).millisecond(0).unix()-28800)),a({userName:o,type:i,theme:c,startTime:u,endTime:p})}}))},e.disabledDate=function(e){return e&&(e>ct()().endOf("day")||e<ct()().add(-180,"d").endOf("day"))},e.reset=function(){e.props.form.resetFields()},e}return rn(n,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return i.a.createElement(b.a,{layout:"inline",onSubmit:this.handleSubmit},i.a.createElement("div",{className:"searchCriteria limit-label"},i.a.createElement(b.a.Item,{label:"操作人"},e("userName",{rules:[],initialValue:""})(i.a.createElement(m.a,{style:{width:"220px"},placeholder:"请输入操作人"}))),i.a.createElement(b.a.Item,{label:"操作分类"},e("type",{rules:[],initialValue:""})(i.a.createElement(y.a,{style:{width:"220px"}},i.a.createElement(fn,{value:""},"请选择"),i.a.createElement(fn,{value:"0"},"基本操作"),i.a.createElement(fn,{value:"1"},"产品操作"),i.a.createElement(fn,{value:"2"},"数据订阅"),i.a.createElement(fn,{value:"3"},"应用管理"),i.a.createElement(fn,{value:"4"},"设备管理"),i.a.createElement(fn,{value:"5"},"固件管理"),i.a.createElement(fn,{value:"6"},"调试工具")))),i.a.createElement(b.a.Item,{label:"对象"},e("theme",{rules:[],initialValue:""})(i.a.createElement(m.a,{style:{width:"220px"},placeholder:"请输入操作对象"}))),i.a.createElement(b.a.Item,{label:"时间"},e("time",{rules:[]})(i.a.createElement(un,{style:{width:"220px"},disabledDate:this.disabledDate,format:"YYYY/MM/DD"})))),i.a.createElement("div",{className:"searchBut"},i.a.createElement(b.a.Item,null,i.a.createElement(d.a,{style:{marginRight:"12px"},htmlType:"submit",type:"primary"},"查询"),i.a.createElement(d.a,{onClick:this.reset,type:"default"},"重置"))))}}]),n}(o.Component),dn=b.a.create({name:"search-form"})(pn),mn=function(e){an(n,e);var t=cn(n);function n(e){var r;return tn(this,n),(r=t.call(this,e)).state={logsList:[],pager:{},pageIndex:1,conditions:{userName:"",type:"",theme:"",startTime:"",endTime:""}},r.searchLog=function(e){r.setState({conditions:e,pageIndex:1},(function(){r.getLogsList()}))},r.changePage=function(e){r.setState({pageIndex:e},(function(){r.getLogsList()}))},r.columns=[{title:"操作人",dataIndex:"userName",width:"250px"},{title:"操作",dataIndex:"content",width:"200px",render:function(e,t){var n=t.content,r=t.description;return i.a.createElement("span",null,r||n||"未识别内容")}},{title:"对象",dataIndex:"theme"},{title:"时间",width:"200px",dataIndex:"createTime",render:function(e,t){var n=t.createTime;return i.a.createElement("span",null,D.a.utcToDev(+n))}}],r}return rn(n,[{key:"componentDidMount",value:function(){this.getLogsList()}},{key:"getLogsList",value:function(){var e=this,t=this.state,n=t.conditions,r=t.pageIndex,a={};Object.keys(n).forEach((function(e){n[e]&&(a[e]=n[e])})),Object(l.b)(l.a.getOperateLogList,$t($t({},a),{},{pageIndex:r,pageRows:20}),{loading:!0,needVersion:1.1}).then((function(t){var n=t.data||{},r=n.list,a=n.pager;e.setState({logsList:Object(D.c)(r),pager:a})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.logsList,r=t.pager,a=t.pageIndex;return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(f.a,{title:"操作日志"})),i.a.createElement("div",{className:"comm-shadowbox"},i.a.createElement("div",{className:"search-area lineSearchBox"},i.a.createElement(dn,{searchLog:this.searchLog})),i.a.createElement("div",{style:{marginTop:"24px",padding:"12px 24px"}},i.a.createElement(z.a,{columns:this.columns,pagination:{total:r.totalRows,current:a,defaultCurrent:1,defaultPageSize:20,onChange:function(t){return e.changePage(t)},showTotal:function(e){return i.a.createElement("span",null,"共 ",i.a.createElement("a",null,e)," 条")},showQuickJumper:!0,hideOnSinglePage:!0},dataSource:n}))))}}]),n}(o.Component),hn=n("7U7l");function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vn(e,t){return(vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function En(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kn(e);if(t){var a=kn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return On(this,n)}}function On(e,t){return!t||"object"!==yn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kn(e){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _n=[{title:"身份验证"},{title:"重置密码"},{title:"完成"}],Sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vn(e,t)}(o,e);var t,n,r,a=En(o);function o(){return bn(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.developerInfo.email;return i.a.createElement(hn.a,{FlowList:_n,cType:2,emailFromFather:e||"",isNeedVerifyType:!0,title:"重置密码"})}}])&&gn(t.prototype,n),r&&gn(t,r),o}(o.Component);function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ln(e,t){return(Ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nn(e);if(t){var a=Nn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return In(this,n)}}function In(e,t){return!t||"object"!==wn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nn(e){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cn=[{title:"身份验证"},{title:"设置电子邮箱"},{title:"完成"}],Pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ln(e,t)}(o,e);var t,n,r,a=xn(o);function o(){return Rn(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.developerInfo.email;return i.a.createElement(hn.a,{FlowList:Cn,cType:3,emailFromFather:e,isNeedVerifyType:!0,title:"修改电子邮箱"})}}])&&jn(t.prototype,n),r&&jn(t,r),o}(o.Component);function Dn(e){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(e,t){return(An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vn(e);if(t){var a=Vn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Fn(this,n)}}function Fn(e,t){return!t||"object"!==Dn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vn(e){return(Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kn=[{title:"身份验证"},{title:"提交注销申请"},{title:"审核"}],Un=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(o,e);var t,n,r,a=Mn(o);function o(){return Tn(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.developerInfo.email;return i.a.createElement(hn.a,{FlowList:Kn,cType:5,emailFromFather:e||"",isNeedVerifyType:!0,title:"注销账号"})}}])&&Bn(t.prototype,n),r&&Bn(t,r),o}(o.Component),Wn=n("g5u9"),Jn=n("nyxj");function Hn(e){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qn(e,t){return(qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$n(e);if(t){var a=$n(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Yn(this,n)}}function Yn(e,t){return!t||"object"!==Hn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $n(e){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qn(e,t)}(o,e);var t,n,r,a=zn(o);function o(){return Zn(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.history;return i.a.createElement(Wn.a,{needHeader:!1,isInPage:!0},i.a.createElement("div",{className:"content-area"},i.a.createElement("div",{className:"title"},"重置登录密码"),i.a.createElement("div",{className:"desc default middle-fontsize"},"重置子账户登录密码，需要验证原登录账号"),i.a.createElement(Jn.d,{history:e})))}}])&&Gn(t.prototype,n),r&&Gn(t,r),o}(o.Component),Xn=n("3NWV");n("0Zna");function er(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nr(){return(nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rr(e){var t=e.developerInfo,n=e.history,r=e.getDeveloperInfo,a=e.isNotSub,c=t.id,s=t.secretId,u=t.secretKey,p=t.createTime,d=t.email,m=t.cancelStatus,h=er(Object(o.useState)(!1),2),y=h[0],b=h[1],g=er(Object(o.useState)(!1),2),v=g[0],E=g[1],O=function(e){n.push({pathname:"/userCenter/security/".concat(e)})};return i.a.createElement("div",{className:"page-usersafe-set"},i.a.createElement(f.a,{title:"安全设置"}),i.a.createElement("div",{className:"safe-setting comm-shadowbox"},i.a.createElement("div",{className:"setting-item flex-row"},i.a.createElement("div",{className:"left-desc flex1"},i.a.createElement("div",{className:"title"},"API访问秘钥"),i.a.createElement("div",{className:"desc-content"},i.a.createElement("div",{className:"p-flex"},i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"tit"},"开发者ID："),c),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"tit"},"用户secretId："),y?s:Object(D.m)(s,10),i.a.createElement(Xn.a,{type:y?"eye":"eye-invisible",style:{fontSize:"18px",marginLeft:"6px"},theme:"twoTone",twoToneColor:"#2874FF",onClick:function(){b((function(e){return!e}))}})),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"tit"},"用户SecretKey："),v?u:Object(D.m)(u,10),i.a.createElement(Xn.a,{type:v?"eye":"eye-invisible",style:{fontSize:"18px",marginLeft:"6px"},theme:"twoTone",twoToneColor:"#2874FF",onClick:function(){E((function(e){return!e}))}})),i.a.createElement("span",{className:"flex-item"},i.a.createElement("span",{className:"tit"},"创建时间："),p?D.a.utcToDev(p):"--"))))),i.a.createElement("div",{className:"setting-item flex-row"},i.a.createElement("div",{className:"left-desc flex1"},i.a.createElement("div",{className:"title"},"登录密码"),i.a.createElement("div",{className:"desc-content"},"登录平台需验证密码。以字母开头的6到18位的字母，数字和下划线。建议您定期更换密码。")),i.a.createElement("div",{className:"setting-btn-wrapper"},i.a.createElement("div",{className:"btns"},i.a.createElement("span",{className:"btn-has"},"已设置"),i.a.createElement("span",{onClick:function(){return O(a?"resetPassword":"subResetPassword")},className:"btn-can-control"},"重置")))),a&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"setting-item flex-row"},i.a.createElement("div",{className:"left-desc flex1"},i.a.createElement("div",{className:"title"},"电子邮箱"),i.a.createElement("div",{className:"desc-content"},"电子邮箱地址可用于登录平台，也可以用于接收服务通知信息。")),i.a.createElement("div",{className:"setting-btn-wrapper"},i.a.createElement("div",{className:"btns"},i.a.createElement("span",{className:d?"btn-has":"btn-not-has"},d?"已设置":"未设置"),i.a.createElement("span",{onClick:function(){return O("updateEmail")},className:"btn-can-control"},"重置")))),i.a.createElement("div",{className:"setting-item flex-row"},i.a.createElement("div",{className:"left-desc flex1"},i.a.createElement("div",{className:"title"},"注销账户"),i.a.createElement("div",{className:"desc-content"},"如果您不再使用此账号，可以将其注销。账号成功注销后，所有的产品数据及隐私信息将会被永久删除且无法恢复。")),i.a.createElement("div",{className:"setting-btn-wrapper"},i.a.createElement("div",{className:"btns"},1==m?i.a.createElement("span",{onClick:function(){Object(l.b)(l.a.withdraw,{},{loading:!0}).then((function(e){r()})).catch((function(e){}))},className:"btn-can-control"},"撤销注销账户申请"):i.a.createElement("span",{onClick:function(){return O("closeAccount")},className:"btn-can-control"},"注销账户")))))))}var ar=n("MUf8"),or=n("k+EZ"),ir=n("ZmMk"),cr=n("d8kt"),sr=n("w1Zx");n("J2fM");function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ur,fr=["menuname","path"];function pr(){return(pr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function dr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vr(e);if(t){var a=vr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return gr(this,n)}}function gr(e,t){return!t||"object"!==lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vr(e){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Er={"基本资料":Z,"安全设置":function(e){var t=e.developerInfo,n=e.getDeveloperInfo,r=e.isNotSub,a=e.match.path;return i.a.createElement(c.Switch,null,i.a.createElement(c.Route,{path:"".concat(a,"/setting"),render:function(e){return i.a.createElement(rr,nr({},e,{developerInfo:t,getDeveloperInfo:n,isNotSub:r}))}}),r&&i.a.createElement(c.Route,{path:"".concat(a,"/resetPassword"),render:function(e){return i.a.createElement(Sn,nr({},e,{developerInfo:t}))}}),r&&i.a.createElement(c.Route,{path:"".concat(a,"/updateEmail"),render:function(e){return i.a.createElement(Pn,nr({},e,{developerInfo:t}))}}),r&&i.a.createElement(c.Route,{path:"".concat(a,"/closeAccount"),render:function(e){return i.a.createElement(Un,nr({},e,{developerInfo:t}))}}),r&&i.a.createElement(c.Route,{path:"".concat(a,"/subResetPassword"),render:function(e){return i.a.createElement(Qn,nr({},e,{developerInfo:t}))}}),i.a.createElement(c.Redirect,{to:"".concat(a,"/setting")}))},"访问用户":function(e){var t=e.match.path;return i.a.createElement(c.Switch,null,i.a.createElement(c.Route,{path:"".concat(t,"/list"),component:ht}),i.a.createElement(c.Route,{path:"".concat(t,"/detail"),component:Gt}),i.a.createElement(c.Redirect,{to:"".concat(t,"/list")}))},"用户角色":function(e){var t=e.match.path;return i.a.createElement(c.Switch,null,i.a.createElement(c.Route,{path:"".concat(t,"/list"),component:ce}),i.a.createElement(c.Route,{path:"".concat(t,"/edit"),component:Me}),i.a.createElement(c.Redirect,{to:"".concat(t,"/list")}))},"操作日志":mn},Or=Object(s.connect)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS(),newMessageNums:e.getIn(["message","newMessageNums"]).toJS()}}),(function(e){return{getNewMessageNums:function(){return e(Object(cr.a)())},getDeveloperInfo:function(){return e(Object(u.c)())}}}))(ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(s,e);var t,n,r,o=br(s);function s(){return mr(this,s),o.apply(this,arguments)}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.newMessageNums,n=e.getNewMessageNums,r=e.getDeveloperInfo,o=e.developerInfo;a()(t)&&n(),a()(o)&&r()}},{key:"render",value:function(){var e=this.props,t=e.developerInfo,n=e.newMessageNums,r=e.getDeveloperInfo,a=!(1===t.isSubUser),o=sr.e[0].childmenus;return a||(o=o.slice(0,2)),i.a.createElement(ar.a,null,i.a.createElement("div",{className:"page-header-wrapper"},i.a.createElement(or.a,{developerInfo:t,newMessageNums:n})),i.a.createElement("div",{className:"page-content-wrapper"},i.a.createElement("div",{className:"left-menus"},i.a.createElement(ir.a,{menulist:sr.e})),i.a.createElement("section",{className:"right-wrapper"},i.a.createElement("div",{className:"right-wrapper-contentbox"},i.a.createElement(c.Switch,null,o.map((function(e,n){var o=e.menuname,s=e.path,l=dr(e,fr),u=Er[o];if(u)return i.a.createElement(c.Route,{key:n,path:s,render:function(e){return i.a.createElement(u,pr({developerInfo:t,getDeveloperInfo:r,isNotSub:a},e,l))}})})),o[0]&&i.a.createElement(c.Redirect,{to:o[0].path}))))))}}])&&hr(t.prototype,n),r&&hr(t,r),s}(o.Component))||ur},ccuU:function(e,t,n){},hZG8:function(e,t,n){},ivPg:function(e,t,n){e.exports=n.p+"static/images/no-source-tip.681eb7825cf81b5da33967ff8571f3c6.png"},kmdx:function(e,t,n){},sCcn:function(e,t,n){},y1Sk:function(e,t,n){}}]);