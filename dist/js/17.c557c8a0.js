(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{QOSG:function(e,t,a){"use strict";a.r(t);a("NBAS"),a("SuFq"),a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR"),a("4Brf"),a("0oug"),a("4mDm"),a("PKPk"),a("3bBZ"),a("YQTV");var n=a("NUBc"),r=(a("mbEz"),a("wCAj")),o=(a("L/Qf"),a("2/Rp")),c=(a("8QGh"),a("2fM7")),l=(a("1vPl"),a("5rEg")),i=a("BkRI"),s=a.n(i),u=(a("SYor"),a("07d7"),a("5s+n"),a("p532"),a("ma9I"),a("2B1R"),a("q1tI")),d=a.n(u),p=(a("/MKj"),a("mU7p")),m=a("kqA8"),f=a("FC04"),h=a("P2RN"),y=a("MeRu"),b=a("Nlzp"),g=a("Uz1T");a("dP/0");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=j(e);if(t){var r=j(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S(this,a)}}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=l.a.Search,V=c.a.Option,L=["开发中","已发布","审核中"],x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(v,e);var t,a,i,u=I(v);function v(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=u.call(this,e)).getProductListNew=function(){Object(b.c)(b.a.getProductListNew,O({},t.state.listParams)).then((function(e){var a={current:e.data.current,size:e.data.size,pages:e.data.pages,total:e.data.total};t.setState({dataSource:e.data.records,pager:a})}))},t.searchProduct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=s()(t.state.listParams);a.productName=e.trim(),a.current=1,t.setState({listParams:a},(function(){t.getProductListNew()}))},t.handleChange=function(e){var a=s()(t.state.listParams);a.mode=e,t.setState({listParams:a},(function(){t.getProductListNew()}))},t.changePage=function(e){var a=O({},t.state.listParams);a.current=e,t.setState({listParams:a},(function(){t.getProductListNew()}))},t.deleteModalOKHandle=function(){var e=t.state,a=e.selectedItem,n=e.deleteInputValue.trim(),r=a.productId;if(!n||"delete"!==n)return Object(h.a)({type:"warn",message:"异常操作",description:'请输入"delete"来确认删除！'});t.setState({deleteLoading:!0},(function(){Object(b.c)(b.a.delectProduct,{productId:r},{needVersion:1.1}).then((function(e){0===e.code&&Object(h.a)({type:"success",description:"删除成功！"}),t.setState({deleteVisible:!1,deleteInputValue:""}),t.getProductListNew()})).finally((function(){return t.setState({deleteLoading:!1})}))}))},t.copyModalOKHandle=function(){var e=t.state,a=e.copyInputValue,n=e.selectedItem,r=a.trim(),o=n.productId;if(!r)return Object(h.a)({type:"warn",message:"异常操作",description:"请输入产品名称！"});t.setState({copyLoading:!0},(function(){Object(b.c)(b.a.copyProduct,{productId:o,productName:r},{needVersion:1.1}).then((function(e){0===e.code&&Object(h.a)({type:"success",description:"复制成功！"}),t.setState({listParams:s()(t.defaultListParams),copyModalVisible:!1,copyInputValue:""},(function(){t.getProductListNew()}))})).finally((function(){t.setState({copyLoading:!1})}))}))},t.makeHandle=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({isClicked:!e})},t.defaultListParams={current:1,size:6,productName:"",mode:""},t.state={dataSource:[],pager:{},listParams:s()(t.defaultListParams),selectedItem:null,deleteVisible:!1,deleteLoading:!1,deleteInputValue:"",copyModalVisible:!1,copyLoading:!1,copyInputValue:"",isClicked:!0},t.columns=[{title:"产品",dataIndex:"productName",key:"productName",render:function(e,t,a){return d.a.createElement("div",{className:"pro-show"},d.a.createElement(m.a,{icon:t.productIcon}),d.a.createElement("div",{className:"pro-show-cont"},d.a.createElement("div",{className:"pro-show-cont-title"},e),d.a.createElement("div",{className:"pro-show-cont-item"},"产品ID：",t.productId),d.a.createElement("div",{className:"pro-show-cont-item"},"型号：",t.productCode)))}},{title:"品类",dataIndex:"deviceType",key:"deviceType"},{title:"智能化方案",dataIndex:"sechmeName",key:"sechmeName"},{title:"通信协议",dataIndex:"bindTypeStr",key:"bindTypeStr"},{title:"状态",dataIndex:"status",key:"status",render:function(e){return d.a.createElement("span",{className:"status status-".concat(e)},p.b[""+e]||"")}},{title:"操作",key:"",render:function(e,a,n){return d.a.createElement("div",{className:"operation"},d.a.createElement("span",{className:"continue",onClick:t.clickProductInfo.bind(k(t),a.mode,a.productId)},"继续开发"),2!==a.mode&&d.a.createElement("span",{className:"copy mar25",onClick:t.operateProduct.bind(k(t),a,"copyModalVisible")},"复制"),2!==a.mode&&d.a.createElement("span",{className:"delete",onClick:t.operateProduct.bind(k(t),a,"deleteVisible")},"删除"))}}],t}return t=v,(a=[{key:"componentDidMount",value:function(){this.getProductListNew()}},{key:"clickProductInfo",value:function(e,t){var a="details";1!==e&&(a="edit"),this.props.history.push({pathname:"/open/product/proManage/".concat(a,"/").concat(t)})}},{key:"operateProduct",value:function(e,t){var a;if(2===e.mode)return!1;this.setState((w(a={},t,!0),w(a,"selectedItem",e),a))}},{key:"modalCancelHandle",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copyModalVisible",a=arguments.length>1?arguments[1]:void 0;this.setState((w(e={},t,!1),w(e,a,""),e))}},{key:"inputOnChangeHandle",value:function(e,t){this.setState(w({},e,t.target.value))}},{key:"render",value:function(){var e=this,t=this.state,a=t.listParams,i=t.selectedItem,s=t.deleteVisible,u=t.deleteLoading,p=t.deleteInputValue,m=t.copyModalVisible,h=t.copyLoading,b=t.copyInputValue,v=t.isClicked,P=t.dataSource,O=t.pager;return d.a.createElement("section",{className:"page-wrapper"},d.a.createElement(y.a,{title:"我的智能产品"}),d.a.createElement("div",{className:"page-header comm-shadowbox"},d.a.createElement("div",{className:"page-header-left"},d.a.createElement(C,{placeholder:"产品名称/ID/型号",maxLength:20,onSearch:function(t){return e.searchProduct(t)},style:{width:465,margin:"0 22px"}}),d.a.createElement(c.a,{allowClear:!0,onChange:this.handleChange,placeholder:"产品状态",style:{width:120}},L.map((function(e,t){return d.a.createElement(V,{value:t,key:e},e)})))),d.a.createElement("div",{className:"page-header-right"},d.a.createElement(o.a,{type:"primary",onClick:this.makeHandle.bind(this,!1)},"制作产品"))),d.a.createElement("div",{className:"bg-wrapper flex1 flex-column comm-shadowbox"},d.a.createElement("div",{className:"page-table-wrapper flex-column flex1"},d.a.createElement(r.a,{rowKey:"productId",dataSource:P,columns:this.columns,pagination:!1}),d.a.createElement("footer",{className:"list-pagination"},O&&O.pages>0?d.a.createElement(n.a,{className:"self-pa",total:O.total,current:a.current,defaultCurrent:1,defaultPageSize:a.size,onChange:this.changePage,showTotal:function(e){return d.a.createElement("span",null,"共 ",d.a.createElement("a",null,e)," 条")},showQuickJumper:!0,hideOnSinglePage:!0}):null))),i&&s&&d.a.createElement(f.a,{visible:s,modalOKHandle:this.deleteModalOKHandle,modalCancelHandle:this.modalCancelHandle.bind(this,"deleteVisible","deleteInputValue"),targetName:i.productName,confirmLoading:u,title:"删除产品",needWarnIcon:!0,descText:"即将删除的产品",tipText:"产品的所有信息将完全被删除，无法找回，请谨慎操作"},d.a.createElement(l.a,{className:"modal-content-input",onChange:function(t){e.inputOnChangeHandle("deleteInputValue",t)},onPressEnter:this.deleteModalOKHandle,placeholder:"请输入“delete”确认删除该产品",maxLength:20,value:p})),i&&m&&d.a.createElement(f.a,{visible:m,modalOKHandle:this.copyModalOKHandle,modalCancelHandle:this.modalCancelHandle.bind(this,"copyModalVisible","copyInputValue"),targetName:i.productName,confirmLoading:h,title:"复制产品",descText:"即将复制的产品",tipText:"创建与原产品的功能和服务配置一样的新产品"},d.a.createElement(l.a,{className:"modal-content-input",onChange:function(t){e.inputOnChangeHandle("copyInputValue",t)},onPressEnter:this.copyModalOKHandle,value:b,maxLength:20,placeholder:"新产品名称"})),v&&d.a.createElement(g.a,{visible:v,cancelHandle:this.makeHandle.bind(this,!0)}))}}])&&N(t.prototype,a),i&&N(t,i),v}(u.PureComponent);t.default=x},"dP/0":function(e,t,a){},mU7p:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n={0:"开发中",1:"已发布",2:"审核中"},r={0:"草稿",1:"已发布",2:"删除"}}}]);