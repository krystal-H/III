(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"17x9":function(e,t,a){e.exports=a("WUjv")(13)},"2mql":function(e,t,a){e.exports=a("WUjv")(21)},"81qY":function(e,t,a){},MgzW:function(e,t,a){e.exports=a("WUjv")(35)},OzjJ:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return rt}));a("rB9j"),a("Rm1S");var n=a("q1tI"),r=a.n(n),o=a("55Ip"),l=(a("NBAS"),a("SuFq"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR"),a("4Brf"),a("07d7"),a("0oug"),a("4mDm"),a("PKPk"),a("3bBZ"),a("YQTV"),a("NUBc")),c=(a("L/Qf"),a("2/Rp")),i=(a("1vPl"),a("5rEg")),s=(a("qePV"),a("2B1R"),a("tkto"),a("+2oP"),a("sMBO"),a("pjDv"),a("kqA8")),p=a("36rt"),u=a("FC04");function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],l=!0,c=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var f=Object(o.withRouter)((function(e){var t=m(Object(n.useState)(!1),2),a=t[0],o=t[1],l=e.Info,c=l.appId,i=l.appIconLow,d=l.appName,f=l.appType,h=l.appDesc;return r.a.createElement("div",{className:"application-item-card flex-row"},r.a.createElement(s.a,{icon:i}),r.a.createElement("div",{className:"application-info flex-column flex1"},r.a.createElement("div",{className:"application-info-title",onClick:function(){e.history.push("/open/app/details/".concat(c))}},d),r.a.createElement("div",{className:"application-info-bar"},r.a.createElement("span",{className:"title"},"APPID："),c),r.a.createElement("div",{className:"application-info-bar"},r.a.createElement("span",{className:"title"},"应用类型："),0===Number(f)?"移动应用":"小程序"),r.a.createElement("div",{className:"application-info-bar application-desc",title:h},r.a.createElement("span",{className:"title"},"应用简介："),h)),r.a.createElement("div",{className:"del-app",onClick:function(){return o(!0)}},r.a.createElement(p.a,{type:"icon-delete",style:{fontSize:16}}),r.a.createElement("span",null,"删除")),a&&r.a.createElement(u.a,{visible:a,modalOKHandle:function(){return function(t){e.deleteApp(t)}(c)},modalCancelHandle:function(){o(!1)},targetName:d,title:"删除应用",descText:"应用删除后将无法继续使用APPID。即将删除应用",needWarnIcon:!0,tipText:"应用删除操作不可恢复。是否确认删除?"}))})),h=a("8QW8"),y=(a("odoF"),a("Nlzp")),b=a("MeRu"),g=(a("TL2v"),a("P2RN")),v=a("zueq");a("oIco");function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){A(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function P(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=S(e);if(t){var r=S(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return j(this,a)}}function j(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=i.a.Search,D={pageRows:9,pageIndex:1},k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(i,e);var t,a,n,o=N(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentDidMount=function(){t._getApplicationList(D)},t.onChange=function(e){t._getApplicationList(w(w({},D),{},{pageIndex:e,appName:t.state.searchValue}))},t.searchApplication=function(e){t.setState((function(){return{searchValue:e}}),(function(){t._getApplicationList(w(w({},D),{},{appName:e}))}))},t._getApplicationList=function(e){Object(y.c)(y.a.getAppInfoList,w({},e),{loading:!0}).then((function(e){var a=e.code,n=e.data;0===a&&t.setState((function(){return{application:n}}))}))},t.deleteApp=function(e){Object(y.c)(y.a.deleteApp5x,{appId:Number(e)},{loading:!0}).then((function(e){0===e.code&&(Object(g.a)({description:"应用删除成功！",type:"success"}),t._getApplicationList(D))}))},t._getApplicationListHTML=function(){var e=t.state.application;return e.list&&e.list.length>0?e.list.map((function(e,a){return r.a.createElement("div",{className:"list-item",key:e.appId},r.a.createElement(f,{deleteApp:t.deleteApp,Info:e}))})):r.a.createElement(h.a,{style:{margin:"auto"}})},t.addNewApplication=function(){var e=t.state.application,a=void 0===e?{}:e,n=a.appMaxNum,r=void 0===n?0:n,o=a.currentNum;if((void 0===o?0:o)>=r)return Object(g.a)({description:"最多只能创建".concat(r,"个应用！")});window.location.hash="/open/app/add"},t.state={application:{list:[],pager:{}},searchValue:"",createAppJurisdiction:"创建应用"},t}return t=i,(a=[{key:"render",value:function(){var e=this,t=this.state,a=t.application,n=t.createAppJurisdiction,o=a.list,i=a.pager,s=o.length<=5?"lists-wrapper flex-row flex1":"lists-wrapper flex-row flex1 six-item",p=r.a.createElement("h6",null,"C-Life平台提供完善的应用开发管理服务。您可以构建自主品牌的APP终端应用或小程序应用，您可以在这里对应用进行统一管理。");return r.a.createElement("section",{className:"application-wrapper flex-column"},r.a.createElement(b.a,{title:"应用管理"}),r.a.createElement("div",{className:"application-content-wrapper flex-column flex1"},r.a.createElement("div",{className:"application-search"},r.a.createElement("div",{className:"application-header-input-wrapper comm-searchBox"},r.a.createElement(x,{placeholder:"请输入应用名称查找",enterButton:!0,allowClear:!0,maxLength:100,onSearch:function(t){return e.searchApplication(t)}})),r.a.createElement("div",{className:"butFloatRight"},n?r.a.createElement(c.a,{type:"primary",onClick:this.addNewApplication,className:"application-header-add"},"创建应用"):null)),r.a.createElement("div",{className:"application-content flex-column"},r.a.createElement("div",{className:"application-content-tip"},r.a.createElement(v.a,{className:"icon"}),r.a.createElement("span",null,p)),r.a.createElement("section",{className:s},this._getApplicationListHTML()),r.a.createElement("footer",{className:"application-list-pagination"},Object.keys(i).length>0&&r.a.createElement(l.a,{className:"self-pa",total:i.totalRows,current:i.pageIndex,defaultCurrent:1,defaultPageSize:i.pageRows,onChange:function(t){return e.onChange(t)},pageSize:i.pageRows,showTotal:function(e){return r.a.createElement("span",null,"共 ",r.a.createElement("a",null,e)," 条")},hideOnSinglePage:!0,showSizeChanger:!1,showQuickJumper:i.totalPages>5})))))}}])&&P(t.prototype,a),n&&P(t,n),i}(n.PureComponent),C=(a("zKZe"),a("MKzF"),a("kaz8")),T=(a("K4yd"),a("9yH6")),V=(a("Jmwx"),a("BMrR")),R=(a("rO+z"),a("kPKH")),F=(a("8QGh"),a("2fM7")),L=(a("UxlC"),a("WsrF")),_=(a("XlDN"),a("rVDo")),B=a("v7xx"),M=a("M7r8");a("ojkO");function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],l=!0,c=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){Z(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}i.a.TextArea;var W=F.a.Option,K=Object(n.memo)((function(e){return r.a.createElement("section",{className:"add-application-wrapper flex-column"},r.a.createElement(b.a,{backHandle:function(){return e.history.goBack()},title:"新建应用"}),r.a.createElement("div",{className:"add-application"},r.a.createElement($,{saveAppBaseInfo:function(t){var a=t.appType;(t=U(U({},t),{},{appMode:1})).appType=Number(t.appType),console.log(t,"--------");var n=0===Number(a)?"应用移动创建成功":"小程序应用创建成功";Object(y.c)(y.a.saveAppInfo5x,U({},t)).then((function(t){0===t.code&&(Object(g.a)({message:"创建成功",description:n,type:"success"}),e.history.replace({pathname:"open/base/application/list"}))}))},handleCancel:function(){e.history.goBack()}})))})),$=Object(n.memo)(L.a.create({name:"addApplication"})(Object(n.memo)((function(e){var t=H(Object(n.useState)(!1),2),a=t[0],o=t[1],l=H(Object(n.useState)(!1),2),c=l[0],s=l[1],p=e.form,u=p.getFieldDecorator,m=p.getFieldValue,d=m("appType"),f=Object(n.useRef)(),h=e.handleCancel;return r.a.createElement(L.a,q({},{labelCol:{span:3},wrapperCol:{span:12}},{className:"add-application-form"}),r.a.createElement(L.a.Item,{label:"应用名称",wrapperCol:{span:10},hasFeedback:!0},u("appName",{rules:[{required:!0,message:"请输入应用名称"},{max:20,message:"最多可以输入20个字符"}]})(r.a.createElement(i.a,{placeholder:"最多可以输入20个字符"}))),r.a.createElement(V.a,{gutter:8},r.a.createElement(R.a,{span:3,className:"app-icon-low-label"},r.a.createElement("span",{className:"form-require"},"应用图标")),r.a.createElement(R.a,{span:12},r.a.createElement(_.b,{ref:f,format:".png"}))),r.a.createElement(L.a.Item,{label:"应用类型"},u("appType",{initialValue:"0",rules:[{required:!0,message:"请输入应用名称"}]})(r.a.createElement(T.a.Group,null,r.a.createElement(T.a,{value:"0"},"移动应用"),r.a.createElement(T.a,{value:"2"},"小程序应用"))),r.a.createElement("br",null),("0"===d||void 0===d)&&r.a.createElement("span",{className:"app-type-desc"},"Android和iOS共用一个APPID"),"2"===d&&r.a.createElement("span",{className:"app-type-desc"},"微信的小程序应用")),("0"===d||void 0===d)&&r.a.createElement(L.a.Item,{className:"appVersion",label:"应用包"},r.a.createElement(V.a,{gutter:8},r.a.createElement(R.a,{span:24},r.a.createElement(C.a,{onChange:function(e){return o(e.target.checked)}},"Android版"))),r.a.createElement(V.a,{gutter:8},r.a.createElement(R.a,{span:16},r.a.createElement(L.a.Item,{label:" ",hasFeedback:!0,labelCol:{span:1},wrapperCol:{span:22},className:"android-input",colon:!1},u("androidPkg",{rules:[{required:a,message:"请输入应用包名"},{max:200,message:"最多可以输入200个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入应用包名，例如com.example.mirror",disabled:!a})))),r.a.createElement(R.a,{span:8},r.a.createElement(L.a.Item,{label:" ",hasFeedback:!0,labelCol:{span:0},wrapperCol:{span:20},className:"android-schema-input",colon:!1},u("androidSchema",{rules:[{max:50,message:"最多可以输入50个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入分享Schema",disabled:!a}))))),r.a.createElement(V.a,{gutter:8},r.a.createElement(R.a,{span:24},r.a.createElement(C.a,{onChange:function(e){return s(e.target.checked)}},"iOS版")),r.a.createElement(R.a,{span:16},r.a.createElement(L.a.Item,{label:" ",hasFeedback:!0,labelCol:{span:1},wrapperCol:{span:22},className:"ios-input",colon:!1},u("iosBundleId",{rules:[{required:c,message:"请输入应用包名"},{max:200,message:"最多可以输入200个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入应用包名，例如com.example.mirror",disabled:!c})))),r.a.createElement(R.a,{span:8},r.a.createElement(L.a.Item,{label:" ",hasFeedback:!0,labelCol:{span:0},wrapperCol:{span:20},className:"ios-schema-input",colon:!1},u("iosSchema",{rules:[{max:50,message:"最多可以输入50个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入分享Schema",disabled:!c})))))),"2"===d&&r.a.createElement(L.a.Item,{label:"微信应用ID",hasFeedback:!0},u("weChatAppId",{rules:[{required:!0,message:"请输入在微信申请时的APPID"},{max:100,message:"最多可以输入100个字符"},{pattern:/^[a-zA-Z0-9]*$/,message:"APPID仅支持数字或字母"}]})(r.a.createElement(i.a,{placeholder:"请输入在微信申请时的APPID"}))),"2"===d&&r.a.createElement(L.a.Item,{label:"微信应用Secret",hasFeedback:!0},u("secret",{rules:[{required:!0,message:"请输入在微信申请时的APP的Secret"},{max:100,message:"最多可以输入100个字符"},{pattern:/^[a-zA-Z0-9]*$/,message:"APP的Secret仅支持数字或字母"}]})(r.a.createElement(i.a,{placeholder:"请输入在微信申请时的APP的Secret"}))),r.a.createElement(L.a.Item,{label:"应用构建模式",wrapperCol:{span:6}},u("reportFormsType",{initialValue:"开发模式"})(r.a.createElement(F.a,null,r.a.createElement(W,{value:"开发模式"},"开发模式")))),r.a.createElement(M.a,{label:"应用简介",formId:"appDesc",astrictNub:100,placeholder:"最多可以输入100个字符",getFieldDecorator:u,getFieldValue:m,isRequired:!0}),r.a.createElement(L.a.Item,null,r.a.createElement(B.a,{preHandle:function(t){t.preventDefault();var a=e.form.validateFieldsAndScroll,n=e.saveAppBaseInfo;a((function(e,t){if(!e){console.log("Received values of form: ",t);var a=f.current.getFileListUrl();if(a.length<=0)return void Object(g.a)({description:"请选择应用图标！",type:"warn"});t.appIconLow=a[0],n(t)}}))},nextHandle:h,preText:"确认",nextText:"取消",nextType:"default",preType:"primary"})))})))),Q=(a("mbEz"),a("wCAj")),G=(a("TfFZ"),a("3S7+")),Y=(a("AUBz"),a("ZTPi")),X=a("BkRI"),ee=a.n(X),te=a("gs3f"),ae=a("DgvE"),ne=(a("k3Gp"),a("kLXV")),re=(a("vAZS"),a("ECub"));a("yq1k"),a("JTJg"),a("pDQq");function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ce(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function pe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=fe(e);if(t){var r=fe(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return de(this,a)}}function de(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he=i.a.Search,ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(l,e);var t,a,n,o=me(l);function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).getListAllProductAndAccreditInfo=function(e){var a=t.props,n=a.appId,r=a.relationedProductIds,o=a.currentAppType,l=r&&r[1===o?"android":"ios"]||[];Object(y.c)(y.a.getAppDevProductList5x,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(a),!0).forEach((function(t){se(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({appId:Number(n)},e),{loading:!0}).then((function(e){var a=e.code,n={list:(e.data.list||[]).filter((function(e){return!l.includes(e.productId)})),pager:{}};0===a&&t.setState((function(){return{listAllProductAndAccreditInfo:n}}))}))},t.handleSubmit=function(e){e.preventDefault();var a=le(t.state.checkedValues);if(0===a.length)return Object(g.a)({description:"请选择需要关联的产品",type:"warn"});t.props.updateRelaProduct(a)},t.handleCancel=function(e){(0,t.props.showDialog)(e)},t.onChange=function(e){t.setState((function(){return{checkedValues:e}}))},t.handleSearch=function(e){t.setState((function(){return{searchValue:e,checkedValues:[]}}),(function(){t.getListAllProductAndAccreditInfo({productName:e})}))},t.clickIconHandle=function(e,a){e.stopPropagation();var n=t.state.checkedValues,r=ee()(n),o=r.indexOf(a);-1===o?r.push(a):r.splice(o,1),t.setState({checkedValues:r})};var a=t.props,n=a.currentAppType,r=a.relationProductList,c=1===n?r.listAndroid:r.listIos,i=c&&c.map((function(e){return e.productId}));return t.state={checkedValues:i||[],searchValue:"",isFirst:!0,listAllProductAndAccreditInfo:{list:[],pager:{}}},t}return t=l,(a=[{key:"componentDidMount",value:function(){this.getListAllProductAndAccreditInfo({productName:""})}},{key:"render",value:function(){var e=this,t=this.props.showAddProductRelationDialog,a=this.state,n=a.listAllProductAndAccreditInfo,o=a.checkedValues;return r.a.createElement(ne.a,{width:"63%",visible:t,title:"添加产品关联",className:"add-product-relation-modal",onCancel:function(){return e.handleCancel("showAddProductRelationDialog")},maskClosable:!1,style:{minWidth:900},footer:[r.a.createElement(c.a,{key:"submit",type:"primary",onClick:this.handleSubmit},"确认"),r.a.createElement(c.a,{key:"cancel",onClick:function(){return e.handleCancel("showAddProductRelationDialog")}},"取消")]},r.a.createElement("div",{className:"product-relation flex-column"},r.a.createElement("div",{className:"desc"},"您可以添加由您创建和给予授权的硬件产品"),r.a.createElement("div",{className:"search-wrapper"},r.a.createElement(he,{placeholder:"请输入产品ID，产品名称搜索产品",maxLength:100,onSearch:function(t){return e.handleSearch(t)},style:{width:"50%"},enterButton:!0,allowClear:!0})),r.a.createElement("div",{className:"mescroll-refresh flex1",style:{height:"max-content"}},r.a.createElement(C.a.Group,{style:{width:"100%"},value:o,onChange:this.onChange},r.a.createElement("div",{id:"mescroll",className:"mescroll"},r.a.createElement("div",{id:"dataList",className:"data-list flex-row"},n.list.length>0&&n.list.map((function(t,a){var n=t.productId,o=t.productIcon,l=t.productName;return r.a.createElement("div",{key:n,className:"list-item flex-column"},r.a.createElement("i",{className:"product-pic"},r.a.createElement("div",{style:{cursor:"pointer"},onClick:function(t){return e.clickIconHandle(t,n)}},r.a.createElement(s.a,{icon:o})),r.a.createElement("div",{className:"check-box"},r.a.createElement(C.a,{value:n}))),r.a.createElement("p",{className:"product-name flex1 flex-row"},l),r.a.createElement("div",{className:"product-id flex-row flex1"},n))})),0===n.list.length&&r.a.createElement("div",{className:"no-data-box"},r.a.createElement(re.a,null))))))))}}])&&pe(t.prototype,a),n&&pe(t,n),l}(n.Component),be=a("Lyp1");a("sDFC");function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(){return(ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(a),!0).forEach((function(t){we(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function we(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ae(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=je(e);if(t){var r=je(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Ne(this,a)}}function Ne(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Se=F.a.Option,xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(l,e);var t,a,n,o=Ie(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).handleCancel=function(e){(0,t.props.showDialog)(e)},t.handleSubmit=function(e){e.preventDefault();var a=t.props.form,n=a.validateFieldsAndScroll,r=a.getFieldValue,o=t.props,l=o.createAppVersion,c=o.curAppVersionDetail,i=r("appType");n((function(e,a){if(!e){console.log("Received values of form: ",a);var n=c.appVersionId;if(1===i||void 0===i){var r=t.state.url;if(n)r=""===r?c.url:r;else if(!r&&"{}"===JSON.stringify(c))return Object(g.a)({description:"请先上传文件，自动生成升级链接！",type:"warn"}),!1;l(Oe(Oe({},a),{},{url:r,appVersionId:n}))}else l(Oe(Oe({},a),{},{appVersionId:n}))}}))},t.getUrl=function(){var e=t.versionApk.getFileListUrl();t.setState((function(){return{url:e[0]}}))},t.componentDidMount=function(){var e=t.props.curAppVersionDetail;if("{}"!==JSON.stringify(e)){var a=[{uid:"-1",name:e.url,status:"done",url:e.url}];1===e.appType&&setTimeout((function(){t.versionApk.setState({fileList:a})}))}},t.state={url:"",appType:1},t}return t=l,(a=[{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldValue,o=this.props,l=o.showAppVersionDialog,s=o.curAppVersionId,p=o.curAppVersionDetail,u=(o.appInfo,s?"编辑应用版本":"创建应用版本"),m=n("appType"),d=n("status")||1;return r.a.createElement(ne.a,{width:"50%",visible:l,centered:!0,title:u,className:"add-version-modal",onCancel:function(){return e.handleCancel("showAppVersionDialog")},maskClosable:!1,footer:[r.a.createElement(c.a,{key:"submit",type:"primary",onClick:this.handleSubmit},"确认"),r.a.createElement(c.a,{key:"cancel",onClick:function(){return e.handleCancel("showAppVersionDialog")}},"取消")]},r.a.createElement("div",{className:"add-version-from-wrapper"},r.a.createElement(L.a,ve({},{labelCol:{span:5},wrapperCol:{span:19}},{className:"add-version-from"}),r.a.createElement(L.a.Item,{label:"版本号",wrapperCol:{span:10}},a("externalVersion",{rules:[{required:!0,message:"请输入版本号"},{max:100,message:"最多可以输入100个字符"}]})(r.a.createElement(i.a,{placeholder:"推荐使用XYZ的格式，如：V1.1.0"}))),r.a.createElement(L.a.Item,{label:"版本类型",wrapperCol:{span:10}},a("appType",{rules:[{required:!0,message:"请选择版本类型"}]})(r.a.createElement(F.a,{showSearch:!0,placeholder:"请选择版本类型",optionFilterProp:"children"},r.a.createElement(Se,{value:1},"Android版"),r.a.createElement(Se,{value:2},"iOS版")))),(1===m||void 0===m)&&r.a.createElement(L.a.Item,{label:"版本附件"},r.a.createElement(_.a,{onRef:function(t){return e.versionApk=t},format:".apk",maxSize:200,isNotImg:!0,cb:this.getUrl})),(1===m||void 0===m)&&r.a.createElement(L.a.Item,{label:"升级链接"},r.a.createElement("a",null,this.state.url||p.url),r.a.createElement("div",{className:"url-desc"},"上传附件链接后自动生成升级链接")),2===m&&r.a.createElement(L.a.Item,{label:"升级链接"},a("url",{rules:[{required:!0,message:"请输入链接"}]})(r.a.createElement(i.a,{placeholder:"请确保链接填写完全正确",style:{width:"calc(53% )"}})),r.a.createElement("div",{className:"url-desc"},"请先将应用包上传到iOS应用市场，然后将获取的链接复制到这里")),r.a.createElement(L.a.Item,{label:"升级方式"},a("status",{initialValue:1,rules:[{required:!0,message:"请选择升级方式"}]})(r.a.createElement(F.a,{showSearch:!0,placeholder:"请选择升级方式",optionFilterProp:"children",style:{width:"calc(53% )",marginRight:"6px"}},r.a.createElement(Se,{value:1},"普通升级"),r.a.createElement(Se,{value:2},"强制升级"))),r.a.createElement(G.a,{title:1===d?"用户可选择是否升级到新版本，不升级仍然可以继续使用":"用户必须确认升级才可以继续使用",placement:"top"},r.a.createElement(be.a,null))),r.a.createElement(M.a,{label:"备注",formId:"releaseNote",astrictNub:100,placeholder:"升级内容的提示信息，用户查看升级时可见。最多输入100个字符。",getFieldDecorator:a,isRequired:!0,getFieldValue:n}))))}}])&&Ae(t.prototype,a),n&&Ae(t,n),l}(n.Component),De=L.a.create({name:"addAppVersion",mapPropsToFields:function(e){var t=e.curAppVersionDetail,a=(e.appInfo.appVersionType,{});if(t)for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];a[o]=L.a.createFormField({value:t[o]})}return a}})(xe),ke=a("3NWV");a("hK2Z");function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],l=!0,c=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(a),!0).forEach((function(t){Le(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Re(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var _e=Object(n.memo)(L.a.create({name:"editApplication",mapPropsToFields:function(e){for(var t=e.appInfo,a={},n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];a[o]=L.a.createFormField(Fe(Fe({},t[o]),{},{value:t[o].value}))}return a}})(Object(n.memo)((function(e){var t=Object(n.useRef)(),a=Te(Object(n.useState)(!1),2),o=a[0],l=a[1],c=e.form,s=c.getFieldDecorator,p=c.getFieldValue;Object(n.useEffect)((function(){var a=e.appInfo.appIconLow,n=[{uid:"-1",name:a.value,status:"done",url:a.value}];t.current.setFileList(n)}),[e]);var u=e.appInfo,m=u.appType,d=u.appId,f=u.appSecret,h=o?f.value:Object(ae.l)(f.value,10),y=o?"eye-invisible":"eye";return r.a.createElement(L.a,Ce({},{labelCol:{span:2},wrapperCol:{span:12}},{className:"edit-application-form"}),r.a.createElement(L.a.Item,{label:"应用名称",wrapperCol:{span:10},hasFeedback:!0},s("appName",{rules:[{required:!0,message:"请输入应用名称"},{max:20,message:"最多可以输入20个字符"}]})(r.a.createElement(i.a,{placeholder:"最多可以输入20个字符"}))),r.a.createElement(V.a,{gutter:8},r.a.createElement(R.a,{span:2,className:"app-icon-low-label"},r.a.createElement("span",{className:"form-require"},"应用图标")),r.a.createElement(R.a,{span:12},r.a.createElement(_.b,{ref:t,format:".png"}))),r.a.createElement(L.a.Item,{label:"应用类型"},0===m.value?"移动应用":"小程序应用"),(0===m.value||void 0===m.value)&&r.a.createElement(L.a.Item,{className:"appVersion",label:"应用包"},r.a.createElement(V.a,{gutter:8},r.a.createElement(R.a,{span:24},"Android版")),r.a.createElement(V.a,{gutter:8},r.a.createElement(R.a,{span:16},r.a.createElement(L.a.Item,{label:"",hasFeedback:!0,labelCol:{span:1},wrapperCol:{span:22},className:"android-input",colon:!1},s("androidPkg",{rules:[{max:200,message:"最多可以输入200个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入应用包名，例如com.example.mirror"})))),r.a.createElement(R.a,{span:8},r.a.createElement(L.a.Item,{label:"",hasFeedback:!0,labelCol:{span:0},wrapperCol:{span:20},className:"android-schema-input",colon:!1},s("androidSchema",{rules:[{max:50,message:"最多可以输入50个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入分享Schema"}))))),r.a.createElement(V.a,{gutter:8},r.a.createElement(R.a,{span:24},"iOS版"),r.a.createElement(R.a,{span:16},r.a.createElement(L.a.Item,{label:"",hasFeedback:!0,labelCol:{span:1},wrapperCol:{span:22},className:"ios-input",colon:!1},s("iosBundleId",{rules:[{max:200,message:"最多可以输入200个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入应用包名，例如com.example.mirror"})))),r.a.createElement(R.a,{span:8},r.a.createElement(L.a.Item,{label:"",hasFeedback:!0,labelCol:{span:0},wrapperCol:{span:20},className:"ios-schema-input",colon:!1},s("iosSchema",{rules:[{max:50,message:"最多可以输入50个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入分享Schema"})))))),"2"===m&&r.a.createElement(L.a.Item,{label:"微信应用ID",hasFeedback:!0},s("weChatAppId",{rules:[{required:!0,message:"请输入在微信申请时的APPID"},{max:100,message:"最多可以输入100个字符"},{pattern:/^[a-zA-Z0-9]*$/,message:"APPID仅支持数字或字母"}]})(r.a.createElement(i.a,{placeholder:"请输入在微信申请时的APPID"}))),"2"===m&&r.a.createElement(L.a.Item,{label:"微信应用Secret",hasFeedback:!0},s("secret",{rules:[{required:!0,message:"请输入在微信申请时的APP的Secret"},{max:100,message:"最多可以输入100个字符"},{pattern:/^[a-zA-Z0-9]*$/,message:"APP的Secret仅支持数字或字母"}]})(r.a.createElement(i.a,{placeholder:"请输入在微信申请时的APP的Secret"}))),r.a.createElement(L.a.Item,{label:"APPID",className:"app-id"},r.a.createElement("span",null,d.value),r.a.createElement("span",{className:"appId-desc"},"由系统自动分配的APP唯一标识码")),r.a.createElement(L.a.Item,{label:"APPSecret",className:"app-secret"},h,r.a.createElement(ke.a,{type:y,className:"icon-display",style:{marginLeft:"10px",fontSize:"18px"},theme:"twoTone",twoToneColor:"#2874FF",onClick:function(){return l(!o)}}),r.a.createElement("span",{className:"secret-desc"},"由系统自动分配的密码")),r.a.createElement(L.a.Item,{label:"应用构建模式",wrapperCol:{span:6}},r.a.createElement("span",null,"开发模式")),r.a.createElement(M.a,{label:"应用简介",formId:"appDesc",astrictNub:100,placeholder:"最多可以输入100个字符",getFieldDecorator:s,isRequired:!0,getFieldValue:p}),r.a.createElement(L.a.Item,null,r.a.createElement(B.a,{preHandle:function(a){a.preventDefault();var n=e.form.validateFieldsAndScroll,r=e.saveAppBaseInfo;n((function(e,a){if(!e){console.log("Received values of form: ",a);var n=t.current.getFileListUrl();if(n.length<=0)return void Object(g.a)({description:"请选择文件!",type:"warn"});a.appIconLow=n[0],r(a)}}))},nextHandle:function(){e.handleCancel("showEditAppForm")},preText:"确认",nextText:"取消",nextType:"default",preType:"primary"})))})))),Be=a("fHMl"),Me=a("9BLJ");a("81qY");function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ze(e){return function(e){if(Array.isArray(e))return Je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Je(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(a),!0).forEach((function(t){We(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function We(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ke(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ye(e);if(t){var r=Ye(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Ge(this,a)}}function Ge(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xe=Y.a.TabPane,et={pageRows:10,pageIndex:1},tt=[{title:"删除应用",desc:"应用删除后将无法继续APPID。即将删除应用",tip:"应用删除操作不可恢复。是否确认删除?",targetName:"我的app"},{title:"删除产品关联",desc:"即将删除产品关联",tip:"是否确认删除?",targetName:"宝莱特血压计"},{title:"删除应用版本",desc:"删除后用户将无法再获取到该版本升级，已升级用户不受影响。即将删除应用版本",tip:"是否确认删除?",targetName:"V1.1.3"}],at=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(l,e);var t,a,n,o=Qe(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).componentDidMount=function(){var e=t.state.appId;t._getAppInfo(e)},t.handleChange=function(e,a){t.setState((function(){return We({},e,a)}))},t.onChange=function(e){t._getVersionList({pageIndex:e,pageRows:5})},t._getVersionList=function(e){var a=t.state.appId;Object(y.c)(y.a.getAppVersionList5x,Ze({appId:a},e),{loading:!0}).then((function(e){var a=e.code,n=e.data;0===a&&"{}"!==JSON.stringify(n)&&t.setState((function(){return{versionList:n}}))}))},t.createAppVersion=function(e){var a=t.state.appId;Object(y.c)(y.a.addAppVersionInfo5x,Ze(Ze({},e),{},{appType:Number(e.appType),status:Number(e.status),appId:Number(a)}),{loading:!0}).then((function(e){0===e.code&&(Object(g.a)({description:"操作成功！",type:"success"}),t.setState((function(e){return{showAppVersionDialog:!e.showAppVersionDialog}}),(function(){t._getVersionList(Ze(Ze({},et),{},{pageRows:5}))})))}))},t.saveAppInfo=function(e){var a=t.state,n=a.appId,r=a.appInfo,o=r.appType.value;e=Ze(Ze({},e),{},{appMode:1,appId:n,appType:Number(o)});var l=0===o?"移动应用编辑成功":"小程序应用编辑成功";2===o&&(e=Ze(Ze({},e),{},{weChatAppId:r.weChatAppId.value,secret:r.secret.value})),Object(y.c)(y.a.saveAppInfo5x,Ze({},e),{loading:!0}).then((function(e){0===e.code&&(Object(g.a)({description:l,type:"success"}),t.setState((function(e){return{showEditAppForm:!e.showEditAppForm}}),(function(){var e=t.state.appId;t._getAppInfo(e)})))}))},t._getRelaProducts=function(e){Object(y.c)(y.a.getRelateProduct5x,{appId:e,paged:!1},{loading:!0}).then((function(e){var a=e.code,n=e.data;if(0===a){var r={listAndroid:[],listIos:[]},o={android:[],ios:[]};n.list&&n.list.length>0&&n.list.forEach((function(e){var t=e.appVersionType,a=e.productId;1===t?(r.listAndroid.push(e),o.android.push(a)):2===t?(r.listIos.push(e),o.ios.push(a)):(r.listAndroid.push(e),r.listIos.push(e),o.ios.push(a),o.android.push(a))})),t.setState((function(){return{relationProductList:r,relationedProductIds:o}}))}}))},t._getAppInfo=function(e){Object(y.c)(y.a.getAppDetail5x,{appId:e},{loading:!0}).then((function(a){var n=a.code,r=a.data;if(0===n){var o={},l=ee()(r);tt[2].targetName=l.appName;for(var c=0,i=Object.keys(l);c<i.length;c++){var s=i[c];o[s]={value:l[s]}}var p=l.androidPkg,u=l.iosBundleId,m=l.appType;t.setState((function(e){return{appInfo:Ze(Ze({},e.appInfo),o),currentAppType:!p&&u?2:1}})),0!==m&&2!==m||(t._getRelaProducts(e),t._getVersionList(Ze(Ze({},et),{},{pageRows:5})))}}))},t.updateOkHandle=function(e){var a=t.state,n=a.curProductID,r=a.curAppVersionId;"relationProduct"===e?t.deleteRelationProduct(n):"appVersion"===e?t.deleteAppVersion(r):t.deleteApp()},t.updateCancelHandle=function(e){t.changeState(e)},t.showDialog=function(e,a,n,r,o){"targetName"===r&&(tt[1].targetName=o),"versionTargetName"===r&&(tt[2].targetName=o),t.setState((function(t){var r;return a||n?(We(r={},e,!t[e]),We(r,a,n),r):We({},e,!t[e])}))},t.deleteRelationProduct=function(e){Object(y.c)(y.a.deleteAppRelaProducts5x,{productId:e,appId:Number(t.state.appId),appType:Number(t.state.currentAppType)},{loading:!0}).then((function(e){0===e.code&&t.setState((function(e){return{showDeleteDialog:!e.showDeleteDialog}}),(function(){t._getRelaProducts(t.state.appId)}))}))},t.deleteAppVersion=function(e){Object(y.c)(y.a.deleteAppVersion5x,{appVersionId:e,appType:t.state.deleteAppVersionItem.appType},{loading:!0}).then((function(e){0===e.code&&(Object(g.a)({description:"删除成功！",type:"success"}),t.setState((function(e){return{showDeleteDialog:!e.showDeleteDialog}}),(function(){t._getVersionList(Ze(Ze({},et),{},{pageRows:5}))})))}))},t.updateRelaProduct=function(e){var a=t.state,n=a.appId,r=a.currentAppType,o=a.relationProductList;1===r?o.listAndroid:o.listIos;Object(y.c)(y.a.updateRelaProduct5x,{productIds:ze(e),appId:Number(n),appType:Number(r)},{loading:!0,needJson:!0,noInstance:!0}).then((function(e){0===e.code&&t.setState((function(e){return{showAddProductRelationDialog:!e.showAddProductRelationDialog}}),(function(){Object(g.a)({message:"关联成功",description:"产品关联成功",type:"success"}),t._getRelaProducts(n)}))}))},t.changeState=function(e){t.setState((function(t){return We({},e,!t[e])}))},t.getAppVersionDetail=function(e){Object(y.c)(y.a.getAppVersionDetail5x,{appVersionId:e},{loading:!0}).then((function(a){var n=a.code,r=a.data;0===n&&t.setState((function(){return{curAppVersionDetail:r}}),(function(){t.showDialog("showAppVersionDialog","curAppVersionId",e)}))}))},t._getAppTypeHTML=function(){var e=t.state,a=e.appInfo,n=e.currentAppType,o=(a.androidPkg,a.iosBundleId,""),l="",i="";return 0===a.appType.value?(o=r.a.createElement(c.a,{onClick:function(){return t.handleChange("currentAppType",1)},type:1===n?"primary":"default",ghost:1===n},"Android端"),l=r.a.createElement(c.a,{onClick:function(){return t.handleChange("currentAppType",2)},type:2===n?"primary":"default",ghost:2===n},"iOS端")):i=r.a.createElement(c.a,{type:"primary",ghost:!0},"小程序"),{appTypeAndroidHTML:o,appTypeIosHTML:l,weChatHTML:i}},t.addNewVersion=function(){t.setState({curAppVersionId:null});var e=t.state.versionList,a=e.appVersionMaxNum,n=void 0===a?0:a,r=e.currentNum;if((void 0===r?0:r)>=n)return Object(g.a)({description:"最多只能创建".concat(n,"个应用版本")});t.showDialog("showAppVersionDialog","curAppVersionDetail",{})},t.getAntDVersionList=function(){var e=t.state.versionList.list.slice();return e.forEach((function(e,t){e.key=e.appVersionId})),{antDVersionList:e,columns:[{title:"版本号",dataIndex:"externalVersion",key:"externalVersion"},{title:"版本类型",dataIndex:"appType",key:"appType",render:function(e){return r.a.createElement("div",{className:"version-type"},1===Number(e)?"Android":"iOS")}},{title:"升级方式",dataIndex:"status",key:"status",render:function(e){return r.a.createElement("div",{className:"upgrade"},1===Number(e)?"普通升级":"强制升级")}},{title:"创建时间",dataIndex:"releaseTime",key:"releaseTime",render:function(e){return e?ae.a.utcToDev(e):"--"}},{title:"操作",dataIndex:"opt",key:"opt",render:function(e,a){return r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return t.getAppVersionDetail(a.appVersionId)}},"编辑"),r.a.createElement("span",null,"  |  "),r.a.createElement("a",{onClick:function(){t.setState({deleteAppVersionItem:a}),t.showDialog("showDeleteDialog","curAppVersionId",a.appVersionId,"versionTargetName",a.externalVersion)}},"删除"))}}]}},t.state={appId:t.props.match.params.appId,showDeleteDialog:!1,showAddProductRelationDialog:!1,showAppVersionDialog:!1,showApplicationDialog:!1,curProductID:null,curAppVersionId:null,currentTab:1,currentAppType:1,curAppVersionDetail:{},appInfo:{appId:{value:""},appName:{value:""},appSecret:{value:""},createTime:{value:""},appType:{value:""},appMode:{value:""},iosBundleId:{value:""},appDesc:{value:""},weChatAppId:{value:""},secret:{value:""},androidPkg:{value:""},appIconLow:{value:""},appVersionType:{value:""}},showSecret:!1,relationProductList:{listAndroid:[],listIos:[]},versionList:{list:[],pager:{}},relationProductJurisdiction:"关联产品",versionPublishJurisdiction:"发布版本",showEditAppForm:!0,relationedProductIds:{},deleteAppVersionItem:{}},t}return t=l,(a=[{key:"render",value:function(){var e=this,t=this.state,a=t.showDeleteDialog,n=t.versionPublishJurisdiction,o=t.relationProductJurisdiction,l=t.versionList,i=t.showAppVersionDialog,m=t.showAddProductRelationDialog,d=t.currentAppType,f=t.showSecret,y=t.appInfo,g=t.relationProductList,v=t.showEditAppForm,E=y.appId,O=y.appName,w=y.appSecret,A=y.appType,P=y.iosBundleId,I=y.androidPkg,N=y.appDesc,j=y.androidSchema,S=y.iosSchema,x=y.appIconLow,D=(y.appVersionType,Number(this.state.currentTab)),k=1===D?"relationProduct":"appVersion",C=f?w.value:Object(ae.l)(w.value,10),T=1===d?g.listAndroid:g.listIos,F=l.pager,L=this._getAppTypeHTML(),_=this.getAntDVersionList(),B=_.antDVersionList,M=_.columns;return r.a.createElement("section",{className:"application-detail-wrapper flex-column"},r.a.createElement("header",{className:"application-detail-header"},r.a.createElement(b.a,{backTitle:"应用详情"},r.a.createElement(te.a,{className:"clearfix"},r.a.createElement("span",{className:"fl app-name"},"应用名称：",O.value),r.a.createElement("span",{className:"fl app-id"},"APPID：",E.value),r.a.createElement("span",{className:"fl app-secret"},"APPSecret：",Object(ae.l)(w.value,10))))),r.a.createElement("div",{className:"antd-content flex-column flex1"},r.a.createElement(Y.a,{defaultActiveKey:"0",onChange:function(t){return e.handleChange("currentTab",t)},tabBarStyle:{background:"#fff",padding:"0 24px"}},r.a.createElement(Xe,{tab:"基础信息",key:"0"},v?r.a.createElement("div",{className:"application-detail-content flex1"},r.a.createElement(c.a,{type:"primary",className:"edit-app",onClick:function(){return e.changeState("showEditAppForm")}},"编辑应用"),r.a.createElement(V.a,{gutter:8,className:"detail-line"},r.a.createElement(R.a,{span:2,className:"detail-left"},"应用名称："),r.a.createElement(R.a,{span:10,className:"detail-right"},O.value)),r.a.createElement(V.a,{gutter:8,className:"detail-line"},r.a.createElement(R.a,{span:2,className:"detail-left"},"应用类型："),r.a.createElement(R.a,{span:21,className:"detail-right"},0===A.value?"移动应用":"小程序应用")),r.a.createElement(V.a,{gutter:8,className:"detail-line"},r.a.createElement(R.a,{span:2,className:"detail-left"},"APPID："),r.a.createElement(R.a,{span:21,className:"detail-right"},E.value,"   ",r.a.createElement(G.a,{title:"由系统自动分配的APP唯一标识码",placement:"top"},r.a.createElement(be.a,{className:"tooltip-icon"})))),r.a.createElement(V.a,{gutter:8,className:"detail-line"},r.a.createElement(R.a,{span:2,className:"detail-left"},"APPSecret："),r.a.createElement(R.a,{span:21,className:"detail-right"},C,f?r.a.createElement(Be.a,{className:"eye-icon",onClick:function(){return e.changeState("showSecret")}}):r.a.createElement(Me.a,{className:"eye-icon",onClick:function(){return e.changeState("showSecret")}}),"   ",r.a.createElement(G.a,{title:"由系统自动分配的密码",placement:"top"},r.a.createElement(be.a,{className:"tooltip-icon"})))),r.a.createElement(V.a,{gutter:8,className:"detail-line app-icon"},r.a.createElement(R.a,{span:2,className:"detail-left"},"应用图标："),r.a.createElement(R.a,{span:21,className:"detail-right"},r.a.createElement(s.a,{icon:x.value}))),r.a.createElement(V.a,{gutter:8,className:"detail-line app-package"},r.a.createElement(R.a,{span:2,className:"detail-left"},"应用包："),r.a.createElement(R.a,{span:21,className:"detail-right"},r.a.createElement("div",{className:"android clearfix"},I.value&&r.a.createElement("div",{className:"android-package fl"},I.value," - Android版"),j&&j.value&&r.a.createElement("div",{className:"android-schema fl"},"分享Schema为 ：",j&&j.value)),r.a.createElement("div",{className:"ios clearfix"},P.value&&r.a.createElement("div",{className:"ios-package fl"},P.value," - iOS版"),S&&S.value&&r.a.createElement("div",{className:"ios-schema fl"},"分享Schema为 ：",S&&S.value)))),r.a.createElement(V.a,{gutter:8,className:"detail-line"},r.a.createElement(R.a,{span:2,className:"detail-left"},"构建模式："),r.a.createElement(R.a,{span:21,className:"detail-right"},"开发模式")),r.a.createElement(V.a,{gutter:8,className:"detail-line"},r.a.createElement(R.a,{span:2,className:"detail-left"},"应用简介："),r.a.createElement(R.a,{span:21,className:"detail-right"},N.value))):r.a.createElement("div",{className:"application-detail-content"},r.a.createElement(_e,{appInfo:y,saveAppBaseInfo:this.saveAppInfo,handleCancel:this.changeState}))),o?r.a.createElement(Xe,{tab:"关联产品",key:"1"},r.a.createElement("div",{className:"application-detail-content flex-column flex1"},r.a.createElement("div",{className:"content flex-column clearfix"},r.a.createElement("div",{className:"content-header"},r.a.createElement("div",{className:"app-type"},L.appTypeAndroidHTML,L.appTypeIosHTML,L.weChatHTML),r.a.createElement(c.a,{type:"primary",className:"add-relation",onClick:function(){return e.showDialog("showAddProductRelationDialog")}},"添加")),r.a.createElement("ul",{className:"product-list flex1"},T&&T.length>0?T.map((function(t,a){var n=t.productId,o=t.productName,l=t.productIcon;return r.a.createElement("li",{key:a,className:"list-item flex-column"},r.a.createElement("i",{className:"product-pic"},r.a.createElement(s.a,{icon:l})),r.a.createElement("div",{className:"product-name single-text flex1 flex-row"},o),r.a.createElement("div",{className:"product-id flex-row flex1"},n),r.a.createElement("a",{onClick:function(){return e.showDialog("showDeleteDialog","curProductID",n,"targetName",o)},className:"delete-product-relation"},r.a.createElement(p.a,{style:{fontSize:20},type:"icon-shanchu"})))})):r.a.createElement(h.a,null))))):null,n&&0==A.value?r.a.createElement(Xe,{tab:"版本发布",key:"2"},r.a.createElement("div",{className:"application-detail-content flex-column flex1"},r.a.createElement("div",{className:"add-version-wrapper"},r.a.createElement("h5",null,"版本历史"),r.a.createElement(c.a,{className:"add-version",type:"primary",onClick:this.addNewVersion},"创建应用版本")),r.a.createElement(Q.a,{className:"version-content",dataSource:B,columns:M,pagination:{onChange:this.onChange,defaultCurrent:1,current:F.pageIndex,pageSize:F.pageRows,total:F.totalRows,showSizeChanger:!1,showQuickJumper:F.totalPages>5}}))):null)),a&&r.a.createElement(u.a,{visible:a,modalOKHandle:function(){return e.updateOkHandle(k)},modalCancelHandle:function(){return e.updateCancelHandle("showDeleteDialog")},targetName:tt[D].targetName,title:tt[D].title,descText:tt[D].desc,needWarnIcon:!0,tipText:tt[D].tip}),m&&r.a.createElement(ye,He({},this.state,{showDialog:this.showDialog,updateRelaProduct:this.updateRelaProduct})),i&&r.a.createElement(De,He({},this.state,{showDialog:this.showDialog,createAppVersion:this.createAppVersion})))}}])&&Ke(t.prototype,a),n&&Ke(t,n),l}(n.PureComponent),nt=Object(o.withRouter)(at);function rt(e){var t=e.match.path;return r.a.createElement(o.Switch,null,r.a.createElement(o.Route,{path:"".concat(t,"/list"),component:k}),r.a.createElement(o.Route,{path:"".concat(t,"/add"),component:K}),r.a.createElement(o.Route,{path:"".concat(t,"/details/:appId"),component:nt}),r.a.createElement(o.Redirect,{to:"".concat(t,"/list")}))}},hK2Z:function(e,t,a){},ivPg:function(e,t,a){e.exports=a.p+"static/images/no-source-tip.681eb7825cf81b5da33967ff8571f3c6.png"},oIco:function(e,t,a){},ojkO:function(e,t,a){},sDFC:function(e,t,a){}}]);