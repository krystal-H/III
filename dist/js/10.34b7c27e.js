(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"17x9":function(e,t,n){e.exports=n("WUjv")(13)},"64SR":function(e,t,n){},"7DmY":function(e,t,n){},"8FWg":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ce}));n("pNMO"),n("4Brf"),n("07d7"),n("0oug"),n("4mDm"),n("PKPk"),n("3bBZ"),n("+2oP"),n("sMBO"),n("pjDv"),n("AUBz");var a=n("ZTPi"),r=(n("rB9j"),n("Rm1S"),n("ma9I"),n("k3Gp"),n("kLXV")),c=(n("1vPl"),n("5rEg")),l=(n("qNb/"),n("PArb")),o=(n("tULf"),n("Vl3Y")),i=(n("5s+n"),n("q1tI")),u=n.n(i),s=n("Nlzp"),m=n("S18n"),d=n("rwTb"),f=n("P2RN"),p=n("DgvE"),b=(n("tkto"),n("TeQF"),n("5DmW"),n("FZtP"),n("27RR"),n("L/Qf"),n("2/Rp")),y=(n("mbEz"),n("wCAj")),v=(n("Y2jk"),n("zeV3")),h=(n("O+5t"),n("wFql")),E=(n("2B1R"),n("ls82"),n("55Ip")),g=n("FC04"),j=(n("Rw2J"),["editing","dataIndex","title","inputType","record","index","children"]);function I(e,t,n,a,r,c,l){try{var o=e[c](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(a,r)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(c.push(a.value),!t||c.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function k(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var A=function(e){var t=e.editing,n=e.dataIndex,a=(e.title,e.inputType,e.record,e.index,e.children),r=k(e,j);return u.a.createElement("td",r,t?u.a.createElement(o.a.Item,{name:n,style:{margin:0,style:"100%"},rules:[{required:!0,message:"请输入IP地址"}]},u.a.createElement(c.a,null)):a)};function P(e){var t=e.projectId,n=N(o.a.useForm(),1)[0],a=N(Object(i.useState)([]),2),r=a[0],c=a[1],l=N(Object(i.useState)(null),2),m=(l[0],l[1],N(Object(i.useState)({}),2)),d=m[0],p=m[1],E=N(Object(i.useState)(""),2),j=E[0],O=E[1],S=N(Object(i.useState)(null),2),x=(S[0],S[1],function(e){return e.whiteListId===j}),k=N(Object(i.useState)(!1),2),P=k[0],C=k[1];Object(i.useEffect)((function(){M()}),[]);var T=function(e){n.setFieldsValue(w({value:""},e)),O(e.whiteListId)},D=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(s.c)(s.a.projectWhiteSave,e,{loading:t}).then((function(e){Object(f.a)({type:"success",description:"新增成功！"}),O(""),M()})).catch((function(e){O(""),M()}))},R=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(s.c)(s.a.projectWhiteSave,e,{loading:t}).then((function(e){Object(f.a)({type:"success",description:"保存成功！"}),O(""),M()})).catch((function(e){O(""),M()}))},F=function(){var e,a=(e=regeneratorRuntime.mark((function e(a){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.validateFields();case 3:(r=e.sent).projectId=t,a.whiteListId?(r.whiteListId=a.whiteListId,R(r)):D(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var c=e.apply(t,n);function l(e){I(c,a,r,l,o,"next",e)}function o(e){I(c,a,r,l,o,"throw",e)}l(void 0)}))});return function(e){return a.apply(this,arguments)}}(),L=[{title:"IP地址",dataIndex:"value",width:300,editable:!0},{title:"操作",dataIndex:"operation",render:function(e,t){return x(t)?u.a.createElement("span",null,u.a.createElement("a",{onClick:function(){return F(t)},style:{marginRight:8}},"保存")):u.a.createElement(v.b,null,u.a.createElement(h.a.Link,{disabled:""!==j,onClick:function(){return T(t)}},"编辑"),u.a.createElement(h.a.Link,{disabled:""!==j,onClick:function(){!function(e){p(e),C(!0)}(t)}},"删除"))}}].map((function(e){return e.editable?w(w({},e),{},{onCell:function(t){return{record:t,inputType:"text",dataIndex:e.dataIndex,title:e.title,editing:x(t)}}}):e})),M=function(){Object(s.c)(s.a.projectWhiteList,{projectId:t}).then((function(e){c(e.data)}))};return u.a.createElement("div",null,u.a.createElement(o.a,{form:n,component:!1},u.a.createElement(y.a,{components:{body:{cell:A}},dataSource:r,columns:L,rowClassName:"editable-row",rowKey:"whiteListId",pagination:!1})),u.a.createElement(b.a,{type:"primary",ghost:!0,className:"edit-table-btn",onClick:function(){!function(){var e=!1;if(j&&(e=!0),r.map((function(t){t.whiteListId||(e=!0)})),!e){var t=JSON.parse(JSON.stringify(r)),n={key:"".concat(t.length+1),value:"",whiteListId:0};t.push(n),c(t),T(n)}}()}},"新增IP"),P&&u.a.createElement(g.a,{visible:P,modalOKHandle:function(){Object(s.c)(s.a.projectWhiteDel,{whiteListId:d.whiteListId}).then((function(e){Object(f.a)({type:"success",description:"删除成功！"}),C(!1),M()}))},modalCancelHandle:function(){C(!1)},targetName:d.funcName,title:"删除",descGray:!0,needWarnIcon:!0,descText:"确定删除此白名单"}))}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(c.push(a.value),!t||c.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function D(e){var t=e.baseInfo,n=e.projectId,a=C(Object(i.useState)({}),2),b=(a[0],a[1],C(o.a.useForm(),1)[0]),y=C(Object(i.useState)(!1),2),v=y[0],h=y[1];return u.a.createElement("div",{id:"project-detail-info"},u.a.createElement("div",{className:"wrap-item"},u.a.createElement("div",{className:"item-title"},u.a.createElement("span",null,"设备信息",u.a.createElement(d.a,{tip:"产品标签是您给产品自定义的标识，您可以使用标签功能实现产品的分类统一管理。"}))),u.a.createElement("div",{className:"item-content"},u.a.createElement("div",{className:"item"},u.a.createElement("div",{className:"label"},"账号名称："),u.a.createElement("div",{className:"name"},u.a.createElement("span",null,t.accountInitName),u.a.createElement("a",{className:"copy",onClick:function(){var e;e=t.accountInitName,Object(p.e)(e)}},"复制"))),u.a.createElement("div",{className:"item"},u.a.createElement("div",{className:"label"},"初始密码："),u.a.createElement("div",{className:"name"},u.a.createElement(m.a,{label:t.accountInitPassword,tip:"点击复制",copy:!0})))),u.a.createElement("div",{className:"item-content"},u.a.createElement("div",{className:"item"},u.a.createElement("div",{className:"label"},"账号 ID："),u.a.createElement("div",{className:"name"},u.a.createElement("span",null,t.accountId))),u.a.createElement("div",{className:"item"},u.a.createElement("div",{className:"label"},u.a.createElement("a",{onClick:function(){h(!0)}},"设置密码"))))),u.a.createElement(l.a,null),u.a.createElement("div",{className:"wrap-item"},u.a.createElement("div",{className:"item-title"},u.a.createElement("span",null,"授权密钥")),u.a.createElement("div",{className:"item-content"},u.a.createElement("div",{className:"item"},u.a.createElement("div",{className:"label"},"项目secretId："),u.a.createElement("div",{className:"name"},t.secretId))),u.a.createElement("div",{className:"item-content"},u.a.createElement("div",{className:"item"},u.a.createElement("div",{className:"label"},"项目SecretKey："),u.a.createElement("div",{className:"name"},u.a.createElement(m.a,{label:t.secretKey,tip:"点击复制",copy:!0}))))),u.a.createElement(l.a,null),u.a.createElement("div",{className:"wrap-item"},u.a.createElement("div",{className:"item-title"},u.a.createElement("span",null,"IP白名单")),u.a.createElement("div",null,u.a.createElement(P,{projectId:n}))),u.a.createElement(r.a,{title:"设置密码",visible:v,onOk:function(){b.validateFields().then((function(e){var n={accountId:t.accountId,password:e.password,oldPassword:e.oldPass};Object(s.c)(s.a.projectSavePS,n,{loading:!0}).then((function(e){Object(f.a)({type:"success",description:"修改成功！"}),h(!1)}))}))},onCancel:function(){h(!1)}},u.a.createElement(o.a,{form:b},u.a.createElement(o.a.Item,{label:"输入旧密码",name:"oldPass",rules:[{required:!0,validator:function(e,n){return n?n==t.accountInitPassword?Promise.resolve():Promise.reject("原始密码有误"):Promise.reject("请输入旧密码")}}]},u.a.createElement(c.a,null)),u.a.createElement(o.a.Item,{label:"输入新密码",name:"password",rules:[{required:!0,message:"请输入新密码"}]},u.a.createElement(c.a,null)))))}function R(){return u.a.createElement("div",null)}n("7W5+");var F=n("8z0m"),L=(n("8/o9"),n("tsqr")),M=(n("EnZy"),n("oVuX"),n("rVDo"),n("z7Xi")),K=["设备ID的长度超过限制","物理地址的长度超限制","设备ID发生重复","物理地址发生重复","设备ID不存在或未联网","物理地址不存在或未联网"];var U=function(e){var t=e.visible,n=e.errorList,a=e.onCancel,c=[{title:"物理地址",dataIndex:"physicalAddress",key:"physicalAddress"},{title:"设备ID",dataIndex:"deviceUniqueId",key:"deviceUniqueId"},{title:"错误原因",dataIndex:"errorType",width:200,key:"errorType",render:function(e,t){var n=t.errorType;return u.a.createElement("span",null,K[n-1])}}];return u.a.createElement(r.a,{visible:t,width:600,className:"romote-modal",title:"设备导入错误日志",centered:!0,closable:!0,onOk:null,onCancel:a,destroyOnClose:!0,footer:null},u.a.createElement("div",{style:{paddingBottom:"20px"}},u.a.createElement(y.a,{columns:c,dataSource:n||[],rowKey:"deviceUniqueId",pagination:{total:n.length,defaultCurrent:1,defaultPageSize:5,showQuickJumper:!1,hideOnSinglePage:!0,size:"small",showTotal:function(e){return u.a.createElement("span",null,"共 ",u.a.createElement("a",null,e)," 条")}}})))};n("vK3N");function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(c.push(a.value),!t||c.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function z(e){var t=e.isModalVisible,n=e.colseMoadl,a=e.cancelModel,l=e.projectId,m=q(o.a.useForm(),1)[0],d=q(Object(i.useState)([]),2),y=d[0],v=d[1],h=q(Object(i.useState)([]),2),E=h[0],g=h[1],j=q(Object(i.useState)(!1),2),I=j[0],O=j[1],w=q(Object(i.useState)(!1),2),S=w[0],N=w[1],x=q(Object(i.useState)([]),2),k=x[0],A=x[1];return u.a.createElement("div",null,u.a.createElement(r.a,{title:"导入设备",visible:t,onOk:function(){m.validateFields().then((function(e){E.every((function(e){if(!e.errorType)return!0}));if(S)Object(f.a)({type:"warn",description:"请导入正确的文件"});else{var t={projectBatch:{batchName:e.name,projectId:l},projectBatchDetailList:k};Object(s.c)(s.a.projectSaveFile,t).then((function(e){Object(f.a)({description:"操作成功！",type:"success"}),n()}))}})).catch((function(e){}))},onCancel:a,width:"650px",wrapClassName:"add-protocols-wrap"},u.a.createElement("div",{style:{padding:"0 80px"},className:"project-import-file-wrap"},u.a.createElement(o.a,{form:m,labelAlign:"right",labelCol:{span:6},wrapperCol:{span:18}},u.a.createElement(o.a.Item,{name:"name",label:"批次名称",rules:[{required:!0}]},u.a.createElement(c.a,{readOnly:!0,placeholder:"默认批次名称为导入时间+导入字样后缀"})),u.a.createElement(o.a.Item,{label:"上传文件",className:"file-form-item",extra:"支持xls、xlsx格式"},u.a.createElement(o.a.Item,{noStyle:!0,rules:[{required:!0,message:"请上传文件"}],name:"upload",getValueFromEvent:function(e){return Array.isArray(e)?e:((-1==["xls","xlsx"].indexOf(e.file.name.split(".").slice(-1)[0])||e.fileList.length>1)&&e.fileList.pop(),e&&e.fileList)}},u.a.createElement(F.a,{customRequest:function(e){Object(s.c)(s.a.projectImportFile,{uploadExcel:e.file},{loading:!0,needFormData:!0},{timeout:3e4}).then((function(t){console.log(m.getFieldsValue()),v((function(t){return[{name:e.file.name,url:""}]}));var n=t.data.every((function(e){if(!e.errorType)return!0}));N(!n),g((function(e){return t.data.filter((function(e){if(e.errorType)return e}))})),A(t.data);var a=p.a.pekingToStr(new Date)+"导入";m.setFieldsValue({name:a})}))},showUploadList:!1,accept:".xls,.xlsx",fileList:y,beforeUpload:function(e,t){return function(e,t,n){return new Promise((function(t,a){return n.indexOf(e.name.split(".").slice(-1)[0])>-1?t(!0):(L.b.error("只能上传".concat(n.join(","),"格式")),a(!1))}))}(e,0,["xls","xlsx"])}},u.a.createElement(b.a,{type:"primary",icon:u.a.createElement(M.a,null)},y.length?"重新上传":"上传附件"))),u.a.createElement("a",{className:"down-model",onClick:function(){window.open("http://skintest.hetyj.com/b325662c4122f1b8948fe07c9d782ecb.xlsx")},style:{marginLeft:"20px"}},"下载模板")),u.a.createElement("div",{className:"project-import-file-list"},y.map((function(e,t){return u.a.createElement("div",{key:t},u.a.createElement("span",{className:"name"},e.name),S&&u.a.createElement("span",{className:"tip",onClick:function(){O(!0)}},"错误日志"))})))))),I&&u.a.createElement(U,{errorList:E,visible:I,onCancel:function(){O(!1)}}))}n("8QGh");var H=n("2fM7"),B=n("BkRI"),J=n.n(B);n("zKZe");function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(c.push(a.value),!t||c.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Z(e,t){var n=e.baseInfo,a=e.projectId,r=G(o.a.useForm(),1)[0],m=G(Object(i.useState)([]),2),d=m[0],f=m[1],v=G(Object(i.useState)(!1),2),h=v[0],E=v[1],j=G(Object(i.useState)("singer"),2),I=(j[0],j[1]),O=G(Object(i.useState)([]),2),w=O[0],S=O[1],N=G(Object(i.useState)({}),2),x=(N[0],N[1]),k=G(Object(i.useState)({pageIndex:1,totalRows:0,pageRows:10}),2),A=k[0],P=k[1],C=G(Object(i.useState)([]),2),T=C[0],D=C[1],R=[{title:"设备ID",dataIndex:"deviceId",key:"deviceId"},{title:"所属产品",dataIndex:"productName",key:"productName"},{title:"绑定来源",dataIndex:"bindSource",key:"bindSource"},{title:"绑定时间",dataIndex:"bindTime",key:"bindTime",render:function(e){return e&&p.a.utcToDev(e)}},{title:"状态",dataIndex:"onlineStatus",key:"onlineStatus"},{title:"所属分组",dataIndex:"groupName",key:"groupName"},{title:"操作",dataIndex:"",key:"",render:function(e,t){return u.a.createElement("span",null,u.a.createElement("a",{onClick:function(){M("singer",t)}},"移除绑定"))}}];Object(i.useEffect)((function(){n.accountId&&L()}),[A.pageIndex,a,n.accountId]),Object(i.useEffect)((function(){F()}),[]);var F=function(){Object(s.c)(s.a.getThirdCategory).then((function(e){f(e.data)}))},L=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=r.getFieldsValue(),c=$($({},A),{},{projectId:a,userId:n.accountId},t);Object(s.c)(s.a.projectInfoDevlist,c,{loading:e}).then((function(e){D(e.data.list),P((function(t){var n=J()(t);return n.totalRows=e.data.pager.totalRows,n}))}))},M=function(e,t){I(e),"singer"==e&&x(t),E(!0)},K={onChange:function(e,t){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",t),S(e)},onSelect:function(e,t,n){}};return Object(i.useImperativeHandle)(t,(function(){return{reFresh:L}})),u.a.createElement("div",null,u.a.createElement("div",{className:"device-info-wrap"},u.a.createElement("div",{className:"filter"},u.a.createElement(o.a,{form:r,layout:"inline"},u.a.createElement(o.a.Item,{name:"batchName",label:"批次名称"},u.a.createElement(c.a,{style:{width:"190px"},placeholder:"请输入批次名称"})),u.a.createElement(o.a.Item,{name:"productId",label:"产品类型"},u.a.createElement(H.a,{style:{width:"200px"},allowClear:!0},d.map((function(e){return u.a.createElement(H.a.OptGroup,{value:e.deviceTypeId,key:e.deviceTypeId},e.deviceTypeName)})))),u.a.createElement(o.a.Item,{name:"groupName",label:"所属分组"},u.a.createElement(c.a,{style:{width:"190px"},placeholder:"请输入分组名称"})),u.a.createElement(o.a.Item,{label:"设备ID"},u.a.createElement(o.a.Item,{name:"deviceId",noStyle:!0},u.a.createElement(c.a,{style:{width:"190px"},placeholder:"输入设备ID"})),u.a.createElement(b.a,{type:"primary",onClick:function(){1==A.pageIndex?L():P((function(e){var t=J()(e);return t.pageIndex=1,t}))}},"查询")))),u.a.createElement("div",{className:"content"},u.a.createElement("div",{className:"action"},u.a.createElement("span",null,"已选择".concat(w.length,"项")),u.a.createElement(l.a,{type:"vertical",style:{borderColor:"#333"}}),u.a.createElement("a",{onClick:function(){M("many")}},"删除")),u.a.createElement(y.a,{dataSource:T,columns:R,rowKey:"deviceId",rowSelection:$({},K),pagination:{defaultCurrent:1,current:A.pageIndex,pageSize:A.pageRows,total:A.totalRows,showSizeChanger:!1,showQuickJumper:A.totalPages>5,onChange:function(e,t){P((function(n){return Object.assign(J()(n),{pageIndex:t===A.pageRows?e:1,pageRows:t})}))},showTotal:function(e){return u.a.createElement("span",null,"共 ",u.a.createElement("a",null,e)," 条")}}}))),h&&u.a.createElement(g.a,{visible:h,modalOKHandle:function(){},modalCancelHandle:function(){return E(!1)},title:"解除绑定",needWarnIcon:!0,tipText:"确认解除绑定？"}))}var _=Object(i.forwardRef)(Z);n("SYor");function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(c.push(a.value),!t||c.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function re(e,t){e.baseInfo;var n=e.projectId,a=ne(o.a.useForm(),1)[0],r=ne(Object(i.useState)([]),2),l=(r[0],r[1],ne(Object(i.useState)(!1),2)),m=(l[0],l[1],ne(Object(i.useState)(!1),2)),d=m[0],f=m[1],v=ne(Object(i.useState)("singer"),2),h=(v[0],v[1],ne(Object(i.useState)(""),2)),E=(h[0],h[1]),j=ne(Object(i.useState)({}),2),I=j[0],O=j[1],w=ne(Object(i.useState)(!1),2),S=w[0],N=w[1],x=ne(Object(i.useState)({pageIndex:1,totalRows:0,pageRows:10}),2),k=x[0],A=x[1],P=ne(Object(i.useState)([]),2),C=P[0],T=P[1],D=[{title:"批次名称",dataIndex:"batchName",key:"batchName"},{title:"创建时间",dataIndex:"createTime",key:"createTime",render:function(e){return e&&p.a.utcToDev(e)}},{title:"导入成功数量",dataIndex:"batchCount",key:"batchCount"},{title:"操作",dataIndex:"",key:"",render:function(e,t){return u.a.createElement("span",null,u.a.createElement("a",{onClick:function(){F(t)}},"查看详情"))}}];Object(i.useEffect)((function(){n&&R()}),[k.pageIndex,n]);var R=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=ee(ee({},k),{},{projectId:n});a.getFieldValue("batchName")&&a.getFieldValue("batchName").trim()&&(t.batchName=a.getFieldValue("batchName")),E(""),Object(s.c)(s.a.projectInfoBatchList,t,{loading:e}).then((function(e){T(e.data.list),A((function(t){var n=J()(t);return n.totalRows=e.data.pager.totalRows,n}))}))},F=function(e){O(e),N(!0)};return Object(i.useImperativeHandle)(t,(function(){return{reFresh:R}})),u.a.createElement("div",null,u.a.createElement("div",{className:"device-info-wrap"},u.a.createElement("div",{className:"filter"},u.a.createElement(o.a,{form:a,layout:"inline"},u.a.createElement(o.a.Item,{label:"批次名称"},u.a.createElement(o.a.Item,{name:"batchName",noStyle:!0},u.a.createElement(c.a,{style:{width:"190px"},placeholder:"请输入批次名称"})),u.a.createElement(b.a,{type:"primary",onClick:function(){1==k.pageIndex?R():A((function(e){var t=J()(e);return t.pageIndex=1,t}))}},"查询")))),u.a.createElement("div",{className:"content"},u.a.createElement(y.a,{dataSource:C,columns:D,rowKey:"batchId",pagination:{defaultCurrent:1,current:k.pageIndex,pageSize:k.pageRows,total:k.totalRows,showSizeChanger:!1,showQuickJumper:k.totalPages>5,onChange:function(e,t){A((function(n){return Object.assign(J()(n),{pageIndex:t===k.pageRows?e:1,pageRows:t})}))},showTotal:function(e){return u.a.createElement("span",null,"共 ",u.a.createElement("a",null,e)," 条")}}}))),d&&u.a.createElement(g.a,{visible:d,modalOKHandle:function(){},modalCancelHandle:function(){return f(!1)},targetName:I.taskName,title:"删除分组",needWarnIcon:!0,descText:"即将删除的分组",tipText:"删除的信息，无法找回，请谨慎操作"}),S&&u.a.createElement(ce,{isModalVisible:S,colseMoadl:function(){N(!1)},actionData:I}))}function ce(e){var t=e.isModalVisible,n=e.colseMoadl,a=e.actionData,c=ne(Object(i.useState)([]),2),l=c[0],o=c[1];Object(i.useEffect)((function(){Object(s.c)(s.a.projectBatchInfo,{batchId:a.batchId}).then((function(e){o(e.data.list)}))}),[]);return u.a.createElement("div",null,u.a.createElement(r.a,{title:"查看详情",footer:null,visible:t,onCancel:n,width:"904px",wrapClassName:"add-protocols-wrap"},u.a.createElement("div",null,u.a.createElement(y.a,{dataSource:l,columns:[{title:"批次名称",dataIndex:"batchName",key:"batchName"},{title:"物理地址",dataIndex:"physicalAddress",key:"physicalAddress"},{title:"设备ID",dataIndex:"deviceUniqueId",key:"deviceUniqueId"},{title:"设备IMEI",dataIndex:"",key:"",render:function(){return"--"}}],scroll:{y:440},rowKey:"detailId",pagination:!1}))))}var le=Object(i.forwardRef)(re);function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(c.push(a.value),!t||c.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ue=a.a.TabPane;function se(e){var t=e.baseInfo,n=e.projectId,r=oe(Object(i.useState)("1"),2),c=r[0],l=r[1],o=oe(Object(i.useState)(!1),2),s=o[0],m=o[1],d=Object(i.useRef)(),f=Object(i.useRef)();return u.a.createElement("div",{className:"page-apilist project-device-wrap"},u.a.createElement("div",{className:"comm-shadowbox common-tab"},u.a.createElement("div",{className:"top-but"},u.a.createElement(b.a,{type:"primary",onClick:function(){m(!0)}},"导入设备")),u.a.createElement(a.a,{onChange:function(e){return function(e){l(e)}(e)},activeKey:c},u.a.createElement(ue,{tab:"设备列表",key:"1"},u.a.createElement(_,{baseInfo:t,projectId:n,ref:d})),u.a.createElement(ue,{tab:"批次管理",key:"2"},u.a.createElement(le,{baseInfo:t,projectId:n,ref:f})))),s&&u.a.createElement(z,{isModalVisible:s,colseMoadl:function(){d.current.reFresh(),f.current.reFresh(),m(!1)},cancelModel:function(){m(!1)},projectId:n}))}var me=n("MeRu");function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(c.push(a.value),!t||c.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}c.a.Search;var ye=function(e){var t=e.changeKey,n=e.projectId,a=(Object(E.useHistory)(),pe(Object(i.useState)({pageIndex:1,totalRows:0,pageRows:10}),2)),r=a[0],c=a[1],o=pe(Object(i.useState)(!1),2),m=(o[0],o[1],pe(Object(i.useState)([]),2)),d=m[0],f=m[1],b=[{title:"API名称",dataIndex:"name",key:"name"},{title:"API详情",dataIndex:"apiDetail",key:"apiDetail"},{title:"项目调用次数",dataIndex:"type",key:"type"},{title:"操作",key:"action",width:200,render:function(e,t){return u.a.createElement("div",{className:"operation"},u.a.createElement("a",{onClick:function(){return v(t.doc)}},"查看文档"),u.a.createElement(l.a,{type:"vertical"}),u.a.createElement("a",{onClick:function(){return h(t)}},"调试"))}}],v=function(e){e?window.open(e):alert("暂无数据！")},h=function(){t("2")},g=function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({projectId:n},r);Object(s.c)(s.a.getProjectApiList,e,{loading:!0}).then((function(e){f(Object(p.b)(e.data.list))}))};return Object(i.useEffect)((function(){g()}),[r.pageIndex,r.pageRows]),u.a.createElement("div",{id:"project-mgt"},u.a.createElement("div",{className:"comm-shadowbox pd22"},u.a.createElement(y.a,{columns:b,className:"ant-table-fixed",rowKey:"apiId",dataSource:d,pagination:{defaultCurrent:1,current:r.pageIndex,pageSize:r.pageRows,total:r.totalRows,showSizeChanger:!1,showQuickJumper:r.totalPages>5,onChange:function(e,t){c((function(n){return Object.assign(J()(n),{pageIndex:t===r.pageRows?e:1,pageRows:t})}))},showTotal:function(e){return u.a.createElement("span",null,"共 ",u.a.createElement("a",null,e)," 条")}}})))},ve=n("zueq");n("7DmY");function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(c.push(a.value),!t||c.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ge=c.a.Search,je=[{key:"1",name:"获取设备信息",id:123},{key:"2",name:"批量移入设备",id:456},{key:"3",name:"修改设备信息",id:789}],Ie="{'code': 1114, msg: 'hello word!'}";var Oe=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e);var t=he(Object(i.useState)(""),2),n=t[0],a=t[1],r=he(o.a.useForm(),1)[0];return u.a.createElement("div",{className:"API-debug"},u.a.createElement("div",{className:"API-debug-left comm-shadowbox"},u.a.createElement(ge,{placeholder:"搜索",allowClear:!0,onSearch:function(e){var t;(t=e)&&t.trim()&&t.trim()},style:{width:"100%"}}),u.a.createElement(y.a,{columns:[{title:"项目名称",dataIndex:"name",key:"name"}],showHeader:!1,onRow:function(e){return function(e){return{onClick:function(){a(e.id)}}}(e)},rowClassName:function(e){return function(e){return e.id===n?"clickRowStyl":""}(e)},className:"ant-table-fixed",rowKey:"taskId",dataSource:je,pagination:!1})),u.a.createElement("div",{className:"API-debug-center comm-shadowbox"},u.a.createElement("div",{className:"title line40"},"获取设备信息"),u.a.createElement("div",{className:"cont"},u.a.createElement("div",{className:"line40"},"参数（请求方式：GET）"),u.a.createElement("div",{className:"bold"},"params"),u.a.createElement("div",{className:"params-box"},u.a.createElement(o.a,{form:r,onFinish:function(e){console.log("Success:",e)},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off"},u.a.createElement(o.a.Item,{label:"device_id",name:"device_id",rules:[{required:!0,message:"请输入参数"}]},u.a.createElement(c.a,{placeholder:"请输入参数"})),u.a.createElement(o.a.Item,{label:"device_id2",name:"device_id2",rules:[{required:!0,message:"请输入参数"}]},u.a.createElement(c.a,{placeholder:"请输入参数"})),u.a.createElement("div",{className:"submit-btn"},u.a.createElement(b.a,{type:"primary",htmlType:"submit"},"发起调用")))))),u.a.createElement("div",{className:"API-debug-right "},u.a.createElement("div",{className:"tip-desc"},u.a.createElement(ve.a,{className:"icon"}),u.a.createElement("span",{className:"tip-text"},"API调试时，平台将使用当前项目的授权密钥（Access ID & Access Secret）获取临时token，对线上资源发起调用，请小心操作。")),u.a.createElement("div",{className:"right-bar comm-shadowbox"},u.a.createElement("div",{className:"right-bar-title line40"},u.a.createElement("span",null,"响应结果"),u.a.createElement("span",{className:"copy",onClick:function(){return Object(p.e)(Ie)}},"复制")),u.a.createElement("div",{className:"right-bar-cont"},Ie))))};n("wH3H");function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(c.push(a.value),!t||c.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Ne=a.a.TabPane;var xe=function(e){var t=e.projectId,n=we(Object(i.useState)("1"),2),r=n[0],c=n[1],l=function(e){c(e)};return u.a.createElement("section",{className:"page-apilist"},u.a.createElement("div",{className:"comm-shadowbox common-tab"},u.a.createElement(a.a,{onChange:function(e){return l(e)},activeKey:r},u.a.createElement(Ne,{tab:"API列表",key:"1"},u.a.createElement(ye,{changeKey:l,projectId:t})),u.a.createElement(Ne,{tab:"调试",key:"2"},u.a.createElement(Oe,null)))))};n("64SR");function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(c.push(a.value),!t||c.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Pe=a.a.TabPane;function Ce(e){var t=e.match,n=ke(Object(i.useState)("1"),2),r=n[0],c=n[1],l=ke(Object(i.useState)(JSON.parse(sessionStorage.getItem("d_data"))),2),o=l[0],m=(l[1],Object(E.useHistory)()),d=Object(i.useMemo)((function(){return Object(p.h)("step")||"1"}),[]),f=t.params.id,b=ke(Object(i.useState)({}),2),y=b[0],v=b[1];Object(i.useEffect)((function(){h()}),[]);var h=function(){Object(s.c)(s.a.projectInfoOverview,{projectId:f}).then((function(e){v(e.data)}))};return Object(i.useEffect)((function(){"2"===d&&c("2")}),[]),u.a.createElement("div",{className:"project-detail-page"},u.a.createElement(me.a,{backTitle:o.projectName,backHandle:function(){m.push("/open/project/projectManage/list")}},u.a.createElement("div",{className:"device-top"},u.a.createElement("div",{className:"device-top-item"},u.a.createElement("label",{className:"device-label"},"项目ID："),u.a.createElement("span",{className:"device-text"}),o.projectId),u.a.createElement("div",{className:"device-top-item"},u.a.createElement("label",{className:"device-label"},"创建时间："),u.a.createElement("span",{className:"device-text"},o.createTime&&p.a.utcToDev(o.createTime))),u.a.createElement("div",{className:"device-top-item"},u.a.createElement("label",{className:"device-label"},"更新时间："),u.a.createElement("span",{className:"device-text"},o.updateTime&&p.a.utcToDev(o.updateTime))))),u.a.createElement("div",{className:"comm-shadowbox common-tab device-content ".concat("2"===r?"api-tab-style":""," ")},u.a.createElement(a.a,{defaultActiveKey:d,onChange:function(e){c(e),m.push("".concat(t.url,"?step=").concat(e))}},u.a.createElement(Pe,{key:"1",tab:"概述"},u.a.createElement(D,{baseInfo:y,projectId:f})),u.a.createElement(Pe,{key:"2",tab:"openAPI"},u.a.createElement(xe,{projectId:f})),u.a.createElement(Pe,{key:"3",tab:"分组"},u.a.createElement(R,null)),u.a.createElement(Pe,{key:"4",tab:"设备"},u.a.createElement(se,{baseInfo:y,projectId:f})))))}},Rw2J:function(e,t,n){},vK3N:function(e,t,n){},wH3H:function(e,t,n){}}]);