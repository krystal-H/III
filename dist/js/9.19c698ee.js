(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"65m2":function(e,t,n){},"6MFL":function(e,t,n){},NAHi:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ae}));n("ef1R"),n("Ra8s"),n("sfoS"),n("HsXu"),n("bs69"),n("Lm8M"),n("ryEf"),n("qgAm"),n("9b3Y"),n("Ck9u");var a=n("T9Mk"),r=n.n(a),i=(n("MNU5"),n("YeX6")),l=(n("vERT"),n("Np80")),c=n("RNOp"),o=n("lqjV"),u=n("L60R"),s=(n("kyDF"),r.a.memo((function(e){var t=e.dataAnalysisName,n=void 0===t?"未命名":t,a=e.analysisiType,s=e.testEnv,d=function(){u.b.next("save")};return r.a.createElement("header",{className:"data-analysis-header"},r.a.createElement("span",{className:"d-a-name"},n),r.a.createElement("div",{className:"tools-wrapper"},3===a?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{type:"primary",size:"small",onClick:function(){u.c.next("text")},icon:r.a.createElement(l.a,null)},"调试"),r.a.createElement(i.a,{type:"primary",size:"small",onClick:d,disabled:![0,1,3].includes(s),icon:r.a.createElement(c.a,null)},"保存"),r.a.createElement(i.a,{type:"primary",size:"small",onClick:function(){u.a.next("publish")},disabled:![1,3].includes(s),icon:r.a.createElement(o.a,null)},"发布")):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{type:"primary",size:"small",onClick:d,icon:r.a.createElement(c.a,null)},"保存"))))}))),d=n("Cr9J"),m=(n("IHDg"),n("P37N"),n("vV4J"),n("av3G"),n("RfWx"),n("UdMA"),n("ViyK")),f=(n("59iL"),n("f6Fh")),p=(n("J2lP"),n("DJj6"),n("62KB"),n("gAA8"),n("0Us0"),n("xzjF"),n("PeP6")),y=(n("RVQw"),n("CXlI")),v=(n("pckg"),n("wJTb"),n("Nlzp"));function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,i=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(c)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}m.a.Search,y.a.TreeNode;var g=p.a.Option;function O(e){var t=e.setSelectedData,n=e.setPropsProductId,i=e.productId,l=E(Object(a.useState)([]),2),c=l[0],o=l[1],u=E(Object(a.useState)(0),2),s=(u[0],u[1],E(Object(a.useState)([]),2)),d=s[0],m=s[1],f=E(Object(a.useState)({properties:[],events:[]}),2),b=f[0],h=f[1],O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.properties,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.events,n=e.map((function(e){var t=e.name,n=e.dataType.type;return{key:"设备属性表.".concat(t),title:"".concat(t," (").concat(n,")")}})),a=t.map((function(e){var t=e.identifier,n=e.name,a=e.outputData,r={title:n,key:"_events_|"+t,disabled:!0};return a&&a.length>0&&(r.children=a.map((function(e){var t=e.name,n=e.dataType.type;return{key:"设备事件表.".concat(t),title:"".concat(t," (").concat(n,")")}}))),r}));return[{title:"设备属性表",key:"设备属性表",children:n},{title:"设备事件表",key:"设备事件表",children:a}]};Object(a.useEffect)((function(){Object(v.c)(v.a.getProductList,{pageRows:9999,instanceId:2},{needVersion:1.2}).then((function(e){var t=e.data&&e.data.list||[];o(t)}))}),[]),Object(a.useEffect)((function(){}),[]),Object(a.useEffect)((function(){i&&function(e){Object(v.c)(v.a.getTsl,{productId:e}).then((function(e){var t=e.data,n=JSON.parse(t),a=n.properties,r=void 0===a?[]:a,i=n.events,l=void 0===i?[]:i;h({properties:r,events:l}),m(O(r,l))}))}(i)}),[i]);return r.a.createElement("div",{className:"sql"},r.a.createElement("div",{className:"tree-content"},r.a.createElement(p.a,{className:"proselect",placeholder:"请先选择产品",value:i,onChange:function(e){n(e),m([])},showSearch:!0,optionFilterProp:"children"},c.map((function(e){var t=e.productId,n=e.productName;return r.a.createElement(g,{key:t,value:t},n)}))),r.a.createElement(y.a,{autoExpandParent:!0,defaultExpandAll:!0,treeData:d,onSelect:function(e){console.log(e),t(e)}})))}function j(e){var t,n=e.setSelectedData,i=e.proLogicData,l=(t="",function e(n){var a=[];for(var r in n){var i=n[r],l={title:r,key:t&&"".concat(t,".").concat(r)||r};i&&"object"===b(i)?(t=t&&"".concat(t,".").concat(r)||r,l.children=e(i)):l.title="".concat(r," (").concat(i,")"),a.push(l)}return t="",a}(i));Object(a.useEffect)((function(){}),[]);return r.a.createElement("div",{className:"sql"},r.a.createElement("div",{className:"tree-content"},r.a.createElement(y.a,{autoExpandParent:!0,defaultExpandAll:!0,treeData:l,onSelect:function(e){console.log(e),n(e)}})))}n("UTJx");var I=n("dVdO"),S=(n("QcZr"),n("b+L2")),w=(n("DBxd"),n("sQtw")),k=(n("V5/z"),n("P9rP")),A=n("CvKH"),T=n.n(A),N=n("SRGg"),C=n("R2s5"),x=(n("hz08"),n("P2RN")),P=n("DgvE");function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,i=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(c)throw r}}return i}(e,t)||L(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=k.a.Panel;C.a.create({name:"sql-config"})((function(e){var t=e.visible,n=e.cancelHandle,a=e.form,i=e.requestList,l=void 0===i?[]:i,c=e.responseList,o=void 0===c?[]:c,u=e.invokeUrl,s=e.setConfigModalData,d=e.saveData,f=e.apiName,p=e.onPage,y=a.getFieldDecorator,v=(a.setFieldsValue,function(e,t,n,a){s((function(r){var i=V({},r);return i[a][t][n]=e,i}))}),b=[{title:"属性名称",dataIndex:"key",key:"key",width:"200px"},{title:"数据类型",dataIndex:"type",key:"type",render:function(e,t,n){var a=t.type;return r.a.createElement("select",{value:a,onChange:function(e){return v(e.target.value,n,"type","requestList")}},r.a.createElement("option",{value:""},"请选择"),r.a.createElement("option",{value:"VARCHAR"},"VARCHAR"),r.a.createElement("option",{value:"INTEGER"},"INTEGER"),r.a.createElement("option",{value:"TIMESTAMP"},"TIMESTAMP"),r.a.createElement("option",{value:"DOUBLE"},"DOUBLE"),r.a.createElement("option",{value:"DATE"},"DATE"))}},{title:"是否必填",dataIndex:"ro",key:"ro",render:function(e,t,n){var a=t.ro;return r.a.createElement(w.a,{checked:a,onChange:function(e){return v(e.target.checked,n,"ro","requestList")}})}}],E=[{title:"属性名称",dataIndex:"key",key:"key",width:"200px"},{title:"数据类型",dataIndex:"type",key:"type",render:function(e,t,n){var a=t.type;return r.a.createElement("select",{value:a,onChange:function(e){return v(e.target.value,n,"type","responseList")}},r.a.createElement("option",{value:""},"请选择"),r.a.createElement("option",{value:"VARCHAR"},"VARCHAR"),r.a.createElement("option",{value:"INTEGER"},"INTEGER"),r.a.createElement("option",{value:"TIMESTAMP"},"TIMESTAMP"),r.a.createElement("option",{value:"DOUBLE"},"DOUBLE"),r.a.createElement("option",{value:"DATE"},"DATE"))}}];return r.a.createElement(I.a,{className:"sql-modal-self-class",visible:t,width:600,title:"生成API",closable:!0,centered:!0,okText:"提交",onOk:function(){a.validateFields((function(e,t){if(!e){var n=!1;if([].concat(q(l),q(o)).forEach((function(e){""===e.type&&(n=!0)})),n)return void Object(x.a)({message:"请为所有参数选择数据类型！"});d(V({},t))}}))},onCancel:n,destroyOnClose:!0,maskClosable:!1},r.a.createElement("div",{className:"sql-config-wrapper"},r.a.createElement(k.a,{defaultActiveKey:["1","2","3","4"]},r.a.createElement(H,{header:"基本信息",key:"1"},r.a.createElement(C.a.Item,{label:"API名称"},y("apiName",{rules:[{required:!0,message:"请输入API名称！"}],initialValue:f})(r.a.createElement(m.a,{placeholder:"请输入API名称！"}))),r.a.createElement(C.a.Item,{label:"ApiSrn"},y("apiSrn",{initialValue:u,rules:[{required:!0,message:"请输入ApiSrn！"}]})(r.a.createElement(m.a,null)))),r.a.createElement(H,{header:"请求参数",key:"2"},r.a.createElement(S.a,{rowKey:"key",columns:b,dataSource:l,pagination:!1})),r.a.createElement(H,{header:"返回参数",key:"3"},r.a.createElement(S.a,{rowKey:"key",columns:E,dataSource:o,pagination:!1})),r.a.createElement(H,{header:"高级设置",key:"4"},r.a.createElement(C.a.Item,null,y("onPage",{valuePropName:"checked",initialValue:p})(r.a.createElement(w.a,null,"开启返回结果分页")))))))}));function U(e){var t=e.visible,n=e.cancelHandle,l=e.params,c=e.sqlTest;console.log("---params--",l);var o=D(Object(a.useState)(new Array(l.length)),2),u=o[0],s=o[1];return r.a.createElement(I.a,{className:"modal-sql-paramsconfig",visible:t,title:"参数配置",closable:!0,centered:!0,footer:null,onCancel:n,destroyOnClose:!0,maskClosable:!1},r.a.createElement("div",{className:"test-config-wrapper"},l.map((function(e,t){return r.a.createElement("div",{key:t,className:"param"},r.a.createElement("span",{className:"key"},e," :"),r.a.createElement(m.a,{className:"input",placeholder:"输入参数值",onChange:function(e){!function(e,t){var n=e.target.value,a=T()(u);a[t]=n,s(a)}(e,t)}}))})),r.a.createElement(i.a,{className:"testbtn",type:"primary",onClick:function(){c(u)}},"开始调试")))}function F(e){var t=e.visible,n=e.cancelHandle,a=e.downHistoryLi,l=e.getDownTslHistory,c=e.downHistoryLoading,o=e.addTslHistory,u=[{title:"导出时间",dataIndex:"createTime",width:150,render:function(e){return r.a.createElement("span",null,P.a.pekingToStr(e))}},{title:"路径地址",dataIndex:"filePath"},{title:"状态",dataIndex:"status",width:90,render:function(e){return r.a.createElement("span",null,{0:"处理中",1:"成功",2:"失败"}[e]||"--")}}];return r.a.createElement(I.a,{className:"modal-downHistoryLi",visible:t,title:"导出列表",closable:!0,centered:!0,footer:null,onCancel:n,destroyOnClose:!0,maskClosable:!1,width:800},r.a.createElement("div",{className:"topbtnbox"},r.a.createElement(i.a,{className:"addbtn",type:"link",onClick:o},"新增导出"),r.a.createElement(N.a,{title:"刷新列表",spin:c,className:"refresh",onClick:l})),r.a.createElement(S.a,{rowKey:"createTime",columns:u,dataSource:a,scroll:{y:600},pagination:!1}))}function K(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function z(e){var t=e.fieldList,n=t.map((function(e,t){var n=T()(e);return n.id=t+1,n})),a=Object.keys(t[0]).map((function(e){return{title:e,dataIndex:e}}));return r.a.createElement("div",{className:"table-filed-content"},r.a.createElement(S.a,{rowKey:"id",columns:[{title:"序号",dataIndex:"id"}].concat(K(a)),dataSource:n,scroll:{y:400},pagination:!1}))}var $=n("54Vy");n("boRK");function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,i=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(c)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Y=f.a.TabPane,W=m.a.TextArea,ee=function(e){return e.match(/(?<={).*?(?=})/g)||[]};function te(e){var t=e.service,n=e.getServeStatu,l=Q(Object(a.useState)(void 0),2),c=l[0],o=l[1],s=t.serviceId,d=t.projectId,p=t.name,y=Q(Object(a.useState)(),2),b=y[0],E=y[1],h=Q(Object(a.useState)([]),2),g=h[0],I=h[1],S=Q(Object(a.useState)("select "),2),w=S[0],k=S[1],A=Q(Object(a.useState)(!1),2),T=A[0],N=A[1],C=Q(Object(a.useState)([]),2),P=C[0],D=C[1],q=Q(Object(a.useState)("TSL"),2),L=q[0],R=q[1],B=Q(Object(a.useState)({}),2),V=B[0],M=B[1],H=Q(Object(a.useState)(!1),2),K=H[0],J=H[1],G=Q(Object(a.useState)(),2),Z=G[0],X=G[1],te=Q(Object(a.useState)([]),2),ne=te[0],ae=te[1],re=Q(Object(a.useState)(!1),2),ie=re[0],le=re[1],ce=Q(Object(a.useState)(!1),2),oe=ce[0],ue=ce[1],se=function(e){var t=e[0];t&&k(w+" "+t)},de=function(){for(var e={},t=ee(w),n=0;n<t.length;n++){var a=t[n],r="{{1@".concat(a,"}}");e[a]=r}return e},me=function(){le(!0),Object(v.c)(v.a.downTslHistory,{flowId:Z}).then((function(e){var t=e.data;ae(void 0===t?[]:t)})).finally((function(){le(!1)}))},fe=function(){var e={};if(P.length>0)for(var t=ee(w),n=0;n<t.length;n++){var a=t[n],r=paramsVal[n];e[a]=r}return e},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];D(e);var t=fe(e),n=v.a.sqlTestProductData,a={sql:w,paramsMap:encodeURI(JSON.stringify(t))};"TSL"==L&&(n=v.a.sqlTestTslData,a.projectId=d,a.productId=c),Object(v.c)(n,a).then((function(e){e.code;var t=e.data,n=void 0===t?[]:t;N(!1),n.length>100&&(n=n.slice(0,100)),I(n)}))};return Object(a.useEffect)((function(){var e=u.b.asObservable().subscribe((function(e){var t=b||(new Date).getTime();Object(v.d)(v.a.saveFlowData,{projectId:d,serviceId:s,lines:"",action:t,nodes:[{nodeType:101,id:1,nodeName:"数据查询起始",location:"",input:JSON.stringify({action:t,authCheck:1,input:ee(w).map((function(e,t){return{param_name:e,param_typ:0,param_required:0,param_default:P[t],param_desc:""}}))}),output:""},{nodeType:3101,id:2,pid:1,nodeName:"数据查询",location:"",input:JSON.stringify({productId:c,projectId:d,logicSql:w,logicName:L,superInstanceId:localStorage.getItem("superInstanceId"),params:JSON.stringify(de())}),output:""},{nodeType:701,id:3,pid:2,nodeName:"数据查询结束",location:"",input:JSON.stringify({source:1,sourceType:0,value:2}),output:""}]},{needJson:!0,noInstance:!0}).then((function(e){Object(x.a)({type:"success",message:"保存成功"}),n()}))})),t=u.a.asObservable().subscribe((function(e){ue(!0)})),a=u.c.asObservable().subscribe((function(e){ee(w).length>0?N(!0):pe()}));return function(){e.unsubscribe(),t.unsubscribe(),a.unsubscribe()}}),[n,s,c,w,L,b]),Object(a.useEffect)((function(){s&&Object(v.c)(v.a.getFlowData,{serviceId:s},{noInstance:!0}).then((function(e){if(e.data){var t=e.data,n=t.flowNodeList,a=void 0===n?[]:n,r=t.flowId,i=t.action;if(X(r),E(i),a&&a.length>1){var l=a[1].input;if(l){var c=JSON.parse(l),u=c.productId,s=c.logicSql,d=c.logicName;k(s),R(d),o(u)}}}}))}),[s]),Object(a.useEffect)((function(){Object(v.c)(v.a.getProLogicTreeData,{},{noInstance:!0}).then((function(e){M(e.data||{})}))}),[]),r.a.createElement("div",{className:"sql-analysis-wrapper"},r.a.createElement("div",{className:"left-wrapper"},r.a.createElement("div",{className:"table-tree-wrapper"},r.a.createElement(f.a,{activeKey:L,className:"tabpane",onChange:function(e){R(e)}},r.a.createElement(Y,{tab:"物模型",key:"TSL"},r.a.createElement(O,{setSelectedData:se,setPropsProductId:o,productId:c})),r.a.createElement(Y,{tab:"逻辑模型",key:"product"},r.a.createElement(j,{setSelectedData:se,proLogicData:V}))))),r.a.createElement("div",{className:"sql-code-edit-wrapper"},r.a.createElement("div",{className:"topbtn"},r.a.createElement(i.a,{type:"primary",size:"small",onClick:function(){J(!0),me()},disabled:"product"==L}," 导出")),r.a.createElement("div",{className:"configitem"},r.a.createElement("span",{className:"itemname"},"SQL语句"),r.a.createElement(W,{rows:8,value:w,onChange:function(e){var t;t=e.target.value,k(t)}})),r.a.createElement("div",{className:"configitem"},r.a.createElement("span",{className:"itemname"},"发布路径"),r.a.createElement(m.a,{value:b,placeholder:"选填",onChange:function(e){!function(e){var t=e.target.value;E(t)}(e)}})),r.a.createElement("div",{className:"configitem"},r.a.createElement("span",{className:"itemname"},"调试结果"),g.length>0&&r.a.createElement(z,{fieldList:g}))),T&&r.a.createElement(U,{visible:!0,params:ee(w),cancelHandle:function(){N(!1)},sqlTest:pe}),r.a.createElement(F,{visible:K,cancelHandle:function(){J(!1)},downHistoryLi:ne,getDownTslHistory:me,downHistoryLoading:ie,addTslHistory:function(){Object(v.c)(v.a.addTslHistory,{sql:w,projectId:d,productId:c,paramsMap:encodeURI(JSON.stringify(fe())),createTime:(new Date).getTime(),flowId:Z}).then((function(e){me()}))}}),r.a.createElement($.d,{visible:oe,envdata:{id:s,actionType:1,name:p},onOk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(v.d)(v.a.servePublish,_({serviceId:s,envType:1,operate:1},e),{timeout:3e5}).then((function(e){Object(x.a)({type:"success",message:"发布成功"}),n()}))},onCancel:function(){return ue(!1)}}))}var ne=n("Ig/K"),ae=n.n(ne);n("65m2"),n("iydO"),n("BpGR");function re(e){var t=e.sqlText,n=e.setSqlText;return r.a.createElement(ae.a,{mode:"sql",theme:"github",height:"100%",width:"100%",value:t,onChange:function(e){n(e)},showGutter:!0,showPrintMargin:!1,enableBasicAutocompletion:!0,name:"sql-edit",editorProps:{$blockScrolling:!0}})}n("oENA");var ie=n("uTCA"),le=(n("OXkf"),n("KZSM"));n("gtRY");function ce(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||me(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,i=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(c)throw r}}return i}(e,t)||me(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){if(e){if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var pe=p.a.Option,ye=[{code:"eventTime",name:"事件时间",type:"varchar",intBit:"",doubleBit:""},{code:"windowEventTime",name:"窗口事件时间",type:"timestamp",intBit:"",doubleBit:""},{code:"deviceId",name:"设备id",type:"varchar",intBit:"",doubleBit:""},{code:"proceTime",name:"当前系统时间",type:"timestamp",intBit:"",doubleBit:""}],ve=C.a.create({name:"sql-link-input-config"})((function(e){var t=e.visible,n=e.cancelHandle,i=e.form,l=e.productList,c=void 0===l?[]:l,o=e.setInputData,u=e.inputData,s=de(Object(a.useState)(u.deviceList||[]),2),d=s[0],f=s[1],y=de(Object(a.useState)([]),2),v=y[0],b=y[1],E=de(Object(a.useState)(0),2),h=E[0],g=E[1],O=de(Object(a.useState)(u.propsOrEventList||[]),2),j=O[0],w=O[1],k=de(Object(a.useState)(u.fields||[].concat(ye)),2),A=k[0],T=k[1],N=i.getFieldDecorator,P=i.setFieldsValue,D=i.getFieldValue,q=u.code,L=void 0===q?"":q,R=u.productId,B=void 0===R?"":R,V=u.deviceIds,M=void 0===V?[]:V,H=u.propEvent,U=void 0===H?"0":H,F=u.fieldsCodes,K=void 0===F?[]:F,J=u.eventOffset,z=void 0===J?"":J,$=function(e,t,n){return Object(le.d)({property:t,productId:e,eventIdentifier:n}).then((function(e){return e&&e.data||[]}))},G=function(e){var t=D("productId");g(e),t?0==e?$(t,e).then((function(e){w(e),P({fieldsCodes:[]})})):function(e){return Object(le.f)({productId:e}).then((function(e){return e&&e.data||[]}))}(t).then((function(e){b(e),P({fieldsCodes:[]})})):Object(x.a)({description:"请先选择一个产品"})},_=function(e,t,n){T((function(a){var r=ce(a);return r[n][e]=t,r}))},Z=[{title:"字段名称",dataIndex:"name",key:"name",width:"100px"},{title:"字段编码",dataIndex:"code",key:"code",width:"100px"},{title:"字段类型",dataIndex:"type",key:"type",width:"100px"},{title:"整数位",dataIndex:"intBit",key:"intBit",width:"100px",render:function(e,t,n){var a=t.intBit;return r.a.createElement("input",{style:{width:"100px"},type:"number",value:a,onChange:function(e){return _("intBit",e.target.value,n)}})}},{title:"小数位",dataIndex:"doubleBit",key:"doubleBit",width:"100px",render:function(e,t,n){var a=t.doubleBit;return r.a.createElement("input",{style:{width:"100px"},type:"number",value:a,onChange:function(e){return _("doubleBit",e.target.value,n)}})}}];return r.a.createElement(I.a,{className:"sql-modal-self-class",visible:t,width:600,title:"输入表",closable:!0,centered:!0,okText:"保存",onOk:function(){i.validateFields((function(e,t){e||(o([ue(ue({},t),{},{fields:A,deviceList:d,propsOrEventList:j})]),n())}))},onCancel:n,destroyOnClose:!0,maskClosable:!1},r.a.createElement("div",{className:"sql-link-input-config-wrapper"},r.a.createElement(C.a,null,r.a.createElement(C.a.Item,{label:"表名称（只允许字母,数字,下划线，必须以字母开头）"},N("code",{rules:[{required:!0,message:"请输入表名称！"},{pattern:/^[a-zA-Z]+[a-zA-Z0-9_]{0,50}$/,message:"格式错误"}],initialValue:L})(r.a.createElement(m.a,{placeholder:"请输入表名称！"}))),r.a.createElement(C.a.Item,{label:"选择产品"},N("productId",{rules:[{required:!0,message:"请选择产品！"}],initialValue:B})(r.a.createElement(p.a,{onChange:function(e){Object(le.a)({productId:e,pageRows:9999}).then((function(e){P({deviceIds:[]}),f(e.data&&e.data.list||[])})),0==D("propEvent")&&$(e,"0").then((function(e){w(e),P({fieldsCodes:[]})}))}},c.map((function(e){var t=e.productId,n=e.productName;return r.a.createElement(pe,{key:t,value:t},n)}))))),r.a.createElement(C.a.Item,{label:"选择设备"},N("deviceIds",{rules:[{required:!0,message:"请选择设备！"}],initialValue:M})(r.a.createElement(p.a,{mode:"multiple"},d.map((function(e){var t=e.deviceId;return r.a.createElement(pe,{key:t,value:t},t)}))))),r.a.createElement(C.a.Item,{label:"输入参数"},N("propEvent",{rules:[{required:!0,message:"请选择输入参数！"}],initialValue:U})(r.a.createElement(ie.a.Group,{onChange:function(e){return G(e.target.value)}},r.a.createElement(ie.a,{value:"0"},"属性"),r.a.createElement(ie.a,{value:"1"},"事件")))),"1"==h&&r.a.createElement(C.a.Item,null,N("eventIdentifier",{rules:[{required:!0,message:"请选择事件！"}]})(r.a.createElement(p.a,{onChange:function(e){var t=D("productId");$(t,1,e).then((function(e){w(e),P({fieldsCodes:[]})}))},placeholder:"请选择事件！"},v.map((function(e){var t=e.identifier,n=e.name;return r.a.createElement(pe,{key:t,value:t},n)}))))),r.a.createElement(C.a.Item,null,N("fieldsCodes",{rules:[{required:!0,message:"请选择".concat("0"===h?"属性":"事件","字段！")}],initialValue:K})(r.a.createElement(p.a,{mode:"multiple",onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=A.filter((function(t){return e.includes(t.code)})),n=t.map((function(e){return e.code})),a=[];e.forEach((function(e){n.includes(e)||a.push(e)})),j.forEach((function(e){var n=e.srcCode,r=e.srcName,i=e.srcType;a.includes(n)&&t.push({code:n,name:r,type:i,intBit:"",doubleBit:""})})),T([].concat(ye,ce(t)))}},j.map((function(e){var t=e.srcName,n=e.srcCode;return r.a.createElement(pe,{key:n,value:n},"".concat(t,"( ").concat(n," )"))}))))),r.a.createElement(C.a.Item,{label:"窗口起始时间偏移（毫秒）"},N("eventOffset",{rules:[{required:!0,message:"请输入窗口起始时间偏移！"}],initialValue:z})(r.a.createElement(m.a,{placeholder:"请输入窗口起始时间偏移！",type:"number"}))),r.a.createElement(C.a.Item,null,r.a.createElement(S.a,{rowKey:"code",columns:Z,dataSource:A,pagination:!1})))))})),be=C.a.create({name:"sql-link-output-config"})((function(e){var t=e.visible,n=e.cancelHandle,l=e.form,c=e.changeOutput,o=e.inputData,u=de(Object(a.useState)(o.dataSourceList||[]),2),s=u[0],d=u[1],f=de(Object(a.useState)(o.tableList||[]),2),y=f[0],v=f[1],b=de(Object(a.useState)(o.fieldsList||[]),2),E=b[0],h=b[1],g=de(Object(a.useState)(o.selectedRowKeys||[]),2),O=g[0],j=g[1],w=l.getFieldDecorator,k=l.setFieldsValue,A=l.getFieldValue,T=o.code,N=o.dsType,P=o.dsId,D=o.tableCode,q=function(e,t,n){h((function(a){var r=ce(a);return r[n][e]=t,r}))},L=[{title:"字段编码",dataIndex:"code",key:"index",width:"100px",render:function(e,t,n){var a=t.code;return"5"==A("dsType")?r.a.createElement("input",{style:{width:"100px"},type:"text",value:a,onChange:function(e){return q("code",e.target.value,n)}}):r.a.createElement("span",null,a)}},{title:"字段类型",dataIndex:"type",key:"type",width:"100px",render:function(e,t,n){var a=t.type;return r.a.createElement("select",{value:a,onChange:function(e){return q("type",e.target.value,n)}},r.a.createElement("option",{value:"varchar"},"varchar"),r.a.createElement("option",{value:"double"},"double"),r.a.createElement("option",{value:"integer"},"integer"),r.a.createElement("option",{value:"time"},"time"),r.a.createElement("option",{value:"date"},"date"),r.a.createElement("option",{value:"timestamp(3)"},"timestamp(3)"),r.a.createElement("option",{value:"varbinary"},"varbinary"),r.a.createElement("option",{value:"decimal"},"decimal"),r.a.createElement("option",{value:"float"},"float"),r.a.createElement("option",{value:"bigint"},"bigint"),r.a.createElement("option",{value:"boolean"},"boolean"),r.a.createElement("option",{value:"tinyint"},"tinyint"),r.a.createElement("option",{value:"smallint"},"smallint"))}},{title:"整数位",dataIndex:"intBit",key:"intBit",width:"100px",render:function(e,t,n){var a=t.intBit;return r.a.createElement("input",{style:{width:"100px"},type:"number",value:a,onChange:function(e){return q("intBit",e.target.value,n)}})}},{title:"小数位",dataIndex:"doubleBit",key:"doubleBit",width:"100px",render:function(e,t,n){var a=t.doubleBit;return r.a.createElement("input",{style:{width:"100px"},type:"number",value:a,onChange:function(e){return q("doubleBit",e.target.value,n)}})}},{title:"操作",dataIndex:"code",key:"code",width:"100px",render:function(e,t,n){return r.a.createElement("a",{style:{marginLeft:"8px"},onClick:function(e){return function(e){h((function(t){return[].concat(ce(t.slice(0,e)),ce(t.slice(e+1)))}))}(n)}},"删除")}}],R={onChange:function(e,t){j(e)},selectedRowKeys:O};return r.a.createElement(I.a,{className:"sql-modal-self-class",visible:t,width:600,title:"输出表",closable:!0,centered:!0,okText:"保存",onOk:function(){l.validateFields((function(e,t){if(!e){var a=[],r=!1;"5"!=A("dsType")?a=E.filter((function(e){return O.includes(e.code)})):(a=ce(E)).forEach((function(e){e.code||(r=!0)})),r&&Object(x.a)({description:"有参数未填完！"}),c(ue(ue({},t),{},{fields:a,fieldsList:E,tableList:y,dataSourceList:s,selectedRowKeys:O})),n()}}))},onCancel:n,destroyOnClose:!0,maskClosable:!1},r.a.createElement("div",{className:"sql-link-input-config-wrapper"},r.a.createElement(C.a,null,r.a.createElement(C.a.Item,{label:"表名称（只允许字母,数字,下划线，必须以字母开头）"},w("code",{rules:[{required:!0,message:"请输入表名称！"},{pattern:/^[a-zA-Z]+[a-zA-Z0-9_]{0,50}$/,message:"格式错误"}],initialValue:T})(r.a.createElement(m.a,{placeholder:"请输入表名称！"}))),r.a.createElement(C.a.Item,{label:"数据源类型"},w("dsType",{rules:[{required:!0,message:"请选择数据源类型！"}],initialValue:N})(r.a.createElement(p.a,{onChange:function(e){Object(le.b)({type:e}).then((function(e){e&&e.data&&(d(ce(e.data)),k({dsId:"",tableCode:""}),v([]),h([]),j([]))}))}},[{key:2,name:"mysql"},{key:5,name:"rocketMq"}].map((function(e){var t=e.name,n=e.key;return r.a.createElement(pe,{key:n,value:n},t)}))))),r.a.createElement(C.a.Item,{label:"数据库"},w("dsId",{rules:[{required:!0,message:"请选择数据库！"}],initialValue:P})(r.a.createElement(p.a,{onChange:function(e){"5"!=A("dsType")&&Object(le.e)({datasourceId:e}).then((function(e){e&&e.data&&(v(e.data),k({tableCode:""}),h([]),j([]))}))}},s.map((function(e){var t=e.name,n=e.id;return r.a.createElement(pe,{key:n,value:n},t)}))))),"5"!=A("dsType")?r.a.createElement(C.a.Item,{label:"数据表"},w("tableCode",{rules:[{required:!0,message:"请选择数据表！"}],initialValue:D})(r.a.createElement(p.a,{onChange:function(e){Object(le.c)({datasourceId:A("dsId"),tableCode:e}).then((function(e){e&&e.data&&(h(e.data.map((function(e){return{code:e.srcCode,type:"varchar",name:e.srcName,intBit:"",doubleBit:""}}))),j([]))}))}},y.map((function(e){var t=e.code;return r.a.createElement(pe,{key:t,value:t},t)}))))):r.a.createElement(C.a.Item,null,r.a.createElement(i.a,{type:"primary",size:"small",onClick:function(){h((function(e){return[].concat(ce(e),[{code:"",type:"varchar",name:"",intBit:"",doubleBit:"",index:1e4*Math.random()}])}))}},"新增一行")),r.a.createElement(C.a.Item,{label:"输出"},r.a.createElement(S.a,{rowKey:"5"!=A("dsType")?"code":"index",rowSelection:"5"!=A("dsType")?R:void 0,columns:"5"!=A("dsType")?L.slice(0,-1):L,dataSource:E,scroll:{y:240},pagination:!1})))))}));n("m/U6");function Ee(e){return function(e){if(Array.isArray(e))return Oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,i=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(c)throw r}}return i}(e,t)||ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){if(e){if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oe(e,t):void 0}}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var je=k.a.Panel;function Ie(e){var t=e.service,n=he(Object(a.useState)(""),2),i=n[0],l=n[1],c=he(Object(a.useState)([]),2),o=c[0],s=c[1],d=he(Object(a.useState)([]),2),m=d[0],f=d[1],p=he(Object(a.useState)([]),2),y=p[0],v=p[1],b=he(Object(a.useState)(!1),2),E=b[0],h=b[1],g=he(Object(a.useState)(!1),2),O=g[0],j=g[1],I=he(Object(a.useState)(-1),2),S=I[0],w=I[1];Object(a.useEffect)((function(){var e=t.projectId,n=t.serviceId;e&&Object(le.h)({projectId:e,pageRows:9999}).then((function(e){e&&e.data&&e.data.list&&f(Ee(e.data.list))})),n&&Object(le.g)({serviceId:n}).then((function(e){if(e.data){var t=e.data.flowNodeList,n=void 0===t?[]:t;if(n&&n.length>0){var a=(n[0]||{}).input;if(a){var r=JSON.parse(a)||{},i=r.inputTable,c=r.outputTable,o=r.sql;s(i||[]),v(c||[]),l(o||"")}}}}))}),[t]),Object(a.useEffect)((function(){var e=u.b.asObservable().subscribe((function(e){var n=t.projectId,a=t.serviceId;Object(le.i)({projectId:n,serviceId:a,lines:"",nodes:[{id:1,pid:null,nodeName:"flinkSql",nodeType:2501,location:"",input:JSON.stringify({nodeType:2501,inputTable:o,outputTable:y,sql:i}),output:""}]}).then((function(){Object(x.a)({type:"success",message:"保存成功"})}))}));return function(){e.unsubscribe()}}),[t,i,o,y]);var A=Object(a.useMemo)((function(){return-1===S?{code:"",dsType:"",dsId:"",tableCode:"",fieldsList:[],tableList:[],dataSourceList:[],fields:[],selectedRowKeys:[]}:y[S]}),[S,y]),T=function(e,t){"input"===e?h(!0):(w(t),j(!0))},N=function(e,t){"input"===e?s([]):v((function(e){return[].concat(Ee(e.slice(0,t)),Ee(e.slice(t+1)))}))};return r.a.createElement("section",{className:"sql-link-wrapper"},r.a.createElement("div",{className:"left-wrapper"},r.a.createElement("div",{className:"input-wrapper"},r.a.createElement("div",{className:"input-title"},"输入表管理",r.a.createElement("span",{className:o.length>0?"disabled":"",onClick:o.length>0?null:function(){return h(!0)}},"添加输入")),r.a.createElement("div",{className:"table-content"},r.a.createElement(k.a,{defaultActiveKey:[]},o.map((function(e,t){var n=e.code,a=e.fields;return n?r.a.createElement(je,{header:r.a.createElement("div",null,r.a.createElement("span",null,n),r.a.createElement("div",{style:{float:"right",marginRight:"12px"},onClick:function(e){return e.stopPropagation()}},r.a.createElement("span",{onClick:function(){return T("input")}},"编辑")," | ",r.a.createElement("span",{onClick:function(){return N("input")}},"删除"))),key:n+t},r.a.createElement("div",null,a.map((function(e,n){var a=e.code,i=e.type;return r.a.createElement("div",{className:"field-p",key:t+a},r.a.createElement("span",null,a),r.a.createElement("span",null,i))})))):null}))))),r.a.createElement("div",{className:"output-wrapper"},r.a.createElement("div",{className:"input-title"},"输出表与维表管理",r.a.createElement("span",{onClick:function(){return j(!0)}},"添加输出或维表")),r.a.createElement("div",{className:"table-content"},r.a.createElement(k.a,{defaultActiveKey:["1"]},y.map((function(e,t){var n=e.code,a=e.fields;return n?r.a.createElement(je,{header:r.a.createElement("div",null,r.a.createElement("span",null,n),r.a.createElement("div",{style:{float:"right",marginRight:"12px"},onClick:function(e){return e.stopPropagation()}},r.a.createElement("span",{onClick:function(){return T("output",t)}},"编辑")," | ",r.a.createElement("span",{onClick:function(){return N("output",t)}},"删除"))),key:n+t},r.a.createElement("div",null,a.map((function(e,n){var a=e.code,i=e.type;return r.a.createElement("div",{className:"field-p",key:t+a},r.a.createElement("span",null,a),r.a.createElement("span",null,i))})))):null})))))),r.a.createElement("div",{className:"right-wrapper"},r.a.createElement(re,{sqlText:i,setSqlText:l})),E&&r.a.createElement(ve,{inputData:o[0]||{},visible:E,productList:m,setInputData:s,cancelHandle:function(){return h(!1)}}),O&&r.a.createElement(be,{inputData:A,visible:O,changeOutput:function(e){var t=Ee(y);S>-1?t[S]=e:t.push(e),v(t)},cancelHandle:function(){j(!1),w(-1)}}))}var Se=n("q5+0");n("6MFL");function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,i=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(c)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ae(){var e=Object(Se.h)(),t=e.projectId,n=e.serviceId,i=decodeURI(Object(P.j)("name")),l=decodeURI(Object(P.j)("desc")),c=+decodeURI(Object(P.j)("analysisiType")||1),o=we(Object(a.useState)(0),2),u=o[0],m=o[1],f=Object(a.useCallback)((function(){Object(v.c)(v.a.getServeStatu,{serveId:n}).then((function(e){e&&e.data&&m(e.data.testEnv)}))}),[n]);return r.a.createElement("section",{className:"data-analysis-wrapper flex-column"},r.a.createElement(s,{dataAnalysisName:i,analysisiType:c,testEnv:+u}),r.a.createElement("section",{className:"flex1"},3===c?r.a.createElement(te,{service:{name:i,desc:l,serviceId:n,projectId:t},getServeStatu:f}):4===c?r.a.createElement(Ie,{service:{name:i,desc:l,serviceId:n,projectId:t}}):r.a.createElement(d.a,{service:{name:i,desc:l,serviceId:n,projectId:t}})))}},boRK:function(e,t,n){},kyDF:function(e,t,n){},"m/U6":function(e,t,n){},wJTb:function(e,t,n){}}]);