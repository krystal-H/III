(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"0Zna":function(e,t,n){},"7TnZ":function(e,t,n){},A5vn:function(e,t,n){},IygI:function(e,t,n){},J2fM:function(e,t,n){},bc1A:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Tn}));n("NBAS"),n("SuFq"),n("tkto"),n("pNMO"),n("zKZe"),n("4Brf"),n("07d7"),n("0oug"),n("4mDm"),n("PKPk"),n("3bBZ");var r=n("E+oP"),a=n.n(r),o=(n("+2oP"),n("2B1R"),n("q1tI")),c=n.n(o),i=n("55Ip"),l=n("/MKj"),s=n("Nlzp"),u=n("vS40"),f=n("MeRu"),p=n("cu44"),m=(n("TeQF"),n("5DmW"),n("FZtP"),n("27RR"),n("Jmwx"),n("BMrR")),d=(n("L/Qf"),n("2/Rp")),y=(n("rO+z"),n("kPKH")),h=(n("tULf"),n("Vl3Y")),b=(n("1vPl"),n("5rEg")),v=(n("O+I2"),n("TeRw"));function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var a=x(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R,C={labelCol:{span:4},wrapperCol:{span:20}},_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(i,e);var t,n,r,a=j(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onFinish=function(e){var n=t.props,r=n.developerInfo.userId,a=n.getDeveloperInfo;Object(s.c)(s.a.upDeveloperInfo,I(I({},e),{},{userId:r}),{loading:!0}).then((function(e){v.a.success({message:"更新成功",description:"用户信息更新成功！"}),a()}))},t.formRef=Object(o.createRef)(),t}return t=i,(n=[{key:"componentDidUpdate",value:function(e){null==e.developerInfo.phone&&this.props.developerInfo.phone&&this.formRef.current.resetFields()}},{key:"render",value:function(){var e=this.props.developerInfo,t=e.phone,n=e.nickName;return c.a.createElement(h.a,E({},C,{onFinish:this.onFinish,initialValues:{phone:t,nickName:n},ref:this.formRef}),c.a.createElement(h.a.Item,{label:"联系人",name:"nickName",rules:[{pattern:/^[a-zA-Z0-9\u4e00-\u9fa5]{2,20}$/,message:"请输入2到20长度的汉字、字母和数字"}]},c.a.createElement(b.a,{placeholder:"请输入联系人"})),c.a.createElement(h.a.Item,{label:"联系电话",name:"phone",rules:[{pattern:/^(((\d{3,4}-)?\d{7,8})|(1\d{10}))$/,message:"请输入固话号码或者手机号码"}]},c.a.createElement(b.a,{placeholder:"请输入联系电话"})),c.a.createElement(h.a.Item,null,c.a.createElement(m.a,null,c.a.createElement(y.a,{span:5}," "),c.a.createElement(y.a,{span:19},c.a.createElement(d.a,{type:"primary",htmlType:"submit"},"保存")))))}}])&&S(t.prototype,n),r&&S(t,r),i}(o.Component),P=n("NJiU"),D=(n("IygI"),n("DgvE"));function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var a=U(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A,V=Object(l.connect)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS()}}),(function(e){return{getDeveloperInfo:function(){return e(Object(u.c)())}}}))(R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(o,e);var t,n,r,a=F(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getSubRights=function(){var e=t.props.developerInfo;(void 0===e?{}:e).isSubUser&&Object(s.b)(s.a.getRightsOneself,{},{loading:!0}).then((function(e){for(var n=[],r=[],a=[],o=e.data,c=0;c<o.length;c++){var i=o[c];"productService"==i.menuCode&&(n=i.checkBoxGroupList),"dataObject"==i.menuCode&&(r=i.checkBoxGroupList),"dataDimension"==i.menuCode&&(a=i.checkBoxGroupList)}t.setState({productResource:n,dataObjRightsList:r,dataDimensionRightsList:a})}))},t.state={productResource:[],dataObjRightsList:[],dataDimensionRightsList:[]},t}return t=o,(n=[{key:"componentDidMount",value:function(){this.getSubRights()}},{key:"componentDidUpdate",value:function(e){var t=this.props.developerInfo.isSubUser;e.developerInfo.isSubUser!==t&&this.getSubRights()}},{key:"render",value:function(){var e=this.state,t=e.productResource,n=e.dataObjRightsList,r=e.dataDimensionRightsList,a=this.props,o=a.developerInfo,i=a.getDeveloperInfo,l=a.isNotSub,s=o.userId,u=o.email,m=o.regTime,d=o.userRole,y=o.parentUserName,h=o.userName;return c.a.createElement("div",{className:"page-userbaseinfo"},c.a.createElement(f.a,{title:"基本资料"}),l?c.a.createElement("div",null,c.a.createElement(p.a,{title:"基本信息",className:"comm-shadowbox"},c.a.createElement("div",{className:"alone-section-content-default base-info"},c.a.createElement("div",{className:"p-flex"},c.a.createElement("span",{className:"flex-item"},c.a.createElement("span",{className:"title"},"开发者ID："),s),c.a.createElement("span",{className:"flex-item"},c.a.createElement("span",{className:"title"},"电子邮箱："),u),c.a.createElement("span",{className:"flex-item"},c.a.createElement("span",{className:"title"},"注册时间："),m?D.a.utcToDev(m):"")))),c.a.createElement(p.a,{title:"联系信息",className:"comm-shadowbox"},c.a.createElement("div",{className:"alone-section-content-default form-wrapper"},c.a.createElement(_,{getDeveloperInfo:i,developerInfo:o})))):c.a.createElement("div",null,c.a.createElement(p.a,{title:"基本信息",className:"comm-shadowbox"},c.a.createElement("div",{className:"alone-section-content-default base-info"},c.a.createElement("div",{className:"p-flex"},c.a.createElement("span",{className:"flex-item"},c.a.createElement("span",{className:"title"},"登录账号："),h),c.a.createElement("span",{className:"flex-item"},c.a.createElement("span",{className:"title"},"所属主帐号："),y),c.a.createElement("span",{className:"flex-item"},c.a.createElement("span",{className:"title"},"账户角色："),d),c.a.createElement("span",{className:"flex-item"},c.a.createElement("span",{className:"title"},"创建时间："),m?D.a.utcToDev(m):"")))),c.a.createElement(P.a,{userCategory:"1",productResource:t,dataObjRightsList:n,dataDimensionRightsList:r})))}}])&&T(t.prototype,n),r&&T(t,r),o}(o.Component))||R,W=(n("rB9j"),n("Rm1S"),n("mbEz"),n("wCAj")),J=(n("k994"),n("NJEC")),K=(n("qNb/"),n("PArb")),Z=(n("5s+n"),n("p532"),n("SYor"),n("ma9I"),n("P2RN"));function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q(e);if(t){var a=Q(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $(this,n)}}function $(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?Y(e):t}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=Object(l.connect)(null,(function(e){return{deleteRole:function(t){return e(Object(u.b)(t))}}}))(A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(o,e);var t,n,r,a=z(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.c)(s.a.getRolePage,e).then((function(e){t.setState({roleList:e.data.list,pager:e.data.pager})})).finally((function(){t.setState({loading:!1})}))},t.deleteRole=function(e){var n=t.state.pager,r=n.totalRows,a=n.pageIndex;a=r%(10*(a-1))>1?a:a-1,t.props.deleteRole(e).then((function(e){e&&(Object(Z.a)({type:"success",description:"删除用户角色成功！"}),t.pagerIndex(a))}))},t.searchProduct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e.trim(),t.setState({loading:!0},(function(){t.getList({pageIndex:1,pageRows:10,roleName:e})}))},t.state={versionList:[],loading:!0,roleList:[],pager:{}},t.columns=[{title:"角色名",dataIndex:"roleName",key:"roleName"},{title:"备注",dataIndex:"remark",key:"remark"},{title:"最新修改时间",dataIndex:"modifyTime",key:"modifyTime",render:function(e){return c.a.createElement("span",null,D.a.utcToDev(e))}},{title:"操作",key:"tags",dataIndex:"tags",render:function(e,n){var r=n.roleId,a=n.roleName,o=n.remark;return c.a.createElement("span",null,c.a.createElement(i.Link,{to:{pathname:"/userCenter/role/edit",search:"?roleId=".concat(r,"&roleName=").concat(encodeURI(a),"&remark=").concat(encodeURI(o))}},"编辑"),c.a.createElement(K.a,{type:"vertical"}),c.a.createElement(J.a,{title:"你确定要删除该角色吗？",onConfirm:t.deleteRole.bind(Y(t),r),okText:"是",cancelText:"否",placement:"topRight"},c.a.createElement("a",null,"删除")))}}],t.pagerIndex=t.pagerIndex.bind(Y(t)),t}return t=o,(n=[{key:"componentDidMount",value:function(){this.getList({pageIndex:1,pageRows:10})}},{key:"pagerIndex",value:function(e){var t=this;this.setState({loading:!0},(function(){t.getList({pageIndex:e,pageRows:10})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.roleList,a=t.pager;return c.a.createElement("div",{className:"role-management"},c.a.createElement(f.a,{title:"用户角色"},c.a.createElement("div",{className:"user-page-content-header"},c.a.createElement("div",{className:"comm-searchBox"},c.a.createElement(b.a.Search,{placeholder:"请输入用户角色名查找",maxLength:20,onSearch:function(t){return e.searchProduct(t)},enterButton:!0})),c.a.createElement("div",{className:"butFloatRight"},c.a.createElement(i.Link,{to:"/userCenter/role/edit"},c.a.createElement(d.a,{type:"primary"},"创建用户角色"))))),c.a.createElement("div",{className:"comm-shadowbox"},c.a.createElement(W.a,{rowKey:"roleId",columns:this.columns,dataSource:r,pagination:{defaultCurrent:a.pageIndex,total:a.totalRows,current:a.pageIndex,hideOnSinglePage:!1,onChange:this.pagerIndex},loading:n})))}}])&&H(t.prototype,n),r&&H(t,r),o}(o.Component))||A,ee=(n("sMBO"),n("AUBz"),n("ZTPi")),te=(n("dlhN"),n("MJZm")),ne=n("BkRI"),re=n.n(ne),ae=(n("pjDv"),n("YGK4"),n("49+q"),n("AVoK"),n("hcok"),n("dNT4"),n("3uUd"),n("tijO"),n("ZY7T"),n("C1JJ"),n("lmH4"),n("Co1j"),n("5JV0"),n("ctDJ"),n("JwUS"),n("qaHo"),n("Si40"),n("BGb9"),n("UxlC"),n("yq1k"),n("JTJg"),n("v7xx"));n("8QW8"),n("A5vn");function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ye(e);if(t){var a=ye(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return de(this,n)}}function de(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he,be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(i,e);var t,n,r,a=me(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).getRights=function(){Object(s.c)(s.a.getRights,{roleId:t.roleId},{loading:!0}).then((function(e){var n=e.data,r=n.checkBoxGroupMenuList,a=void 0===r?[]:r,o=n.menu,c=void 0===o?"[]":o,i=t.addFrontId(a[0].checkBoxGroupList),l=t.addFrontId(a[1].checkBoxGroupList),s=t.getOneTreeData(i,"treeDataObjectCheckeys"),u=t.getOneTreeData(l,"treeDataDimensionCheckeys");t.setState({menu:JSON.parse(c),dataObject:i,dataDimension:l,treeDataObject:s,treeDataDimension:u,treeDataObjectCheckeys:t.treeDataObjectCheckeys,treeDataDimensionCheckeys:t.treeDataDimensionCheckeys}),console.log(JSON.parse(c)),console.log(i)}))},t.addFrontId=function(e){for(var t=re()(e),n=0;n<t.length;n++){var r=t[n];if(t[n].frontId=n+"",r.subBoxs.length>0)for(var a=0;a<r.subBoxs.length;a++){var o=r.subBoxs[a];if(t[n].subBoxs[a].frontId=n+"_"+a,o.subBoxs.length>0)for(var c=0;c<o.subBoxs.length;c++){var i=o.subBoxs[c];if(t[n].subBoxs[a].subBoxs[c].frontId=n+"_"+a+"_"+c,i.subBoxs.length>0)for(var l=0;l<i.subBoxs.length;l++)t[n].subBoxs[a].subBoxs[c].subBoxs[l].frontId=n+"_"+a+"_"+c+"_"+l}}}return t},t.getOneTreeData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return e.map((function(e,r){var a=e.checked,o=e.groupName,c=void 0===o?"":o,i=e.boxName,l=void 0===i?"":i,s=e.subBoxs,u=void 0===s?[]:s,f=e.frontId;a&&t[n].push(f);var p=c||l;return u.length>0?{title:p,key:f,children:t.getOneTreeData(u)}:{title:p,key:f}}))},t.geMenuTreeData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e,t){e.menuname,e.checked,e.items,e.childmenus}))},t.addCheckedFatherId=function(e){for(var t=[],n=function(n){var r=e[n],a=[];r.replace(/_/g,(function(e,t){a.push(r.substring(0,t))})),t=[].concat(se(t),a)},r=0;r<e.length;r++)n(r);return Array.from(new Set(t))},t.getOneComitData=function(e){var n=t.state,r=n.dataObject,a=n.dataDimension,o=n.treeDataObjectCheckeys,c=n.treeDataDimensionCheckeys,i=o,l=r;return"dataDimension"==e&&(i=c,l=a),i=t.addCheckedFatherId(i),t.changChecked(l,i)},t.changChecked=function(e,n){return e.map((function(e){var r=e.frontId,a=e.subBoxs,o=n.includes(r),c=a.length>0&&t.changChecked(a,n)||[],i=ie(ie({},e),{},{checked:o,subBoxs:c});return delete i.frontId,i}))},t.saveOkHandle=function(){t.formRef.current.submit()},t.onFinish=function(e){var n=t.getOneComitData("dataObject"),r=t.getOneComitData("dataDimension"),a=JSON.stringify(t.state.menu),o=[].concat(se(n),se(r)),c=ie(ie({},e),{},{res:[{resource:a,type:"menu"}],dataJson:JSON.stringify(o),roleId:t.roleId});Object(s.c)(s.a.saveRole,c,{loading:!0}).then((function(e){Object(Z.a)({type:"success",description:"用户角色保存成功！"}),t.props.history.push({pathname:"/userCenter/role/list"})}))},t.onCheckNode=function(e,n){t.setState(le({},n,e))},t.roleId=Object(D.h)("roleId")&&decodeURI(Object(D.h)("roleId"))||void 0,t.state={roleName:Object(D.h)("roleName")&&decodeURI(Object(D.h)("roleName"))||"",remark:Object(D.h)("remark")&&decodeURI(Object(D.h)("remark"))||"",menu:[],dataObject:[],dataDimension:[],treeMenu:[],treeDataObject:[],treeDataDimension:[],treeDataObjectCheckeys:[],treeDataDimensionCheckeys:[],treeMenuCheckeys:[]},t.formRef=Object(o.createRef)(),t.treeDataObjectCheckeys=[],t.treeDataDimensionCheckeys=[],t}return t=i,(n=[{key:"componentDidMount",value:function(){this.getRights()}},{key:"render",value:function(){var e=this,t=this.state,n=t.roleName,r=t.remark,a=t.treeDataObject,o=t.treeDataDimension,i=t.treeDataObjectCheckeys,l=t.treeDataDimensionCheckeys;return c.a.createElement("div",{className:"page-role-edit"},c.a.createElement(f.a,{backTitle:this.roleId?"编辑角色":"创建角色"}),c.a.createElement("div",{className:"pagebody comm-shadowbox"},c.a.createElement("div",{className:"mod"},c.a.createElement("div",{className:"tit"},"基础信息"),c.a.createElement(h.a,{onFinish:this.onFinish,initialValues:{roleName:n,remark:r},ref:this.formRef},c.a.createElement(h.a.Item,{label:"角色名",name:"roleName",rules:[{required:!0,message:"请输入角色名"},{max:20,message:"最大输入长度为20字符"}]},c.a.createElement(b.a,{placeholder:"请输入角色名"})),c.a.createElement(h.a.Item,{label:"备注",name:"remark",rules:[{required:!0,message:"请输入备注"},{max:20,message:"最大输入长度为20字符"}]},c.a.createElement(b.a,{placeholder:"请输入备注"})))),c.a.createElement("div",{className:"mod"},c.a.createElement("div",{className:"tit"},"权限配置"),c.a.createElement("div",{className:"treemod"},c.a.createElement("div",{className:"borderbox"},c.a.createElement(ee.a,null,c.a.createElement(ee.a.TabPane,{tab:"数据对象",key:"1"},c.a.createElement(te.a,{checkable:!0,autoExpandParent:!0,onCheck:function(t){e.onCheckNode(t,"treeDataObjectCheckeys")},checkedKeys:i,treeData:a})),c.a.createElement(ee.a.TabPane,{tab:"设备标签",key:"2"},c.a.createElement(te.a,{checkable:!0,autoExpandParent:!0,onCheck:function(t){e.onCheckNode(t,"treeDataDimensionCheckeys")},checkedKeys:l,treeData:o})))),c.a.createElement("div",{className:"borderbox"},c.a.createElement(te.a,{checkable:!0,autoExpandParent:!0,treeData:a})))),c.a.createElement(ae.a,{preBtn:!1,nextHandle:this.saveOkHandle,nextText:this.roleId?"保存":"创建"})))}}])&&fe(t.prototype,n),r&&fe(t,r),i}(o.Component),ve=(n("k3Gp"),n("kLXV")),ge=(n("0lcf"),n("mr32")),Ee=(n("TfFZ"),n("3S7+")),Oe=n("FC04"),Ie=(n("8QGh"),n("2fM7")),we=n("Zsd2"),Se=n.n(we),ke=(n("pDQq"),n("EnZy"),n("2BaD")),je=n("WsrF"),Ne=(n("XlDN"),n("rwTb")),xe=n("M7r8");n("ccuU");function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Te(e);if(t){var a=Te(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Le(this,n)}}function Le(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Be=Ie.a.Option,Fe=[{id:1,text:"自动生成默认密码"},{id:2,text:"手动设置登录密码"}],Me=Object(l.connect)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS()}}),null)(he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(o,e);var t,n,r,a=De(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).addUserList=function(){var e=t.state.userNameList;if(e.length>=10)return Object(Z.a)({description:"添加用户一次最多添加10个！"}),!1;e.push(""),t.setState({userNameList:e})},t.deleteUserList=function(e){var n=t.state.userNameList;n.splice(e,1),t.setState({userNameList:n})},t.accountSelect=function(e){t.setState({userCategory:e}),t.props.form.resetFields("roleId")},t.roleSelect=function(e){t.setState({roleId:e})},t.resetSelect=function(e){1==e?(t.setState({resetSelectId:e}),setTimeout((function(){t.props.form.setFieldsValue({password:"a123456"})}),100)):(t.setState({resetSelectId:e}),t.props.form.setFieldsValue({password:""}))},t.userName=function(e,n){var r=t.state.userNameList;r[e]=n.target.value,t.setState({userNameList:r})},t.passwordInput=function(e){t.setState({password:e.target.value})},t.ipWhiteSelectFunc=function(e){t.setState({ipWhiteSelect:e})},t.ipWhiteListFunc=function(e){t.setState({ipWhiteList:e.target.value})},t.remark=function(e){t.setState({remark:e.target.value})},t.affirm=function(e){e.preventDefault(),(0,t.props.form.validateFieldsAndScroll)((function(e,n){if(!e){for(var r=t.state,a=r.userNameList,o=r.userCategory,c=r.ipWhiteSelect,i=0;i<a.length;i++){if(a[i]=Se()(a[i]),!a[i])return Object(Z.a)({description:"请填写用户名称！"}),!1;if(a[i]=a[i].split("@")[0],!Object(D.d)(a[i]))return Object(Z.a)({description:"请正确格式的用户名称！大小写字母+数字6~14位"}),!1}for(var l=0;l<a.length;l++)for(var u=a[l],f=l+1;f<a.length;f++){if(u==a[f])return Object(Z.a)({description:"第"+(l+1)+"跟第"+(f+1)+"个用户名重复，请重新输入！"}),!1}for(var p=0;p<a.length;p++)a[p]=a[p]+"@"+t.props.developerInfo.id;var m={userNameList:a,roleId:n.roleId,userCategory:n.userCategory};if(1==o&&n.password&&(m.password=Object(D.g)(n.password)),2==o&&c){var d=n.ipWhiteList;if(d){if(d.split(",").length>10)return Object(Z.a)({description:"IP白名单最多添加10条！"}),!1;m.ipWhiteList=d}}n.remark&&(m.remark=n.remark),Object(s.c)(s.a.addMultiChild,m,{needJson:!0}).then((function(e){0==e.code&&(Object(Z.a)({type:"success",description:"用户创建成功！"}),t.setState({userNameList:[""],userCategory:1,roleId:null,resetSelectId:"",password:"",ipWhiteSelect:!1,ipWhiteList:"",remark:""},(function(){t.props.form.resetFields(),t.props.onAddClose(),t.props.pagerIndex(1)})))}))}}))},t.passwordCheck=function(e,t,n){/^^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$/.test(t)?n():n("密码格式为大小写字母加数字，长度为6-18")},t.state={userNameList:[""],userCategory:1,roleList_1:[],roleList_2:[],roleId:null,resetSelectId:"",password:"",ipWhiteSelect:!1,ipWhiteList:"",remark:""},t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.onRef(this),Object(s.b)(s.a.getRoleList).then((function(t){if(0==t.code){for(var n=[],r=[],a=0;a<t.data.length;a++){var o=t.data[a];1==o.userCategory?n.push(o):r.push(o)}e.setState({roleList_1:n,roleList_2:r})}}))}},{key:"render",value:function(){var e=this,t=this.props.form,n=t.getFieldDecorator,r=t.getFieldValue,a=this.state,o=a.userCategory,i=(a.roleId,a.resetSelectId),l=(a.ipWhiteSelect,a.ipWhiteList,a.password,a.remark),s=a.userNameList,u=a.roleList_1,f=a.roleList_2;o=r("userCategory"),i=r("resetSelectId");var p=1==o?u:f,h=this.props.developerInfo.id;return c.a.createElement(je.a,Ce({},{labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:19},sm:{span:19}}},{onSubmit:this.affirm,className:"add-user-box"}),c.a.createElement("div",{className:"add-user-box"},c.a.createElement("div",{className:"common_title_input"},c.a.createElement(m.a,{gutter:8},c.a.createElement(y.a,{span:5,className:"label"},c.a.createElement("span",{className:"form-require on-require"},c.a.createElement(Ne.a,{label:"用户名",tip:"控制台访问时的登录名。"}))),c.a.createElement(y.a,{span:19},s.map((function(t,r){return c.a.createElement("div",{className:"uesrName",key:"productName"+r},c.a.createElement(je.a.Item,{label:"",hasFeedback:!0,colon:!1},n("productName_"+r,{rules:[{required:!0,min:6,max:14,message:"请输入6~14位大小写字母＋数字"}]})(c.a.createElement(b.a,{className:"input",style:{width:"300px"},placeholder:"请输入用户名称",suffix:"@"+h,onChange:e.userName.bind(e,r)}))),r>0?c.a.createElement("span",{className:"delete",onClick:e.deleteUserList.bind(e,r)},c.a.createElement(ke.a,null)):null)})))),c.a.createElement("span",{className:"addUesr explainLink-N",onClick:this.addUserList},"添加用户")),c.a.createElement("div",{className:"common_title_input"},c.a.createElement(je.a.Item,{label:"账户类型",hasFeedback:!0},n("userCategory",{rules:[{required:!0,message:"请选择账户类型"}],initialValue:1})(c.a.createElement(Ie.a,{style:{width:"180px"},onChange:this.accountSelect},c.a.createElement(Be,{key:"1账户类型",value:1},"控制台访问用户"),c.a.createElement(Be,{key:"2账户类型",value:2},"接口访问用户"))))),c.a.createElement("div",{className:"common_title_input"},c.a.createElement(je.a.Item,{label:"用户角色",hasFeedback:!0},n("roleId",{rules:[{required:!0,message:"请选择用户角色"}]})(c.a.createElement(Ie.a,{showSearch:!0,style:{width:"180px"},placeholder:"请选择",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},p.map((function(e,t){return c.a.createElement(Be,{key:t+"用户角色",value:e.roleId},e.roleName)})))))),1==o?c.a.createElement("div",{className:"common_title_input"},c.a.createElement("div",{className:"reset-select"},c.a.createElement(je.a.Item,{label:"登录密码",hasFeedback:!0},n("resetSelectId",{rules:[{required:!0,message:"请选择密码生成方式"}]})(c.a.createElement(Ie.a,{style:{width:"180px"},placeholder:"请选择",onChange:this.resetSelect},Fe.map((function(e,t){return c.a.createElement(Be,{key:t+"登录密码",value:e.id},e.text)}))))),i?c.a.createElement(je.a.Item,{label:" ",colon:!1},n("password",{rules:[{required:!0,validator:this.passwordCheck,message:"密码格式为大小写字母加数字，长度为6-18"}]})(1==i?c.a.createElement(b.a,{style:{width:"240px"},disabled:!0}):c.a.createElement(b.a.Password,{style:{width:"240px"},placeholder:"密码格式为大小写字母加数字，长度为6-18"}))):null)):null,null,c.a.createElement("div",{className:"common_title_input"},c.a.createElement(xe.a,{label:"备注",formId:"remark",astrictNub:"100",rows:"2",placeholder:"请输入备注",getFieldDecorator:n,initialVal:l,width:"300px",getFieldValue:r}))),c.a.createElement("div",{className:"but"},c.a.createElement(d.a,{type:"primary",htmlType:"submit"},"确定"),c.a.createElement(d.a,{className:"cancel",onClick:this.props.onCancel},"取消")))}}])&&_e(t.prototype,n),r&&_e(t,r),o}(o.Component))||he,Ue=je.a.create({name:"addUserInfo"})(Me),Ae=(n("y1Sk"),n("wd/R")),Ve=n.n(Ae);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ge(e);if(t){var a=Ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?He(e):t}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(o,e);var t,n,r,a=Ze(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.c)(s.a.getChildlist,e).then((function(e){t.setState({userList:e.data.list,pager:e.data.pager,loading:!1})}))},t.addUser=function(){t.setState({addUserVisible:!0})},t.searchProduct=function(e){t.state.pageIndex;t.setState({loading:!0,userName:e},(function(){t.pagerIndex(1)}))},t.startOrForbidden=function(e,n,r){1==e?t.setState({forbiddenModalVisible:!0,userName:n,userId:r}):0==e&&t.setState({startModalVisible:!0,userName:n,userId:r})},t.startModal=function(e){if(1==e){var n=t.state,r=n.userId,a=n.pageIndex;a=a||1,Object(s.b)(s.a.unfreezeChild,{userId:r}).then((function(e){0==e.code&&t.setState({loading:!0},(function(){t.getList({pageIndex:a,pageRows:10})}))}))}t.setState({startModalVisible:!1})},t.forbiddenModal=function(e){if(1==e){var n=t.state,r=n.userId,a=n.pageIndex;a=a||1,Object(s.b)(s.a.freezeChild,{userId:r}).then((function(e){0==e.code&&t.setState({loading:!0},(function(){t.getList({pageIndex:a,pageRows:10})}))}))}t.setState({forbiddenModalVisible:!1})},t.delete=function(e){t.setState({deleteModalVisible:!0,userId:e})},t.inputOnChangeHandle=function(e){t.setState({deleteInputValue:e.target.value})},t.deleteModal=function(e){if(1==e){if("delete"!=t.state.deleteInputValue)return Object(Z.a)({type:"info",description:"请输入delete确认删除！"}),!1;var n=t.state,r=n.userId,a=n.pageIndex,o=n.pager;a=a||1,Object(s.b)(s.a.deleteChild,{userId:r}).then((function(e){0==e.code&&t.setState({loading:!0,deleteInputValue:""},(function(){a=o.totalRows%(10*(a-1))>1?a:a-1,t.getList({pageIndex:a,pageRows:10})}))}))}t.setState({deleteModalVisible:!1})},t.addUserModal=function(e){1==e?t.addUserRefs.affirm():(t.setState({addUserVisible:!1}),t.addUserRefs.setState({userNameList:[""],userCategory:1,roleId:null,resetSelectId:"",password:"",ipWhiteSelect:!1,ipWhiteList:"",remark:""}),t.addUserRefs.props.form.resetFields())},t.closeAdd=function(){t.setState({addUserVisible:!1})},t.pagerIndex=function(e){t.setState({pageIndex:e,loading:!0},(function(){t.getList({pageIndex:e,pageRows:10,userName:t.state.userName||void 0})}))},t.state={loading:!0,userList:[],pager:{},addUserVisible:!1,userName:"",userId:"",startModalVisible:!1,forbiddenModalVisible:!1,deleteModalVisible:!1,deleteInputValue:"",deleteId:"",pageIndex:""},t.columns=[{title:"用户名",dataIndex:"userName",key:"userName",render:function(e){return c.a.createElement(Ee.a,{placement:"topLeft",title:e},c.a.createElement("a",null,e))}},{title:"用户角色",dataIndex:"roleName",key:"roleName",render:function(e){return c.a.createElement(Ee.a,{placement:"topLeft",title:e}," ",c.a.createElement("span",null,e)," ")}},{title:"账户类型",dataIndex:"userCategory",key:"userCategory",width:"170px",render:function(e){return c.a.createElement("span",null,c.a.createElement(ge.a,{color:1==e?"blue":"green"},1==e?"控制台访问用户":"接口访问用户"))}},{title:"备注",dataIndex:"remark",key:"remark",render:function(e){return c.a.createElement(Ee.a,{placement:"topLeft",title:e}," ",c.a.createElement("span",null,e)," ")}},{title:"用户状态",dataIndex:"status",key:"status",width:"100px",render:function(e,t){return 1==t.status?c.a.createElement("span",{className:"colordot colordotgreen"},"正常"):c.a.createElement("span",{className:"colordot colordotred"},"停用")}},{title:"创建时间",dataIndex:"regTime",key:"regTime",width:"160px",render:function(e){return c.a.createElement("span",null,Ve()(e).add(8,"h").format("YYYY-MM-DD HH:mm:ss"))}},{title:"操作",key:"action",width:"140px",render:function(e,n){var r=n.userId,a=n.userCategory,o=n.status,l=n.userName;return c.a.createElement("span",null,c.a.createElement(i.Link,{to:{pathname:"/userCenter/visitUser/detail",search:"?userId=".concat(r,"&userCategory=").concat(a)}},"查看"),c.a.createElement(K.a,{type:"vertical"}),1==o?c.a.createElement("a",{onClick:t.startOrForbidden.bind(He(t),1,l,r),style:{color:"#FF3100"}},"停用"):c.a.createElement("a",{onClick:t.startOrForbidden.bind(He(t),0,l,r)},"启用"),c.a.createElement(K.a,{type:"vertical"}),c.a.createElement("a",{onClick:t.delete.bind(He(t),r)},"删除"))}}],t}return t=o,(n=[{key:"componentDidMount",value:function(){this.getList({pageIndex:1,pageRows:10})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.userName,a=t.addUserVisible,o=t.startModalVisible,i=t.forbiddenModalVisible,l=t.deleteModalVisible,s=t.deleteInputValue,u=t.userList,p=t.pager;return c.a.createElement("div",{className:"user-visit-box"},c.a.createElement(f.a,{title:"访问用户"},c.a.createElement("div",{className:"user-page-content-header"},c.a.createElement("div",{className:"comm-searchBox"},c.a.createElement(b.a.Search,{placeholder:"请输入用户名查找",enterButton:!0,maxLength:20,onSearch:function(t){return e.searchProduct(t)}})),c.a.createElement("div",{className:"butFloatRight"},c.a.createElement(d.a,{className:"but-add",type:"primary",onClick:this.addUser},"创建用户")))),c.a.createElement("div",{className:"comm-shadowbox"},c.a.createElement(W.a,{rowKey:"userId",columns:this.columns,dataSource:u,pagination:{defaultCurrent:p.pageIndex,total:p.totalRows,hideOnSinglePage:!1,onChange:this.pagerIndex,current:p.pageIndex},loading:n})),c.a.createElement(ve.a,{title:"创建用户",visible:a,onOk:this.addUserModal.bind(this,1),onCancel:this.addUserModal.bind(this,2),maskClosable:!1,className:"self-modal",footer:null},c.a.createElement(Ue,{onAddClose:this.closeAdd,onCancel:this.addUserModal.bind(this,2),pagerIndex:this.pagerIndex,onRef:function(t){return e.addUserRefs=t}})),c.a.createElement(Oe.a,{visible:o,modalOKHandle:this.startModal.bind(this,1),modalCancelHandle:this.startModal.bind(this,2),title:"启用用户",tipText:"启用用户后，该用户将恢复访问。",descText:"即将启用用户",targetName:r}),c.a.createElement(Oe.a,{visible:i,modalOKHandle:this.forbiddenModal.bind(this,1),modalCancelHandle:this.forbiddenModal.bind(this,2),title:"停用用户",tipText:"停用用户后，该用户将暂时无法访问，您可以重新启用账户。",descText:"即将停用用户",needWarnIcon:!0,targetName:r}),c.a.createElement(Oe.a,{visible:l,modalOKHandle:this.deleteModal.bind(this,1),modalCancelHandle:this.deleteModal.bind(this,2),title:"删除用户",tipText:"删除用户将同步删除UUID和用户SecretKey，无法找回，请谨慎操作。",descText:"即将删除用户",needWarnIcon:!0,targetName:r},c.a.createElement(b.a,{className:"modal-content-input",onChange:this.inputOnChangeHandle,placeholder:"请输入“delete”确认删除该用户",maxLength:20,value:s})))}}])&&Je(t.prototype,n),r&&Je(t,r),o}(o.Component),$e=n("S18n");function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nt(e);if(t){var a=nt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return tt(this,n)}}function tt(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rt,at=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(o,e);var t,n,r,a=et(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={},t}return t=o,(n=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.userInfo,n=e.secretKey,r=e.secretId,a=function(e){var t=e.title,n=e.label,r=e.type;return c.a.createElement("p",{className:"list-item"},c.a.createElement("span",{className:"title"},t,"："),"visible"===r?c.a.createElement($e.a,{label:n||"",tip:"点击复制",copy:!0}):c.a.createElement("span",null,n))};return c.a.createElement("div",{className:"basic-information-box"},c.a.createElement(d.a,{className:"but-edit basic-information-edit",type:"primary",onClick:this.props.editUserInfo},"编辑"),c.a.createElement(p.a,{title:"基础信息"},c.a.createElement("div",{className:"device-info"},c.a.createElement(a,{title:"用户名",label:t.userName||"--"}),c.a.createElement(a,{title:"用户ID",label:t.userId||"--"}),c.a.createElement(a,{title:"账户类型",label:1==t.userCategory?"控制台访问用户":2==t.userCategory?"接口访问用户":"--"}),c.a.createElement(a,{title:"用户角色",label:t.roleName||"--"}),2==t.userCategory&&c.a.createElement(a,{title:"用户secretId",label:r,type:"visible"}),2==t.userCategory&&c.a.createElement(a,{title:"用户SecretKey",label:n,type:"visible"}),c.a.createElement(a,{title:"创建时间",label:D.a.utcToDev(t.regTime)}),c.a.createElement(a,{title:"最新修改时间",label:D.a.utcToDev(t.modifyTime)})),c.a.createElement("p",{className:"userlook-mark"},c.a.createElement("span",null,"备注："),t.remark)))}}])&&Qe(t.prototype,n),r&&Qe(t,r),o}(o.Component),ot=(n("+vQn"),n("Sdc0"));n("7TnZ");function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(){return(it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pt(e);if(t){var a=pt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ft(this,n)}}function ft(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mt=Ie.a.Option,dt=[{id:1,text:"自动生成默认密码"},{id:2,text:"手动设置登录密码"}],yt=Object(l.connect)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS()}}),null)(rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(o,e);var t,n,r,a=ut(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).backfill=function(e){t.setState({userName:e.userName||null,remark:e.remark||"",roleId:e.roleId||null,ipWhiteSelect:!!e.ipWhiteList,ipWhiteList:e.ipWhiteList,resetChecked:!1})},t.roleSelect=function(e){t.setState({roleId:e})},t.reset=function(e){t.setState({resetChecked:e})},t.resetSelect=function(e){1==e?(t.setState({resetSelectId:e}),setTimeout((function(){t.props.form.setFieldsValue({password:"a123456"})}),100)):(t.setState({resetSelectId:e}),t.props.form.setFieldsValue({password:""}))},t.passwordInput=function(e){t.setState({password:e.target.value})},t.ipWhiteSelectFunc=function(e){t.setState({ipWhiteSelect:e})},t.ipWhiteListFunc=function(e){t.setState({ipWhiteList:e.target.value})},t.userName=function(e){t.setState({userName:e.target.value})},t.remark=function(e){t.setState({remark:e.target.value})},t.affirm=function(e){e.preventDefault(),(0,t.props.form.validateFieldsAndScroll)((function(e,n){if(!e){var r=t.state,a=r.resetChecked,o=r.ipWhiteSelect,c=t.props.userData,i=c.userId,l=c.userCategory,u=n.roleId,f=(n.userName,n.password),p=n.ipWhiteList,m=n.remark,d={userId:i,roleIds:u};if(1==l&&a&&(d.password=Object(D.g)(f)),2==l&&o){if(p){if(p.split(",").length>10)return Object(Z.a)({description:"IP白名单最多添加10条！"}),!1;d.ipWhiteList=p}}else 2!=l||o||(d.ipWhiteList="");m&&(d.remark=m),Object(s.c)(s.a.updateChild,d,{needFormData:!0,loading:!0}).then((function(e){0==e.code&&t.props.handleClose()}))}}))},t.passwordCheck=function(e,t,n){/^^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$/.test(t)?n():n("密码格式为大小写字母加数字，长度为6-18")},t.state={resetChecked:!1,resetSelectId:null,password:null,userName:t.props.userData.userName||null,remark:t.props.userData.remark||"",roleId:t.props.userData.roleId||null,roleList_1:[],roleList_2:[],ipWhiteSelect:!!t.props.userData.ipWhiteList,ipWhiteList:t.props.userData.ipWhiteList},t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.onRef(this),Object(s.b)(s.a.getRoleList).then((function(t){if(0==t.code){for(var n=[],r=[],a=0;a<t.data.length;a++){var o=t.data[a];1==o.userCategory?n.push(o):r.push(o)}e.setState({roleList_1:n,roleList_2:r})}}))}},{key:"render",value:function(){var e=this.state,t=e.resetChecked,n=e.remark,r=e.userName,a=e.roleId,o=e.roleList_1,i=e.roleList_2,l=(e.ipWhiteSelect,e.ipWhiteList,this.props.form),s=l.getFieldDecorator,u=l.getFieldValue,f=t?u("resetSelectId"):null,p=(this.props.developerInfo.id,[]),m=this.props.userData.userCategory;return p=1==m?o:i,c.a.createElement(je.a,it({},{labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:19},sm:{span:19}}},{onSubmit:this.affirm,className:"edit-basic-information"}),c.a.createElement("div",{className:"common_title_input"},c.a.createElement("span",{className:"common_title"},"用户名:"),c.a.createElement("div",{className:"common_content"},r)),c.a.createElement("div",{className:"common_title_input"},c.a.createElement("span",{className:"common_title"},"账户类型:"),c.a.createElement("div",{className:"common_content"},1==m?"控制台访问用户":2==m?"接口访问用户":"--")),c.a.createElement("div",{className:"common_title_input"},c.a.createElement(je.a.Item,{label:"用户角色",hasFeedback:!0},s("roleId",{rules:[{required:!0,message:"请选择用户角色"}],initialValue:a})(c.a.createElement(Ie.a,{style:{width:"180px"},placeholder:"请选择"},p.map((function(e,t){return c.a.createElement(mt,{key:t+"用户角色",value:e.roleId},e.roleName)})))))),1==m?c.a.createElement("div",{className:"common_title_input"},c.a.createElement(je.a.Item,{label:"重置密码："},s("resetChecked")(c.a.createElement(ot.a,{size:"small",checked:t,onClick:this.reset}))),t?c.a.createElement("div",{className:"reset-select"},c.a.createElement(je.a.Item,{label:" ",colon:!1},s("resetSelectId",{rules:[{required:!0,message:"请选择密码生成方式"}]})(c.a.createElement(Ie.a,{style:{width:"180px"},placeholder:"请选择密码生成方式",onChange:this.resetSelect},dt.map((function(e,t){return c.a.createElement(mt,{key:t+"登录密码",value:e.id},e.text)}))))),f?c.a.createElement(je.a.Item,{label:" ",colon:!1},s("password",{rules:[{required:!0,validator:this.passwordCheck,message:"密码格式为大小写字母加数字，长度为6-18"}]})(1==f?c.a.createElement(b.a,{style:{width:"240px"},disabled:!0}):c.a.createElement(b.a.Password,{style:{width:"240px"},placeholder:"密码格式为大小写字母加数字，长度为6-18"}))):null):null):null,null,c.a.createElement("div",{className:"common_title_input"},c.a.createElement(xe.a,{label:"备注",formId:"remark",astrictNub:"100",rows:"2",placeholder:"请输入备注",getFieldDecorator:s,initialVal:n,width:"300px",getFieldValue:u})),c.a.createElement("div",{className:"but"},c.a.createElement(d.a,{type:"primary",htmlType:"submit"},"确定"),c.a.createElement(d.a,{className:"cancel",onClick:this.props.onCancel},"取消")))}}])&&lt(t.prototype,n),r&&lt(t,r),o}(o.Component))||rt,ht=je.a.create({name:"editBasicInformation"})(yt),bt=n("fHMl"),vt=n("9BLJ");n("kmdx");function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(){return(Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kt(e);if(t){var a=kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return St(this,n)}}function St(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jt=te.a.TreeNode,Nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(o,e);var t,n,r,a=wt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getChildWithSecret=function(){var e=Object(D.h)("userId"),n=Object(D.h)("userCategory");Object(s.b)(s.a.getChildWithSecret,{userId:e,userCategory:n},{loading:!0}).then((function(e){t.setState({userInfo:e.data,loading:!1,secretKey:e.data.secretKey,secretId:e.data.secretId})}))},t.clickEye=function(e){t.setState({eye:!t.state.eye})},t.renderTreeNodes=function(e){return e.map((function(e){return e.children?c.a.createElement(jt,{title:e.title,key:e.key,dataRef:e},t.renderTreeNodes(e.children)):c.a.createElement(jt,Et({key:e.key},e))}))},t.handleOk=function(){t.editAffirm.affirm()},t.handleOkCancel=function(){t.editAffirm.setState({resetChecked:!1,resetSelectId:null,password:null,userName:"",remark:"",roleId:null,ipWhiteSelect:!1,ipWhiteList:""},(function(){t.getChildWithSecret(),t.getRights()})),t.setState({userEditVisible:!1}),console.log("---close"),t.editAffirm.props.form.resetFields()},t.handleCancel=function(e,n){t.setState({userEditVisible:!1}),console.log("---close"),t.editAffirm.props.form.resetFields(),console.log(t.editAffirm.props.form.getFieldsValue())},t.editUserInfo=function(){t.editAffirm&&t.editAffirm.backfill(t.state.userInfo),t.setState({userEditVisible:!0})},t.state={permissionsTabsKey:"1",userEditVisible:!1,userInfo:{},loading:!0,dataTable:[],secretKey:"",secretId:"",productResource:[],dataObjRightsList:[],dataDimensionRightsList:[],apiInvokList:[],projectAuthList:[],eye:!0},t.columns=[{title:"用户SecretId",dataIndex:"secretId",key:"secretId"},{title:"用户SecretKey",dataIndex:"secret",key:"secret",render:function(e){return c.a.createElement("a",null,t.state.eye?Object(D.m)(e,10):e,t.state.eye?c.a.createElement(bt.a,{className:"eyeLeft",onClick:t.clickEye}):c.a.createElement(vt.a,{className:"eyeLeft",onClick:t.clickEye}))}},{title:"创建时间",dataIndex:"time",key:"time"}],t}return t=o,(n=[{key:"getRights",value:function(){var e=this,t=Object(D.h)("userId"),n=Object(D.h)("userCategory");Object(s.b)(s.a.getRights,{userId:t,userCategory:n},{needVersion:1.2,loading:!0}).then((function(t){for(var n=[],r=[],a=[],o=[],c=[],i=t.data,l=0;l<i.length;l++){var s=i[l];"productService"==s.menuCode&&(n=s.checkBoxGroupList),"dataObject"==s.menuCode&&(r=s.checkBoxGroupList),"dataDimension"==s.menuCode&&(a=s.checkBoxGroupList),"apiInvok"==s.menuCode&&(o=s.checkBoxGroupList),"projectAuth"==s.menuCode&&(c=s.checkBoxGroupList)}e.setState({productResource:n,dataObjRightsList:r,dataDimensionRightsList:a,apiInvokList:o,projectAuthList:c})}))}},{key:"componentDidMount",value:function(){this.getChildWithSecret(),this.getRights()}},{key:"render",value:function(){var e=this,t=this.state,n=t.userInfo,r=t.secretKey,a=t.secretId,o=t.userEditVisible,i=t.productResource,l=t.dataObjRightsList,s=t.dataDimensionRightsList,u=t.apiInvokList,p=t.projectAuthList;return c.a.createElement("div",{className:"user-info-box"},c.a.createElement(f.a,{backHandle:function(){return e.props.history.goBack()},title:"用户详情"}),c.a.createElement(at,{editUserInfo:this.editUserInfo,userInfo:n,secretKey:r,secretId:a}),c.a.createElement(P.a,{defaultExpandAll:!0,userCategory:n.userCategory,productResource:i,dataObjRightsList:l,dataDimensionRightsList:s,apiInvokList:u,projectAuthList:p}),c.a.createElement(ve.a,{title:"编辑用户信息",visible:o,onOk:this.handleOk,onCancel:this.handleCancel,maskClosable:!1,className:"self-modal",footer:null},c.a.createElement(ht,{userData:n,onCancel:this.handleCancel,onRef:function(t){return e.editAffirm=t},handleClose:this.handleOkCancel})))}}])&&Ot(t.prototype,n),r&&Ot(t,r),o}(o.Component),xt=n("7U7l");function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tt(e);if(t){var a=Tt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Lt(this,n)}}function Lt(e,t){return!t||"object"!==Rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tt(e){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bt=[{title:"身份验证"},{title:"重置密码"},{title:"完成"}],Ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(o,e);var t,n,r,a=Dt(o);function o(){return Ct(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.developerInfo.email;return c.a.createElement(xt.a,{FlowList:Bt,cType:2,emailFromFather:e||"",isNeedVerifyType:!0,title:"重置密码"})}}])&&_t(t.prototype,n),r&&_t(t,r),o}(o.Component);function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kt(e);if(t){var a=Kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Jt(this,n)}}function Jt(e,t){return!t||"object"!==Mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zt=[{title:"身份验证"},{title:"设置电子邮箱"},{title:"完成"}],qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(o,e);var t,n,r,a=Wt(o);function o(){return Ut(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.developerInfo.email;return c.a.createElement(xt.a,{FlowList:Zt,cType:3,emailFromFather:e,isNeedVerifyType:!0,title:"修改电子邮箱"})}}])&&At(t.prototype,n),r&&At(t,r),o}(o.Component);function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xt(e);if(t){var a=Xt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Qt(this,n)}}function Qt(e,t){return!t||"object"!==Ht(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xt(e){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var en=[{title:"身份验证"},{title:"提交注销申请"},{title:"审核"}],tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(o,e);var t,n,r,a=Yt(o);function o(){return Gt(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.developerInfo.email;return c.a.createElement(xt.a,{FlowList:en,cType:5,emailFromFather:e||"",isNeedVerifyType:!0,title:"注销账号"})}}])&&zt(t.prototype,n),r&&zt(t,r),o}(o.Component),nn=n("g5u9"),rn=n("nyxj");function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fn(e);if(t){var a=fn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return un(this,n)}}function un(e,t){return!t||"object"!==an(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}(o,e);var t,n,r,a=sn(o);function o(){return on(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.history;return c.a.createElement(nn.a,{needHeader:!1,isInPage:!0},c.a.createElement("div",{className:"content-area"},c.a.createElement("div",{className:"title"},"重置登录密码"),c.a.createElement("div",{className:"desc default middle-fontsize"},"重置子账户登录密码，需要验证原登录账号"),c.a.createElement(rn.d,{history:e})))}}])&&cn(t.prototype,n),r&&cn(t,r),o}(o.Component),mn=n("InJP");function dn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hn(e){var t=e.developerInfo,n=e.history,r=e.getDeveloperInfo,a=e.isNotSub,i=t.userId,l=t.secretId,u=t.secretKey,p=t.regTime,m=t.email,d=t.status,y=dn(Object(o.useState)(!1),2),h=y[0],b=y[1],v=dn(Object(o.useState)(!1),2),g=v[0],E=v[1],O=function(e){n.push({pathname:"/userCenter/security/".concat(e)})};return c.a.createElement("div",{className:"page-usersafe-set"},c.a.createElement(f.a,{title:"安全设置"}),c.a.createElement("div",{className:"safe-setting comm-shadowbox"},c.a.createElement("div",{className:"setting-item flex-row"},c.a.createElement("div",{className:"left-desc flex1"},c.a.createElement("div",{className:"title"},"API访问秘钥"),c.a.createElement("div",{className:"desc-content"},c.a.createElement("div",{className:"p-flex"},c.a.createElement("span",{className:"flex-item"},c.a.createElement("span",{className:"tit"},"开发者ID："),i),c.a.createElement("span",{className:"flex-item"},c.a.createElement("span",{className:"tit"},"用户secretId："),h?l:Object(D.m)(l,10),c.a.createElement(mn.a,{visiable:h,clickBack:function(){b((function(e){return!e}))}})),c.a.createElement("span",{className:"flex-item"},c.a.createElement("span",{className:"tit"},"用户SecretKey："),g?u:Object(D.m)(u,10),c.a.createElement(mn.a,{visiable:g,clickBack:function(){E((function(e){return!e}))}})),c.a.createElement("span",{className:"flex-item"},c.a.createElement("span",{className:"tit"},"创建时间："),p?D.a.utcToDev(p):"--"))))),c.a.createElement("div",{className:"setting-item flex-row"},c.a.createElement("div",{className:"left-desc flex1"},c.a.createElement("div",{className:"title"},"登录密码"),c.a.createElement("div",{className:"desc-content"},"登录平台需验证密码。以字母开头的6到18位的字母，数字和下划线。建议您定期更换密码。")),c.a.createElement("div",{className:"setting-btn-wrapper"},c.a.createElement("div",{className:"btns"},c.a.createElement("span",{className:"btn-has"},"已设置"),c.a.createElement("span",{onClick:function(){return O(a?"resetPassword":"subResetPassword")},className:"btn-can-control"},"重置")))),a&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"setting-item flex-row"},c.a.createElement("div",{className:"left-desc flex1"},c.a.createElement("div",{className:"title"},"电子邮箱"),c.a.createElement("div",{className:"desc-content"},"电子邮箱地址可用于登录平台，也可以用于接收服务通知信息。")),c.a.createElement("div",{className:"setting-btn-wrapper"},c.a.createElement("div",{className:"btns"},c.a.createElement("span",{className:m?"btn-has":"btn-not-has"},m?"已设置":"未设置"),c.a.createElement("span",{onClick:function(){return O("updateEmail")},className:"btn-can-control"},"重置")))),c.a.createElement("div",{className:"setting-item flex-row"},c.a.createElement("div",{className:"left-desc flex1"},c.a.createElement("div",{className:"title"},"注销账户"),c.a.createElement("div",{className:"desc-content"},"如果您不再使用此账号，可以将其注销。账号成功注销后，所有的产品数据及隐私信息将会被永久删除且无法恢复。")),c.a.createElement("div",{className:"setting-btn-wrapper"},c.a.createElement("div",{className:"btns"},4==d?c.a.createElement("span",{onClick:function(){Object(s.b)(s.a.withdraw,{},{loading:!0}).then((function(e){r()})).catch((function(e){}))},className:"btn-can-control"},"撤销注销账户申请"):c.a.createElement("span",{onClick:function(){return O("closeAccount")},className:"btn-can-control"},"注销账户")))))))}n("0Zna");function bn(){return(bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var vn=n("MUf8"),gn=n("k+EZ"),En=n("ZmMk"),On=n("d8kt"),In=n("w1Zx");n("J2fM");function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Sn,kn=["menuname","path"];function jn(){return(jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Nn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cn(e,t){return(Cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dn(e);if(t){var a=Dn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pn(this,n)}}function Pn(e,t){return!t||"object"!==wn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dn(e){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ln={"基本资料":V,"安全设置":function(e){var t=e.developerInfo,n=e.getDeveloperInfo,r=e.isNotSub,a=e.match.path;return c.a.createElement(i.Switch,null,c.a.createElement(i.Route,{path:"".concat(a,"/setting"),render:function(e){return c.a.createElement(hn,bn({},e,{developerInfo:t,getDeveloperInfo:n,isNotSub:r}))}}),r?c.a.createElement(i.Route,{path:"".concat(a,"/resetPassword"),render:function(e){return c.a.createElement(Ft,bn({},e,{developerInfo:t}))}}):c.a.createElement(i.Route,{path:"".concat(a,"/subResetPassword"),render:function(e){return c.a.createElement(pn,bn({},e,{developerInfo:t}))}}),r&&c.a.createElement(i.Route,{path:"".concat(a,"/updateEmail"),render:function(e){return c.a.createElement(qt,bn({},e,{developerInfo:t}))}}),r&&c.a.createElement(i.Route,{path:"".concat(a,"/closeAccount"),render:function(e){return c.a.createElement(tn,bn({},e,{developerInfo:t}))}}),c.a.createElement(i.Redirect,{to:"".concat(a,"/setting")}))},"访问用户":function(e){var t=e.match.path;return c.a.createElement(i.Switch,null,c.a.createElement(i.Route,{path:"".concat(t,"/list"),component:ze}),c.a.createElement(i.Route,{path:"".concat(t,"/detail"),component:Nt}),c.a.createElement(i.Redirect,{to:"".concat(t,"/list")}))},"用户角色":function(e){var t=e.match.path;return c.a.createElement(i.Switch,null,c.a.createElement(i.Route,{path:"".concat(t,"/list"),component:X}),c.a.createElement(i.Route,{path:"".concat(t,"/edit"),component:be}),c.a.createElement(i.Redirect,{to:"".concat(t,"/list")}))}},Tn=Object(l.connect)((function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS(),newMessageNums:e.getIn(["message","newMessageNums"]).toJS()}}),(function(e){return{getNewMessageNums:function(){return e(Object(On.a)())},getDeveloperInfo:function(){return e(Object(u.c)())}}}))(Sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cn(e,t)}(l,e);var t,n,r,o=_n(l);function l(){return xn(this,l),o.apply(this,arguments)}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.newMessageNums,n=e.getNewMessageNums,r=e.getDeveloperInfo,o=e.developerInfo;a()(t)&&n(),a()(o)&&r()}},{key:"render",value:function(){var e=this.props,t=e.developerInfo,n=e.newMessageNums,r=e.getDeveloperInfo,a=!(1===t.isSubUser),o=In.e[0].childmenus;return a||(o=o.slice(0,2)),c.a.createElement(vn.a,null,c.a.createElement("div",{className:"page-header-wrapper"},c.a.createElement(gn.a,{developerInfo:t,newMessageNums:n})),c.a.createElement("div",{className:"page-content-wrapper"},c.a.createElement("div",{className:"left-menus"},c.a.createElement(En.a,{menulist:In.e})),c.a.createElement("section",{className:"right-wrapper"},c.a.createElement("div",{className:"right-wrapper-contentbox"},c.a.createElement(i.Switch,null,o.map((function(e,n){var o=e.menuname,l=e.path,s=Nn(e,kn),u=Ln[o];if(u)return c.a.createElement(i.Route,{key:n,path:l,render:function(e){return c.a.createElement(u,jn({developerInfo:t,getDeveloperInfo:r,isNotSub:a},e,s))}})})),o[0]&&c.a.createElement(i.Redirect,{to:o[0].path}))))))}}])&&Rn(t.prototype,n),r&&Rn(t,r),l}(o.Component))||Sn},ccuU:function(e,t,n){},ivPg:function(e,t,n){e.exports=n.p+"static/images/no-source-tip.681eb7825cf81b5da33967ff8571f3c6.png"},kmdx:function(e,t,n){},y1Sk:function(e,t,n){}}]);